{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { ActionViewItem, Separator } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { IMenuService, SubmenuItemAction } from '../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { ContextSubMenu } from '../../../base/browser/contextmenu.js';\n\nvar ContextMenuController =\n/** @class */\nfunction () {\n  function ContextMenuController(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService) {\n    var _this = this;\n\n    this._contextMenuService = _contextMenuService;\n    this._contextViewService = _contextViewService;\n    this._contextKeyService = _contextKeyService;\n    this._keybindingService = _keybindingService;\n    this._menuService = _menuService;\n    this._toDispose = new DisposableStore();\n    this._contextMenuIsBeingShownCount = 0;\n    this._editor = editor;\n\n    this._toDispose.add(this._editor.onContextMenu(function (e) {\n      return _this._onContextMenu(e);\n    }));\n\n    this._toDispose.add(this._editor.onMouseWheel(function (e) {\n      if (_this._contextMenuIsBeingShownCount > 0) {\n        _this._contextViewService.hideContextView();\n      }\n    }));\n\n    this._toDispose.add(this._editor.onKeyDown(function (e) {\n      if (e.keyCode === 58\n      /* ContextMenu */\n      ) {\n          // Chrome is funny like that\n          e.preventDefault();\n          e.stopPropagation();\n\n          _this.showContextMenu();\n        }\n    }));\n  }\n\n  ContextMenuController.get = function (editor) {\n    return editor.getContribution(ContextMenuController.ID);\n  };\n\n  ContextMenuController.prototype._onContextMenu = function (e) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    if (!this._editor.getOption(14\n    /* contextmenu */\n    )) {\n      this._editor.focus(); // Ensure the cursor is at the position of the mouse click\n\n\n      if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n        this._editor.setPosition(e.target.position);\n      }\n\n      return; // Context menu is turned off through configuration\n    }\n\n    if (e.target.type === 12\n    /* OVERLAY_WIDGET */\n    ) {\n        return; // allow native menu on widgets to support right click on input field for example in find\n      }\n\n    e.event.preventDefault();\n\n    if (e.target.type !== 6\n    /* CONTENT_TEXT */\n    && e.target.type !== 7\n    /* CONTENT_EMPTY */\n    && e.target.type !== 1\n    /* TEXTAREA */\n    ) {\n        return; // only support mouse click into text or native context menu key for now\n      } // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n\n\n    this._editor.focus(); // Ensure the cursor is at the position of the mouse click\n\n\n    if (e.target.position) {\n      var hasSelectionAtPosition = false;\n\n      for (var _i = 0, _a = this._editor.getSelections(); _i < _a.length; _i++) {\n        var selection = _a[_i];\n\n        if (selection.containsPosition(e.target.position)) {\n          hasSelectionAtPosition = true;\n          break;\n        }\n      }\n\n      if (!hasSelectionAtPosition) {\n        this._editor.setPosition(e.target.position);\n      }\n    } // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n\n\n    var anchor = null;\n\n    if (e.target.type !== 1\n    /* TEXTAREA */\n    ) {\n        anchor = {\n          x: e.event.posx - 1,\n          width: 2,\n          y: e.event.posy - 1,\n          height: 2\n        };\n      } // Show the context menu\n\n\n    this.showContextMenu(anchor);\n  };\n\n  ContextMenuController.prototype.showContextMenu = function (anchor) {\n    if (!this._editor.getOption(14\n    /* contextmenu */\n    )) {\n      return; // Context menu is turned off through configuration\n    }\n\n    if (!this._editor.hasModel()) {\n      return;\n    }\n\n    if (!this._contextMenuService) {\n      this._editor.focus();\n\n      return; // We need the context menu service to function\n    } // Find actions available for menu\n\n\n    var menuActions = this._getMenuActions(this._editor.getModel(), 7\n    /* EditorContext */\n    ); // Show menu if we have actions to show\n\n\n    if (menuActions.length > 0) {\n      this._doShowContextMenu(menuActions, anchor);\n    }\n  };\n\n  ContextMenuController.prototype._getMenuActions = function (model, menuId) {\n    var result = []; // get menu groups\n\n    var menu = this._menuService.createMenu(menuId, this._contextKeyService);\n\n    var groups = menu.getActions({\n      arg: model.uri\n    });\n    menu.dispose(); // translate them into other actions\n\n    for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\n      var group = groups_1[_i];\n      var actions = group[1];\n      var addedItems = 0;\n\n      for (var _a = 0, actions_1 = actions; _a < actions_1.length; _a++) {\n        var action = actions_1[_a];\n\n        if (action instanceof SubmenuItemAction) {\n          var subActions = this._getMenuActions(model, action.item.submenu);\n\n          if (subActions.length > 0) {\n            result.push(new ContextSubMenu(action.label, subActions));\n            addedItems++;\n          }\n        } else {\n          result.push(action);\n          addedItems++;\n        }\n      }\n\n      if (addedItems) {\n        result.push(new Separator());\n      }\n    }\n\n    if (result.length) {\n      result.pop(); // remove last separator\n    }\n\n    return result;\n  };\n\n  ContextMenuController.prototype._doShowContextMenu = function (actions, anchor) {\n    var _this = this;\n\n    if (anchor === void 0) {\n      anchor = null;\n    }\n\n    if (!this._editor.hasModel()) {\n      return;\n    } // Disable hover\n\n\n    var oldHoverSetting = this._editor.getOption(44\n    /* hover */\n    );\n\n    this._editor.updateOptions({\n      hover: {\n        enabled: false\n      }\n    });\n\n    if (!anchor) {\n      // Ensure selection is visible\n      this._editor.revealPosition(this._editor.getPosition(), 1\n      /* Immediate */\n      );\n\n      this._editor.render();\n\n      var cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition()); // Translate to absolute editor position\n\n\n      var editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n      var posx = editorCoords.left + cursorCoords.left;\n      var posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n      anchor = {\n        x: posx,\n        y: posy\n      };\n    } // Show menu\n\n\n    this._contextMenuIsBeingShownCount++;\n\n    this._contextMenuService.showContextMenu({\n      getAnchor: function () {\n        return anchor;\n      },\n      getActions: function () {\n        return actions;\n      },\n      getActionViewItem: function (action) {\n        var keybinding = _this._keybindingFor(action);\n\n        if (keybinding) {\n          return new ActionViewItem(action, action, {\n            label: true,\n            keybinding: keybinding.getLabel(),\n            isMenu: true\n          });\n        }\n\n        var customActionViewItem = action;\n\n        if (typeof customActionViewItem.getActionViewItem === 'function') {\n          return customActionViewItem.getActionViewItem();\n        }\n\n        return new ActionViewItem(action, action, {\n          icon: true,\n          label: true,\n          isMenu: true\n        });\n      },\n      getKeyBinding: function (action) {\n        return _this._keybindingFor(action);\n      },\n      onHide: function (wasCancelled) {\n        _this._contextMenuIsBeingShownCount--;\n\n        _this._editor.focus();\n\n        _this._editor.updateOptions({\n          hover: oldHoverSetting\n        });\n      }\n    });\n  };\n\n  ContextMenuController.prototype._keybindingFor = function (action) {\n    return this._keybindingService.lookupKeybinding(action.id);\n  };\n\n  ContextMenuController.prototype.dispose = function () {\n    if (this._contextMenuIsBeingShownCount > 0) {\n      this._contextViewService.hideContextView();\n    }\n\n    this._toDispose.dispose();\n  };\n\n  ContextMenuController.ID = 'editor.contrib.contextmenu';\n  ContextMenuController = __decorate([__param(1, IContextMenuService), __param(2, IContextViewService), __param(3, IContextKeyService), __param(4, IKeybindingService), __param(5, IMenuService)], ContextMenuController);\n  return ContextMenuController;\n}();\n\nexport { ContextMenuController };\n\nvar ShowContextMenu =\n/** @class */\nfunction (_super) {\n  __extends(ShowContextMenu, _super);\n\n  function ShowContextMenu() {\n    return _super.call(this, {\n      id: 'editor.action.showContextMenu',\n      label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n      alias: 'Show Editor Context Menu',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024\n        /* Shift */\n        | 68\n        /* F10 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  ShowContextMenu.prototype.run = function (accessor, editor) {\n    var contribution = ContextMenuController.get(editor);\n    contribution.showContextMenu();\n  };\n\n  return ShowContextMenu;\n}(EditorAction);\n\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController);\nregisterEditorAction(ShowContextMenu);","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/contextmenu.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","nls","dom","ActionViewItem","Separator","DisposableStore","EditorAction","registerEditorAction","registerEditorContribution","EditorContextKeys","IMenuService","SubmenuItemAction","IContextKeyService","IContextMenuService","IContextViewService","IKeybindingService","ContextSubMenu","ContextMenuController","editor","_contextMenuService","_contextViewService","_contextKeyService","_keybindingService","_menuService","_this","_toDispose","_contextMenuIsBeingShownCount","_editor","add","onContextMenu","e","_onContextMenu","onMouseWheel","hideContextView","onKeyDown","keyCode","preventDefault","stopPropagation","showContextMenu","get","getContribution","ID","hasModel","getOption","focus","position","getSelection","containsPosition","setPosition","type","event","hasSelectionAtPosition","_i","_a","getSelections","selection","anchor","x","posx","width","y","posy","height","menuActions","_getMenuActions","getModel","_doShowContextMenu","model","menuId","result","menu","createMenu","groups","getActions","arg","uri","dispose","groups_1","group","actions","addedItems","actions_1","action","subActions","item","submenu","push","label","pop","oldHoverSetting","updateOptions","hover","enabled","revealPosition","getPosition","render","cursorCoords","getScrolledVisiblePosition","editorCoords","getDomNodePagePosition","getDomNode","left","top","getAnchor","getActionViewItem","keybinding","_keybindingFor","getLabel","isMenu","customActionViewItem","icon","getKeyBinding","onHide","wasCancelled","lookupKeybinding","id","ShowContextMenu","_super","call","localize","alias","precondition","undefined","kbOpts","kbExpr","textInputFocus","primary","weight","run","accessor","contribution"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { ActionViewItem, Separator } from '../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { IMenuService, SubmenuItemAction } from '../../../platform/actions/common/actions.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { ContextSubMenu } from '../../../base/browser/contextmenu.js';\r\nvar ContextMenuController = /** @class */ (function () {\r\n    function ContextMenuController(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService) {\r\n        var _this = this;\r\n        this._contextMenuService = _contextMenuService;\r\n        this._contextViewService = _contextViewService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._keybindingService = _keybindingService;\r\n        this._menuService = _menuService;\r\n        this._toDispose = new DisposableStore();\r\n        this._contextMenuIsBeingShownCount = 0;\r\n        this._editor = editor;\r\n        this._toDispose.add(this._editor.onContextMenu(function (e) { return _this._onContextMenu(e); }));\r\n        this._toDispose.add(this._editor.onMouseWheel(function (e) {\r\n            if (_this._contextMenuIsBeingShownCount > 0) {\r\n                _this._contextViewService.hideContextView();\r\n            }\r\n        }));\r\n        this._toDispose.add(this._editor.onKeyDown(function (e) {\r\n            if (e.keyCode === 58 /* ContextMenu */) {\r\n                // Chrome is funny like that\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                _this.showContextMenu();\r\n            }\r\n        }));\r\n    }\r\n    ContextMenuController.get = function (editor) {\r\n        return editor.getContribution(ContextMenuController.ID);\r\n    };\r\n    ContextMenuController.prototype._onContextMenu = function (e) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        if (!this._editor.getOption(14 /* contextmenu */)) {\r\n            this._editor.focus();\r\n            // Ensure the cursor is at the position of the mouse click\r\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\r\n                this._editor.setPosition(e.target.position);\r\n            }\r\n            return; // Context menu is turned off through configuration\r\n        }\r\n        if (e.target.type === 12 /* OVERLAY_WIDGET */) {\r\n            return; // allow native menu on widgets to support right click on input field for example in find\r\n        }\r\n        e.event.preventDefault();\r\n        if (e.target.type !== 6 /* CONTENT_TEXT */ && e.target.type !== 7 /* CONTENT_EMPTY */ && e.target.type !== 1 /* TEXTAREA */) {\r\n            return; // only support mouse click into text or native context menu key for now\r\n        }\r\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\r\n        this._editor.focus();\r\n        // Ensure the cursor is at the position of the mouse click\r\n        if (e.target.position) {\r\n            var hasSelectionAtPosition = false;\r\n            for (var _i = 0, _a = this._editor.getSelections(); _i < _a.length; _i++) {\r\n                var selection = _a[_i];\r\n                if (selection.containsPosition(e.target.position)) {\r\n                    hasSelectionAtPosition = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!hasSelectionAtPosition) {\r\n                this._editor.setPosition(e.target.position);\r\n            }\r\n        }\r\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\r\n        var anchor = null;\r\n        if (e.target.type !== 1 /* TEXTAREA */) {\r\n            anchor = { x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 };\r\n        }\r\n        // Show the context menu\r\n        this.showContextMenu(anchor);\r\n    };\r\n    ContextMenuController.prototype.showContextMenu = function (anchor) {\r\n        if (!this._editor.getOption(14 /* contextmenu */)) {\r\n            return; // Context menu is turned off through configuration\r\n        }\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        if (!this._contextMenuService) {\r\n            this._editor.focus();\r\n            return; // We need the context menu service to function\r\n        }\r\n        // Find actions available for menu\r\n        var menuActions = this._getMenuActions(this._editor.getModel(), 7 /* EditorContext */);\r\n        // Show menu if we have actions to show\r\n        if (menuActions.length > 0) {\r\n            this._doShowContextMenu(menuActions, anchor);\r\n        }\r\n    };\r\n    ContextMenuController.prototype._getMenuActions = function (model, menuId) {\r\n        var result = [];\r\n        // get menu groups\r\n        var menu = this._menuService.createMenu(menuId, this._contextKeyService);\r\n        var groups = menu.getActions({ arg: model.uri });\r\n        menu.dispose();\r\n        // translate them into other actions\r\n        for (var _i = 0, groups_1 = groups; _i < groups_1.length; _i++) {\r\n            var group = groups_1[_i];\r\n            var actions = group[1];\r\n            var addedItems = 0;\r\n            for (var _a = 0, actions_1 = actions; _a < actions_1.length; _a++) {\r\n                var action = actions_1[_a];\r\n                if (action instanceof SubmenuItemAction) {\r\n                    var subActions = this._getMenuActions(model, action.item.submenu);\r\n                    if (subActions.length > 0) {\r\n                        result.push(new ContextSubMenu(action.label, subActions));\r\n                        addedItems++;\r\n                    }\r\n                }\r\n                else {\r\n                    result.push(action);\r\n                    addedItems++;\r\n                }\r\n            }\r\n            if (addedItems) {\r\n                result.push(new Separator());\r\n            }\r\n        }\r\n        if (result.length) {\r\n            result.pop(); // remove last separator\r\n        }\r\n        return result;\r\n    };\r\n    ContextMenuController.prototype._doShowContextMenu = function (actions, anchor) {\r\n        var _this = this;\r\n        if (anchor === void 0) { anchor = null; }\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        // Disable hover\r\n        var oldHoverSetting = this._editor.getOption(44 /* hover */);\r\n        this._editor.updateOptions({\r\n            hover: {\r\n                enabled: false\r\n            }\r\n        });\r\n        if (!anchor) {\r\n            // Ensure selection is visible\r\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* Immediate */);\r\n            this._editor.render();\r\n            var cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\r\n            // Translate to absolute editor position\r\n            var editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\r\n            var posx = editorCoords.left + cursorCoords.left;\r\n            var posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\r\n            anchor = { x: posx, y: posy };\r\n        }\r\n        // Show menu\r\n        this._contextMenuIsBeingShownCount++;\r\n        this._contextMenuService.showContextMenu({\r\n            getAnchor: function () { return anchor; },\r\n            getActions: function () { return actions; },\r\n            getActionViewItem: function (action) {\r\n                var keybinding = _this._keybindingFor(action);\r\n                if (keybinding) {\r\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\r\n                }\r\n                var customActionViewItem = action;\r\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\r\n                    return customActionViewItem.getActionViewItem();\r\n                }\r\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\r\n            },\r\n            getKeyBinding: function (action) {\r\n                return _this._keybindingFor(action);\r\n            },\r\n            onHide: function (wasCancelled) {\r\n                _this._contextMenuIsBeingShownCount--;\r\n                _this._editor.focus();\r\n                _this._editor.updateOptions({\r\n                    hover: oldHoverSetting\r\n                });\r\n            }\r\n        });\r\n    };\r\n    ContextMenuController.prototype._keybindingFor = function (action) {\r\n        return this._keybindingService.lookupKeybinding(action.id);\r\n    };\r\n    ContextMenuController.prototype.dispose = function () {\r\n        if (this._contextMenuIsBeingShownCount > 0) {\r\n            this._contextViewService.hideContextView();\r\n        }\r\n        this._toDispose.dispose();\r\n    };\r\n    ContextMenuController.ID = 'editor.contrib.contextmenu';\r\n    ContextMenuController = __decorate([\r\n        __param(1, IContextMenuService),\r\n        __param(2, IContextViewService),\r\n        __param(3, IContextKeyService),\r\n        __param(4, IKeybindingService),\r\n        __param(5, IMenuService)\r\n    ], ContextMenuController);\r\n    return ContextMenuController;\r\n}());\r\nexport { ContextMenuController };\r\nvar ShowContextMenu = /** @class */ (function (_super) {\r\n    __extends(ShowContextMenu, _super);\r\n    function ShowContextMenu() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.showContextMenu',\r\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\r\n            alias: 'Show Editor Context Menu',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 1024 /* Shift */ | 68 /* F10 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    ShowContextMenu.prototype.run = function (accessor, editor) {\r\n        var contribution = ContextMenuController.get(editor);\r\n        contribution.showContextMenu();\r\n    };\r\n    return ShowContextMenu;\r\n}(EditorAction));\r\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController);\r\nregisterEditorAction(ShowContextMenu);\r\n"]},"metadata":{},"sourceType":"module"}