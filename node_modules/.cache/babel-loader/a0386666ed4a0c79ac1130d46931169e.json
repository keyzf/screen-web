{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './media/scrollbars.css';\nimport { isEdgeOrIE } from '../../browser.js';\nimport * as dom from '../../dom.js';\nimport { createFastDomNode } from '../../fastDomNode.js';\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { HorizontalScrollbar } from './horizontalScrollbar.js';\nimport { VerticalScrollbar } from './verticalScrollbar.js';\nimport { Widget } from '../widget.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Emitter } from '../../../common/event.js';\nimport { dispose } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nvar HIDE_TIMEOUT = 500;\nvar SCROLL_WHEEL_SENSITIVITY = 50;\nvar SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED = true;\n\nvar MouseWheelClassifierItem =\n/** @class */\nfunction () {\n  function MouseWheelClassifierItem(timestamp, deltaX, deltaY) {\n    this.timestamp = timestamp;\n    this.deltaX = deltaX;\n    this.deltaY = deltaY;\n    this.score = 0;\n  }\n\n  return MouseWheelClassifierItem;\n}();\n\nvar MouseWheelClassifier =\n/** @class */\nfunction () {\n  function MouseWheelClassifier() {\n    this._capacity = 5;\n    this._memory = [];\n    this._front = -1;\n    this._rear = -1;\n  }\n\n  MouseWheelClassifier.prototype.isPhysicalMouseWheel = function () {\n    if (this._front === -1 && this._rear === -1) {\n      // no elements\n      return false;\n    } // 0.5 * last + 0.25 * 2nd last + 0.125 * 3rd last + ...\n\n\n    var remainingInfluence = 1;\n    var score = 0;\n    var iteration = 1;\n    var index = this._rear;\n\n    do {\n      var influence = index === this._front ? remainingInfluence : Math.pow(2, -iteration);\n      remainingInfluence -= influence;\n      score += this._memory[index].score * influence;\n\n      if (index === this._front) {\n        break;\n      }\n\n      index = (this._capacity + index - 1) % this._capacity;\n      iteration++;\n    } while (true);\n\n    return score <= 0.5;\n  };\n\n  MouseWheelClassifier.prototype.accept = function (timestamp, deltaX, deltaY) {\n    var item = new MouseWheelClassifierItem(timestamp, deltaX, deltaY);\n    item.score = this._computeScore(item);\n\n    if (this._front === -1 && this._rear === -1) {\n      this._memory[0] = item;\n      this._front = 0;\n      this._rear = 0;\n    } else {\n      this._rear = (this._rear + 1) % this._capacity;\n\n      if (this._rear === this._front) {\n        // Drop oldest\n        this._front = (this._front + 1) % this._capacity;\n      }\n\n      this._memory[this._rear] = item;\n    }\n  };\n  /**\r\n   * A score between 0 and 1 for `item`.\r\n   *  - a score towards 0 indicates that the source appears to be a physical mouse wheel\r\n   *  - a score towards 1 indicates that the source appears to be a touchpad or magic mouse, etc.\r\n   */\n\n\n  MouseWheelClassifier.prototype._computeScore = function (item) {\n    if (Math.abs(item.deltaX) > 0 && Math.abs(item.deltaY) > 0) {\n      // both axes exercised => definitely not a physical mouse wheel\n      return 1;\n    }\n\n    var score = 0.5;\n    var prev = this._front === -1 && this._rear === -1 ? null : this._memory[this._rear];\n\n    if (prev) {// const deltaT = item.timestamp - prev.timestamp;\n      // if (deltaT < 1000 / 30) {\n      // \t// sooner than X times per second => indicator that this is not a physical mouse wheel\n      // \tscore += 0.25;\n      // }\n      // if (item.deltaX === prev.deltaX && item.deltaY === prev.deltaY) {\n      // \t// equal amplitude => indicator that this is a physical mouse wheel\n      // \tscore -= 0.25;\n      // }\n    }\n\n    if (Math.abs(item.deltaX - Math.round(item.deltaX)) > 0 || Math.abs(item.deltaY - Math.round(item.deltaY)) > 0) {\n      // non-integer deltas => indicator that this is not a physical mouse wheel\n      score += 0.25;\n    }\n\n    return Math.min(Math.max(score, 0), 1);\n  };\n\n  MouseWheelClassifier.INSTANCE = new MouseWheelClassifier();\n  return MouseWheelClassifier;\n}();\n\nexport { MouseWheelClassifier };\n\nvar AbstractScrollableElement =\n/** @class */\nfunction (_super) {\n  __extends(AbstractScrollableElement, _super);\n\n  function AbstractScrollableElement(element, options, scrollable) {\n    var _this = _super.call(this) || this;\n\n    _this._onScroll = _this._register(new Emitter());\n    _this.onScroll = _this._onScroll.event;\n    element.style.overflow = 'hidden';\n    _this._options = resolveOptions(options);\n    _this._scrollable = scrollable;\n\n    _this._register(_this._scrollable.onScroll(function (e) {\n      _this._onDidScroll(e);\n\n      _this._onScroll.fire(e);\n    }));\n\n    var scrollbarHost = {\n      onMouseWheel: function (mouseWheelEvent) {\n        return _this._onMouseWheel(mouseWheelEvent);\n      },\n      onDragStart: function () {\n        return _this._onDragStart();\n      },\n      onDragEnd: function () {\n        return _this._onDragEnd();\n      }\n    };\n    _this._verticalScrollbar = _this._register(new VerticalScrollbar(_this._scrollable, _this._options, scrollbarHost));\n    _this._horizontalScrollbar = _this._register(new HorizontalScrollbar(_this._scrollable, _this._options, scrollbarHost));\n    _this._domNode = document.createElement('div');\n    _this._domNode.className = 'monaco-scrollable-element ' + _this._options.className;\n\n    _this._domNode.setAttribute('role', 'presentation');\n\n    _this._domNode.style.position = 'relative';\n    _this._domNode.style.overflow = 'hidden';\n\n    _this._domNode.appendChild(element);\n\n    _this._domNode.appendChild(_this._horizontalScrollbar.domNode.domNode);\n\n    _this._domNode.appendChild(_this._verticalScrollbar.domNode.domNode);\n\n    if (_this._options.useShadows) {\n      _this._leftShadowDomNode = createFastDomNode(document.createElement('div'));\n\n      _this._leftShadowDomNode.setClassName('shadow');\n\n      _this._domNode.appendChild(_this._leftShadowDomNode.domNode);\n\n      _this._topShadowDomNode = createFastDomNode(document.createElement('div'));\n\n      _this._topShadowDomNode.setClassName('shadow');\n\n      _this._domNode.appendChild(_this._topShadowDomNode.domNode);\n\n      _this._topLeftShadowDomNode = createFastDomNode(document.createElement('div'));\n\n      _this._topLeftShadowDomNode.setClassName('shadow top-left-corner');\n\n      _this._domNode.appendChild(_this._topLeftShadowDomNode.domNode);\n    } else {\n      _this._leftShadowDomNode = null;\n      _this._topShadowDomNode = null;\n      _this._topLeftShadowDomNode = null;\n    }\n\n    _this._listenOnDomNode = _this._options.listenOnDomNode || _this._domNode;\n    _this._mouseWheelToDispose = [];\n\n    _this._setListeningToMouseWheel(_this._options.handleMouseWheel);\n\n    _this.onmouseover(_this._listenOnDomNode, function (e) {\n      return _this._onMouseOver(e);\n    });\n\n    _this.onnonbubblingmouseout(_this._listenOnDomNode, function (e) {\n      return _this._onMouseOut(e);\n    });\n\n    _this._hideTimeout = _this._register(new TimeoutTimer());\n    _this._isDragging = false;\n    _this._mouseIsOver = false;\n    _this._shouldRender = true;\n    _this._revealOnScroll = true;\n    return _this;\n  }\n\n  AbstractScrollableElement.prototype.dispose = function () {\n    this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n\n    _super.prototype.dispose.call(this);\n  };\n  /**\r\n   * Get the generated 'scrollable' dom node\r\n   */\n\n\n  AbstractScrollableElement.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n\n  AbstractScrollableElement.prototype.getOverviewRulerLayoutInfo = function () {\n    return {\n      parent: this._domNode,\n      insertBefore: this._verticalScrollbar.domNode.domNode\n    };\n  };\n  /**\r\n   * Delegate a mouse down event to the vertical scrollbar.\r\n   * This is to help with clicking somewhere else and having the scrollbar react.\r\n   */\n\n\n  AbstractScrollableElement.prototype.delegateVerticalScrollbarMouseDown = function (browserEvent) {\n    this._verticalScrollbar.delegateMouseDown(browserEvent);\n  };\n\n  AbstractScrollableElement.prototype.getScrollDimensions = function () {\n    return this._scrollable.getScrollDimensions();\n  };\n\n  AbstractScrollableElement.prototype.setScrollDimensions = function (dimensions) {\n    this._scrollable.setScrollDimensions(dimensions);\n  };\n  /**\r\n   * Update the class name of the scrollable element.\r\n   */\n\n\n  AbstractScrollableElement.prototype.updateClassName = function (newClassName) {\n    this._options.className = newClassName; // Defaults are different on Macs\n\n    if (platform.isMacintosh) {\n      this._options.className += ' mac';\n    }\n\n    this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n  };\n  /**\r\n   * Update configuration options for the scrollbar.\r\n   * Really this is Editor.IEditorScrollbarOptions, but base shouldn't\r\n   * depend on Editor.\r\n   */\n\n\n  AbstractScrollableElement.prototype.updateOptions = function (newOptions) {\n    var massagedOptions = resolveOptions(newOptions);\n    this._options.handleMouseWheel = massagedOptions.handleMouseWheel;\n    this._options.mouseWheelScrollSensitivity = massagedOptions.mouseWheelScrollSensitivity;\n    this._options.fastScrollSensitivity = massagedOptions.fastScrollSensitivity;\n\n    this._setListeningToMouseWheel(this._options.handleMouseWheel);\n\n    if (!this._options.lazyRender) {\n      this._render();\n    }\n  }; // -------------------- mouse wheel scrolling --------------------\n\n\n  AbstractScrollableElement.prototype._setListeningToMouseWheel = function (shouldListen) {\n    var _this = this;\n\n    var isListening = this._mouseWheelToDispose.length > 0;\n\n    if (isListening === shouldListen) {\n      // No change\n      return;\n    } // Stop listening (if necessary)\n\n\n    this._mouseWheelToDispose = dispose(this._mouseWheelToDispose); // Start listening (if necessary)\n\n    if (shouldListen) {\n      var onMouseWheel = function (browserEvent) {\n        _this._onMouseWheel(new StandardWheelEvent(browserEvent));\n      };\n\n      this._mouseWheelToDispose.push(dom.addDisposableListener(this._listenOnDomNode, isEdgeOrIE ? 'mousewheel' : 'wheel', onMouseWheel, {\n        passive: false\n      }));\n    }\n  };\n\n  AbstractScrollableElement.prototype._onMouseWheel = function (e) {\n    var _a;\n\n    var classifier = MouseWheelClassifier.INSTANCE;\n\n    if (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED) {\n      classifier.accept(Date.now(), e.deltaX, e.deltaY);\n    } // console.log(`${Date.now()}, ${e.deltaY}, ${e.deltaX}`);\n\n\n    if (e.deltaY || e.deltaX) {\n      var deltaY = e.deltaY * this._options.mouseWheelScrollSensitivity;\n      var deltaX = e.deltaX * this._options.mouseWheelScrollSensitivity;\n\n      if (this._options.flipAxes) {\n        _a = [deltaX, deltaY], deltaY = _a[0], deltaX = _a[1];\n      } // Convert vertical scrolling to horizontal if shift is held, this\n      // is handled at a higher level on Mac\n\n\n      var shiftConvert = !platform.isMacintosh && e.browserEvent && e.browserEvent.shiftKey;\n\n      if ((this._options.scrollYToX || shiftConvert) && !deltaX) {\n        deltaX = deltaY;\n        deltaY = 0;\n      }\n\n      if (e.browserEvent && e.browserEvent.altKey) {\n        // fastScrolling\n        deltaX = deltaX * this._options.fastScrollSensitivity;\n        deltaY = deltaY * this._options.fastScrollSensitivity;\n      }\n\n      var futureScrollPosition = this._scrollable.getFutureScrollPosition();\n\n      var desiredScrollPosition = {};\n\n      if (deltaY) {\n        var desiredScrollTop = futureScrollPosition.scrollTop - SCROLL_WHEEL_SENSITIVITY * deltaY;\n\n        this._verticalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollTop);\n      }\n\n      if (deltaX) {\n        var desiredScrollLeft = futureScrollPosition.scrollLeft - SCROLL_WHEEL_SENSITIVITY * deltaX;\n\n        this._horizontalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollLeft);\n      } // Check that we are scrolling towards a location which is valid\n\n\n      desiredScrollPosition = this._scrollable.validateScrollPosition(desiredScrollPosition);\n\n      if (futureScrollPosition.scrollLeft !== desiredScrollPosition.scrollLeft || futureScrollPosition.scrollTop !== desiredScrollPosition.scrollTop) {\n        var canPerformSmoothScroll = SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED && this._options.mouseWheelSmoothScroll && classifier.isPhysicalMouseWheel();\n\n        if (canPerformSmoothScroll) {\n          this._scrollable.setScrollPositionSmooth(desiredScrollPosition);\n        } else {\n          this._scrollable.setScrollPositionNow(desiredScrollPosition);\n        }\n\n        this._shouldRender = true;\n      }\n    }\n\n    if (this._options.alwaysConsumeMouseWheel || this._shouldRender) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  AbstractScrollableElement.prototype._onDidScroll = function (e) {\n    this._shouldRender = this._horizontalScrollbar.onDidScroll(e) || this._shouldRender;\n    this._shouldRender = this._verticalScrollbar.onDidScroll(e) || this._shouldRender;\n\n    if (this._options.useShadows) {\n      this._shouldRender = true;\n    }\n\n    if (this._revealOnScroll) {\n      this._reveal();\n    }\n\n    if (!this._options.lazyRender) {\n      this._render();\n    }\n  };\n  /**\r\n   * Render / mutate the DOM now.\r\n   * Should be used together with the ctor option `lazyRender`.\r\n   */\n\n\n  AbstractScrollableElement.prototype.renderNow = function () {\n    if (!this._options.lazyRender) {\n      throw new Error('Please use `lazyRender` together with `renderNow`!');\n    }\n\n    this._render();\n  };\n\n  AbstractScrollableElement.prototype._render = function () {\n    if (!this._shouldRender) {\n      return;\n    }\n\n    this._shouldRender = false;\n\n    this._horizontalScrollbar.render();\n\n    this._verticalScrollbar.render();\n\n    if (this._options.useShadows) {\n      var scrollState = this._scrollable.getCurrentScrollPosition();\n\n      var enableTop = scrollState.scrollTop > 0;\n      var enableLeft = scrollState.scrollLeft > 0;\n\n      this._leftShadowDomNode.setClassName('shadow' + (enableLeft ? ' left' : ''));\n\n      this._topShadowDomNode.setClassName('shadow' + (enableTop ? ' top' : ''));\n\n      this._topLeftShadowDomNode.setClassName('shadow top-left-corner' + (enableTop ? ' top' : '') + (enableLeft ? ' left' : ''));\n    }\n  }; // -------------------- fade in / fade out --------------------\n\n\n  AbstractScrollableElement.prototype._onDragStart = function () {\n    this._isDragging = true;\n\n    this._reveal();\n  };\n\n  AbstractScrollableElement.prototype._onDragEnd = function () {\n    this._isDragging = false;\n\n    this._hide();\n  };\n\n  AbstractScrollableElement.prototype._onMouseOut = function (e) {\n    this._mouseIsOver = false;\n\n    this._hide();\n  };\n\n  AbstractScrollableElement.prototype._onMouseOver = function (e) {\n    this._mouseIsOver = true;\n\n    this._reveal();\n  };\n\n  AbstractScrollableElement.prototype._reveal = function () {\n    this._verticalScrollbar.beginReveal();\n\n    this._horizontalScrollbar.beginReveal();\n\n    this._scheduleHide();\n  };\n\n  AbstractScrollableElement.prototype._hide = function () {\n    if (!this._mouseIsOver && !this._isDragging) {\n      this._verticalScrollbar.beginHide();\n\n      this._horizontalScrollbar.beginHide();\n    }\n  };\n\n  AbstractScrollableElement.prototype._scheduleHide = function () {\n    var _this = this;\n\n    if (!this._mouseIsOver && !this._isDragging) {\n      this._hideTimeout.cancelAndSet(function () {\n        return _this._hide();\n      }, HIDE_TIMEOUT);\n    }\n  };\n\n  return AbstractScrollableElement;\n}(Widget);\n\nexport { AbstractScrollableElement };\n\nvar ScrollableElement =\n/** @class */\nfunction (_super) {\n  __extends(ScrollableElement, _super);\n\n  function ScrollableElement(element, options) {\n    var _this = this;\n\n    options = options || {};\n    options.mouseWheelSmoothScroll = false;\n    var scrollable = new Scrollable(0, function (callback) {\n      return dom.scheduleAtNextAnimationFrame(callback);\n    });\n    _this = _super.call(this, element, options, scrollable) || this;\n\n    _this._register(scrollable);\n\n    return _this;\n  }\n\n  ScrollableElement.prototype.setScrollPosition = function (update) {\n    this._scrollable.setScrollPositionNow(update);\n  };\n\n  ScrollableElement.prototype.getScrollPosition = function () {\n    return this._scrollable.getCurrentScrollPosition();\n  };\n\n  return ScrollableElement;\n}(AbstractScrollableElement);\n\nexport { ScrollableElement };\n\nvar SmoothScrollableElement =\n/** @class */\nfunction (_super) {\n  __extends(SmoothScrollableElement, _super);\n\n  function SmoothScrollableElement(element, options, scrollable) {\n    return _super.call(this, element, options, scrollable) || this;\n  }\n\n  return SmoothScrollableElement;\n}(AbstractScrollableElement);\n\nexport { SmoothScrollableElement };\n\nvar DomScrollableElement =\n/** @class */\nfunction (_super) {\n  __extends(DomScrollableElement, _super);\n\n  function DomScrollableElement(element, options) {\n    var _this = _super.call(this, element, options) || this;\n\n    _this._element = element;\n\n    _this.onScroll(function (e) {\n      if (e.scrollTopChanged) {\n        _this._element.scrollTop = e.scrollTop;\n      }\n\n      if (e.scrollLeftChanged) {\n        _this._element.scrollLeft = e.scrollLeft;\n      }\n    });\n\n    _this.scanDomNode();\n\n    return _this;\n  }\n\n  DomScrollableElement.prototype.scanDomNode = function () {\n    // width, scrollLeft, scrollWidth, height, scrollTop, scrollHeight\n    this.setScrollDimensions({\n      width: this._element.clientWidth,\n      scrollWidth: this._element.scrollWidth,\n      height: this._element.clientHeight,\n      scrollHeight: this._element.scrollHeight\n    });\n    this.setScrollPosition({\n      scrollLeft: this._element.scrollLeft,\n      scrollTop: this._element.scrollTop\n    });\n  };\n\n  return DomScrollableElement;\n}(ScrollableElement);\n\nexport { DomScrollableElement };\n\nfunction resolveOptions(opts) {\n  var result = {\n    lazyRender: typeof opts.lazyRender !== 'undefined' ? opts.lazyRender : false,\n    className: typeof opts.className !== 'undefined' ? opts.className : '',\n    useShadows: typeof opts.useShadows !== 'undefined' ? opts.useShadows : true,\n    handleMouseWheel: typeof opts.handleMouseWheel !== 'undefined' ? opts.handleMouseWheel : true,\n    flipAxes: typeof opts.flipAxes !== 'undefined' ? opts.flipAxes : false,\n    alwaysConsumeMouseWheel: typeof opts.alwaysConsumeMouseWheel !== 'undefined' ? opts.alwaysConsumeMouseWheel : false,\n    scrollYToX: typeof opts.scrollYToX !== 'undefined' ? opts.scrollYToX : false,\n    mouseWheelScrollSensitivity: typeof opts.mouseWheelScrollSensitivity !== 'undefined' ? opts.mouseWheelScrollSensitivity : 1,\n    fastScrollSensitivity: typeof opts.fastScrollSensitivity !== 'undefined' ? opts.fastScrollSensitivity : 5,\n    mouseWheelSmoothScroll: typeof opts.mouseWheelSmoothScroll !== 'undefined' ? opts.mouseWheelSmoothScroll : true,\n    arrowSize: typeof opts.arrowSize !== 'undefined' ? opts.arrowSize : 11,\n    listenOnDomNode: typeof opts.listenOnDomNode !== 'undefined' ? opts.listenOnDomNode : null,\n    horizontal: typeof opts.horizontal !== 'undefined' ? opts.horizontal : 1\n    /* Auto */\n    ,\n    horizontalScrollbarSize: typeof opts.horizontalScrollbarSize !== 'undefined' ? opts.horizontalScrollbarSize : 10,\n    horizontalSliderSize: typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : 0,\n    horizontalHasArrows: typeof opts.horizontalHasArrows !== 'undefined' ? opts.horizontalHasArrows : false,\n    vertical: typeof opts.vertical !== 'undefined' ? opts.vertical : 1\n    /* Auto */\n    ,\n    verticalScrollbarSize: typeof opts.verticalScrollbarSize !== 'undefined' ? opts.verticalScrollbarSize : 10,\n    verticalHasArrows: typeof opts.verticalHasArrows !== 'undefined' ? opts.verticalHasArrows : false,\n    verticalSliderSize: typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : 0\n  };\n  result.horizontalSliderSize = typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : result.horizontalScrollbarSize;\n  result.verticalSliderSize = typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : result.verticalScrollbarSize; // Defaults are different on Macs\n\n  if (platform.isMacintosh) {\n    result.className += ' mac';\n  }\n\n  return result;\n}","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollableElement.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","isEdgeOrIE","dom","createFastDomNode","StandardWheelEvent","HorizontalScrollbar","VerticalScrollbar","Widget","TimeoutTimer","Emitter","dispose","platform","Scrollable","HIDE_TIMEOUT","SCROLL_WHEEL_SENSITIVITY","SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED","MouseWheelClassifierItem","timestamp","deltaX","deltaY","score","MouseWheelClassifier","_capacity","_memory","_front","_rear","isPhysicalMouseWheel","remainingInfluence","iteration","index","influence","Math","pow","accept","item","_computeScore","abs","prev","round","min","max","INSTANCE","AbstractScrollableElement","_super","element","options","scrollable","_this","call","_onScroll","_register","onScroll","event","style","overflow","_options","resolveOptions","_scrollable","e","_onDidScroll","fire","scrollbarHost","onMouseWheel","mouseWheelEvent","_onMouseWheel","onDragStart","_onDragStart","onDragEnd","_onDragEnd","_verticalScrollbar","_horizontalScrollbar","_domNode","document","createElement","className","setAttribute","position","appendChild","domNode","useShadows","_leftShadowDomNode","setClassName","_topShadowDomNode","_topLeftShadowDomNode","_listenOnDomNode","listenOnDomNode","_mouseWheelToDispose","_setListeningToMouseWheel","handleMouseWheel","onmouseover","_onMouseOver","onnonbubblingmouseout","_onMouseOut","_hideTimeout","_isDragging","_mouseIsOver","_shouldRender","_revealOnScroll","getDomNode","getOverviewRulerLayoutInfo","parent","insertBefore","delegateVerticalScrollbarMouseDown","browserEvent","delegateMouseDown","getScrollDimensions","setScrollDimensions","dimensions","updateClassName","newClassName","isMacintosh","updateOptions","newOptions","massagedOptions","mouseWheelScrollSensitivity","fastScrollSensitivity","lazyRender","_render","shouldListen","isListening","length","push","addDisposableListener","passive","_a","classifier","Date","now","flipAxes","shiftConvert","shiftKey","scrollYToX","altKey","futureScrollPosition","getFutureScrollPosition","desiredScrollPosition","desiredScrollTop","scrollTop","writeScrollPosition","desiredScrollLeft","scrollLeft","validateScrollPosition","canPerformSmoothScroll","mouseWheelSmoothScroll","setScrollPositionSmooth","setScrollPositionNow","alwaysConsumeMouseWheel","preventDefault","stopPropagation","onDidScroll","_reveal","renderNow","Error","render","scrollState","getCurrentScrollPosition","enableTop","enableLeft","_hide","beginReveal","_scheduleHide","beginHide","cancelAndSet","ScrollableElement","callback","scheduleAtNextAnimationFrame","setScrollPosition","update","getScrollPosition","SmoothScrollableElement","DomScrollableElement","_element","scrollTopChanged","scrollLeftChanged","scanDomNode","width","clientWidth","scrollWidth","height","clientHeight","scrollHeight","opts","result","arrowSize","horizontal","horizontalScrollbarSize","horizontalSliderSize","horizontalHasArrows","vertical","verticalScrollbarSize","verticalHasArrows","verticalSliderSize"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './media/scrollbars.css';\r\nimport { isEdgeOrIE } from '../../browser.js';\r\nimport * as dom from '../../dom.js';\r\nimport { createFastDomNode } from '../../fastDomNode.js';\r\nimport { StandardWheelEvent } from '../../mouseEvent.js';\r\nimport { HorizontalScrollbar } from './horizontalScrollbar.js';\r\nimport { VerticalScrollbar } from './verticalScrollbar.js';\r\nimport { Widget } from '../widget.js';\r\nimport { TimeoutTimer } from '../../../common/async.js';\r\nimport { Emitter } from '../../../common/event.js';\r\nimport { dispose } from '../../../common/lifecycle.js';\r\nimport * as platform from '../../../common/platform.js';\r\nimport { Scrollable } from '../../../common/scrollable.js';\r\nvar HIDE_TIMEOUT = 500;\r\nvar SCROLL_WHEEL_SENSITIVITY = 50;\r\nvar SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED = true;\r\nvar MouseWheelClassifierItem = /** @class */ (function () {\r\n    function MouseWheelClassifierItem(timestamp, deltaX, deltaY) {\r\n        this.timestamp = timestamp;\r\n        this.deltaX = deltaX;\r\n        this.deltaY = deltaY;\r\n        this.score = 0;\r\n    }\r\n    return MouseWheelClassifierItem;\r\n}());\r\nvar MouseWheelClassifier = /** @class */ (function () {\r\n    function MouseWheelClassifier() {\r\n        this._capacity = 5;\r\n        this._memory = [];\r\n        this._front = -1;\r\n        this._rear = -1;\r\n    }\r\n    MouseWheelClassifier.prototype.isPhysicalMouseWheel = function () {\r\n        if (this._front === -1 && this._rear === -1) {\r\n            // no elements\r\n            return false;\r\n        }\r\n        // 0.5 * last + 0.25 * 2nd last + 0.125 * 3rd last + ...\r\n        var remainingInfluence = 1;\r\n        var score = 0;\r\n        var iteration = 1;\r\n        var index = this._rear;\r\n        do {\r\n            var influence = (index === this._front ? remainingInfluence : Math.pow(2, -iteration));\r\n            remainingInfluence -= influence;\r\n            score += this._memory[index].score * influence;\r\n            if (index === this._front) {\r\n                break;\r\n            }\r\n            index = (this._capacity + index - 1) % this._capacity;\r\n            iteration++;\r\n        } while (true);\r\n        return (score <= 0.5);\r\n    };\r\n    MouseWheelClassifier.prototype.accept = function (timestamp, deltaX, deltaY) {\r\n        var item = new MouseWheelClassifierItem(timestamp, deltaX, deltaY);\r\n        item.score = this._computeScore(item);\r\n        if (this._front === -1 && this._rear === -1) {\r\n            this._memory[0] = item;\r\n            this._front = 0;\r\n            this._rear = 0;\r\n        }\r\n        else {\r\n            this._rear = (this._rear + 1) % this._capacity;\r\n            if (this._rear === this._front) {\r\n                // Drop oldest\r\n                this._front = (this._front + 1) % this._capacity;\r\n            }\r\n            this._memory[this._rear] = item;\r\n        }\r\n    };\r\n    /**\r\n     * A score between 0 and 1 for `item`.\r\n     *  - a score towards 0 indicates that the source appears to be a physical mouse wheel\r\n     *  - a score towards 1 indicates that the source appears to be a touchpad or magic mouse, etc.\r\n     */\r\n    MouseWheelClassifier.prototype._computeScore = function (item) {\r\n        if (Math.abs(item.deltaX) > 0 && Math.abs(item.deltaY) > 0) {\r\n            // both axes exercised => definitely not a physical mouse wheel\r\n            return 1;\r\n        }\r\n        var score = 0.5;\r\n        var prev = (this._front === -1 && this._rear === -1 ? null : this._memory[this._rear]);\r\n        if (prev) {\r\n            // const deltaT = item.timestamp - prev.timestamp;\r\n            // if (deltaT < 1000 / 30) {\r\n            // \t// sooner than X times per second => indicator that this is not a physical mouse wheel\r\n            // \tscore += 0.25;\r\n            // }\r\n            // if (item.deltaX === prev.deltaX && item.deltaY === prev.deltaY) {\r\n            // \t// equal amplitude => indicator that this is a physical mouse wheel\r\n            // \tscore -= 0.25;\r\n            // }\r\n        }\r\n        if (Math.abs(item.deltaX - Math.round(item.deltaX)) > 0 || Math.abs(item.deltaY - Math.round(item.deltaY)) > 0) {\r\n            // non-integer deltas => indicator that this is not a physical mouse wheel\r\n            score += 0.25;\r\n        }\r\n        return Math.min(Math.max(score, 0), 1);\r\n    };\r\n    MouseWheelClassifier.INSTANCE = new MouseWheelClassifier();\r\n    return MouseWheelClassifier;\r\n}());\r\nexport { MouseWheelClassifier };\r\nvar AbstractScrollableElement = /** @class */ (function (_super) {\r\n    __extends(AbstractScrollableElement, _super);\r\n    function AbstractScrollableElement(element, options, scrollable) {\r\n        var _this = _super.call(this) || this;\r\n        _this._onScroll = _this._register(new Emitter());\r\n        _this.onScroll = _this._onScroll.event;\r\n        element.style.overflow = 'hidden';\r\n        _this._options = resolveOptions(options);\r\n        _this._scrollable = scrollable;\r\n        _this._register(_this._scrollable.onScroll(function (e) {\r\n            _this._onDidScroll(e);\r\n            _this._onScroll.fire(e);\r\n        }));\r\n        var scrollbarHost = {\r\n            onMouseWheel: function (mouseWheelEvent) { return _this._onMouseWheel(mouseWheelEvent); },\r\n            onDragStart: function () { return _this._onDragStart(); },\r\n            onDragEnd: function () { return _this._onDragEnd(); },\r\n        };\r\n        _this._verticalScrollbar = _this._register(new VerticalScrollbar(_this._scrollable, _this._options, scrollbarHost));\r\n        _this._horizontalScrollbar = _this._register(new HorizontalScrollbar(_this._scrollable, _this._options, scrollbarHost));\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.className = 'monaco-scrollable-element ' + _this._options.className;\r\n        _this._domNode.setAttribute('role', 'presentation');\r\n        _this._domNode.style.position = 'relative';\r\n        _this._domNode.style.overflow = 'hidden';\r\n        _this._domNode.appendChild(element);\r\n        _this._domNode.appendChild(_this._horizontalScrollbar.domNode.domNode);\r\n        _this._domNode.appendChild(_this._verticalScrollbar.domNode.domNode);\r\n        if (_this._options.useShadows) {\r\n            _this._leftShadowDomNode = createFastDomNode(document.createElement('div'));\r\n            _this._leftShadowDomNode.setClassName('shadow');\r\n            _this._domNode.appendChild(_this._leftShadowDomNode.domNode);\r\n            _this._topShadowDomNode = createFastDomNode(document.createElement('div'));\r\n            _this._topShadowDomNode.setClassName('shadow');\r\n            _this._domNode.appendChild(_this._topShadowDomNode.domNode);\r\n            _this._topLeftShadowDomNode = createFastDomNode(document.createElement('div'));\r\n            _this._topLeftShadowDomNode.setClassName('shadow top-left-corner');\r\n            _this._domNode.appendChild(_this._topLeftShadowDomNode.domNode);\r\n        }\r\n        else {\r\n            _this._leftShadowDomNode = null;\r\n            _this._topShadowDomNode = null;\r\n            _this._topLeftShadowDomNode = null;\r\n        }\r\n        _this._listenOnDomNode = _this._options.listenOnDomNode || _this._domNode;\r\n        _this._mouseWheelToDispose = [];\r\n        _this._setListeningToMouseWheel(_this._options.handleMouseWheel);\r\n        _this.onmouseover(_this._listenOnDomNode, function (e) { return _this._onMouseOver(e); });\r\n        _this.onnonbubblingmouseout(_this._listenOnDomNode, function (e) { return _this._onMouseOut(e); });\r\n        _this._hideTimeout = _this._register(new TimeoutTimer());\r\n        _this._isDragging = false;\r\n        _this._mouseIsOver = false;\r\n        _this._shouldRender = true;\r\n        _this._revealOnScroll = true;\r\n        return _this;\r\n    }\r\n    AbstractScrollableElement.prototype.dispose = function () {\r\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    /**\r\n     * Get the generated 'scrollable' dom node\r\n     */\r\n    AbstractScrollableElement.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    AbstractScrollableElement.prototype.getOverviewRulerLayoutInfo = function () {\r\n        return {\r\n            parent: this._domNode,\r\n            insertBefore: this._verticalScrollbar.domNode.domNode,\r\n        };\r\n    };\r\n    /**\r\n     * Delegate a mouse down event to the vertical scrollbar.\r\n     * This is to help with clicking somewhere else and having the scrollbar react.\r\n     */\r\n    AbstractScrollableElement.prototype.delegateVerticalScrollbarMouseDown = function (browserEvent) {\r\n        this._verticalScrollbar.delegateMouseDown(browserEvent);\r\n    };\r\n    AbstractScrollableElement.prototype.getScrollDimensions = function () {\r\n        return this._scrollable.getScrollDimensions();\r\n    };\r\n    AbstractScrollableElement.prototype.setScrollDimensions = function (dimensions) {\r\n        this._scrollable.setScrollDimensions(dimensions);\r\n    };\r\n    /**\r\n     * Update the class name of the scrollable element.\r\n     */\r\n    AbstractScrollableElement.prototype.updateClassName = function (newClassName) {\r\n        this._options.className = newClassName;\r\n        // Defaults are different on Macs\r\n        if (platform.isMacintosh) {\r\n            this._options.className += ' mac';\r\n        }\r\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\r\n    };\r\n    /**\r\n     * Update configuration options for the scrollbar.\r\n     * Really this is Editor.IEditorScrollbarOptions, but base shouldn't\r\n     * depend on Editor.\r\n     */\r\n    AbstractScrollableElement.prototype.updateOptions = function (newOptions) {\r\n        var massagedOptions = resolveOptions(newOptions);\r\n        this._options.handleMouseWheel = massagedOptions.handleMouseWheel;\r\n        this._options.mouseWheelScrollSensitivity = massagedOptions.mouseWheelScrollSensitivity;\r\n        this._options.fastScrollSensitivity = massagedOptions.fastScrollSensitivity;\r\n        this._setListeningToMouseWheel(this._options.handleMouseWheel);\r\n        if (!this._options.lazyRender) {\r\n            this._render();\r\n        }\r\n    };\r\n    // -------------------- mouse wheel scrolling --------------------\r\n    AbstractScrollableElement.prototype._setListeningToMouseWheel = function (shouldListen) {\r\n        var _this = this;\r\n        var isListening = (this._mouseWheelToDispose.length > 0);\r\n        if (isListening === shouldListen) {\r\n            // No change\r\n            return;\r\n        }\r\n        // Stop listening (if necessary)\r\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\r\n        // Start listening (if necessary)\r\n        if (shouldListen) {\r\n            var onMouseWheel = function (browserEvent) {\r\n                _this._onMouseWheel(new StandardWheelEvent(browserEvent));\r\n            };\r\n            this._mouseWheelToDispose.push(dom.addDisposableListener(this._listenOnDomNode, isEdgeOrIE ? 'mousewheel' : 'wheel', onMouseWheel, { passive: false }));\r\n        }\r\n    };\r\n    AbstractScrollableElement.prototype._onMouseWheel = function (e) {\r\n        var _a;\r\n        var classifier = MouseWheelClassifier.INSTANCE;\r\n        if (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED) {\r\n            classifier.accept(Date.now(), e.deltaX, e.deltaY);\r\n        }\r\n        // console.log(`${Date.now()}, ${e.deltaY}, ${e.deltaX}`);\r\n        if (e.deltaY || e.deltaX) {\r\n            var deltaY = e.deltaY * this._options.mouseWheelScrollSensitivity;\r\n            var deltaX = e.deltaX * this._options.mouseWheelScrollSensitivity;\r\n            if (this._options.flipAxes) {\r\n                _a = [deltaX, deltaY], deltaY = _a[0], deltaX = _a[1];\r\n            }\r\n            // Convert vertical scrolling to horizontal if shift is held, this\r\n            // is handled at a higher level on Mac\r\n            var shiftConvert = !platform.isMacintosh && e.browserEvent && e.browserEvent.shiftKey;\r\n            if ((this._options.scrollYToX || shiftConvert) && !deltaX) {\r\n                deltaX = deltaY;\r\n                deltaY = 0;\r\n            }\r\n            if (e.browserEvent && e.browserEvent.altKey) {\r\n                // fastScrolling\r\n                deltaX = deltaX * this._options.fastScrollSensitivity;\r\n                deltaY = deltaY * this._options.fastScrollSensitivity;\r\n            }\r\n            var futureScrollPosition = this._scrollable.getFutureScrollPosition();\r\n            var desiredScrollPosition = {};\r\n            if (deltaY) {\r\n                var desiredScrollTop = futureScrollPosition.scrollTop - SCROLL_WHEEL_SENSITIVITY * deltaY;\r\n                this._verticalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollTop);\r\n            }\r\n            if (deltaX) {\r\n                var desiredScrollLeft = futureScrollPosition.scrollLeft - SCROLL_WHEEL_SENSITIVITY * deltaX;\r\n                this._horizontalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollLeft);\r\n            }\r\n            // Check that we are scrolling towards a location which is valid\r\n            desiredScrollPosition = this._scrollable.validateScrollPosition(desiredScrollPosition);\r\n            if (futureScrollPosition.scrollLeft !== desiredScrollPosition.scrollLeft || futureScrollPosition.scrollTop !== desiredScrollPosition.scrollTop) {\r\n                var canPerformSmoothScroll = (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED\r\n                    && this._options.mouseWheelSmoothScroll\r\n                    && classifier.isPhysicalMouseWheel());\r\n                if (canPerformSmoothScroll) {\r\n                    this._scrollable.setScrollPositionSmooth(desiredScrollPosition);\r\n                }\r\n                else {\r\n                    this._scrollable.setScrollPositionNow(desiredScrollPosition);\r\n                }\r\n                this._shouldRender = true;\r\n            }\r\n        }\r\n        if (this._options.alwaysConsumeMouseWheel || this._shouldRender) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n    AbstractScrollableElement.prototype._onDidScroll = function (e) {\r\n        this._shouldRender = this._horizontalScrollbar.onDidScroll(e) || this._shouldRender;\r\n        this._shouldRender = this._verticalScrollbar.onDidScroll(e) || this._shouldRender;\r\n        if (this._options.useShadows) {\r\n            this._shouldRender = true;\r\n        }\r\n        if (this._revealOnScroll) {\r\n            this._reveal();\r\n        }\r\n        if (!this._options.lazyRender) {\r\n            this._render();\r\n        }\r\n    };\r\n    /**\r\n     * Render / mutate the DOM now.\r\n     * Should be used together with the ctor option `lazyRender`.\r\n     */\r\n    AbstractScrollableElement.prototype.renderNow = function () {\r\n        if (!this._options.lazyRender) {\r\n            throw new Error('Please use `lazyRender` together with `renderNow`!');\r\n        }\r\n        this._render();\r\n    };\r\n    AbstractScrollableElement.prototype._render = function () {\r\n        if (!this._shouldRender) {\r\n            return;\r\n        }\r\n        this._shouldRender = false;\r\n        this._horizontalScrollbar.render();\r\n        this._verticalScrollbar.render();\r\n        if (this._options.useShadows) {\r\n            var scrollState = this._scrollable.getCurrentScrollPosition();\r\n            var enableTop = scrollState.scrollTop > 0;\r\n            var enableLeft = scrollState.scrollLeft > 0;\r\n            this._leftShadowDomNode.setClassName('shadow' + (enableLeft ? ' left' : ''));\r\n            this._topShadowDomNode.setClassName('shadow' + (enableTop ? ' top' : ''));\r\n            this._topLeftShadowDomNode.setClassName('shadow top-left-corner' + (enableTop ? ' top' : '') + (enableLeft ? ' left' : ''));\r\n        }\r\n    };\r\n    // -------------------- fade in / fade out --------------------\r\n    AbstractScrollableElement.prototype._onDragStart = function () {\r\n        this._isDragging = true;\r\n        this._reveal();\r\n    };\r\n    AbstractScrollableElement.prototype._onDragEnd = function () {\r\n        this._isDragging = false;\r\n        this._hide();\r\n    };\r\n    AbstractScrollableElement.prototype._onMouseOut = function (e) {\r\n        this._mouseIsOver = false;\r\n        this._hide();\r\n    };\r\n    AbstractScrollableElement.prototype._onMouseOver = function (e) {\r\n        this._mouseIsOver = true;\r\n        this._reveal();\r\n    };\r\n    AbstractScrollableElement.prototype._reveal = function () {\r\n        this._verticalScrollbar.beginReveal();\r\n        this._horizontalScrollbar.beginReveal();\r\n        this._scheduleHide();\r\n    };\r\n    AbstractScrollableElement.prototype._hide = function () {\r\n        if (!this._mouseIsOver && !this._isDragging) {\r\n            this._verticalScrollbar.beginHide();\r\n            this._horizontalScrollbar.beginHide();\r\n        }\r\n    };\r\n    AbstractScrollableElement.prototype._scheduleHide = function () {\r\n        var _this = this;\r\n        if (!this._mouseIsOver && !this._isDragging) {\r\n            this._hideTimeout.cancelAndSet(function () { return _this._hide(); }, HIDE_TIMEOUT);\r\n        }\r\n    };\r\n    return AbstractScrollableElement;\r\n}(Widget));\r\nexport { AbstractScrollableElement };\r\nvar ScrollableElement = /** @class */ (function (_super) {\r\n    __extends(ScrollableElement, _super);\r\n    function ScrollableElement(element, options) {\r\n        var _this = this;\r\n        options = options || {};\r\n        options.mouseWheelSmoothScroll = false;\r\n        var scrollable = new Scrollable(0, function (callback) { return dom.scheduleAtNextAnimationFrame(callback); });\r\n        _this = _super.call(this, element, options, scrollable) || this;\r\n        _this._register(scrollable);\r\n        return _this;\r\n    }\r\n    ScrollableElement.prototype.setScrollPosition = function (update) {\r\n        this._scrollable.setScrollPositionNow(update);\r\n    };\r\n    ScrollableElement.prototype.getScrollPosition = function () {\r\n        return this._scrollable.getCurrentScrollPosition();\r\n    };\r\n    return ScrollableElement;\r\n}(AbstractScrollableElement));\r\nexport { ScrollableElement };\r\nvar SmoothScrollableElement = /** @class */ (function (_super) {\r\n    __extends(SmoothScrollableElement, _super);\r\n    function SmoothScrollableElement(element, options, scrollable) {\r\n        return _super.call(this, element, options, scrollable) || this;\r\n    }\r\n    return SmoothScrollableElement;\r\n}(AbstractScrollableElement));\r\nexport { SmoothScrollableElement };\r\nvar DomScrollableElement = /** @class */ (function (_super) {\r\n    __extends(DomScrollableElement, _super);\r\n    function DomScrollableElement(element, options) {\r\n        var _this = _super.call(this, element, options) || this;\r\n        _this._element = element;\r\n        _this.onScroll(function (e) {\r\n            if (e.scrollTopChanged) {\r\n                _this._element.scrollTop = e.scrollTop;\r\n            }\r\n            if (e.scrollLeftChanged) {\r\n                _this._element.scrollLeft = e.scrollLeft;\r\n            }\r\n        });\r\n        _this.scanDomNode();\r\n        return _this;\r\n    }\r\n    DomScrollableElement.prototype.scanDomNode = function () {\r\n        // width, scrollLeft, scrollWidth, height, scrollTop, scrollHeight\r\n        this.setScrollDimensions({\r\n            width: this._element.clientWidth,\r\n            scrollWidth: this._element.scrollWidth,\r\n            height: this._element.clientHeight,\r\n            scrollHeight: this._element.scrollHeight\r\n        });\r\n        this.setScrollPosition({\r\n            scrollLeft: this._element.scrollLeft,\r\n            scrollTop: this._element.scrollTop,\r\n        });\r\n    };\r\n    return DomScrollableElement;\r\n}(ScrollableElement));\r\nexport { DomScrollableElement };\r\nfunction resolveOptions(opts) {\r\n    var result = {\r\n        lazyRender: (typeof opts.lazyRender !== 'undefined' ? opts.lazyRender : false),\r\n        className: (typeof opts.className !== 'undefined' ? opts.className : ''),\r\n        useShadows: (typeof opts.useShadows !== 'undefined' ? opts.useShadows : true),\r\n        handleMouseWheel: (typeof opts.handleMouseWheel !== 'undefined' ? opts.handleMouseWheel : true),\r\n        flipAxes: (typeof opts.flipAxes !== 'undefined' ? opts.flipAxes : false),\r\n        alwaysConsumeMouseWheel: (typeof opts.alwaysConsumeMouseWheel !== 'undefined' ? opts.alwaysConsumeMouseWheel : false),\r\n        scrollYToX: (typeof opts.scrollYToX !== 'undefined' ? opts.scrollYToX : false),\r\n        mouseWheelScrollSensitivity: (typeof opts.mouseWheelScrollSensitivity !== 'undefined' ? opts.mouseWheelScrollSensitivity : 1),\r\n        fastScrollSensitivity: (typeof opts.fastScrollSensitivity !== 'undefined' ? opts.fastScrollSensitivity : 5),\r\n        mouseWheelSmoothScroll: (typeof opts.mouseWheelSmoothScroll !== 'undefined' ? opts.mouseWheelSmoothScroll : true),\r\n        arrowSize: (typeof opts.arrowSize !== 'undefined' ? opts.arrowSize : 11),\r\n        listenOnDomNode: (typeof opts.listenOnDomNode !== 'undefined' ? opts.listenOnDomNode : null),\r\n        horizontal: (typeof opts.horizontal !== 'undefined' ? opts.horizontal : 1 /* Auto */),\r\n        horizontalScrollbarSize: (typeof opts.horizontalScrollbarSize !== 'undefined' ? opts.horizontalScrollbarSize : 10),\r\n        horizontalSliderSize: (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : 0),\r\n        horizontalHasArrows: (typeof opts.horizontalHasArrows !== 'undefined' ? opts.horizontalHasArrows : false),\r\n        vertical: (typeof opts.vertical !== 'undefined' ? opts.vertical : 1 /* Auto */),\r\n        verticalScrollbarSize: (typeof opts.verticalScrollbarSize !== 'undefined' ? opts.verticalScrollbarSize : 10),\r\n        verticalHasArrows: (typeof opts.verticalHasArrows !== 'undefined' ? opts.verticalHasArrows : false),\r\n        verticalSliderSize: (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : 0)\r\n    };\r\n    result.horizontalSliderSize = (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : result.horizontalScrollbarSize);\r\n    result.verticalSliderSize = (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : result.verticalScrollbarSize);\r\n    // Defaults are different on Macs\r\n    if (platform.isMacintosh) {\r\n        result.className += ' mac';\r\n    }\r\n    return result;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}