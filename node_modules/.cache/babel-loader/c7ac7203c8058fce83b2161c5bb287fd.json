{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport * as browser from '../../../base/browser/browser.js';\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\nimport { Disposable, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { CodeEditorWidget } from '../../browser/widget/codeEditorWidget.js';\nimport { DiffEditorWidget } from '../../browser/widget/diffEditorWidget.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\nimport { StandaloneKeybindingService, applyConfigurationValues } from './simpleServices.js';\nimport { IStandaloneThemeService } from '../common/standaloneThemeService.js';\nimport { MenuRegistry } from '../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService, IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService, optional } from '../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { StandaloneCodeEditorNLS } from '../../common/standaloneStrings.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\nvar LAST_GENERATED_COMMAND_ID = 0;\nvar ariaDomNodeCreated = false;\n\nfunction createAriaDomNode() {\n  if (ariaDomNodeCreated) {\n    return;\n  }\n\n  ariaDomNodeCreated = true;\n  aria.setARIAContainer(document.body);\n}\n/**\r\n * A code editor to be used both by the standalone editor and the standalone diff editor.\r\n */\n\n\nvar StandaloneCodeEditor =\n/** @class */\nfunction (_super) {\n  __extends(StandaloneCodeEditor, _super);\n\n  function StandaloneCodeEditor(domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService) {\n    var _this = this;\n\n    options = options || {};\n    options.ariaLabel = options.ariaLabel || StandaloneCodeEditorNLS.editorViewAccessibleLabel;\n    options.ariaLabel = options.ariaLabel + ';' + (browser.isIE ? StandaloneCodeEditorNLS.accessibilityHelpMessageIE : StandaloneCodeEditorNLS.accessibilityHelpMessage);\n    _this = _super.call(this, domElement, options, {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) || this;\n\n    if (keybindingService instanceof StandaloneKeybindingService) {\n      _this._standaloneKeybindingService = keybindingService;\n    } else {\n      _this._standaloneKeybindingService = null;\n    } // Create the ARIA dom node as soon as the first editor is instantiated\n\n\n    createAriaDomNode();\n    return _this;\n  }\n\n  StandaloneCodeEditor.prototype.addCommand = function (keybinding, handler, context) {\n    if (!this._standaloneKeybindingService) {\n      console.warn('Cannot add command because the editor is configured with an unrecognized KeybindingService');\n      return null;\n    }\n\n    var commandId = 'DYNAMIC_' + ++LAST_GENERATED_COMMAND_ID;\n    var whenExpression = ContextKeyExpr.deserialize(context);\n\n    this._standaloneKeybindingService.addDynamicKeybinding(commandId, keybinding, handler, whenExpression);\n\n    return commandId;\n  };\n\n  StandaloneCodeEditor.prototype.createContextKey = function (key, defaultValue) {\n    return this._contextKeyService.createKey(key, defaultValue);\n  };\n\n  StandaloneCodeEditor.prototype.addAction = function (_descriptor) {\n    var _this = this;\n\n    if (typeof _descriptor.id !== 'string' || typeof _descriptor.label !== 'string' || typeof _descriptor.run !== 'function') {\n      throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\n    }\n\n    if (!this._standaloneKeybindingService) {\n      console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n      return Disposable.None;\n    } // Read descriptor options\n\n\n    var id = _descriptor.id;\n    var label = _descriptor.label;\n    var precondition = ContextKeyExpr.and(ContextKeyExpr.equals('editorId', this.getId()), ContextKeyExpr.deserialize(_descriptor.precondition));\n    var keybindings = _descriptor.keybindings;\n    var keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(_descriptor.keybindingContext));\n    var contextMenuGroupId = _descriptor.contextMenuGroupId || null;\n    var contextMenuOrder = _descriptor.contextMenuOrder || 0;\n\n    var run = function (accessor) {\n      var args = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n      }\n\n      return Promise.resolve(_descriptor.run.apply(_descriptor, __spreadArrays([_this], args)));\n    };\n\n    var toDispose = new DisposableStore(); // Generate a unique id to allow the same descriptor.id across multiple editor instances\n\n    var uniqueId = this.getId() + ':' + id; // Register the command\n\n    toDispose.add(CommandsRegistry.registerCommand(uniqueId, run)); // Register the context menu item\n\n    if (contextMenuGroupId) {\n      var menuItem = {\n        command: {\n          id: uniqueId,\n          title: label\n        },\n        when: precondition,\n        group: contextMenuGroupId,\n        order: contextMenuOrder\n      };\n      toDispose.add(MenuRegistry.appendMenuItem(7\n      /* EditorContext */\n      , menuItem));\n    } // Register the keybindings\n\n\n    if (Array.isArray(keybindings)) {\n      for (var _i = 0, keybindings_1 = keybindings; _i < keybindings_1.length; _i++) {\n        var kb = keybindings_1[_i];\n        toDispose.add(this._standaloneKeybindingService.addDynamicKeybinding(uniqueId, kb, run, keybindingsWhen));\n      }\n    } // Finally, register an internal editor action\n\n\n    var internalAction = new InternalEditorAction(uniqueId, label, label, precondition, run, this._contextKeyService); // Store it under the original id, such that trigger with the original id will work\n\n    this._actions[id] = internalAction;\n    toDispose.add(toDisposable(function () {\n      delete _this._actions[id];\n    }));\n    return toDispose;\n  };\n\n  StandaloneCodeEditor = __decorate([__param(2, IInstantiationService), __param(3, ICodeEditorService), __param(4, ICommandService), __param(5, IContextKeyService), __param(6, IKeybindingService), __param(7, IThemeService), __param(8, INotificationService), __param(9, IAccessibilityService)], StandaloneCodeEditor);\n  return StandaloneCodeEditor;\n}(CodeEditorWidget);\n\nexport { StandaloneCodeEditor };\n\nvar StandaloneEditor =\n/** @class */\nfunction (_super) {\n  __extends(StandaloneEditor, _super);\n\n  function StandaloneEditor(domElement, options, toDispose, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, contextViewService, themeService, notificationService, configurationService, accessibilityService) {\n    var _this = this;\n\n    applyConfigurationValues(configurationService, options, false);\n    var themeDomRegistration = themeService.registerEditorContainer(domElement);\n    options = options || {};\n\n    if (typeof options.theme === 'string') {\n      themeService.setTheme(options.theme);\n    }\n\n    var _model = options.model;\n    delete options.model;\n    _this = _super.call(this, domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService) || this;\n    _this._contextViewService = contextViewService;\n    _this._configurationService = configurationService;\n\n    _this._register(toDispose);\n\n    _this._register(themeDomRegistration);\n\n    var model;\n\n    if (typeof _model === 'undefined') {\n      model = self.monaco.editor.createModel(options.value || '', options.language || 'text/plain');\n      _this._ownsModel = true;\n    } else {\n      model = _model;\n      _this._ownsModel = false;\n    }\n\n    _this._attachModel(model);\n\n    if (model) {\n      var e = {\n        oldModelUrl: null,\n        newModelUrl: model.uri\n      };\n\n      _this._onDidChangeModel.fire(e);\n    }\n\n    return _this;\n  }\n\n  StandaloneEditor.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n  };\n\n  StandaloneEditor.prototype.updateOptions = function (newOptions) {\n    applyConfigurationValues(this._configurationService, newOptions, false);\n\n    _super.prototype.updateOptions.call(this, newOptions);\n  };\n\n  StandaloneEditor.prototype._attachModel = function (model) {\n    _super.prototype._attachModel.call(this, model);\n\n    if (this._modelData) {\n      this._contextViewService.setContainer(this._modelData.view.domNode.domNode);\n    }\n  };\n\n  StandaloneEditor.prototype._postDetachModelCleanup = function (detachedModel) {\n    _super.prototype._postDetachModelCleanup.call(this, detachedModel);\n\n    if (detachedModel && this._ownsModel) {\n      detachedModel.dispose();\n      this._ownsModel = false;\n    }\n  };\n\n  StandaloneEditor = __decorate([__param(3, IInstantiationService), __param(4, ICodeEditorService), __param(5, ICommandService), __param(6, IContextKeyService), __param(7, IKeybindingService), __param(8, IContextViewService), __param(9, IStandaloneThemeService), __param(10, INotificationService), __param(11, IConfigurationService), __param(12, IAccessibilityService)], StandaloneEditor);\n  return StandaloneEditor;\n}(StandaloneCodeEditor);\n\nexport { StandaloneEditor };\n\nvar StandaloneDiffEditor =\n/** @class */\nfunction (_super) {\n  __extends(StandaloneDiffEditor, _super);\n\n  function StandaloneDiffEditor(domElement, options, toDispose, instantiationService, contextKeyService, keybindingService, contextViewService, editorWorkerService, codeEditorService, themeService, notificationService, configurationService, contextMenuService, editorProgressService, clipboardService) {\n    var _this = this;\n\n    applyConfigurationValues(configurationService, options, true);\n    var themeDomRegistration = themeService.registerEditorContainer(domElement);\n    options = options || {};\n\n    if (typeof options.theme === 'string') {\n      options.theme = themeService.setTheme(options.theme);\n    }\n\n    _this = _super.call(this, domElement, options, clipboardService, editorWorkerService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, editorProgressService) || this;\n    _this._contextViewService = contextViewService;\n    _this._configurationService = configurationService;\n\n    _this._register(toDispose);\n\n    _this._register(themeDomRegistration);\n\n    _this._contextViewService.setContainer(_this._containerDomElement);\n\n    return _this;\n  }\n\n  StandaloneDiffEditor.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n  };\n\n  StandaloneDiffEditor.prototype.updateOptions = function (newOptions) {\n    applyConfigurationValues(this._configurationService, newOptions, true);\n\n    _super.prototype.updateOptions.call(this, newOptions);\n  };\n\n  StandaloneDiffEditor.prototype._createInnerEditor = function (instantiationService, container, options) {\n    return instantiationService.createInstance(StandaloneCodeEditor, container, options);\n  };\n\n  StandaloneDiffEditor.prototype.getOriginalEditor = function () {\n    return _super.prototype.getOriginalEditor.call(this);\n  };\n\n  StandaloneDiffEditor.prototype.getModifiedEditor = function () {\n    return _super.prototype.getModifiedEditor.call(this);\n  };\n\n  StandaloneDiffEditor.prototype.addCommand = function (keybinding, handler, context) {\n    return this.getModifiedEditor().addCommand(keybinding, handler, context);\n  };\n\n  StandaloneDiffEditor.prototype.createContextKey = function (key, defaultValue) {\n    return this.getModifiedEditor().createContextKey(key, defaultValue);\n  };\n\n  StandaloneDiffEditor.prototype.addAction = function (descriptor) {\n    return this.getModifiedEditor().addAction(descriptor);\n  };\n\n  StandaloneDiffEditor = __decorate([__param(3, IInstantiationService), __param(4, IContextKeyService), __param(5, IKeybindingService), __param(6, IContextViewService), __param(7, IEditorWorkerService), __param(8, ICodeEditorService), __param(9, IStandaloneThemeService), __param(10, INotificationService), __param(11, IConfigurationService), __param(12, IContextMenuService), __param(13, IEditorProgressService), __param(14, optional(IClipboardService))], StandaloneDiffEditor);\n  return StandaloneDiffEditor;\n}(DiffEditorWidget);\n\nexport { StandaloneDiffEditor };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditor.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__spreadArrays","s","il","k","a","j","jl","browser","aria","Disposable","toDisposable","DisposableStore","ICodeEditorService","CodeEditorWidget","DiffEditorWidget","InternalEditorAction","IEditorWorkerService","StandaloneKeybindingService","applyConfigurationValues","IStandaloneThemeService","MenuRegistry","CommandsRegistry","ICommandService","IConfigurationService","ContextKeyExpr","IContextKeyService","IContextViewService","IContextMenuService","IInstantiationService","optional","IKeybindingService","INotificationService","IThemeService","IAccessibilityService","StandaloneCodeEditorNLS","IClipboardService","IEditorProgressService","LAST_GENERATED_COMMAND_ID","ariaDomNodeCreated","createAriaDomNode","setARIAContainer","document","body","StandaloneCodeEditor","_super","domElement","options","instantiationService","codeEditorService","commandService","contextKeyService","keybindingService","themeService","notificationService","accessibilityService","_this","ariaLabel","editorViewAccessibleLabel","isIE","accessibilityHelpMessageIE","accessibilityHelpMessage","call","_standaloneKeybindingService","addCommand","keybinding","handler","context","console","warn","commandId","whenExpression","deserialize","addDynamicKeybinding","createContextKey","defaultValue","_contextKeyService","createKey","addAction","_descriptor","id","label","run","Error","None","precondition","and","equals","getId","keybindings","keybindingsWhen","keybindingContext","contextMenuGroupId","contextMenuOrder","accessor","args","_i","Promise","resolve","apply","toDispose","uniqueId","add","registerCommand","menuItem","command","title","when","group","order","appendMenuItem","isArray","keybindings_1","kb","internalAction","_actions","StandaloneEditor","contextViewService","configurationService","themeDomRegistration","registerEditorContainer","theme","setTheme","_model","model","_contextViewService","_configurationService","_register","self","monaco","editor","createModel","value","language","_ownsModel","_attachModel","e","oldModelUrl","newModelUrl","uri","_onDidChangeModel","fire","dispose","updateOptions","newOptions","_modelData","setContainer","view","domNode","_postDetachModelCleanup","detachedModel","StandaloneDiffEditor","editorWorkerService","contextMenuService","editorProgressService","clipboardService","_containerDomElement","_createInnerEditor","container","createInstance","getOriginalEditor","getModifiedEditor","descriptor"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport * as browser from '../../../base/browser/browser.js';\r\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\r\nimport { Disposable, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { CodeEditorWidget } from '../../browser/widget/codeEditorWidget.js';\r\nimport { DiffEditorWidget } from '../../browser/widget/diffEditorWidget.js';\r\nimport { InternalEditorAction } from '../../common/editorAction.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { StandaloneKeybindingService, applyConfigurationValues } from './simpleServices.js';\r\nimport { IStandaloneThemeService } from '../common/standaloneThemeService.js';\r\nimport { MenuRegistry } from '../../../platform/actions/common/actions.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextViewService, IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { IInstantiationService, optional } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nimport { StandaloneCodeEditorNLS } from '../../common/standaloneStrings.js';\r\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nvar LAST_GENERATED_COMMAND_ID = 0;\r\nvar ariaDomNodeCreated = false;\r\nfunction createAriaDomNode() {\r\n    if (ariaDomNodeCreated) {\r\n        return;\r\n    }\r\n    ariaDomNodeCreated = true;\r\n    aria.setARIAContainer(document.body);\r\n}\r\n/**\r\n * A code editor to be used both by the standalone editor and the standalone diff editor.\r\n */\r\nvar StandaloneCodeEditor = /** @class */ (function (_super) {\r\n    __extends(StandaloneCodeEditor, _super);\r\n    function StandaloneCodeEditor(domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService) {\r\n        var _this = this;\r\n        options = options || {};\r\n        options.ariaLabel = options.ariaLabel || StandaloneCodeEditorNLS.editorViewAccessibleLabel;\r\n        options.ariaLabel = options.ariaLabel + ';' + (browser.isIE\r\n            ? StandaloneCodeEditorNLS.accessibilityHelpMessageIE\r\n            : StandaloneCodeEditorNLS.accessibilityHelpMessage);\r\n        _this = _super.call(this, domElement, options, {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) || this;\r\n        if (keybindingService instanceof StandaloneKeybindingService) {\r\n            _this._standaloneKeybindingService = keybindingService;\r\n        }\r\n        else {\r\n            _this._standaloneKeybindingService = null;\r\n        }\r\n        // Create the ARIA dom node as soon as the first editor is instantiated\r\n        createAriaDomNode();\r\n        return _this;\r\n    }\r\n    StandaloneCodeEditor.prototype.addCommand = function (keybinding, handler, context) {\r\n        if (!this._standaloneKeybindingService) {\r\n            console.warn('Cannot add command because the editor is configured with an unrecognized KeybindingService');\r\n            return null;\r\n        }\r\n        var commandId = 'DYNAMIC_' + (++LAST_GENERATED_COMMAND_ID);\r\n        var whenExpression = ContextKeyExpr.deserialize(context);\r\n        this._standaloneKeybindingService.addDynamicKeybinding(commandId, keybinding, handler, whenExpression);\r\n        return commandId;\r\n    };\r\n    StandaloneCodeEditor.prototype.createContextKey = function (key, defaultValue) {\r\n        return this._contextKeyService.createKey(key, defaultValue);\r\n    };\r\n    StandaloneCodeEditor.prototype.addAction = function (_descriptor) {\r\n        var _this = this;\r\n        if ((typeof _descriptor.id !== 'string') || (typeof _descriptor.label !== 'string') || (typeof _descriptor.run !== 'function')) {\r\n            throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\r\n        }\r\n        if (!this._standaloneKeybindingService) {\r\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\r\n            return Disposable.None;\r\n        }\r\n        // Read descriptor options\r\n        var id = _descriptor.id;\r\n        var label = _descriptor.label;\r\n        var precondition = ContextKeyExpr.and(ContextKeyExpr.equals('editorId', this.getId()), ContextKeyExpr.deserialize(_descriptor.precondition));\r\n        var keybindings = _descriptor.keybindings;\r\n        var keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(_descriptor.keybindingContext));\r\n        var contextMenuGroupId = _descriptor.contextMenuGroupId || null;\r\n        var contextMenuOrder = _descriptor.contextMenuOrder || 0;\r\n        var run = function (accessor) {\r\n            var args = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                args[_i - 1] = arguments[_i];\r\n            }\r\n            return Promise.resolve(_descriptor.run.apply(_descriptor, __spreadArrays([_this], args)));\r\n        };\r\n        var toDispose = new DisposableStore();\r\n        // Generate a unique id to allow the same descriptor.id across multiple editor instances\r\n        var uniqueId = this.getId() + ':' + id;\r\n        // Register the command\r\n        toDispose.add(CommandsRegistry.registerCommand(uniqueId, run));\r\n        // Register the context menu item\r\n        if (contextMenuGroupId) {\r\n            var menuItem = {\r\n                command: {\r\n                    id: uniqueId,\r\n                    title: label\r\n                },\r\n                when: precondition,\r\n                group: contextMenuGroupId,\r\n                order: contextMenuOrder\r\n            };\r\n            toDispose.add(MenuRegistry.appendMenuItem(7 /* EditorContext */, menuItem));\r\n        }\r\n        // Register the keybindings\r\n        if (Array.isArray(keybindings)) {\r\n            for (var _i = 0, keybindings_1 = keybindings; _i < keybindings_1.length; _i++) {\r\n                var kb = keybindings_1[_i];\r\n                toDispose.add(this._standaloneKeybindingService.addDynamicKeybinding(uniqueId, kb, run, keybindingsWhen));\r\n            }\r\n        }\r\n        // Finally, register an internal editor action\r\n        var internalAction = new InternalEditorAction(uniqueId, label, label, precondition, run, this._contextKeyService);\r\n        // Store it under the original id, such that trigger with the original id will work\r\n        this._actions[id] = internalAction;\r\n        toDispose.add(toDisposable(function () {\r\n            delete _this._actions[id];\r\n        }));\r\n        return toDispose;\r\n    };\r\n    StandaloneCodeEditor = __decorate([\r\n        __param(2, IInstantiationService),\r\n        __param(3, ICodeEditorService),\r\n        __param(4, ICommandService),\r\n        __param(5, IContextKeyService),\r\n        __param(6, IKeybindingService),\r\n        __param(7, IThemeService),\r\n        __param(8, INotificationService),\r\n        __param(9, IAccessibilityService)\r\n    ], StandaloneCodeEditor);\r\n    return StandaloneCodeEditor;\r\n}(CodeEditorWidget));\r\nexport { StandaloneCodeEditor };\r\nvar StandaloneEditor = /** @class */ (function (_super) {\r\n    __extends(StandaloneEditor, _super);\r\n    function StandaloneEditor(domElement, options, toDispose, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, contextViewService, themeService, notificationService, configurationService, accessibilityService) {\r\n        var _this = this;\r\n        applyConfigurationValues(configurationService, options, false);\r\n        var themeDomRegistration = themeService.registerEditorContainer(domElement);\r\n        options = options || {};\r\n        if (typeof options.theme === 'string') {\r\n            themeService.setTheme(options.theme);\r\n        }\r\n        var _model = options.model;\r\n        delete options.model;\r\n        _this = _super.call(this, domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService) || this;\r\n        _this._contextViewService = contextViewService;\r\n        _this._configurationService = configurationService;\r\n        _this._register(toDispose);\r\n        _this._register(themeDomRegistration);\r\n        var model;\r\n        if (typeof _model === 'undefined') {\r\n            model = self.monaco.editor.createModel(options.value || '', options.language || 'text/plain');\r\n            _this._ownsModel = true;\r\n        }\r\n        else {\r\n            model = _model;\r\n            _this._ownsModel = false;\r\n        }\r\n        _this._attachModel(model);\r\n        if (model) {\r\n            var e = {\r\n                oldModelUrl: null,\r\n                newModelUrl: model.uri\r\n            };\r\n            _this._onDidChangeModel.fire(e);\r\n        }\r\n        return _this;\r\n    }\r\n    StandaloneEditor.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    StandaloneEditor.prototype.updateOptions = function (newOptions) {\r\n        applyConfigurationValues(this._configurationService, newOptions, false);\r\n        _super.prototype.updateOptions.call(this, newOptions);\r\n    };\r\n    StandaloneEditor.prototype._attachModel = function (model) {\r\n        _super.prototype._attachModel.call(this, model);\r\n        if (this._modelData) {\r\n            this._contextViewService.setContainer(this._modelData.view.domNode.domNode);\r\n        }\r\n    };\r\n    StandaloneEditor.prototype._postDetachModelCleanup = function (detachedModel) {\r\n        _super.prototype._postDetachModelCleanup.call(this, detachedModel);\r\n        if (detachedModel && this._ownsModel) {\r\n            detachedModel.dispose();\r\n            this._ownsModel = false;\r\n        }\r\n    };\r\n    StandaloneEditor = __decorate([\r\n        __param(3, IInstantiationService),\r\n        __param(4, ICodeEditorService),\r\n        __param(5, ICommandService),\r\n        __param(6, IContextKeyService),\r\n        __param(7, IKeybindingService),\r\n        __param(8, IContextViewService),\r\n        __param(9, IStandaloneThemeService),\r\n        __param(10, INotificationService),\r\n        __param(11, IConfigurationService),\r\n        __param(12, IAccessibilityService)\r\n    ], StandaloneEditor);\r\n    return StandaloneEditor;\r\n}(StandaloneCodeEditor));\r\nexport { StandaloneEditor };\r\nvar StandaloneDiffEditor = /** @class */ (function (_super) {\r\n    __extends(StandaloneDiffEditor, _super);\r\n    function StandaloneDiffEditor(domElement, options, toDispose, instantiationService, contextKeyService, keybindingService, contextViewService, editorWorkerService, codeEditorService, themeService, notificationService, configurationService, contextMenuService, editorProgressService, clipboardService) {\r\n        var _this = this;\r\n        applyConfigurationValues(configurationService, options, true);\r\n        var themeDomRegistration = themeService.registerEditorContainer(domElement);\r\n        options = options || {};\r\n        if (typeof options.theme === 'string') {\r\n            options.theme = themeService.setTheme(options.theme);\r\n        }\r\n        _this = _super.call(this, domElement, options, clipboardService, editorWorkerService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, editorProgressService) || this;\r\n        _this._contextViewService = contextViewService;\r\n        _this._configurationService = configurationService;\r\n        _this._register(toDispose);\r\n        _this._register(themeDomRegistration);\r\n        _this._contextViewService.setContainer(_this._containerDomElement);\r\n        return _this;\r\n    }\r\n    StandaloneDiffEditor.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    StandaloneDiffEditor.prototype.updateOptions = function (newOptions) {\r\n        applyConfigurationValues(this._configurationService, newOptions, true);\r\n        _super.prototype.updateOptions.call(this, newOptions);\r\n    };\r\n    StandaloneDiffEditor.prototype._createInnerEditor = function (instantiationService, container, options) {\r\n        return instantiationService.createInstance(StandaloneCodeEditor, container, options);\r\n    };\r\n    StandaloneDiffEditor.prototype.getOriginalEditor = function () {\r\n        return _super.prototype.getOriginalEditor.call(this);\r\n    };\r\n    StandaloneDiffEditor.prototype.getModifiedEditor = function () {\r\n        return _super.prototype.getModifiedEditor.call(this);\r\n    };\r\n    StandaloneDiffEditor.prototype.addCommand = function (keybinding, handler, context) {\r\n        return this.getModifiedEditor().addCommand(keybinding, handler, context);\r\n    };\r\n    StandaloneDiffEditor.prototype.createContextKey = function (key, defaultValue) {\r\n        return this.getModifiedEditor().createContextKey(key, defaultValue);\r\n    };\r\n    StandaloneDiffEditor.prototype.addAction = function (descriptor) {\r\n        return this.getModifiedEditor().addAction(descriptor);\r\n    };\r\n    StandaloneDiffEditor = __decorate([\r\n        __param(3, IInstantiationService),\r\n        __param(4, IContextKeyService),\r\n        __param(5, IKeybindingService),\r\n        __param(6, IContextViewService),\r\n        __param(7, IEditorWorkerService),\r\n        __param(8, ICodeEditorService),\r\n        __param(9, IStandaloneThemeService),\r\n        __param(10, INotificationService),\r\n        __param(11, IConfigurationService),\r\n        __param(12, IContextMenuService),\r\n        __param(13, IEditorProgressService),\r\n        __param(14, optional(IClipboardService))\r\n    ], StandaloneDiffEditor);\r\n    return StandaloneDiffEditor;\r\n}(DiffEditorWidget));\r\nexport { StandaloneDiffEditor };\r\n"]},"metadata":{},"sourceType":"module"}