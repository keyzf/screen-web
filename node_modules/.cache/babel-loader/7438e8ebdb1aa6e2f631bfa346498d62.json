{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as dom from '../../../base/browser/dom.js';\n\nvar ElementSizeObserver =\n/** @class */\nfunction (_super) {\n  __extends(ElementSizeObserver, _super);\n\n  function ElementSizeObserver(referenceDomElement, dimension, changeCallback) {\n    var _this = _super.call(this) || this;\n\n    _this.referenceDomElement = referenceDomElement;\n    _this.changeCallback = changeCallback;\n    _this.width = -1;\n    _this.height = -1;\n    _this.mutationObserver = null;\n    _this.windowSizeListener = null;\n\n    _this.measureReferenceDomElement(false, dimension);\n\n    return _this;\n  }\n\n  ElementSizeObserver.prototype.dispose = function () {\n    this.stopObserving();\n\n    _super.prototype.dispose.call(this);\n  };\n\n  ElementSizeObserver.prototype.getWidth = function () {\n    return this.width;\n  };\n\n  ElementSizeObserver.prototype.getHeight = function () {\n    return this.height;\n  };\n\n  ElementSizeObserver.prototype.startObserving = function () {\n    var _this = this;\n\n    if (!this.mutationObserver && this.referenceDomElement) {\n      this.mutationObserver = new MutationObserver(function () {\n        return _this._onDidMutate();\n      });\n      this.mutationObserver.observe(this.referenceDomElement, {\n        attributes: true\n      });\n    }\n\n    if (!this.windowSizeListener) {\n      this.windowSizeListener = dom.addDisposableListener(window, 'resize', function () {\n        return _this._onDidResizeWindow();\n      });\n    }\n  };\n\n  ElementSizeObserver.prototype.stopObserving = function () {\n    if (this.mutationObserver) {\n      this.mutationObserver.disconnect();\n      this.mutationObserver = null;\n    }\n\n    if (this.windowSizeListener) {\n      this.windowSizeListener.dispose();\n      this.windowSizeListener = null;\n    }\n  };\n\n  ElementSizeObserver.prototype.observe = function (dimension) {\n    this.measureReferenceDomElement(true, dimension);\n  };\n\n  ElementSizeObserver.prototype._onDidMutate = function () {\n    this.measureReferenceDomElement(true);\n  };\n\n  ElementSizeObserver.prototype._onDidResizeWindow = function () {\n    this.measureReferenceDomElement(true);\n  };\n\n  ElementSizeObserver.prototype.measureReferenceDomElement = function (callChangeCallback, dimension) {\n    var observedWidth = 0;\n    var observedHeight = 0;\n\n    if (dimension) {\n      observedWidth = dimension.width;\n      observedHeight = dimension.height;\n    } else if (this.referenceDomElement) {\n      observedWidth = this.referenceDomElement.clientWidth;\n      observedHeight = this.referenceDomElement.clientHeight;\n    }\n\n    observedWidth = Math.max(5, observedWidth);\n    observedHeight = Math.max(5, observedHeight);\n\n    if (this.width !== observedWidth || this.height !== observedHeight) {\n      this.width = observedWidth;\n      this.height = observedHeight;\n\n      if (callChangeCallback) {\n        this.changeCallback();\n      }\n    }\n  };\n\n  return ElementSizeObserver;\n}(Disposable);\n\nexport { ElementSizeObserver };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/browser/config/elementSizeObserver.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Disposable","dom","ElementSizeObserver","_super","referenceDomElement","dimension","changeCallback","_this","call","width","height","mutationObserver","windowSizeListener","measureReferenceDomElement","dispose","stopObserving","getWidth","getHeight","startObserving","MutationObserver","_onDidMutate","observe","attributes","addDisposableListener","window","_onDidResizeWindow","disconnect","callChangeCallback","observedWidth","observedHeight","clientWidth","clientHeight","Math","max"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nvar ElementSizeObserver = /** @class */ (function (_super) {\r\n    __extends(ElementSizeObserver, _super);\r\n    function ElementSizeObserver(referenceDomElement, dimension, changeCallback) {\r\n        var _this = _super.call(this) || this;\r\n        _this.referenceDomElement = referenceDomElement;\r\n        _this.changeCallback = changeCallback;\r\n        _this.width = -1;\r\n        _this.height = -1;\r\n        _this.mutationObserver = null;\r\n        _this.windowSizeListener = null;\r\n        _this.measureReferenceDomElement(false, dimension);\r\n        return _this;\r\n    }\r\n    ElementSizeObserver.prototype.dispose = function () {\r\n        this.stopObserving();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ElementSizeObserver.prototype.getWidth = function () {\r\n        return this.width;\r\n    };\r\n    ElementSizeObserver.prototype.getHeight = function () {\r\n        return this.height;\r\n    };\r\n    ElementSizeObserver.prototype.startObserving = function () {\r\n        var _this = this;\r\n        if (!this.mutationObserver && this.referenceDomElement) {\r\n            this.mutationObserver = new MutationObserver(function () { return _this._onDidMutate(); });\r\n            this.mutationObserver.observe(this.referenceDomElement, {\r\n                attributes: true,\r\n            });\r\n        }\r\n        if (!this.windowSizeListener) {\r\n            this.windowSizeListener = dom.addDisposableListener(window, 'resize', function () { return _this._onDidResizeWindow(); });\r\n        }\r\n    };\r\n    ElementSizeObserver.prototype.stopObserving = function () {\r\n        if (this.mutationObserver) {\r\n            this.mutationObserver.disconnect();\r\n            this.mutationObserver = null;\r\n        }\r\n        if (this.windowSizeListener) {\r\n            this.windowSizeListener.dispose();\r\n            this.windowSizeListener = null;\r\n        }\r\n    };\r\n    ElementSizeObserver.prototype.observe = function (dimension) {\r\n        this.measureReferenceDomElement(true, dimension);\r\n    };\r\n    ElementSizeObserver.prototype._onDidMutate = function () {\r\n        this.measureReferenceDomElement(true);\r\n    };\r\n    ElementSizeObserver.prototype._onDidResizeWindow = function () {\r\n        this.measureReferenceDomElement(true);\r\n    };\r\n    ElementSizeObserver.prototype.measureReferenceDomElement = function (callChangeCallback, dimension) {\r\n        var observedWidth = 0;\r\n        var observedHeight = 0;\r\n        if (dimension) {\r\n            observedWidth = dimension.width;\r\n            observedHeight = dimension.height;\r\n        }\r\n        else if (this.referenceDomElement) {\r\n            observedWidth = this.referenceDomElement.clientWidth;\r\n            observedHeight = this.referenceDomElement.clientHeight;\r\n        }\r\n        observedWidth = Math.max(5, observedWidth);\r\n        observedHeight = Math.max(5, observedHeight);\r\n        if (this.width !== observedWidth || this.height !== observedHeight) {\r\n            this.width = observedWidth;\r\n            this.height = observedHeight;\r\n            if (callChangeCallback) {\r\n                this.changeCallback();\r\n            }\r\n        }\r\n    };\r\n    return ElementSizeObserver;\r\n}(Disposable));\r\nexport { ElementSizeObserver };\r\n"]},"metadata":{},"sourceType":"module"}