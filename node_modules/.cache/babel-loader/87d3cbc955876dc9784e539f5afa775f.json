{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './glyphMargin.css';\nimport { DynamicViewOverlay } from '../../view/dynamicViewOverlay.js';\n\nvar DecorationToRender =\n/** @class */\nfunction () {\n  function DecorationToRender(startLineNumber, endLineNumber, className) {\n    this.startLineNumber = +startLineNumber;\n    this.endLineNumber = +endLineNumber;\n    this.className = String(className);\n  }\n\n  return DecorationToRender;\n}();\n\nexport { DecorationToRender };\n\nvar DedupOverlay =\n/** @class */\nfunction (_super) {\n  __extends(DedupOverlay, _super);\n\n  function DedupOverlay() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DedupOverlay.prototype._render = function (visibleStartLineNumber, visibleEndLineNumber, decorations) {\n    var output = [];\n\n    for (var lineNumber = visibleStartLineNumber; lineNumber <= visibleEndLineNumber; lineNumber++) {\n      var lineIndex = lineNumber - visibleStartLineNumber;\n      output[lineIndex] = [];\n    }\n\n    if (decorations.length === 0) {\n      return output;\n    }\n\n    decorations.sort(function (a, b) {\n      if (a.className === b.className) {\n        if (a.startLineNumber === b.startLineNumber) {\n          return a.endLineNumber - b.endLineNumber;\n        }\n\n        return a.startLineNumber - b.startLineNumber;\n      }\n\n      return a.className < b.className ? -1 : 1;\n    });\n    var prevClassName = null;\n    var prevEndLineIndex = 0;\n\n    for (var i = 0, len = decorations.length; i < len; i++) {\n      var d = decorations[i];\n      var className = d.className;\n      var startLineIndex = Math.max(d.startLineNumber, visibleStartLineNumber) - visibleStartLineNumber;\n      var endLineIndex = Math.min(d.endLineNumber, visibleEndLineNumber) - visibleStartLineNumber;\n\n      if (prevClassName === className) {\n        startLineIndex = Math.max(prevEndLineIndex + 1, startLineIndex);\n        prevEndLineIndex = Math.max(prevEndLineIndex, endLineIndex);\n      } else {\n        prevClassName = className;\n        prevEndLineIndex = endLineIndex;\n      }\n\n      for (var i_1 = startLineIndex; i_1 <= prevEndLineIndex; i_1++) {\n        output[i_1].push(prevClassName);\n      }\n    }\n\n    return output;\n  };\n\n  return DedupOverlay;\n}(DynamicViewOverlay);\n\nexport { DedupOverlay };\n\nvar GlyphMarginOverlay =\n/** @class */\nfunction (_super) {\n  __extends(GlyphMarginOverlay, _super);\n\n  function GlyphMarginOverlay(context) {\n    var _this = _super.call(this) || this;\n\n    _this._context = context;\n    var options = _this._context.configuration.options;\n    var layoutInfo = options.get(107\n    /* layoutInfo */\n    );\n    _this._lineHeight = options.get(49\n    /* lineHeight */\n    );\n    _this._glyphMargin = options.get(40\n    /* glyphMargin */\n    );\n    _this._glyphMarginLeft = layoutInfo.glyphMarginLeft;\n    _this._glyphMarginWidth = layoutInfo.glyphMarginWidth;\n    _this._renderResult = null;\n\n    _this._context.addEventHandler(_this);\n\n    return _this;\n  }\n\n  GlyphMarginOverlay.prototype.dispose = function () {\n    this._context.removeEventHandler(this);\n\n    this._renderResult = null;\n\n    _super.prototype.dispose.call(this);\n  }; // --- begin event handlers\n\n\n  GlyphMarginOverlay.prototype.onConfigurationChanged = function (e) {\n    var options = this._context.configuration.options;\n    var layoutInfo = options.get(107\n    /* layoutInfo */\n    );\n    this._lineHeight = options.get(49\n    /* lineHeight */\n    );\n    this._glyphMargin = options.get(40\n    /* glyphMargin */\n    );\n    this._glyphMarginLeft = layoutInfo.glyphMarginLeft;\n    this._glyphMarginWidth = layoutInfo.glyphMarginWidth;\n    return true;\n  };\n\n  GlyphMarginOverlay.prototype.onDecorationsChanged = function (e) {\n    return true;\n  };\n\n  GlyphMarginOverlay.prototype.onFlushed = function (e) {\n    return true;\n  };\n\n  GlyphMarginOverlay.prototype.onLinesChanged = function (e) {\n    return true;\n  };\n\n  GlyphMarginOverlay.prototype.onLinesDeleted = function (e) {\n    return true;\n  };\n\n  GlyphMarginOverlay.prototype.onLinesInserted = function (e) {\n    return true;\n  };\n\n  GlyphMarginOverlay.prototype.onScrollChanged = function (e) {\n    return e.scrollTopChanged;\n  };\n\n  GlyphMarginOverlay.prototype.onZonesChanged = function (e) {\n    return true;\n  }; // --- end event handlers\n\n\n  GlyphMarginOverlay.prototype._getDecorations = function (ctx) {\n    var decorations = ctx.getDecorationsInViewport();\n    var r = [],\n        rLen = 0;\n\n    for (var i = 0, len = decorations.length; i < len; i++) {\n      var d = decorations[i];\n      var glyphMarginClassName = d.options.glyphMarginClassName;\n\n      if (glyphMarginClassName) {\n        r[rLen++] = new DecorationToRender(d.range.startLineNumber, d.range.endLineNumber, glyphMarginClassName);\n      }\n    }\n\n    return r;\n  };\n\n  GlyphMarginOverlay.prototype.prepareRender = function (ctx) {\n    if (!this._glyphMargin) {\n      this._renderResult = null;\n      return;\n    }\n\n    var visibleStartLineNumber = ctx.visibleRange.startLineNumber;\n    var visibleEndLineNumber = ctx.visibleRange.endLineNumber;\n\n    var toRender = this._render(visibleStartLineNumber, visibleEndLineNumber, this._getDecorations(ctx));\n\n    var lineHeight = this._lineHeight.toString();\n\n    var left = this._glyphMarginLeft.toString();\n\n    var width = this._glyphMarginWidth.toString();\n\n    var common = '\" style=\"left:' + left + 'px;width:' + width + 'px' + ';height:' + lineHeight + 'px;\"></div>';\n    var output = [];\n\n    for (var lineNumber = visibleStartLineNumber; lineNumber <= visibleEndLineNumber; lineNumber++) {\n      var lineIndex = lineNumber - visibleStartLineNumber;\n      var classNames = toRender[lineIndex];\n\n      if (classNames.length === 0) {\n        output[lineIndex] = '';\n      } else {\n        output[lineIndex] = '<div class=\"cgmr codicon ' + classNames.join(' ') + common;\n      }\n    }\n\n    this._renderResult = output;\n  };\n\n  GlyphMarginOverlay.prototype.render = function (startLineNumber, lineNumber) {\n    if (!this._renderResult) {\n      return '';\n    }\n\n    var lineIndex = lineNumber - startLineNumber;\n\n    if (lineIndex < 0 || lineIndex >= this._renderResult.length) {\n      return '';\n    }\n\n    return this._renderResult[lineIndex];\n  };\n\n  return GlyphMarginOverlay;\n}(DedupOverlay);\n\nexport { GlyphMarginOverlay };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/glyphMargin/glyphMargin.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","DynamicViewOverlay","DecorationToRender","startLineNumber","endLineNumber","className","String","DedupOverlay","_super","apply","arguments","_render","visibleStartLineNumber","visibleEndLineNumber","decorations","output","lineNumber","lineIndex","length","sort","a","prevClassName","prevEndLineIndex","i","len","startLineIndex","Math","max","endLineIndex","min","i_1","push","GlyphMarginOverlay","context","_this","call","_context","options","configuration","layoutInfo","get","_lineHeight","_glyphMargin","_glyphMarginLeft","glyphMarginLeft","_glyphMarginWidth","glyphMarginWidth","_renderResult","addEventHandler","dispose","removeEventHandler","onConfigurationChanged","e","onDecorationsChanged","onFlushed","onLinesChanged","onLinesDeleted","onLinesInserted","onScrollChanged","scrollTopChanged","onZonesChanged","_getDecorations","ctx","getDecorationsInViewport","r","rLen","glyphMarginClassName","range","prepareRender","visibleRange","toRender","lineHeight","toString","left","width","common","classNames","join","render"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './glyphMargin.css';\r\nimport { DynamicViewOverlay } from '../../view/dynamicViewOverlay.js';\r\nvar DecorationToRender = /** @class */ (function () {\r\n    function DecorationToRender(startLineNumber, endLineNumber, className) {\r\n        this.startLineNumber = +startLineNumber;\r\n        this.endLineNumber = +endLineNumber;\r\n        this.className = String(className);\r\n    }\r\n    return DecorationToRender;\r\n}());\r\nexport { DecorationToRender };\r\nvar DedupOverlay = /** @class */ (function (_super) {\r\n    __extends(DedupOverlay, _super);\r\n    function DedupOverlay() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DedupOverlay.prototype._render = function (visibleStartLineNumber, visibleEndLineNumber, decorations) {\r\n        var output = [];\r\n        for (var lineNumber = visibleStartLineNumber; lineNumber <= visibleEndLineNumber; lineNumber++) {\r\n            var lineIndex = lineNumber - visibleStartLineNumber;\r\n            output[lineIndex] = [];\r\n        }\r\n        if (decorations.length === 0) {\r\n            return output;\r\n        }\r\n        decorations.sort(function (a, b) {\r\n            if (a.className === b.className) {\r\n                if (a.startLineNumber === b.startLineNumber) {\r\n                    return a.endLineNumber - b.endLineNumber;\r\n                }\r\n                return a.startLineNumber - b.startLineNumber;\r\n            }\r\n            return (a.className < b.className ? -1 : 1);\r\n        });\r\n        var prevClassName = null;\r\n        var prevEndLineIndex = 0;\r\n        for (var i = 0, len = decorations.length; i < len; i++) {\r\n            var d = decorations[i];\r\n            var className = d.className;\r\n            var startLineIndex = Math.max(d.startLineNumber, visibleStartLineNumber) - visibleStartLineNumber;\r\n            var endLineIndex = Math.min(d.endLineNumber, visibleEndLineNumber) - visibleStartLineNumber;\r\n            if (prevClassName === className) {\r\n                startLineIndex = Math.max(prevEndLineIndex + 1, startLineIndex);\r\n                prevEndLineIndex = Math.max(prevEndLineIndex, endLineIndex);\r\n            }\r\n            else {\r\n                prevClassName = className;\r\n                prevEndLineIndex = endLineIndex;\r\n            }\r\n            for (var i_1 = startLineIndex; i_1 <= prevEndLineIndex; i_1++) {\r\n                output[i_1].push(prevClassName);\r\n            }\r\n        }\r\n        return output;\r\n    };\r\n    return DedupOverlay;\r\n}(DynamicViewOverlay));\r\nexport { DedupOverlay };\r\nvar GlyphMarginOverlay = /** @class */ (function (_super) {\r\n    __extends(GlyphMarginOverlay, _super);\r\n    function GlyphMarginOverlay(context) {\r\n        var _this = _super.call(this) || this;\r\n        _this._context = context;\r\n        var options = _this._context.configuration.options;\r\n        var layoutInfo = options.get(107 /* layoutInfo */);\r\n        _this._lineHeight = options.get(49 /* lineHeight */);\r\n        _this._glyphMargin = options.get(40 /* glyphMargin */);\r\n        _this._glyphMarginLeft = layoutInfo.glyphMarginLeft;\r\n        _this._glyphMarginWidth = layoutInfo.glyphMarginWidth;\r\n        _this._renderResult = null;\r\n        _this._context.addEventHandler(_this);\r\n        return _this;\r\n    }\r\n    GlyphMarginOverlay.prototype.dispose = function () {\r\n        this._context.removeEventHandler(this);\r\n        this._renderResult = null;\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    // --- begin event handlers\r\n    GlyphMarginOverlay.prototype.onConfigurationChanged = function (e) {\r\n        var options = this._context.configuration.options;\r\n        var layoutInfo = options.get(107 /* layoutInfo */);\r\n        this._lineHeight = options.get(49 /* lineHeight */);\r\n        this._glyphMargin = options.get(40 /* glyphMargin */);\r\n        this._glyphMarginLeft = layoutInfo.glyphMarginLeft;\r\n        this._glyphMarginWidth = layoutInfo.glyphMarginWidth;\r\n        return true;\r\n    };\r\n    GlyphMarginOverlay.prototype.onDecorationsChanged = function (e) {\r\n        return true;\r\n    };\r\n    GlyphMarginOverlay.prototype.onFlushed = function (e) {\r\n        return true;\r\n    };\r\n    GlyphMarginOverlay.prototype.onLinesChanged = function (e) {\r\n        return true;\r\n    };\r\n    GlyphMarginOverlay.prototype.onLinesDeleted = function (e) {\r\n        return true;\r\n    };\r\n    GlyphMarginOverlay.prototype.onLinesInserted = function (e) {\r\n        return true;\r\n    };\r\n    GlyphMarginOverlay.prototype.onScrollChanged = function (e) {\r\n        return e.scrollTopChanged;\r\n    };\r\n    GlyphMarginOverlay.prototype.onZonesChanged = function (e) {\r\n        return true;\r\n    };\r\n    // --- end event handlers\r\n    GlyphMarginOverlay.prototype._getDecorations = function (ctx) {\r\n        var decorations = ctx.getDecorationsInViewport();\r\n        var r = [], rLen = 0;\r\n        for (var i = 0, len = decorations.length; i < len; i++) {\r\n            var d = decorations[i];\r\n            var glyphMarginClassName = d.options.glyphMarginClassName;\r\n            if (glyphMarginClassName) {\r\n                r[rLen++] = new DecorationToRender(d.range.startLineNumber, d.range.endLineNumber, glyphMarginClassName);\r\n            }\r\n        }\r\n        return r;\r\n    };\r\n    GlyphMarginOverlay.prototype.prepareRender = function (ctx) {\r\n        if (!this._glyphMargin) {\r\n            this._renderResult = null;\r\n            return;\r\n        }\r\n        var visibleStartLineNumber = ctx.visibleRange.startLineNumber;\r\n        var visibleEndLineNumber = ctx.visibleRange.endLineNumber;\r\n        var toRender = this._render(visibleStartLineNumber, visibleEndLineNumber, this._getDecorations(ctx));\r\n        var lineHeight = this._lineHeight.toString();\r\n        var left = this._glyphMarginLeft.toString();\r\n        var width = this._glyphMarginWidth.toString();\r\n        var common = '\" style=\"left:' + left + 'px;width:' + width + 'px' + ';height:' + lineHeight + 'px;\"></div>';\r\n        var output = [];\r\n        for (var lineNumber = visibleStartLineNumber; lineNumber <= visibleEndLineNumber; lineNumber++) {\r\n            var lineIndex = lineNumber - visibleStartLineNumber;\r\n            var classNames = toRender[lineIndex];\r\n            if (classNames.length === 0) {\r\n                output[lineIndex] = '';\r\n            }\r\n            else {\r\n                output[lineIndex] = ('<div class=\"cgmr codicon '\r\n                    + classNames.join(' ')\r\n                    + common);\r\n            }\r\n        }\r\n        this._renderResult = output;\r\n    };\r\n    GlyphMarginOverlay.prototype.render = function (startLineNumber, lineNumber) {\r\n        if (!this._renderResult) {\r\n            return '';\r\n        }\r\n        var lineIndex = lineNumber - startLineNumber;\r\n        if (lineIndex < 0 || lineIndex >= this._renderResult.length) {\r\n            return '';\r\n        }\r\n        return this._renderResult[lineIndex];\r\n    };\r\n    return GlyphMarginOverlay;\r\n}(DedupOverlay));\r\nexport { GlyphMarginOverlay };\r\n"]},"metadata":{},"sourceType":"module"}