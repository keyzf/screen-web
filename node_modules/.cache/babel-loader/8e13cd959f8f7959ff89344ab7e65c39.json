{"ast":null,"code":"var _jsxFileName = \"/Users/ifudata/eclipse-workspace/screen-web/src/pages/ScreenEditor/index.js\";\nimport React, { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport '../../static/style/editor.styl';\nimport Header from '../../components/Editor/Header';\nimport SettingPanel from '../../components/Editor/SettingPanel';\nimport LayerPanel from '../../components/Editor/LayerPanel';\nimport ModulesPanel from '../../components/Editor/ModulesPanel';\nimport CanvasPanel from '../../components/Editor/CanvasPanel';\nimport { testScreenData } from '../../data/data';\nimport { screenModule } from '../../data/modules';\nimport { setScreenData } from '../../store/actions/screen-actions';\n\nclass ScreenEditor extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getStatusByProps = () => {\n      //判断图层状态\n      if (this.props.layerPanelShow) {\n        this.layoutStatus.layerPanel = \"status01\";\n      } else {\n        this.layoutStatus.layerPanel = \"status02\";\n      } // 判断组件面板状态\n\n\n      if (this.props.modulesPanelShow && this.props.layerPanelShow) {\n        this.layoutStatus.modulesPanel = \"status02\";\n      } else if (this.props.modulesPanelShow && !this.props.layerPanelShow) {\n        this.layoutStatus.modulesPanel = \"status01\";\n      } else {\n        this.layoutStatus.modulesPanel = \"status03\";\n      } // 判断画布面板的状态\n\n\n      if (!this.props.layerPanelShow && !this.props.modulesPanelShow && !this.props.settingPanelShow) {\n        this.layoutStatus.canvasPanel = \"status01\";\n      } else if (!this.props.layerPanelShow && !this.props.modulesPanelShow && this.props.settingPanelShow) {\n        this.layoutStatus.canvasPanel = \"status02\";\n      } else if (this.props.layerPanelShow && !this.props.modulesPanelShow && !this.props.settingPanelShow) {\n        this.layoutStatus.canvasPanel = \"status03\";\n      } else if (this.props.layerPanelShow && !this.props.modulesPanelShow && this.props.settingPanelShow) {\n        this.layoutStatus.canvasPanel = \"status04\";\n      } else if (!this.props.layerPanelShow && this.props.modulesPanelShow && !this.props.settingPanelShow) {\n        this.layoutStatus.canvasPanel = \"status03\";\n      } else if (!this.props.layerPanelShow && this.props.modulesPanelShow && this.props.settingPanelShow) {\n        this.layoutStatus.canvasPanel = \"status04\";\n      } else if (this.props.layerPanelShow && this.props.modulesPanelShow && !this.props.settingPanelShow) {\n        this.layoutStatus.canvasPanel = \"status05\";\n      } else {\n        this.layoutStatus.canvasPanel = \"status06\";\n      } //判断设置面板状态\n\n\n      if (this.props.settingPanelShow) {\n        this.layoutStatus.settingPanel = \"status01\";\n      } else {\n        this.layoutStatus.settingPanel = \"status02\";\n      }\n    };\n\n    this.layoutStatus = {\n      layerPanel: \"status01\",\n      modulesPanel: \"status02\",\n      canvasPanel: \"status05\",\n      settingPanel: \"status01\",\n      visualistPanel: \"status02\"\n    };\n  }\n\n  componentDidMount() {\n    console.log(this.props.history.location.query);\n    const query = this.props.history.location.query;\n    let curId;\n\n    if (query) {\n      curId = query.id;\n    } else {\n      curId = this.props.screenId;\n    }\n\n    if (curId) {\n      setTimeout(() => {\n        this.props.setScreenData(testScreenData);\n      }, 500);\n    } else {\n      this.props.setScreenData(testScreenData);\n    } // if(this.props.history.location.query){\n    //     console.log(this.props.history.location.query.id)\n    // }\n    // console.log(testScreenData)\n    // this.props.getScreenData(testScreenData)\n    // setTimeout(()=>{\n    //     this.props.getScreenData(testScreenData)\n    // },500)\n\n  } // 判断各个面板的显示状态\n\n\n  render() {\n    this.getStatusByProps();\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"screen-editor-page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(SettingPanel, {\n      status: this.layoutStatus.settingPanel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(LayerPanel, {\n      status: this.layoutStatus.layerPanel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(ModulesPanel, {\n      status: this.layoutStatus.modulesPanel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(CanvasPanel, {\n      status: this.layoutStatus.canvasPanel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    })));\n  }\n\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  const {\n    headerState,\n    editorState\n  } = state;\n  return {\n    layerPanelShow: headerState.get(\"layerPanelShow\"),\n    modulesPanelShow: headerState.get(\"modulesPanelShow\"),\n    visualistPanelShow: headerState.get(\"visualistPanelShow\"),\n    settingPanelShow: headerState.get(\"settingPanelShow\"),\n    screenId: editorState.get(\"screenId\")\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setScreenData(data) {\n      const action = setScreenData(data);\n      dispatch(action);\n    }\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ScreenEditor);","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/src/pages/ScreenEditor/index.js"],"names":["React","Component","Fragment","connect","Header","SettingPanel","LayerPanel","ModulesPanel","CanvasPanel","testScreenData","screenModule","setScreenData","ScreenEditor","constructor","props","getStatusByProps","layerPanelShow","layoutStatus","layerPanel","modulesPanelShow","modulesPanel","settingPanelShow","canvasPanel","settingPanel","visualistPanel","componentDidMount","console","log","history","location","query","curId","id","screenId","setTimeout","render","mapStateToProps","state","ownProps","headerState","editorState","get","visualistPanelShow","mapDispatchToProps","dispatch","data","action"],"mappings":"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","sourcesContent":["import React,{Component,Fragment} from 'react'\nimport { connect } from 'react-redux'\nimport '../../static/style/editor.styl';\nimport Header from '../../components/Editor/Header'\nimport SettingPanel from '../../components/Editor/SettingPanel'\nimport LayerPanel from '../../components/Editor/LayerPanel'\nimport ModulesPanel from '../../components/Editor/ModulesPanel'\nimport CanvasPanel from '../../components/Editor/CanvasPanel'\nimport { testScreenData } from '../../data/data'\nimport { screenModule } from '../../data/modules'\nimport { setScreenData } from '../../store/actions/screen-actions'\nclass ScreenEditor extends Component{\n    constructor(props){\n        super(props)\n        this.layoutStatus = {\n            layerPanel:\"status01\",\n            modulesPanel:\"status02\",\n            canvasPanel:\"status05\",\n            settingPanel:\"status01\",\n            visualistPanel:\"status02\"\n        }\n    }\n    componentDidMount(){\n        console.log(this.props.history.location.query)\n        const query = this.props.history.location.query\n        let curId\n        if(query){\n            curId = query.id\n        }else{\n            curId = this.props.screenId\n        }\n        if(curId){\n            setTimeout(()=>{\n                this.props.setScreenData(testScreenData)\n            },500)\n        }else{\n            this.props.setScreenData(testScreenData)\n        }\n        // if(this.props.history.location.query){\n        //     console.log(this.props.history.location.query.id)\n        // }\n        // console.log(testScreenData)\n        // this.props.getScreenData(testScreenData)\n        // setTimeout(()=>{\n        //     this.props.getScreenData(testScreenData)\n        // },500)\n        \n    }\n    // 判断各个面板的显示状态\n    getStatusByProps = ()=>{\n        //判断图层状态\n        if(this.props.layerPanelShow){\n            this.layoutStatus.layerPanel=\"status01\"\n        }else{\n            this.layoutStatus.layerPanel=\"status02\"\n        }\n\n        // 判断组件面板状态\n        if(this.props.modulesPanelShow&&this.props.layerPanelShow){\n            this.layoutStatus.modulesPanel=\"status02\"\n        }else if(this.props.modulesPanelShow&&!this.props.layerPanelShow){\n            this.layoutStatus.modulesPanel=\"status01\"\n        }else{\n            this.layoutStatus.modulesPanel=\"status03\"\n        }\n\n        // 判断画布面板的状态\n        if(!this.props.layerPanelShow&&!this.props.modulesPanelShow&&!this.props.settingPanelShow){\n            this.layoutStatus.canvasPanel=\"status01\"\n        }else if(!this.props.layerPanelShow&&!this.props.modulesPanelShow&&this.props.settingPanelShow){\n            this.layoutStatus.canvasPanel=\"status02\"\n        }else if(this.props.layerPanelShow&&!this.props.modulesPanelShow&&!this.props.settingPanelShow){\n            this.layoutStatus.canvasPanel=\"status03\"\n        }else if(this.props.layerPanelShow&&!this.props.modulesPanelShow&&this.props.settingPanelShow){\n            this.layoutStatus.canvasPanel=\"status04\"\n        }else if(!this.props.layerPanelShow&&this.props.modulesPanelShow&&!this.props.settingPanelShow){\n            this.layoutStatus.canvasPanel=\"status03\"\n        }else if(!this.props.layerPanelShow&&this.props.modulesPanelShow&&this.props.settingPanelShow){\n            this.layoutStatus.canvasPanel=\"status04\"\n        }else if(this.props.layerPanelShow&&this.props.modulesPanelShow&&!this.props.settingPanelShow){\n            this.layoutStatus.canvasPanel=\"status05\"\n        }else{\n            this.layoutStatus.canvasPanel=\"status06\"\n        }\n\n        //判断设置面板状态\n        if(this.props.settingPanelShow){\n            this.layoutStatus.settingPanel=\"status01\"\n        }else{\n            this.layoutStatus.settingPanel=\"status02\"\n        }\n    }\n    \n    render(){\n        this.getStatusByProps()\n        return(\n            <Fragment>\n                <div className=\"screen-editor-page\">\n                    <Header />\n                    <SettingPanel status={this.layoutStatus.settingPanel} />\n                    <LayerPanel status={this.layoutStatus.layerPanel} />\n                    <ModulesPanel status={this.layoutStatus.modulesPanel} />\n                    <CanvasPanel status={this.layoutStatus.canvasPanel} />\n                </div>\n            </Fragment>\n        )\n    }\n}\nconst mapStateToProps = (state,ownProps)=>{\n    const { headerState,editorState } = state\n    return {\n        layerPanelShow:headerState.get(\"layerPanelShow\"),\n        modulesPanelShow:headerState.get(\"modulesPanelShow\"),\n        visualistPanelShow:headerState.get(\"visualistPanelShow\"),\n        settingPanelShow:headerState.get(\"settingPanelShow\"),\n        screenId:editorState.get(\"screenId\")\n    }\n}\n\nconst mapDispatchToProps = dispatch=>{\n    return {\n        setScreenData(data){\n            const action = setScreenData(data)\n            dispatch(action)\n        }\n    }\n}\nexport default connect(mapStateToProps,mapDispatchToProps)(ScreenEditor);"]},"metadata":{},"sourceType":"module"}