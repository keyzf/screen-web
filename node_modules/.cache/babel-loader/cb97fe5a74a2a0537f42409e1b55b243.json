{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar _a;\n\nvar isWindows;\n\nif (typeof process === 'object') {\n  isWindows = process.platform === 'win32';\n} else if (typeof navigator === 'object') {\n  var userAgent = navigator.userAgent;\n  isWindows = userAgent.indexOf('Windows') >= 0;\n}\n\nfunction isHighSurrogate(charCode) {\n  return 0xD800 <= charCode && charCode <= 0xDBFF;\n}\n\nfunction isLowSurrogate(charCode) {\n  return 0xDC00 <= charCode && charCode <= 0xDFFF;\n}\n\nfunction isLowerAsciiHex(code) {\n  return code >= 97\n  /* a */\n  && code <= 102\n  /* f */\n  ;\n}\n\nfunction isLowerAsciiLetter(code) {\n  return code >= 97\n  /* a */\n  && code <= 122\n  /* z */\n  ;\n}\n\nfunction isUpperAsciiLetter(code) {\n  return code >= 65\n  /* A */\n  && code <= 90\n  /* Z */\n  ;\n}\n\nfunction isAsciiLetter(code) {\n  return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n} //#endregion\n\n\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\n\nfunction _validateUri(ret, _strict) {\n  // scheme, must be set\n  if (!ret.scheme && _strict) {\n    throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n  } // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n  // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n\n\n  if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n    throw new Error('[UriError]: Scheme contains illegal characters.');\n  } // path, http://tools.ietf.org/html/rfc3986#section-3.3\n  // If a URI contains an authority component, then the path component\n  // must either be empty or begin with a slash (\"/\") character.  If a URI\n  // does not contain an authority component, then the path cannot begin\n  // with two slash characters (\"//\").\n\n\n  if (ret.path) {\n    if (ret.authority) {\n      if (!_singleSlashStart.test(ret.path)) {\n        throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n      }\n    } else {\n      if (_doubleSlashStart.test(ret.path)) {\n        throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n      }\n    }\n  }\n} // for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\n\n\nfunction _schemeFix(scheme, _strict) {\n  if (!scheme && !_strict) {\n    return 'file';\n  }\n\n  return scheme;\n} // implements a bit of https://tools.ietf.org/html/rfc3986#section-5\n\n\nfunction _referenceResolution(scheme, path) {\n  // the slash-character is our 'default base' as we don't\n  // support constructing URIs relative to other URIs. This\n  // also means that we alter and potentially break paths.\n  // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n  switch (scheme) {\n    case 'https':\n    case 'http':\n    case 'file':\n      if (!path) {\n        path = _slash;\n      } else if (path[0] !== _slash) {\n        path = _slash + path;\n      }\n\n      break;\n  }\n\n  return path;\n}\n\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n */\n\nvar URI =\n/** @class */\nfunction () {\n  /**\n   * @internal\n   */\n  function URI(schemeOrData, authority, path, query, fragment, _strict) {\n    if (_strict === void 0) {\n      _strict = false;\n    }\n\n    if (typeof schemeOrData === 'object') {\n      this.scheme = schemeOrData.scheme || _empty;\n      this.authority = schemeOrData.authority || _empty;\n      this.path = schemeOrData.path || _empty;\n      this.query = schemeOrData.query || _empty;\n      this.fragment = schemeOrData.fragment || _empty; // no validation because it's this URI\n      // that creates uri components.\n      // _validateUri(this);\n    } else {\n      this.scheme = _schemeFix(schemeOrData, _strict);\n      this.authority = authority || _empty;\n      this.path = _referenceResolution(this.scheme, path || _empty);\n      this.query = query || _empty;\n      this.fragment = fragment || _empty;\n\n      _validateUri(this, _strict);\n    }\n  }\n\n  URI.isUri = function (thing) {\n    if (thing instanceof URI) {\n      return true;\n    }\n\n    if (!thing) {\n      return false;\n    }\n\n    return typeof thing.authority === 'string' && typeof thing.fragment === 'string' && typeof thing.path === 'string' && typeof thing.query === 'string' && typeof thing.scheme === 'string' && typeof thing.fsPath === 'function' && typeof thing.with === 'function' && typeof thing.toString === 'function';\n  };\n\n  Object.defineProperty(URI.prototype, \"fsPath\", {\n    // ---- filesystem path -----------------------\n\n    /**\n     * Returns a string representing the corresponding file system path of this URI.\n     * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n     * platform specific path separator.\n     *\n     * * Will *not* validate the path for invalid characters and semantics.\n     * * Will *not* look at the scheme of this URI.\n     * * The result shall *not* be used for display purposes but for accessing a file on disk.\n     *\n     *\n     * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n     * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n     *\n     * ```ts\n        const u = URI.parse('file://server/c$/folder/file.txt')\n        u.authority === 'server'\n        u.path === '/shares/c$/file.txt'\n        u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n    ```\n     *\n     * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n     * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n     * with URIs that represent files on disk (`file` scheme).\n     */\n    get: function () {\n      // if (this.scheme !== 'file') {\n      // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n      // }\n      return _makeFsPath(this);\n    },\n    enumerable: true,\n    configurable: true\n  }); // ---- modify to new -------------------------\n\n  URI.prototype.with = function (change) {\n    if (!change) {\n      return this;\n    }\n\n    var scheme = change.scheme,\n        authority = change.authority,\n        path = change.path,\n        query = change.query,\n        fragment = change.fragment;\n\n    if (scheme === undefined) {\n      scheme = this.scheme;\n    } else if (scheme === null) {\n      scheme = _empty;\n    }\n\n    if (authority === undefined) {\n      authority = this.authority;\n    } else if (authority === null) {\n      authority = _empty;\n    }\n\n    if (path === undefined) {\n      path = this.path;\n    } else if (path === null) {\n      path = _empty;\n    }\n\n    if (query === undefined) {\n      query = this.query;\n    } else if (query === null) {\n      query = _empty;\n    }\n\n    if (fragment === undefined) {\n      fragment = this.fragment;\n    } else if (fragment === null) {\n      fragment = _empty;\n    }\n\n    if (scheme === this.scheme && authority === this.authority && path === this.path && query === this.query && fragment === this.fragment) {\n      return this;\n    }\n\n    return new _URI(scheme, authority, path, query, fragment);\n  }; // ---- parse & validate ------------------------\n\n  /**\n   * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n   * `file:///usr/home`, or `scheme:with/path`.\n   *\n   * @param value A string which represents an URI (see `URI#toString`).\n   */\n\n\n  URI.parse = function (value, _strict) {\n    if (_strict === void 0) {\n      _strict = false;\n    }\n\n    var match = _regexp.exec(value);\n\n    if (!match) {\n      return new _URI(_empty, _empty, _empty, _empty, _empty);\n    }\n\n    return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty), _strict);\n  };\n  /**\n   * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n   * `/usr/home`, or `\\\\server\\share\\some\\path`.\n   *\n   * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n   * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n   * `URI.parse('file://' + path)` because the path might contain characters that are\n   * interpreted (# and ?). See the following sample:\n   * ```ts\n  const good = URI.file('/coding/c#/project1');\n  good.scheme === 'file';\n  good.path === '/coding/c#/project1';\n  good.fragment === '';\n  const bad = URI.parse('file://' + '/coding/c#/project1');\n  bad.scheme === 'file';\n  bad.path === '/coding/c'; // path is now broken\n  bad.fragment === '/project1';\n  ```\n   *\n   * @param path A file system path (see `URI#fsPath`)\n   */\n\n\n  URI.file = function (path) {\n    var authority = _empty; // normalize to fwd-slashes on windows,\n    // on other systems bwd-slashes are valid\n    // filename character, eg /f\\oo/ba\\r.txt\n\n    if (isWindows) {\n      path = path.replace(/\\\\/g, _slash);\n    } // check for authority as used in UNC shares\n    // or use the path as given\n\n\n    if (path[0] === _slash && path[1] === _slash) {\n      var idx = path.indexOf(_slash, 2);\n\n      if (idx === -1) {\n        authority = path.substring(2);\n        path = _slash;\n      } else {\n        authority = path.substring(2, idx);\n        path = path.substring(idx) || _slash;\n      }\n    }\n\n    return new _URI('file', authority, path, _empty, _empty);\n  };\n\n  URI.from = function (components) {\n    return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n  }; // ---- printing/externalize ---------------------------\n\n  /**\n   * Creates a string representation for this URI. It's guaranteed that calling\n   * `URI.parse` with the result of this function creates an URI which is equal\n   * to this URI.\n   *\n   * * The result shall *not* be used for display purposes but for externalization or transport.\n   * * The result will be encoded using the percentage encoding and encoding happens mostly\n   * ignore the scheme-specific encoding rules.\n   *\n   * @param skipEncoding Do not encode the result, default is `false`\n   */\n\n\n  URI.prototype.toString = function (skipEncoding) {\n    if (skipEncoding === void 0) {\n      skipEncoding = false;\n    }\n\n    return _asFormatted(this, skipEncoding);\n  };\n\n  URI.prototype.toJSON = function () {\n    return this;\n  };\n\n  URI.revive = function (data) {\n    if (!data) {\n      return data;\n    } else if (data instanceof URI) {\n      return data;\n    } else {\n      var result = new _URI(data);\n      result._formatted = data.external;\n      result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n      return result;\n    }\n  };\n\n  return URI;\n}();\n\nexport { URI };\n\nvar _pathSepMarker = isWindows ? 1 : undefined; // tslint:disable-next-line:class-name\n\n\nvar _URI =\n/** @class */\nfunction (_super) {\n  __extends(_URI, _super);\n\n  function _URI() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._formatted = null;\n    _this._fsPath = null;\n    return _this;\n  }\n\n  Object.defineProperty(_URI.prototype, \"fsPath\", {\n    get: function () {\n      if (!this._fsPath) {\n        this._fsPath = _makeFsPath(this);\n      }\n\n      return this._fsPath;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  _URI.prototype.toString = function (skipEncoding) {\n    if (skipEncoding === void 0) {\n      skipEncoding = false;\n    }\n\n    if (!skipEncoding) {\n      if (!this._formatted) {\n        this._formatted = _asFormatted(this, false);\n      }\n\n      return this._formatted;\n    } else {\n      // we don't cache that\n      return _asFormatted(this, true);\n    }\n  };\n\n  _URI.prototype.toJSON = function () {\n    var res = {\n      $mid: 1\n    }; // cached state\n\n    if (this._fsPath) {\n      res.fsPath = this._fsPath;\n      res._sep = _pathSepMarker;\n    }\n\n    if (this._formatted) {\n      res.external = this._formatted;\n    } // uri components\n\n\n    if (this.path) {\n      res.path = this.path;\n    }\n\n    if (this.scheme) {\n      res.scheme = this.scheme;\n    }\n\n    if (this.authority) {\n      res.authority = this.authority;\n    }\n\n    if (this.query) {\n      res.query = this.query;\n    }\n\n    if (this.fragment) {\n      res.fragment = this.fragment;\n    }\n\n    return res;\n  };\n\n  return _URI;\n}(URI); // reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\n\n\nvar encodeTable = (_a = {}, _a[58\n/* Colon */\n] = '%3A', _a[47\n/* Slash */\n] = '%2F', _a[63\n/* QuestionMark */\n] = '%3F', _a[35\n/* Hash */\n] = '%23', _a[91\n/* OpenSquareBracket */\n] = '%5B', _a[93\n/* CloseSquareBracket */\n] = '%5D', _a[64\n/* AtSign */\n] = '%40', _a[33\n/* ExclamationMark */\n] = '%21', _a[36\n/* DollarSign */\n] = '%24', _a[38\n/* Ampersand */\n] = '%26', _a[39\n/* SingleQuote */\n] = '%27', _a[40\n/* OpenParen */\n] = '%28', _a[41\n/* CloseParen */\n] = '%29', _a[42\n/* Asterisk */\n] = '%2A', _a[43\n/* Plus */\n] = '%2B', _a[44\n/* Comma */\n] = '%2C', _a[59\n/* Semicolon */\n] = '%3B', _a[61\n/* Equals */\n] = '%3D', _a[32\n/* Space */\n] = '%20', _a);\n\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n  var res = undefined;\n  var nativeEncodePos = -1;\n\n  for (var pos = 0; pos < uriComponent.length; pos++) {\n    var code = uriComponent.charCodeAt(pos); // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n\n    if (code >= 97\n    /* a */\n    && code <= 122\n    /* z */\n    || code >= 65\n    /* A */\n    && code <= 90\n    /* Z */\n    || code >= 48\n    /* Digit0 */\n    && code <= 57\n    /* Digit9 */\n    || code === 45\n    /* Dash */\n    || code === 46\n    /* Period */\n    || code === 95\n    /* Underline */\n    || code === 126\n    /* Tilde */\n    || allowSlash && code === 47\n    /* Slash */\n    ) {\n      // check if we are delaying native encode\n      if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n        nativeEncodePos = -1;\n      } // check if we write into a new string (by default we try to return the param)\n\n\n      if (res !== undefined) {\n        res += uriComponent.charAt(pos);\n      }\n    } else {\n      // encoding needed, we need to allocate a new string\n      if (res === undefined) {\n        res = uriComponent.substr(0, pos);\n      } // check with default table first\n\n\n      var escaped = encodeTable[code];\n\n      if (escaped !== undefined) {\n        // check if we are delaying native encode\n        if (nativeEncodePos !== -1) {\n          res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n          nativeEncodePos = -1;\n        } // append escaped variant to result\n\n\n        res += escaped;\n      } else if (nativeEncodePos === -1) {\n        // use native encode only when needed\n        nativeEncodePos = pos;\n      }\n    }\n  }\n\n  if (nativeEncodePos !== -1) {\n    res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n  }\n\n  return res !== undefined ? res : uriComponent;\n}\n\nfunction encodeURIComponentMinimal(path) {\n  var res = undefined;\n\n  for (var pos = 0; pos < path.length; pos++) {\n    var code = path.charCodeAt(pos);\n\n    if (code === 35\n    /* Hash */\n    || code === 63\n    /* QuestionMark */\n    ) {\n        if (res === undefined) {\n          res = path.substr(0, pos);\n        }\n\n        res += encodeTable[code];\n      } else {\n      if (res !== undefined) {\n        res += path[pos];\n      }\n    }\n  }\n\n  return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\n\n\nfunction _makeFsPath(uri) {\n  var value;\n\n  if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n    // unc path: file://shares/c$/far/boo\n    value = \"//\" + uri.authority + uri.path;\n  } else if (uri.path.charCodeAt(0) === 47\n  /* Slash */\n  && (uri.path.charCodeAt(1) >= 65\n  /* A */\n  && uri.path.charCodeAt(1) <= 90\n  /* Z */\n  || uri.path.charCodeAt(1) >= 97\n  /* a */\n  && uri.path.charCodeAt(1) <= 122\n  /* z */\n  ) && uri.path.charCodeAt(2) === 58\n  /* Colon */\n  ) {\n      // windows drive letter: file:///c:/far/boo\n      value = uri.path[1].toLowerCase() + uri.path.substr(2);\n    } else {\n    // other path\n    value = uri.path;\n  }\n\n  if (isWindows) {\n    value = value.replace(/\\//g, '\\\\');\n  }\n\n  return value;\n}\n/**\n * Create the external version of a uri\n */\n\n\nfunction _asFormatted(uri, skipEncoding) {\n  var encoder = !skipEncoding ? encodeURIComponentFast : encodeURIComponentMinimal;\n  var res = '';\n  var scheme = uri.scheme,\n      authority = uri.authority,\n      path = uri.path,\n      query = uri.query,\n      fragment = uri.fragment;\n\n  if (scheme) {\n    res += scheme;\n    res += ':';\n  }\n\n  if (authority || scheme === 'file') {\n    res += _slash;\n    res += _slash;\n  }\n\n  if (authority) {\n    var idx = authority.indexOf('@');\n\n    if (idx !== -1) {\n      // <user>@<auth>\n      var userinfo = authority.substr(0, idx);\n      authority = authority.substr(idx + 1);\n      idx = userinfo.indexOf(':');\n\n      if (idx === -1) {\n        res += encoder(userinfo, false);\n      } else {\n        // <user>:<pass>@<auth>\n        res += encoder(userinfo.substr(0, idx), false);\n        res += ':';\n        res += encoder(userinfo.substr(idx + 1), false);\n      }\n\n      res += '@';\n    }\n\n    authority = authority.toLowerCase();\n    idx = authority.indexOf(':');\n\n    if (idx === -1) {\n      res += encoder(authority, false);\n    } else {\n      // <auth>:<port>\n      res += encoder(authority.substr(0, idx), false);\n      res += authority.substr(idx);\n    }\n  }\n\n  if (path) {\n    // lower-case windows drive letters in /C:/fff or C:/fff\n    if (path.length >= 3 && path.charCodeAt(0) === 47\n    /* Slash */\n    && path.charCodeAt(2) === 58\n    /* Colon */\n    ) {\n        var code = path.charCodeAt(1);\n\n        if (code >= 65\n        /* A */\n        && code <= 90\n        /* Z */\n        ) {\n            path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n          }\n      } else if (path.length >= 2 && path.charCodeAt(1) === 58\n    /* Colon */\n    ) {\n        var code = path.charCodeAt(0);\n\n        if (code >= 65\n        /* A */\n        && code <= 90\n        /* Z */\n        ) {\n            path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n          }\n      } // encode the rest of the path\n\n\n    res += encoder(path, true);\n  }\n\n  if (query) {\n    res += '?';\n    res += encoder(query, false);\n  }\n\n  if (fragment) {\n    res += '#';\n    res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n  }\n\n  return res;\n}","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/language/json/_deps/vscode-uri/index.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","_a","isWindows","process","platform","navigator","userAgent","indexOf","isHighSurrogate","charCode","isLowSurrogate","isLowerAsciiHex","code","isLowerAsciiLetter","isUpperAsciiLetter","isAsciiLetter","_schemePattern","_singleSlashStart","_doubleSlashStart","_validateUri","ret","_strict","scheme","Error","authority","path","query","fragment","test","_schemeFix","_referenceResolution","_slash","_empty","_regexp","URI","schemeOrData","isUri","thing","fsPath","with","toString","defineProperty","get","_makeFsPath","enumerable","configurable","change","undefined","_URI","parse","value","match","exec","decodeURIComponent","file","replace","idx","substring","from","components","skipEncoding","_asFormatted","toJSON","revive","data","result","_formatted","external","_fsPath","_sep","_pathSepMarker","_super","_this","apply","arguments","res","$mid","encodeTable","encodeURIComponentFast","uriComponent","allowSlash","nativeEncodePos","pos","length","charCodeAt","encodeURIComponent","charAt","substr","escaped","encodeURIComponentMinimal","uri","toLowerCase","encoder","userinfo","String","fromCharCode"],"mappings":"AAAA;;;;AAIA;;AACA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAF9E;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C;;AAaA,IAAII,EAAJ;;AACA,IAAIC,SAAJ;;AACA,IAAI,OAAOC,OAAP,KAAmB,QAAvB,EAAiC;AAC7BD,EAAAA,SAAS,GAAGC,OAAO,CAACC,QAAR,KAAqB,OAAjC;AACH,CAFD,MAGK,IAAI,OAAOC,SAAP,KAAqB,QAAzB,EAAmC;AACpC,MAAIC,SAAS,GAAGD,SAAS,CAACC,SAA1B;AACAJ,EAAAA,SAAS,GAAGI,SAAS,CAACC,OAAV,CAAkB,SAAlB,KAAgC,CAA5C;AACH;;AACD,SAASC,eAAT,CAAyBC,QAAzB,EAAmC;AAC/B,SAAQ,UAAUA,QAAV,IAAsBA,QAAQ,IAAI,MAA1C;AACH;;AACD,SAASC,cAAT,CAAwBD,QAAxB,EAAkC;AAC9B,SAAQ,UAAUA,QAAV,IAAsBA,QAAQ,IAAI,MAA1C;AACH;;AACD,SAASE,eAAT,CAAyBC,IAAzB,EAA+B;AAC3B,SAAOA,IAAI,IAAI;AAAG;AAAX,KAAsBA,IAAI,IAAI;AAAI;AAAzC;AACH;;AACD,SAASC,kBAAT,CAA4BD,IAA5B,EAAkC;AAC9B,SAAOA,IAAI,IAAI;AAAG;AAAX,KAAsBA,IAAI,IAAI;AAAI;AAAzC;AACH;;AACD,SAASE,kBAAT,CAA4BF,IAA5B,EAAkC;AAC9B,SAAOA,IAAI,IAAI;AAAG;AAAX,KAAsBA,IAAI,IAAI;AAAG;AAAxC;AACH;;AACD,SAASG,aAAT,CAAuBH,IAAvB,EAA6B;AACzB,SAAOC,kBAAkB,CAACD,IAAD,CAAlB,IAA4BE,kBAAkB,CAACF,IAAD,CAArD;AACH,C,CACD;;;AACA,IAAII,cAAc,GAAG,gBAArB;AACA,IAAIC,iBAAiB,GAAG,KAAxB;AACA,IAAIC,iBAAiB,GAAG,OAAxB;;AACA,SAASC,YAAT,CAAsBC,GAAtB,EAA2BC,OAA3B,EAAoC;AAChC;AACA,MAAI,CAACD,GAAG,CAACE,MAAL,IAAeD,OAAnB,EAA4B;AACxB,UAAM,IAAIE,KAAJ,CAAU,gEAAgEH,GAAG,CAACI,SAApE,GAAgF,cAAhF,GAAiGJ,GAAG,CAACK,IAArG,GAA4G,eAA5G,GAA8HL,GAAG,CAACM,KAAlI,GAA0I,kBAA1I,GAA+JN,GAAG,CAACO,QAAnK,GAA8K,KAAxL,CAAN;AACH,GAJ+B,CAKhC;AACA;;;AACA,MAAIP,GAAG,CAACE,MAAJ,IAAc,CAACN,cAAc,CAACY,IAAf,CAAoBR,GAAG,CAACE,MAAxB,CAAnB,EAAoD;AAChD,UAAM,IAAIC,KAAJ,CAAU,iDAAV,CAAN;AACH,GAT+B,CAUhC;AACA;AACA;AACA;AACA;;;AACA,MAAIH,GAAG,CAACK,IAAR,EAAc;AACV,QAAIL,GAAG,CAACI,SAAR,EAAmB;AACf,UAAI,CAACP,iBAAiB,CAACW,IAAlB,CAAuBR,GAAG,CAACK,IAA3B,CAAL,EAAuC;AACnC,cAAM,IAAIF,KAAJ,CAAU,0IAAV,CAAN;AACH;AACJ,KAJD,MAKK;AACD,UAAIL,iBAAiB,CAACU,IAAlB,CAAuBR,GAAG,CAACK,IAA3B,CAAJ,EAAsC;AAClC,cAAM,IAAIF,KAAJ,CAAU,2HAAV,CAAN;AACH;AACJ;AACJ;AACJ,C,CACD;AACA;AACA;AACA;;;AACA,SAASM,UAAT,CAAoBP,MAApB,EAA4BD,OAA5B,EAAqC;AACjC,MAAI,CAACC,MAAD,IAAW,CAACD,OAAhB,EAAyB;AACrB,WAAO,MAAP;AACH;;AACD,SAAOC,MAAP;AACH,C,CACD;;;AACA,SAASQ,oBAAT,CAA8BR,MAA9B,EAAsCG,IAAtC,EAA4C;AACxC;AACA;AACA;AACA;AACA,UAAQH,MAAR;AACI,SAAK,OAAL;AACA,SAAK,MAAL;AACA,SAAK,MAAL;AACI,UAAI,CAACG,IAAL,EAAW;AACPA,QAAAA,IAAI,GAAGM,MAAP;AACH,OAFD,MAGK,IAAIN,IAAI,CAAC,CAAD,CAAJ,KAAYM,MAAhB,EAAwB;AACzBN,QAAAA,IAAI,GAAGM,MAAM,GAAGN,IAAhB;AACH;;AACD;AAVR;;AAYA,SAAOA,IAAP;AACH;;AACD,IAAIO,MAAM,GAAG,EAAb;AACA,IAAID,MAAM,GAAG,GAAb;AACA,IAAIE,OAAO,GAAG,8DAAd;AACA;;;;;;;;;;;;;;;AAcA,IAAIC,GAAG;AAAG;AAAe,YAAY;AACjC;;;AAGA,WAASA,GAAT,CAAaC,YAAb,EAA2BX,SAA3B,EAAsCC,IAAtC,EAA4CC,KAA5C,EAAmDC,QAAnD,EAA6DN,OAA7D,EAAsE;AAClE,QAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,MAAAA,OAAO,GAAG,KAAV;AAAkB;;AAC5C,QAAI,OAAOc,YAAP,KAAwB,QAA5B,EAAsC;AAClC,WAAKb,MAAL,GAAca,YAAY,CAACb,MAAb,IAAuBU,MAArC;AACA,WAAKR,SAAL,GAAiBW,YAAY,CAACX,SAAb,IAA0BQ,MAA3C;AACA,WAAKP,IAAL,GAAYU,YAAY,CAACV,IAAb,IAAqBO,MAAjC;AACA,WAAKN,KAAL,GAAaS,YAAY,CAACT,KAAb,IAAsBM,MAAnC;AACA,WAAKL,QAAL,GAAgBQ,YAAY,CAACR,QAAb,IAAyBK,MAAzC,CALkC,CAMlC;AACA;AACA;AACH,KATD,MAUK;AACD,WAAKV,MAAL,GAAcO,UAAU,CAACM,YAAD,EAAed,OAAf,CAAxB;AACA,WAAKG,SAAL,GAAiBA,SAAS,IAAIQ,MAA9B;AACA,WAAKP,IAAL,GAAYK,oBAAoB,CAAC,KAAKR,MAAN,EAAcG,IAAI,IAAIO,MAAtB,CAAhC;AACA,WAAKN,KAAL,GAAaA,KAAK,IAAIM,MAAtB;AACA,WAAKL,QAAL,GAAgBA,QAAQ,IAAIK,MAA5B;;AACAb,MAAAA,YAAY,CAAC,IAAD,EAAOE,OAAP,CAAZ;AACH;AACJ;;AACDa,EAAAA,GAAG,CAACE,KAAJ,GAAY,UAAUC,KAAV,EAAiB;AACzB,QAAIA,KAAK,YAAYH,GAArB,EAA0B;AACtB,aAAO,IAAP;AACH;;AACD,QAAI,CAACG,KAAL,EAAY;AACR,aAAO,KAAP;AACH;;AACD,WAAO,OAAOA,KAAK,CAACb,SAAb,KAA2B,QAA3B,IACA,OAAOa,KAAK,CAACV,QAAb,KAA0B,QAD1B,IAEA,OAAOU,KAAK,CAACZ,IAAb,KAAsB,QAFtB,IAGA,OAAOY,KAAK,CAACX,KAAb,KAAuB,QAHvB,IAIA,OAAOW,KAAK,CAACf,MAAb,KAAwB,QAJxB,IAKA,OAAOe,KAAK,CAACC,MAAb,KAAwB,UALxB,IAMA,OAAOD,KAAK,CAACE,IAAb,KAAsB,UANtB,IAOA,OAAOF,KAAK,CAACG,QAAb,KAA0B,UAPjC;AAQH,GAfD;;AAgBAjD,EAAAA,MAAM,CAACkD,cAAP,CAAsBP,GAAG,CAACnC,SAA1B,EAAqC,QAArC,EAA+C;AAC3C;;AACA;;;;;;;;;;;;;;;;;;;;;;;;AAwBA2C,IAAAA,GAAG,EAAE,YAAY;AACb;AACA;AACA;AACA,aAAOC,WAAW,CAAC,IAAD,CAAlB;AACH,KA/B0C;AAgC3CC,IAAAA,UAAU,EAAE,IAhC+B;AAiC3CC,IAAAA,YAAY,EAAE;AAjC6B,GAA/C,EAzCiC,CA4EjC;;AACAX,EAAAA,GAAG,CAACnC,SAAJ,CAAcwC,IAAd,GAAqB,UAAUO,MAAV,EAAkB;AACnC,QAAI,CAACA,MAAL,EAAa;AACT,aAAO,IAAP;AACH;;AACD,QAAIxB,MAAM,GAAGwB,MAAM,CAACxB,MAApB;AAAA,QAA4BE,SAAS,GAAGsB,MAAM,CAACtB,SAA/C;AAAA,QAA0DC,IAAI,GAAGqB,MAAM,CAACrB,IAAxE;AAAA,QAA8EC,KAAK,GAAGoB,MAAM,CAACpB,KAA7F;AAAA,QAAoGC,QAAQ,GAAGmB,MAAM,CAACnB,QAAtH;;AACA,QAAIL,MAAM,KAAKyB,SAAf,EAA0B;AACtBzB,MAAAA,MAAM,GAAG,KAAKA,MAAd;AACH,KAFD,MAGK,IAAIA,MAAM,KAAK,IAAf,EAAqB;AACtBA,MAAAA,MAAM,GAAGU,MAAT;AACH;;AACD,QAAIR,SAAS,KAAKuB,SAAlB,EAA6B;AACzBvB,MAAAA,SAAS,GAAG,KAAKA,SAAjB;AACH,KAFD,MAGK,IAAIA,SAAS,KAAK,IAAlB,EAAwB;AACzBA,MAAAA,SAAS,GAAGQ,MAAZ;AACH;;AACD,QAAIP,IAAI,KAAKsB,SAAb,EAAwB;AACpBtB,MAAAA,IAAI,GAAG,KAAKA,IAAZ;AACH,KAFD,MAGK,IAAIA,IAAI,KAAK,IAAb,EAAmB;AACpBA,MAAAA,IAAI,GAAGO,MAAP;AACH;;AACD,QAAIN,KAAK,KAAKqB,SAAd,EAAyB;AACrBrB,MAAAA,KAAK,GAAG,KAAKA,KAAb;AACH,KAFD,MAGK,IAAIA,KAAK,KAAK,IAAd,EAAoB;AACrBA,MAAAA,KAAK,GAAGM,MAAR;AACH;;AACD,QAAIL,QAAQ,KAAKoB,SAAjB,EAA4B;AACxBpB,MAAAA,QAAQ,GAAG,KAAKA,QAAhB;AACH,KAFD,MAGK,IAAIA,QAAQ,KAAK,IAAjB,EAAuB;AACxBA,MAAAA,QAAQ,GAAGK,MAAX;AACH;;AACD,QAAIV,MAAM,KAAK,KAAKA,MAAhB,IACGE,SAAS,KAAK,KAAKA,SADtB,IAEGC,IAAI,KAAK,KAAKA,IAFjB,IAGGC,KAAK,KAAK,KAAKA,KAHlB,IAIGC,QAAQ,KAAK,KAAKA,QAJzB,EAImC;AAC/B,aAAO,IAAP;AACH;;AACD,WAAO,IAAIqB,IAAJ,CAAS1B,MAAT,EAAiBE,SAAjB,EAA4BC,IAA5B,EAAkCC,KAAlC,EAAyCC,QAAzC,CAAP;AACH,GA3CD,CA7EiC,CAyHjC;;AACA;;;;;;;;AAMAO,EAAAA,GAAG,CAACe,KAAJ,GAAY,UAAUC,KAAV,EAAiB7B,OAAjB,EAA0B;AAClC,QAAIA,OAAO,KAAK,KAAK,CAArB,EAAwB;AAAEA,MAAAA,OAAO,GAAG,KAAV;AAAkB;;AAC5C,QAAI8B,KAAK,GAAGlB,OAAO,CAACmB,IAAR,CAAaF,KAAb,CAAZ;;AACA,QAAI,CAACC,KAAL,EAAY;AACR,aAAO,IAAIH,IAAJ,CAAShB,MAAT,EAAiBA,MAAjB,EAAyBA,MAAzB,EAAiCA,MAAjC,EAAyCA,MAAzC,CAAP;AACH;;AACD,WAAO,IAAIgB,IAAJ,CAASG,KAAK,CAAC,CAAD,CAAL,IAAYnB,MAArB,EAA6BqB,kBAAkB,CAACF,KAAK,CAAC,CAAD,CAAL,IAAYnB,MAAb,CAA/C,EAAqEqB,kBAAkB,CAACF,KAAK,CAAC,CAAD,CAAL,IAAYnB,MAAb,CAAvF,EAA6GqB,kBAAkB,CAACF,KAAK,CAAC,CAAD,CAAL,IAAYnB,MAAb,CAA/H,EAAqJqB,kBAAkB,CAACF,KAAK,CAAC,CAAD,CAAL,IAAYnB,MAAb,CAAvK,EAA6LX,OAA7L,CAAP;AACH,GAPD;AAQA;;;;;;;;;;;;;;;;;;;;;;;AAqBAa,EAAAA,GAAG,CAACoB,IAAJ,GAAW,UAAU7B,IAAV,EAAgB;AACvB,QAAID,SAAS,GAAGQ,MAAhB,CADuB,CAEvB;AACA;AACA;;AACA,QAAI9B,SAAJ,EAAe;AACXuB,MAAAA,IAAI,GAAGA,IAAI,CAAC8B,OAAL,CAAa,KAAb,EAAoBxB,MAApB,CAAP;AACH,KAPsB,CAQvB;AACA;;;AACA,QAAIN,IAAI,CAAC,CAAD,CAAJ,KAAYM,MAAZ,IAAsBN,IAAI,CAAC,CAAD,CAAJ,KAAYM,MAAtC,EAA8C;AAC1C,UAAIyB,GAAG,GAAG/B,IAAI,CAAClB,OAAL,CAAawB,MAAb,EAAqB,CAArB,CAAV;;AACA,UAAIyB,GAAG,KAAK,CAAC,CAAb,EAAgB;AACZhC,QAAAA,SAAS,GAAGC,IAAI,CAACgC,SAAL,CAAe,CAAf,CAAZ;AACAhC,QAAAA,IAAI,GAAGM,MAAP;AACH,OAHD,MAIK;AACDP,QAAAA,SAAS,GAAGC,IAAI,CAACgC,SAAL,CAAe,CAAf,EAAkBD,GAAlB,CAAZ;AACA/B,QAAAA,IAAI,GAAGA,IAAI,CAACgC,SAAL,CAAeD,GAAf,KAAuBzB,MAA9B;AACH;AACJ;;AACD,WAAO,IAAIiB,IAAJ,CAAS,MAAT,EAAiBxB,SAAjB,EAA4BC,IAA5B,EAAkCO,MAAlC,EAA0CA,MAA1C,CAAP;AACH,GAtBD;;AAuBAE,EAAAA,GAAG,CAACwB,IAAJ,GAAW,UAAUC,UAAV,EAAsB;AAC7B,WAAO,IAAIX,IAAJ,CAASW,UAAU,CAACrC,MAApB,EAA4BqC,UAAU,CAACnC,SAAvC,EAAkDmC,UAAU,CAAClC,IAA7D,EAAmEkC,UAAU,CAACjC,KAA9E,EAAqFiC,UAAU,CAAChC,QAAhG,CAAP;AACH,GAFD,CApLiC,CAuLjC;;AACA;;;;;;;;;;;;;AAWAO,EAAAA,GAAG,CAACnC,SAAJ,CAAcyC,QAAd,GAAyB,UAAUoB,YAAV,EAAwB;AAC7C,QAAIA,YAAY,KAAK,KAAK,CAA1B,EAA6B;AAAEA,MAAAA,YAAY,GAAG,KAAf;AAAuB;;AACtD,WAAOC,YAAY,CAAC,IAAD,EAAOD,YAAP,CAAnB;AACH,GAHD;;AAIA1B,EAAAA,GAAG,CAACnC,SAAJ,CAAc+D,MAAd,GAAuB,YAAY;AAC/B,WAAO,IAAP;AACH,GAFD;;AAGA5B,EAAAA,GAAG,CAAC6B,MAAJ,GAAa,UAAUC,IAAV,EAAgB;AACzB,QAAI,CAACA,IAAL,EAAW;AACP,aAAOA,IAAP;AACH,KAFD,MAGK,IAAIA,IAAI,YAAY9B,GAApB,EAAyB;AAC1B,aAAO8B,IAAP;AACH,KAFI,MAGA;AACD,UAAIC,MAAM,GAAG,IAAIjB,IAAJ,CAASgB,IAAT,CAAb;AACAC,MAAAA,MAAM,CAACC,UAAP,GAAoBF,IAAI,CAACG,QAAzB;AACAF,MAAAA,MAAM,CAACG,OAAP,GAAiBJ,IAAI,CAACK,IAAL,KAAcC,cAAd,GAA+BN,IAAI,CAAC1B,MAApC,GAA6C,IAA9D;AACA,aAAO2B,MAAP;AACH;AACJ,GAbD;;AAcA,SAAO/B,GAAP;AACH,CAzNwB,EAAzB;;AA0NA,SAASA,GAAT;;AACA,IAAIoC,cAAc,GAAGpE,SAAS,GAAG,CAAH,GAAO6C,SAArC,C,CACA;;;AACA,IAAIC,IAAI;AAAG;AAAe,UAAUuB,MAAV,EAAkB;AACxCpF,EAAAA,SAAS,CAAC6D,IAAD,EAAOuB,MAAP,CAAT;;AACA,WAASvB,IAAT,GAAgB;AACZ,QAAIwB,KAAK,GAAGD,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;;AACAF,IAAAA,KAAK,CAACN,UAAN,GAAmB,IAAnB;AACAM,IAAAA,KAAK,CAACJ,OAAN,GAAgB,IAAhB;AACA,WAAOI,KAAP;AACH;;AACDjF,EAAAA,MAAM,CAACkD,cAAP,CAAsBO,IAAI,CAACjD,SAA3B,EAAsC,QAAtC,EAAgD;AAC5C2C,IAAAA,GAAG,EAAE,YAAY;AACb,UAAI,CAAC,KAAK0B,OAAV,EAAmB;AACf,aAAKA,OAAL,GAAezB,WAAW,CAAC,IAAD,CAA1B;AACH;;AACD,aAAO,KAAKyB,OAAZ;AACH,KAN2C;AAO5CxB,IAAAA,UAAU,EAAE,IAPgC;AAQ5CC,IAAAA,YAAY,EAAE;AAR8B,GAAhD;;AAUAG,EAAAA,IAAI,CAACjD,SAAL,CAAeyC,QAAf,GAA0B,UAAUoB,YAAV,EAAwB;AAC9C,QAAIA,YAAY,KAAK,KAAK,CAA1B,EAA6B;AAAEA,MAAAA,YAAY,GAAG,KAAf;AAAuB;;AACtD,QAAI,CAACA,YAAL,EAAmB;AACf,UAAI,CAAC,KAAKM,UAAV,EAAsB;AAClB,aAAKA,UAAL,GAAkBL,YAAY,CAAC,IAAD,EAAO,KAAP,CAA9B;AACH;;AACD,aAAO,KAAKK,UAAZ;AACH,KALD,MAMK;AACD;AACA,aAAOL,YAAY,CAAC,IAAD,EAAO,IAAP,CAAnB;AACH;AACJ,GAZD;;AAaAb,EAAAA,IAAI,CAACjD,SAAL,CAAe+D,MAAf,GAAwB,YAAY;AAChC,QAAIa,GAAG,GAAG;AACNC,MAAAA,IAAI,EAAE;AADA,KAAV,CADgC,CAIhC;;AACA,QAAI,KAAKR,OAAT,EAAkB;AACdO,MAAAA,GAAG,CAACrC,MAAJ,GAAa,KAAK8B,OAAlB;AACAO,MAAAA,GAAG,CAACN,IAAJ,GAAWC,cAAX;AACH;;AACD,QAAI,KAAKJ,UAAT,EAAqB;AACjBS,MAAAA,GAAG,CAACR,QAAJ,GAAe,KAAKD,UAApB;AACH,KAX+B,CAYhC;;;AACA,QAAI,KAAKzC,IAAT,EAAe;AACXkD,MAAAA,GAAG,CAAClD,IAAJ,GAAW,KAAKA,IAAhB;AACH;;AACD,QAAI,KAAKH,MAAT,EAAiB;AACbqD,MAAAA,GAAG,CAACrD,MAAJ,GAAa,KAAKA,MAAlB;AACH;;AACD,QAAI,KAAKE,SAAT,EAAoB;AAChBmD,MAAAA,GAAG,CAACnD,SAAJ,GAAgB,KAAKA,SAArB;AACH;;AACD,QAAI,KAAKE,KAAT,EAAgB;AACZiD,MAAAA,GAAG,CAACjD,KAAJ,GAAY,KAAKA,KAAjB;AACH;;AACD,QAAI,KAAKC,QAAT,EAAmB;AACfgD,MAAAA,GAAG,CAAChD,QAAJ,GAAe,KAAKA,QAApB;AACH;;AACD,WAAOgD,GAAP;AACH,GA7BD;;AA8BA,SAAO3B,IAAP;AACH,CA9DyB,CA8DxBd,GA9DwB,CAA1B,C,CA+DA;;;AACA,IAAI2C,WAAW,IAAI5E,EAAE,GAAG,EAAL,EACfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAqB,KADN,EAEfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAqB,KAFN,EAGfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAA4B,KAHb,EAIfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAoB,KAJL,EAKfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAiC,KALlB,EAMfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAkC,KANnB,EAOfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAsB,KAPP,EAQfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAA+B,KARhB,EASfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAA0B,KATX,EAUfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAyB,KAVV,EAWfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAA2B,KAXZ,EAYfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAyB,KAZV,EAafA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAA0B,KAbX,EAcfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAwB,KAdT,EAefA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAoB,KAfL,EAgBfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAqB,KAhBN,EAiBfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAyB,KAjBV,EAkBfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAsB,KAlBP,EAmBfA,EAAE,CAAC;AAAG;AAAJ,CAAF,GAAqB,KAnBN,EAoBfA,EApBW,CAAf;;AAqBA,SAAS6E,sBAAT,CAAgCC,YAAhC,EAA8CC,UAA9C,EAA0D;AACtD,MAAIL,GAAG,GAAG5B,SAAV;AACA,MAAIkC,eAAe,GAAG,CAAC,CAAvB;;AACA,OAAK,IAAIC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGH,YAAY,CAACI,MAArC,EAA6CD,GAAG,EAAhD,EAAoD;AAChD,QAAItE,IAAI,GAAGmE,YAAY,CAACK,UAAb,CAAwBF,GAAxB,CAAX,CADgD,CAEhD;;AACA,QAAKtE,IAAI,IAAI;AAAG;AAAX,OAAsBA,IAAI,IAAI;AAAI;AAAnC,OACIA,IAAI,IAAI;AAAG;AAAX,OAAsBA,IAAI,IAAI;AAAG;AADrC,OAEIA,IAAI,IAAI;AAAG;AAAX,OAA2BA,IAAI,IAAI;AAAG;AAF1C,OAGGA,IAAI,KAAK;AAAG;AAHf,OAIGA,IAAI,KAAK;AAAG;AAJf,OAKGA,IAAI,KAAK;AAAG;AALf,OAMGA,IAAI,KAAK;AAAI;AANhB,OAOIoE,UAAU,IAAIpE,IAAI,KAAK;AAAG;AAPlC,MAOgD;AAC5C;AACA,UAAIqE,eAAe,KAAK,CAAC,CAAzB,EAA4B;AACxBN,QAAAA,GAAG,IAAIU,kBAAkB,CAACN,YAAY,CAACtB,SAAb,CAAuBwB,eAAvB,EAAwCC,GAAxC,CAAD,CAAzB;AACAD,QAAAA,eAAe,GAAG,CAAC,CAAnB;AACH,OAL2C,CAM5C;;;AACA,UAAIN,GAAG,KAAK5B,SAAZ,EAAuB;AACnB4B,QAAAA,GAAG,IAAII,YAAY,CAACO,MAAb,CAAoBJ,GAApB,CAAP;AACH;AACJ,KAjBD,MAkBK;AACD;AACA,UAAIP,GAAG,KAAK5B,SAAZ,EAAuB;AACnB4B,QAAAA,GAAG,GAAGI,YAAY,CAACQ,MAAb,CAAoB,CAApB,EAAuBL,GAAvB,CAAN;AACH,OAJA,CAKD;;;AACA,UAAIM,OAAO,GAAGX,WAAW,CAACjE,IAAD,CAAzB;;AACA,UAAI4E,OAAO,KAAKzC,SAAhB,EAA2B;AACvB;AACA,YAAIkC,eAAe,KAAK,CAAC,CAAzB,EAA4B;AACxBN,UAAAA,GAAG,IAAIU,kBAAkB,CAACN,YAAY,CAACtB,SAAb,CAAuBwB,eAAvB,EAAwCC,GAAxC,CAAD,CAAzB;AACAD,UAAAA,eAAe,GAAG,CAAC,CAAnB;AACH,SALsB,CAMvB;;;AACAN,QAAAA,GAAG,IAAIa,OAAP;AACH,OARD,MASK,IAAIP,eAAe,KAAK,CAAC,CAAzB,EAA4B;AAC7B;AACAA,QAAAA,eAAe,GAAGC,GAAlB;AACH;AACJ;AACJ;;AACD,MAAID,eAAe,KAAK,CAAC,CAAzB,EAA4B;AACxBN,IAAAA,GAAG,IAAIU,kBAAkB,CAACN,YAAY,CAACtB,SAAb,CAAuBwB,eAAvB,CAAD,CAAzB;AACH;;AACD,SAAON,GAAG,KAAK5B,SAAR,GAAoB4B,GAApB,GAA0BI,YAAjC;AACH;;AACD,SAASU,yBAAT,CAAmChE,IAAnC,EAAyC;AACrC,MAAIkD,GAAG,GAAG5B,SAAV;;AACA,OAAK,IAAImC,GAAG,GAAG,CAAf,EAAkBA,GAAG,GAAGzD,IAAI,CAAC0D,MAA7B,EAAqCD,GAAG,EAAxC,EAA4C;AACxC,QAAItE,IAAI,GAAGa,IAAI,CAAC2D,UAAL,CAAgBF,GAAhB,CAAX;;AACA,QAAItE,IAAI,KAAK;AAAG;AAAZ,OAA0BA,IAAI,KAAK;AAAG;AAA1C,MAA8D;AAC1D,YAAI+D,GAAG,KAAK5B,SAAZ,EAAuB;AACnB4B,UAAAA,GAAG,GAAGlD,IAAI,CAAC8D,MAAL,CAAY,CAAZ,EAAeL,GAAf,CAAN;AACH;;AACDP,QAAAA,GAAG,IAAIE,WAAW,CAACjE,IAAD,CAAlB;AACH,OALD,MAMK;AACD,UAAI+D,GAAG,KAAK5B,SAAZ,EAAuB;AACnB4B,QAAAA,GAAG,IAAIlD,IAAI,CAACyD,GAAD,CAAX;AACH;AACJ;AACJ;;AACD,SAAOP,GAAG,KAAK5B,SAAR,GAAoB4B,GAApB,GAA0BlD,IAAjC;AACH;AACD;;;;;AAGA,SAASkB,WAAT,CAAqB+C,GAArB,EAA0B;AACtB,MAAIxC,KAAJ;;AACA,MAAIwC,GAAG,CAAClE,SAAJ,IAAiBkE,GAAG,CAACjE,IAAJ,CAAS0D,MAAT,GAAkB,CAAnC,IAAwCO,GAAG,CAACpE,MAAJ,KAAe,MAA3D,EAAmE;AAC/D;AACA4B,IAAAA,KAAK,GAAG,OAAOwC,GAAG,CAAClE,SAAX,GAAuBkE,GAAG,CAACjE,IAAnC;AACH,GAHD,MAIK,IAAIiE,GAAG,CAACjE,IAAJ,CAAS2D,UAAT,CAAoB,CAApB,MAA2B;AAAG;AAA9B,MACDM,GAAG,CAACjE,IAAJ,CAAS2D,UAAT,CAAoB,CAApB,KAA0B;AAAG;AAA7B,KAAwCM,GAAG,CAACjE,IAAJ,CAAS2D,UAAT,CAAoB,CAApB,KAA0B;AAAG;AAArE,KAAgFM,GAAG,CAACjE,IAAJ,CAAS2D,UAAT,CAAoB,CAApB,KAA0B;AAAG;AAA7B,KAAwCM,GAAG,CAACjE,IAAJ,CAAS2D,UAAT,CAAoB,CAApB,KAA0B;AAAI;AADrJ,OAEFM,GAAG,CAACjE,IAAJ,CAAS2D,UAAT,CAAoB,CAApB,MAA2B;AAAG;AAFhC,IAE6C;AAC9C;AACAlC,MAAAA,KAAK,GAAGwC,GAAG,CAACjE,IAAJ,CAAS,CAAT,EAAYkE,WAAZ,KAA4BD,GAAG,CAACjE,IAAJ,CAAS8D,MAAT,CAAgB,CAAhB,CAApC;AACH,KALI,MAMA;AACD;AACArC,IAAAA,KAAK,GAAGwC,GAAG,CAACjE,IAAZ;AACH;;AACD,MAAIvB,SAAJ,EAAe;AACXgD,IAAAA,KAAK,GAAGA,KAAK,CAACK,OAAN,CAAc,KAAd,EAAqB,IAArB,CAAR;AACH;;AACD,SAAOL,KAAP;AACH;AACD;;;;;AAGA,SAASW,YAAT,CAAsB6B,GAAtB,EAA2B9B,YAA3B,EAAyC;AACrC,MAAIgC,OAAO,GAAG,CAAChC,YAAD,GACRkB,sBADQ,GAERW,yBAFN;AAGA,MAAId,GAAG,GAAG,EAAV;AACA,MAAIrD,MAAM,GAAGoE,GAAG,CAACpE,MAAjB;AAAA,MAAyBE,SAAS,GAAGkE,GAAG,CAAClE,SAAzC;AAAA,MAAoDC,IAAI,GAAGiE,GAAG,CAACjE,IAA/D;AAAA,MAAqEC,KAAK,GAAGgE,GAAG,CAAChE,KAAjF;AAAA,MAAwFC,QAAQ,GAAG+D,GAAG,CAAC/D,QAAvG;;AACA,MAAIL,MAAJ,EAAY;AACRqD,IAAAA,GAAG,IAAIrD,MAAP;AACAqD,IAAAA,GAAG,IAAI,GAAP;AACH;;AACD,MAAInD,SAAS,IAAIF,MAAM,KAAK,MAA5B,EAAoC;AAChCqD,IAAAA,GAAG,IAAI5C,MAAP;AACA4C,IAAAA,GAAG,IAAI5C,MAAP;AACH;;AACD,MAAIP,SAAJ,EAAe;AACX,QAAIgC,GAAG,GAAGhC,SAAS,CAACjB,OAAV,CAAkB,GAAlB,CAAV;;AACA,QAAIiD,GAAG,KAAK,CAAC,CAAb,EAAgB;AACZ;AACA,UAAIqC,QAAQ,GAAGrE,SAAS,CAAC+D,MAAV,CAAiB,CAAjB,EAAoB/B,GAApB,CAAf;AACAhC,MAAAA,SAAS,GAAGA,SAAS,CAAC+D,MAAV,CAAiB/B,GAAG,GAAG,CAAvB,CAAZ;AACAA,MAAAA,GAAG,GAAGqC,QAAQ,CAACtF,OAAT,CAAiB,GAAjB,CAAN;;AACA,UAAIiD,GAAG,KAAK,CAAC,CAAb,EAAgB;AACZmB,QAAAA,GAAG,IAAIiB,OAAO,CAACC,QAAD,EAAW,KAAX,CAAd;AACH,OAFD,MAGK;AACD;AACAlB,QAAAA,GAAG,IAAIiB,OAAO,CAACC,QAAQ,CAACN,MAAT,CAAgB,CAAhB,EAAmB/B,GAAnB,CAAD,EAA0B,KAA1B,CAAd;AACAmB,QAAAA,GAAG,IAAI,GAAP;AACAA,QAAAA,GAAG,IAAIiB,OAAO,CAACC,QAAQ,CAACN,MAAT,CAAgB/B,GAAG,GAAG,CAAtB,CAAD,EAA2B,KAA3B,CAAd;AACH;;AACDmB,MAAAA,GAAG,IAAI,GAAP;AACH;;AACDnD,IAAAA,SAAS,GAAGA,SAAS,CAACmE,WAAV,EAAZ;AACAnC,IAAAA,GAAG,GAAGhC,SAAS,CAACjB,OAAV,CAAkB,GAAlB,CAAN;;AACA,QAAIiD,GAAG,KAAK,CAAC,CAAb,EAAgB;AACZmB,MAAAA,GAAG,IAAIiB,OAAO,CAACpE,SAAD,EAAY,KAAZ,CAAd;AACH,KAFD,MAGK;AACD;AACAmD,MAAAA,GAAG,IAAIiB,OAAO,CAACpE,SAAS,CAAC+D,MAAV,CAAiB,CAAjB,EAAoB/B,GAApB,CAAD,EAA2B,KAA3B,CAAd;AACAmB,MAAAA,GAAG,IAAInD,SAAS,CAAC+D,MAAV,CAAiB/B,GAAjB,CAAP;AACH;AACJ;;AACD,MAAI/B,IAAJ,EAAU;AACN;AACA,QAAIA,IAAI,CAAC0D,MAAL,IAAe,CAAf,IAAoB1D,IAAI,CAAC2D,UAAL,CAAgB,CAAhB,MAAuB;AAAG;AAA9C,OAA6D3D,IAAI,CAAC2D,UAAL,CAAgB,CAAhB,MAAuB;AAAG;AAA3F,MAAwG;AACpG,YAAIxE,IAAI,GAAGa,IAAI,CAAC2D,UAAL,CAAgB,CAAhB,CAAX;;AACA,YAAIxE,IAAI,IAAI;AAAG;AAAX,WAAsBA,IAAI,IAAI;AAAG;AAArC,UAA8C;AAC1Ca,YAAAA,IAAI,GAAG,MAAMqE,MAAM,CAACC,YAAP,CAAoBnF,IAAI,GAAG,EAA3B,CAAN,GAAuC,GAAvC,GAA6Ca,IAAI,CAAC8D,MAAL,CAAY,CAAZ,CAApD,CAD0C,CAC0B;AACvE;AACJ,OALD,MAMK,IAAI9D,IAAI,CAAC0D,MAAL,IAAe,CAAf,IAAoB1D,IAAI,CAAC2D,UAAL,CAAgB,CAAhB,MAAuB;AAAG;AAAlD,MAA+D;AAChE,YAAIxE,IAAI,GAAGa,IAAI,CAAC2D,UAAL,CAAgB,CAAhB,CAAX;;AACA,YAAIxE,IAAI,IAAI;AAAG;AAAX,WAAsBA,IAAI,IAAI;AAAG;AAArC,UAA8C;AAC1Ca,YAAAA,IAAI,GAAGqE,MAAM,CAACC,YAAP,CAAoBnF,IAAI,GAAG,EAA3B,IAAiC,GAAjC,GAAuCa,IAAI,CAAC8D,MAAL,CAAY,CAAZ,CAA9C,CAD0C,CACoB;AACjE;AACJ,OAbK,CAcN;;;AACAZ,IAAAA,GAAG,IAAIiB,OAAO,CAACnE,IAAD,EAAO,IAAP,CAAd;AACH;;AACD,MAAIC,KAAJ,EAAW;AACPiD,IAAAA,GAAG,IAAI,GAAP;AACAA,IAAAA,GAAG,IAAIiB,OAAO,CAAClE,KAAD,EAAQ,KAAR,CAAd;AACH;;AACD,MAAIC,QAAJ,EAAc;AACVgD,IAAAA,GAAG,IAAI,GAAP;AACAA,IAAAA,GAAG,IAAI,CAACf,YAAD,GAAgBkB,sBAAsB,CAACnD,QAAD,EAAW,KAAX,CAAtC,GAA0DA,QAAjE;AACH;;AACD,SAAOgD,GAAP;AACH","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _a;\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\nfunction isHighSurrogate(charCode) {\n    return (0xD800 <= charCode && charCode <= 0xDBFF);\n}\nfunction isLowSurrogate(charCode) {\n    return (0xDC00 <= charCode && charCode <= 0xDFFF);\n}\nfunction isLowerAsciiHex(code) {\n    return code >= 97 /* a */ && code <= 102 /* f */;\n}\nfunction isLowerAsciiLetter(code) {\n    return code >= 97 /* a */ && code <= 122 /* z */;\n}\nfunction isUpperAsciiLetter(code) {\n    return code >= 65 /* A */ && code <= 90 /* Z */;\n}\nfunction isAsciiLetter(code) {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nfunction _validateUri(ret, _strict) {\n    // scheme, must be set\n    if (!ret.scheme && _strict) {\n        throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n    }\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme, _strict) {\n    if (!scheme && !_strict) {\n        return 'file';\n    }\n    return scheme;\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n */\nvar URI = /** @class */ (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = _schemeFix(schemeOrData, _strict);\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this, _strict);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string'\n            && typeof thing.fsPath === 'function'\n            && typeof thing.with === 'function'\n            && typeof thing.toString === 'function';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return _makeFsPath(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === undefined) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === undefined) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === undefined) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === undefined) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === undefined) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty), _strict);\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string representation for this URI. It's guaranteed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._formatted = data.external;\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport { URI };\nvar _pathSepMarker = isWindows ? 1 : undefined;\n// tslint:disable-next-line:class-name\nvar _URI = /** @class */ (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = _makeFsPath(this);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n            res._sep = _pathSepMarker;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\nfunction _makeFsPath(uri) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        // windows drive letter: file:///c:/far/boo\n        value = uri.path[1].toLowerCase() + uri.path.substr(2);\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\n"]},"metadata":{},"sourceType":"module"}