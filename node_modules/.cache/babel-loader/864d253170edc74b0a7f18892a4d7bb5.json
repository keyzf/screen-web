{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar _a, _b, _c, _d, _e, _f, _g, _h;\n\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\nimport { createCancelablePromise, raceCancellation } from '../../../base/common/async.js';\nimport { KeyChord } from '../../../base/common/keyCodes.js';\nimport { isWeb } from '../../../base/common/platform.js';\nimport { isCodeEditor } from '../../browser/editorBrowser.js';\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport * as corePosition from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { isLocationLink } from '../../common/modes.js';\nimport { MessageController } from '../message/messageController.js';\nimport { PeekContext } from '../peekView/peekView.js';\nimport { ReferencesController } from './peek/referencesController.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport * as nls from '../../../nls.js';\nimport { MenuRegistry } from '../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\nimport { getDefinitionsAtPosition, getImplementationsAtPosition, getTypeDefinitionsAtPosition, getDeclarationsAtPosition, getReferencesAtPosition } from './goToSymbol.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { EditorStateCancellationTokenSource } from '../../browser/core/editorState.js';\nimport { ISymbolNavigationService } from './symbolNavigation.js';\nimport { isStandalone } from '../../../base/browser/browser.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { assertType } from '../../../base/common/types.js';\nimport { EmbeddedCodeEditorWidget } from '../../browser/widget/embeddedCodeEditorWidget.js';\nMenuRegistry.appendMenuItem(7\n/* EditorContext */\n, {\n  submenu: 8\n  /* EditorContextPeek */\n  ,\n  title: nls.localize('peek.submenu', \"Peek\"),\n  group: 'navigation',\n  order: 100\n});\n\nvar SymbolNavigationAction =\n/** @class */\nfunction (_super) {\n  __extends(SymbolNavigationAction, _super);\n\n  function SymbolNavigationAction(configuration, opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this._configuration = configuration;\n    return _this;\n  }\n\n  SymbolNavigationAction.prototype.run = function (accessor, editor) {\n    var _this = this;\n\n    if (!editor.hasModel()) {\n      return Promise.resolve(undefined);\n    }\n\n    var notificationService = accessor.get(INotificationService);\n    var editorService = accessor.get(ICodeEditorService);\n    var progressService = accessor.get(IEditorProgressService);\n    var symbolNavService = accessor.get(ISymbolNavigationService);\n    var model = editor.getModel();\n    var pos = editor.getPosition();\n    var cts = new EditorStateCancellationTokenSource(editor, 1\n    /* Value */\n    | 4\n    /* Position */\n    );\n    var promise = raceCancellation(this._getLocationModel(model, pos, cts.token), cts.token).then(function (references) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var altAction, altActionId, referenceCount, info;\n        return __generator(this, function (_a) {\n          if (!references || cts.token.isCancellationRequested) {\n            return [2\n            /*return*/\n            ];\n          }\n\n          alert(references.ariaMessage);\n\n          if (references.referenceAt(model.uri, pos)) {\n            altActionId = this._getAlternativeCommand(editor);\n\n            if (altActionId !== this.id) {\n              altAction = editor.getAction(altActionId);\n            }\n          }\n\n          referenceCount = references.references.length;\n\n          if (referenceCount === 0) {\n            // no result -> show message\n            if (!this._configuration.muteMessage) {\n              info = model.getWordAtPosition(pos);\n              MessageController.get(editor).showMessage(this._getNoResultFoundMessage(info), pos);\n            }\n          } else if (referenceCount === 1 && altAction) {\n            // already at the only result, run alternative\n            altAction.run();\n          } else {\n            // normal results handling\n            return [2\n            /*return*/\n            , this._onResult(editorService, symbolNavService, editor, references)];\n          }\n\n          return [2\n          /*return*/\n          ];\n        });\n      });\n    }, function (err) {\n      // report an error\n      notificationService.error(err);\n    }).finally(function () {\n      cts.dispose();\n    });\n    progressService.showWhile(promise, 250);\n    return promise;\n  };\n\n  SymbolNavigationAction.prototype._onResult = function (editorService, symbolNavService, editor, model) {\n    return __awaiter(this, void 0, void 0, function () {\n      var gotoLocation, next, peek, targetEditor;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            gotoLocation = this._getGoToPreference(editor);\n            if (!(!(editor instanceof EmbeddedCodeEditorWidget) && (this._configuration.openInPeek || gotoLocation === 'peek' && model.references.length > 1))) return [3\n            /*break*/\n            , 1];\n\n            this._openInPeek(editor, model);\n\n            return [3\n            /*break*/\n            , 3];\n\n          case 1:\n            next = model.firstReference();\n            peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\n            return [4\n            /*yield*/\n            , this._openReference(editor, editorService, next, this._configuration.openToSide, !peek)];\n\n          case 2:\n            targetEditor = _a.sent();\n\n            if (peek && targetEditor) {\n              this._openInPeek(targetEditor, model);\n            } else {\n              model.dispose();\n            } // keep remaining locations around when using\n            // 'goto'-mode\n\n\n            if (gotoLocation === 'goto') {\n              symbolNavService.put(next);\n            }\n\n            _a.label = 3;\n\n          case 3:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  SymbolNavigationAction.prototype._openReference = function (editor, editorService, reference, sideBySide, highlight) {\n    return __awaiter(this, void 0, void 0, function () {\n      var range, targetEditor, modelNow_1, ids_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            range = undefined;\n\n            if (isLocationLink(reference)) {\n              range = reference.targetSelectionRange;\n            }\n\n            if (!range) {\n              range = reference.range;\n            }\n\n            return [4\n            /*yield*/\n            , editorService.openCodeEditor({\n              resource: reference.uri,\n              options: {\n                selection: Range.collapseToStart(range),\n                revealInCenterIfOutsideViewport: true\n              }\n            }, editor, sideBySide)];\n\n          case 1:\n            targetEditor = _a.sent();\n\n            if (!targetEditor) {\n              return [2\n              /*return*/\n              , undefined];\n            }\n\n            if (highlight) {\n              modelNow_1 = targetEditor.getModel();\n              ids_1 = targetEditor.deltaDecorations([], [{\n                range: range,\n                options: {\n                  className: 'symbolHighlight'\n                }\n              }]);\n              setTimeout(function () {\n                if (targetEditor.getModel() === modelNow_1) {\n                  targetEditor.deltaDecorations(ids_1, []);\n                }\n              }, 350);\n            }\n\n            return [2\n            /*return*/\n            , targetEditor];\n        }\n      });\n    });\n  };\n\n  SymbolNavigationAction.prototype._openInPeek = function (target, model) {\n    var controller = ReferencesController.get(target);\n\n    if (controller && target.hasModel()) {\n      controller.toggleWidget(target.getSelection(), createCancelablePromise(function (_) {\n        return Promise.resolve(model);\n      }), this._configuration.openInPeek);\n    } else {\n      model.dispose();\n    }\n  };\n\n  return SymbolNavigationAction;\n}(EditorAction); //#region --- DEFINITION\n\n\nvar DefinitionAction =\n/** @class */\nfunction (_super) {\n  __extends(DefinitionAction, _super);\n\n  function DefinitionAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DefinitionAction.prototype._getLocationModel = function (model, position, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _a = ReferencesModel.bind;\n            return [4\n            /*yield*/\n            , getDefinitionsAtPosition(model, position, token)];\n\n          case 1:\n            return [2\n            /*return*/\n            , new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('def.title', 'Definitions')]))()];\n        }\n      });\n    });\n  };\n\n  DefinitionAction.prototype._getNoResultFoundMessage = function (info) {\n    return info && info.word ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word) : nls.localize('generic.noResults', \"No definition found\");\n  };\n\n  DefinitionAction.prototype._getAlternativeCommand = function (editor) {\n    return editor.getOption(41\n    /* gotoLocation */\n    ).alternativeDefinitionCommand;\n  };\n\n  DefinitionAction.prototype._getGoToPreference = function (editor) {\n    return editor.getOption(41\n    /* gotoLocation */\n    ).multipleDefinitions;\n  };\n\n  return DefinitionAction;\n}(SymbolNavigationAction);\n\nexport { DefinitionAction };\nvar goToDefinitionKb = isWeb && !isStandalone ? 2048\n/* CtrlCmd */\n| 70\n/* F12 */\n: 70\n/* F12 */\n;\nregisterEditorAction((_a =\n/** @class */\nfunction (_super) {\n  __extends(GoToDefinitionAction, _super);\n\n  function GoToDefinitionAction() {\n    var _this = _super.call(this, {\n      openToSide: false,\n      openInPeek: false,\n      muteMessage: false\n    }, {\n      id: GoToDefinitionAction.id,\n      label: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\n      alias: 'Go to Definition',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: goToDefinitionKb,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      contextMenuOpts: {\n        group: 'navigation',\n        order: 1.1\n      },\n      menuOpts: {\n        menuId: 19\n        /* MenubarGoMenu */\n        ,\n        group: '4_symbol_nav',\n        order: 2,\n        title: nls.localize({\n          key: 'miGotoDefinition',\n          comment: ['&& denotes a mnemonic']\n        }, \"Go to &&Definition\")\n      }\n    }) || this;\n\n    CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', GoToDefinitionAction.id);\n    return _this;\n  }\n\n  return GoToDefinitionAction;\n}(DefinitionAction), _a.id = 'editor.action.revealDefinition', _a));\nregisterEditorAction((_b =\n/** @class */\nfunction (_super) {\n  __extends(OpenDefinitionToSideAction, _super);\n\n  function OpenDefinitionToSideAction() {\n    var _this = _super.call(this, {\n      openToSide: true,\n      openInPeek: false,\n      muteMessage: false\n    }, {\n      id: OpenDefinitionToSideAction.id,\n      label: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\n      alias: 'Open Definition to the Side',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: KeyChord(2048\n        /* CtrlCmd */\n        | 41\n        /* KEY_K */\n        , goToDefinitionKb),\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n\n    CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', OpenDefinitionToSideAction.id);\n    return _this;\n  }\n\n  return OpenDefinitionToSideAction;\n}(DefinitionAction), _b.id = 'editor.action.revealDefinitionAside', _b));\nregisterEditorAction((_c =\n/** @class */\nfunction (_super) {\n  __extends(PeekDefinitionAction, _super);\n\n  function PeekDefinitionAction() {\n    var _this = _super.call(this, {\n      openToSide: false,\n      openInPeek: true,\n      muteMessage: false\n    }, {\n      id: PeekDefinitionAction.id,\n      label: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\n      alias: 'Peek Definition',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 512\n        /* Alt */\n        | 70\n        /* F12 */\n        ,\n        linux: {\n          primary: 2048\n          /* CtrlCmd */\n          | 1024\n          /* Shift */\n          | 68\n          /* F10 */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      contextMenuOpts: {\n        menuId: 8\n        /* EditorContextPeek */\n        ,\n        group: 'peek',\n        order: 2\n      }\n    }) || this;\n\n    CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', PeekDefinitionAction.id);\n    return _this;\n  }\n\n  return PeekDefinitionAction;\n}(DefinitionAction), _c.id = 'editor.action.peekDefinition', _c)); //#endregion\n//#region --- DECLARATION\n\nvar DeclarationAction =\n/** @class */\nfunction (_super) {\n  __extends(DeclarationAction, _super);\n\n  function DeclarationAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DeclarationAction.prototype._getLocationModel = function (model, position, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _a = ReferencesModel.bind;\n            return [4\n            /*yield*/\n            , getDeclarationsAtPosition(model, position, token)];\n\n          case 1:\n            return [2\n            /*return*/\n            , new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('decl.title', 'Declarations')]))()];\n        }\n      });\n    });\n  };\n\n  DeclarationAction.prototype._getNoResultFoundMessage = function (info) {\n    return info && info.word ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word) : nls.localize('decl.generic.noResults', \"No declaration found\");\n  };\n\n  DeclarationAction.prototype._getAlternativeCommand = function (editor) {\n    return editor.getOption(41\n    /* gotoLocation */\n    ).alternativeDeclarationCommand;\n  };\n\n  DeclarationAction.prototype._getGoToPreference = function (editor) {\n    return editor.getOption(41\n    /* gotoLocation */\n    ).multipleDeclarations;\n  };\n\n  return DeclarationAction;\n}(SymbolNavigationAction);\n\nregisterEditorAction((_d =\n/** @class */\nfunction (_super) {\n  __extends(GoToDeclarationAction, _super);\n\n  function GoToDeclarationAction() {\n    return _super.call(this, {\n      openToSide: false,\n      openInPeek: false,\n      muteMessage: false\n    }, {\n      id: GoToDeclarationAction.id,\n      label: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\n      alias: 'Go to Declaration',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      contextMenuOpts: {\n        group: 'navigation',\n        order: 1.3\n      },\n      menuOpts: {\n        menuId: 19\n        /* MenubarGoMenu */\n        ,\n        group: '4_symbol_nav',\n        order: 3,\n        title: nls.localize({\n          key: 'miGotoDeclaration',\n          comment: ['&& denotes a mnemonic']\n        }, \"Go to &&Declaration\")\n      }\n    }) || this;\n  }\n\n  GoToDeclarationAction.prototype._getNoResultFoundMessage = function (info) {\n    return info && info.word ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word) : nls.localize('decl.generic.noResults', \"No declaration found\");\n  };\n\n  return GoToDeclarationAction;\n}(DeclarationAction), _d.id = 'editor.action.revealDeclaration', _d));\nregisterEditorAction(\n/** @class */\nfunction (_super) {\n  __extends(PeekDeclarationAction, _super);\n\n  function PeekDeclarationAction() {\n    return _super.call(this, {\n      openToSide: false,\n      openInPeek: true,\n      muteMessage: false\n    }, {\n      id: 'editor.action.peekDeclaration',\n      label: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\n      alias: 'Peek Declaration',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      contextMenuOpts: {\n        menuId: 8\n        /* EditorContextPeek */\n        ,\n        group: 'peek',\n        order: 3\n      }\n    }) || this;\n  }\n\n  return PeekDeclarationAction;\n}(DeclarationAction)); //#endregion\n//#region --- TYPE DEFINITION\n\nvar TypeDefinitionAction =\n/** @class */\nfunction (_super) {\n  __extends(TypeDefinitionAction, _super);\n\n  function TypeDefinitionAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TypeDefinitionAction.prototype._getLocationModel = function (model, position, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _a = ReferencesModel.bind;\n            return [4\n            /*yield*/\n            , getTypeDefinitionsAtPosition(model, position, token)];\n\n          case 1:\n            return [2\n            /*return*/\n            , new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('typedef.title', 'Type Definitions')]))()];\n        }\n      });\n    });\n  };\n\n  TypeDefinitionAction.prototype._getNoResultFoundMessage = function (info) {\n    return info && info.word ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word) : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\n  };\n\n  TypeDefinitionAction.prototype._getAlternativeCommand = function (editor) {\n    return editor.getOption(41\n    /* gotoLocation */\n    ).alternativeTypeDefinitionCommand;\n  };\n\n  TypeDefinitionAction.prototype._getGoToPreference = function (editor) {\n    return editor.getOption(41\n    /* gotoLocation */\n    ).multipleTypeDefinitions;\n  };\n\n  return TypeDefinitionAction;\n}(SymbolNavigationAction);\n\nregisterEditorAction((_e =\n/** @class */\nfunction (_super) {\n  __extends(GoToTypeDefinitionAction, _super);\n\n  function GoToTypeDefinitionAction() {\n    return _super.call(this, {\n      openToSide: false,\n      openInPeek: false,\n      muteMessage: false\n    }, {\n      id: GoToTypeDefinitionAction.ID,\n      label: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\n      alias: 'Go to Type Definition',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 0,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      contextMenuOpts: {\n        group: 'navigation',\n        order: 1.4\n      },\n      menuOpts: {\n        menuId: 19\n        /* MenubarGoMenu */\n        ,\n        group: '4_symbol_nav',\n        order: 3,\n        title: nls.localize({\n          key: 'miGotoTypeDefinition',\n          comment: ['&& denotes a mnemonic']\n        }, \"Go to &&Type Definition\")\n      }\n    }) || this;\n  }\n\n  return GoToTypeDefinitionAction;\n}(TypeDefinitionAction), _e.ID = 'editor.action.goToTypeDefinition', _e));\nregisterEditorAction((_f =\n/** @class */\nfunction (_super) {\n  __extends(PeekTypeDefinitionAction, _super);\n\n  function PeekTypeDefinitionAction() {\n    return _super.call(this, {\n      openToSide: false,\n      openInPeek: true,\n      muteMessage: false\n    }, {\n      id: PeekTypeDefinitionAction.ID,\n      label: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\n      alias: 'Peek Type Definition',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      contextMenuOpts: {\n        menuId: 8\n        /* EditorContextPeek */\n        ,\n        group: 'peek',\n        order: 4\n      }\n    }) || this;\n  }\n\n  return PeekTypeDefinitionAction;\n}(TypeDefinitionAction), _f.ID = 'editor.action.peekTypeDefinition', _f)); //#endregion\n//#region --- IMPLEMENTATION\n\nvar ImplementationAction =\n/** @class */\nfunction (_super) {\n  __extends(ImplementationAction, _super);\n\n  function ImplementationAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ImplementationAction.prototype._getLocationModel = function (model, position, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _a = ReferencesModel.bind;\n            return [4\n            /*yield*/\n            , getImplementationsAtPosition(model, position, token)];\n\n          case 1:\n            return [2\n            /*return*/\n            , new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('impl.title', 'Implementations')]))()];\n        }\n      });\n    });\n  };\n\n  ImplementationAction.prototype._getNoResultFoundMessage = function (info) {\n    return info && info.word ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word) : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\n  };\n\n  ImplementationAction.prototype._getAlternativeCommand = function (editor) {\n    return editor.getOption(41\n    /* gotoLocation */\n    ).alternativeImplementationCommand;\n  };\n\n  ImplementationAction.prototype._getGoToPreference = function (editor) {\n    return editor.getOption(41\n    /* gotoLocation */\n    ).multipleImplementations;\n  };\n\n  return ImplementationAction;\n}(SymbolNavigationAction);\n\nregisterEditorAction((_g =\n/** @class */\nfunction (_super) {\n  __extends(GoToImplementationAction, _super);\n\n  function GoToImplementationAction() {\n    return _super.call(this, {\n      openToSide: false,\n      openInPeek: false,\n      muteMessage: false\n    }, {\n      id: GoToImplementationAction.ID,\n      label: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\n      alias: 'Go to Implementations',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 70\n        /* F12 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        menuId: 19\n        /* MenubarGoMenu */\n        ,\n        group: '4_symbol_nav',\n        order: 4,\n        title: nls.localize({\n          key: 'miGotoImplementation',\n          comment: ['&& denotes a mnemonic']\n        }, \"Go to &&Implementations\")\n      },\n      contextMenuOpts: {\n        group: 'navigation',\n        order: 1.45\n      }\n    }) || this;\n  }\n\n  return GoToImplementationAction;\n}(ImplementationAction), _g.ID = 'editor.action.goToImplementation', _g));\nregisterEditorAction((_h =\n/** @class */\nfunction (_super) {\n  __extends(PeekImplementationAction, _super);\n\n  function PeekImplementationAction() {\n    return _super.call(this, {\n      openToSide: false,\n      openInPeek: true,\n      muteMessage: false\n    }, {\n      id: PeekImplementationAction.ID,\n      label: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\n      alias: 'Peek Implementations',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 70\n        /* F12 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      contextMenuOpts: {\n        menuId: 8\n        /* EditorContextPeek */\n        ,\n        group: 'peek',\n        order: 5\n      }\n    }) || this;\n  }\n\n  return PeekImplementationAction;\n}(ImplementationAction), _h.ID = 'editor.action.peekImplementation', _h)); //#endregion\n//#region --- REFERENCES\n\nvar ReferencesAction =\n/** @class */\nfunction (_super) {\n  __extends(ReferencesAction, _super);\n\n  function ReferencesAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ReferencesAction.prototype._getNoResultFoundMessage = function (info) {\n    return info ? nls.localize('references.no', \"No references found for '{0}'\", info.word) : nls.localize('references.noGeneric', \"No references found\");\n  };\n\n  ReferencesAction.prototype._getAlternativeCommand = function (editor) {\n    return editor.getOption(41\n    /* gotoLocation */\n    ).alternativeReferenceCommand;\n  };\n\n  ReferencesAction.prototype._getGoToPreference = function (editor) {\n    return editor.getOption(41\n    /* gotoLocation */\n    ).multipleReferences;\n  };\n\n  return ReferencesAction;\n}(SymbolNavigationAction);\n\nregisterEditorAction(\n/** @class */\nfunction (_super) {\n  __extends(GoToReferencesAction, _super);\n\n  function GoToReferencesAction() {\n    return _super.call(this, {\n      openToSide: false,\n      openInPeek: false,\n      muteMessage: false\n    }, {\n      id: 'editor.action.goToReferences',\n      label: nls.localize('goToReferences.label', \"Go to References\"),\n      alias: 'Go to References',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      kbOpts: {\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024\n        /* Shift */\n        | 70\n        /* F12 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      contextMenuOpts: {\n        group: 'navigation',\n        order: 1.45\n      },\n      menuOpts: {\n        menuId: 19\n        /* MenubarGoMenu */\n        ,\n        group: '4_symbol_nav',\n        order: 5,\n        title: nls.localize({\n          key: 'miGotoReference',\n          comment: ['&& denotes a mnemonic']\n        }, \"Go to &&References\")\n      }\n    }) || this;\n  }\n\n  GoToReferencesAction.prototype._getLocationModel = function (model, position, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _a = ReferencesModel.bind;\n            return [4\n            /*yield*/\n            , getReferencesAtPosition(model, position, true, token)];\n\n          case 1:\n            return [2\n            /*return*/\n            , new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('ref.title', 'References')]))()];\n        }\n      });\n    });\n  };\n\n  return GoToReferencesAction;\n}(ReferencesAction));\nregisterEditorAction(\n/** @class */\nfunction (_super) {\n  __extends(PeekReferencesAction, _super);\n\n  function PeekReferencesAction() {\n    return _super.call(this, {\n      openToSide: false,\n      openInPeek: true,\n      muteMessage: false\n    }, {\n      id: 'editor.action.referenceSearch.trigger',\n      label: nls.localize('references.action.label', \"Peek References\"),\n      alias: 'Peek References',\n      precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\n      contextMenuOpts: {\n        menuId: 8\n        /* EditorContextPeek */\n        ,\n        group: 'peek',\n        order: 6\n      }\n    }) || this;\n  }\n\n  PeekReferencesAction.prototype._getLocationModel = function (model, position, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _a = ReferencesModel.bind;\n            return [4\n            /*yield*/\n            , getReferencesAtPosition(model, position, false, token)];\n\n          case 1:\n            return [2\n            /*return*/\n            , new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('ref.title', 'References')]))()];\n        }\n      });\n    });\n  };\n\n  return PeekReferencesAction;\n}(ReferencesAction)); //#endregion\n//#region --- GENERIC goto symbols command\n\nvar GenericGoToLocationAction =\n/** @class */\nfunction (_super) {\n  __extends(GenericGoToLocationAction, _super);\n\n  function GenericGoToLocationAction(config, _references, _gotoMultipleBehaviour) {\n    var _this = _super.call(this, config, {\n      id: 'editor.action.goToLocation',\n      label: nls.localize('label.generic', \"Go To Any Symbol\"),\n      alias: 'Go To Any Symbol',\n      precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated())\n    }) || this;\n\n    _this._references = _references;\n    _this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\n    return _this;\n  }\n\n  GenericGoToLocationAction.prototype._getLocationModel = function (_model, _position, _token) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'))];\n      });\n    });\n  };\n\n  GenericGoToLocationAction.prototype._getNoResultFoundMessage = function (info) {\n    return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\n  };\n\n  GenericGoToLocationAction.prototype._getGoToPreference = function (editor) {\n    var _a;\n\n    return (_a = this._gotoMultipleBehaviour) !== null && _a !== void 0 ? _a : editor.getOption(41\n    /* gotoLocation */\n    ).multipleReferences;\n  };\n\n  GenericGoToLocationAction.prototype._getAlternativeCommand = function () {\n    return '';\n  };\n\n  return GenericGoToLocationAction;\n}(SymbolNavigationAction);\n\nCommandsRegistry.registerCommand({\n  id: 'editor.action.goToLocations',\n  description: {\n    description: 'Go to locations from a position in a file',\n    args: [{\n      name: 'uri',\n      description: 'The text document in which to start',\n      constraint: URI\n    }, {\n      name: 'position',\n      description: 'The position at which to start',\n      constraint: corePosition.Position.isIPosition\n    }, {\n      name: 'locations',\n      description: 'An array of locations.',\n      constraint: Array\n    }, {\n      name: 'multiple',\n      description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto'\n    }]\n  },\n  handler: function (accessor, resource, position, references, multiple, openInPeek) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var editorService, editor;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            assertType(URI.isUri(resource));\n            assertType(corePosition.Position.isIPosition(position));\n            assertType(Array.isArray(references));\n            assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\n            assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\n            editorService = accessor.get(ICodeEditorService);\n            return [4\n            /*yield*/\n            , editorService.openCodeEditor({\n              resource: resource\n            }, editorService.getFocusedCodeEditor())];\n\n          case 1:\n            editor = _a.sent();\n\n            if (isCodeEditor(editor)) {\n              editor.setPosition(position);\n              editor.revealPositionInCenterIfOutsideViewport(position, 0\n              /* Smooth */\n              );\n              return [2\n              /*return*/\n              , editor.invokeWithinContext(function (accessor) {\n                var command = new GenericGoToLocationAction({\n                  muteMessage: true,\n                  openInPeek: Boolean(openInPeek),\n                  openToSide: false\n                }, references, multiple);\n                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\n              })];\n            }\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  }\n});\nCommandsRegistry.registerCommand({\n  id: 'editor.action.peekLocations',\n  description: {\n    description: 'Peek locations from a position in a file',\n    args: [{\n      name: 'uri',\n      description: 'The text document in which to start',\n      constraint: URI\n    }, {\n      name: 'position',\n      description: 'The position at which to start',\n      constraint: corePosition.Position.isIPosition\n    }, {\n      name: 'locations',\n      description: 'An array of locations.',\n      constraint: Array\n    }, {\n      name: 'multiple',\n      description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto'\n    }]\n  },\n  handler: function (accessor, resource, position, references, multiple) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, true);\n        return [2\n        /*return*/\n        ];\n      });\n    });\n  }\n}); //#endregion\n//#region --- REFERENCE search special commands\n\nCommandsRegistry.registerCommand({\n  id: 'editor.action.findReferences',\n  handler: function (accessor, resource, position) {\n    assertType(URI.isUri(resource));\n    assertType(corePosition.Position.isIPosition(position));\n    var codeEditorService = accessor.get(ICodeEditorService);\n    return codeEditorService.openCodeEditor({\n      resource: resource\n    }, codeEditorService.getFocusedCodeEditor()).then(function (control) {\n      if (!isCodeEditor(control) || !control.hasModel()) {\n        return undefined;\n      }\n\n      var controller = ReferencesController.get(control);\n\n      if (!controller) {\n        return undefined;\n      }\n\n      var references = createCancelablePromise(function (token) {\n        return getReferencesAtPosition(control.getModel(), corePosition.Position.lift(position), false, token).then(function (references) {\n          return new ReferencesModel(references, nls.localize('ref.title', 'References'));\n        });\n      });\n      var range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n      return Promise.resolve(controller.toggleWidget(range, references, false));\n    });\n  }\n}); // use NEW command\n\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations'); //#endregion","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/goToCommands.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","_a","_b","_c","_d","_e","_f","_g","_h","alert","createCancelablePromise","raceCancellation","KeyChord","isWeb","isCodeEditor","EditorAction","registerEditorAction","ICodeEditorService","corePosition","Range","EditorContextKeys","isLocationLink","MessageController","PeekContext","ReferencesController","ReferencesModel","nls","MenuRegistry","ContextKeyExpr","INotificationService","IEditorProgressService","getDefinitionsAtPosition","getImplementationsAtPosition","getTypeDefinitionsAtPosition","getDeclarationsAtPosition","getReferencesAtPosition","CommandsRegistry","ICommandService","EditorStateCancellationTokenSource","ISymbolNavigationService","isStandalone","URI","IInstantiationService","assertType","EmbeddedCodeEditorWidget","appendMenuItem","submenu","title","localize","group","order","SymbolNavigationAction","_super","configuration","opts","_this","_configuration","run","accessor","editor","hasModel","undefined","notificationService","get","editorService","progressService","symbolNavService","model","getModel","pos","getPosition","cts","promise","_getLocationModel","token","references","altAction","altActionId","referenceCount","info","isCancellationRequested","ariaMessage","referenceAt","uri","_getAlternativeCommand","id","getAction","muteMessage","getWordAtPosition","showMessage","_getNoResultFoundMessage","_onResult","err","error","finally","dispose","showWhile","gotoLocation","peek","targetEditor","_getGoToPreference","openInPeek","_openInPeek","firstReference","_openReference","openToSide","put","reference","sideBySide","highlight","range","modelNow_1","ids_1","targetSelectionRange","openCodeEditor","resource","options","selection","collapseToStart","revealInCenterIfOutsideViewport","deltaDecorations","className","setTimeout","target","controller","toggleWidget","getSelection","DefinitionAction","arguments","position","bind","word","getOption","alternativeDefinitionCommand","multipleDefinitions","goToDefinitionKb","GoToDefinitionAction","alias","precondition","and","hasDefinitionProvider","isInEmbeddedEditor","toNegated","kbOpts","kbExpr","editorTextFocus","primary","weight","contextMenuOpts","menuOpts","menuId","key","comment","registerCommandAlias","OpenDefinitionToSideAction","PeekDefinitionAction","notInPeekEditor","linux","DeclarationAction","alternativeDeclarationCommand","multipleDeclarations","GoToDeclarationAction","hasDeclarationProvider","PeekDeclarationAction","TypeDefinitionAction","alternativeTypeDefinitionCommand","multipleTypeDefinitions","GoToTypeDefinitionAction","ID","hasTypeDefinitionProvider","PeekTypeDefinitionAction","ImplementationAction","alternativeImplementationCommand","multipleImplementations","GoToImplementationAction","hasImplementationProvider","PeekImplementationAction","ReferencesAction","alternativeReferenceCommand","multipleReferences","GoToReferencesAction","hasReferenceProvider","PeekReferencesAction","GenericGoToLocationAction","config","_references","_gotoMultipleBehaviour","_model","_position","_token","registerCommand","description","args","name","constraint","Position","isIPosition","handler","multiple","isUri","isArray","getFocusedCodeEditor","setPosition","revealPositionInCenterIfOutsideViewport","invokeWithinContext","command","Boolean","invokeFunction","executeCommand","codeEditorService","control","lift","lineNumber","column"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar _a, _b, _c, _d, _e, _f, _g, _h;\r\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\r\nimport { createCancelablePromise, raceCancellation } from '../../../base/common/async.js';\r\nimport { KeyChord } from '../../../base/common/keyCodes.js';\r\nimport { isWeb } from '../../../base/common/platform.js';\r\nimport { isCodeEditor } from '../../browser/editorBrowser.js';\r\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport * as corePosition from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { isLocationLink } from '../../common/modes.js';\r\nimport { MessageController } from '../message/messageController.js';\r\nimport { PeekContext } from '../peekView/peekView.js';\r\nimport { ReferencesController } from './peek/referencesController.js';\r\nimport { ReferencesModel } from './referencesModel.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { MenuRegistry } from '../../../platform/actions/common/actions.js';\r\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nimport { getDefinitionsAtPosition, getImplementationsAtPosition, getTypeDefinitionsAtPosition, getDeclarationsAtPosition, getReferencesAtPosition } from './goToSymbol.js';\r\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { EditorStateCancellationTokenSource } from '../../browser/core/editorState.js';\r\nimport { ISymbolNavigationService } from './symbolNavigation.js';\r\nimport { isStandalone } from '../../../base/browser/browser.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { assertType } from '../../../base/common/types.js';\r\nimport { EmbeddedCodeEditorWidget } from '../../browser/widget/embeddedCodeEditorWidget.js';\r\nMenuRegistry.appendMenuItem(7 /* EditorContext */, {\r\n    submenu: 8 /* EditorContextPeek */,\r\n    title: nls.localize('peek.submenu', \"Peek\"),\r\n    group: 'navigation',\r\n    order: 100\r\n});\r\nvar SymbolNavigationAction = /** @class */ (function (_super) {\r\n    __extends(SymbolNavigationAction, _super);\r\n    function SymbolNavigationAction(configuration, opts) {\r\n        var _this = _super.call(this, opts) || this;\r\n        _this._configuration = configuration;\r\n        return _this;\r\n    }\r\n    SymbolNavigationAction.prototype.run = function (accessor, editor) {\r\n        var _this = this;\r\n        if (!editor.hasModel()) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        var notificationService = accessor.get(INotificationService);\r\n        var editorService = accessor.get(ICodeEditorService);\r\n        var progressService = accessor.get(IEditorProgressService);\r\n        var symbolNavService = accessor.get(ISymbolNavigationService);\r\n        var model = editor.getModel();\r\n        var pos = editor.getPosition();\r\n        var cts = new EditorStateCancellationTokenSource(editor, 1 /* Value */ | 4 /* Position */);\r\n        var promise = raceCancellation(this._getLocationModel(model, pos, cts.token), cts.token).then(function (references) { return __awaiter(_this, void 0, void 0, function () {\r\n            var altAction, altActionId, referenceCount, info;\r\n            return __generator(this, function (_a) {\r\n                if (!references || cts.token.isCancellationRequested) {\r\n                    return [2 /*return*/];\r\n                }\r\n                alert(references.ariaMessage);\r\n                if (references.referenceAt(model.uri, pos)) {\r\n                    altActionId = this._getAlternativeCommand(editor);\r\n                    if (altActionId !== this.id) {\r\n                        altAction = editor.getAction(altActionId);\r\n                    }\r\n                }\r\n                referenceCount = references.references.length;\r\n                if (referenceCount === 0) {\r\n                    // no result -> show message\r\n                    if (!this._configuration.muteMessage) {\r\n                        info = model.getWordAtPosition(pos);\r\n                        MessageController.get(editor).showMessage(this._getNoResultFoundMessage(info), pos);\r\n                    }\r\n                }\r\n                else if (referenceCount === 1 && altAction) {\r\n                    // already at the only result, run alternative\r\n                    altAction.run();\r\n                }\r\n                else {\r\n                    // normal results handling\r\n                    return [2 /*return*/, this._onResult(editorService, symbolNavService, editor, references)];\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        }); }, function (err) {\r\n            // report an error\r\n            notificationService.error(err);\r\n        }).finally(function () {\r\n            cts.dispose();\r\n        });\r\n        progressService.showWhile(promise, 250);\r\n        return promise;\r\n    };\r\n    SymbolNavigationAction.prototype._onResult = function (editorService, symbolNavService, editor, model) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var gotoLocation, next, peek, targetEditor;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        gotoLocation = this._getGoToPreference(editor);\r\n                        if (!(!(editor instanceof EmbeddedCodeEditorWidget) && (this._configuration.openInPeek || (gotoLocation === 'peek' && model.references.length > 1)))) return [3 /*break*/, 1];\r\n                        this._openInPeek(editor, model);\r\n                        return [3 /*break*/, 3];\r\n                    case 1:\r\n                        next = model.firstReference();\r\n                        peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\r\n                        return [4 /*yield*/, this._openReference(editor, editorService, next, this._configuration.openToSide, !peek)];\r\n                    case 2:\r\n                        targetEditor = _a.sent();\r\n                        if (peek && targetEditor) {\r\n                            this._openInPeek(targetEditor, model);\r\n                        }\r\n                        else {\r\n                            model.dispose();\r\n                        }\r\n                        // keep remaining locations around when using\r\n                        // 'goto'-mode\r\n                        if (gotoLocation === 'goto') {\r\n                            symbolNavService.put(next);\r\n                        }\r\n                        _a.label = 3;\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SymbolNavigationAction.prototype._openReference = function (editor, editorService, reference, sideBySide, highlight) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var range, targetEditor, modelNow_1, ids_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        range = undefined;\r\n                        if (isLocationLink(reference)) {\r\n                            range = reference.targetSelectionRange;\r\n                        }\r\n                        if (!range) {\r\n                            range = reference.range;\r\n                        }\r\n                        return [4 /*yield*/, editorService.openCodeEditor({\r\n                                resource: reference.uri,\r\n                                options: {\r\n                                    selection: Range.collapseToStart(range),\r\n                                    revealInCenterIfOutsideViewport: true\r\n                                }\r\n                            }, editor, sideBySide)];\r\n                    case 1:\r\n                        targetEditor = _a.sent();\r\n                        if (!targetEditor) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        if (highlight) {\r\n                            modelNow_1 = targetEditor.getModel();\r\n                            ids_1 = targetEditor.deltaDecorations([], [{ range: range, options: { className: 'symbolHighlight' } }]);\r\n                            setTimeout(function () {\r\n                                if (targetEditor.getModel() === modelNow_1) {\r\n                                    targetEditor.deltaDecorations(ids_1, []);\r\n                                }\r\n                            }, 350);\r\n                        }\r\n                        return [2 /*return*/, targetEditor];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SymbolNavigationAction.prototype._openInPeek = function (target, model) {\r\n        var controller = ReferencesController.get(target);\r\n        if (controller && target.hasModel()) {\r\n            controller.toggleWidget(target.getSelection(), createCancelablePromise(function (_) { return Promise.resolve(model); }), this._configuration.openInPeek);\r\n        }\r\n        else {\r\n            model.dispose();\r\n        }\r\n    };\r\n    return SymbolNavigationAction;\r\n}(EditorAction));\r\n//#region --- DEFINITION\r\nvar DefinitionAction = /** @class */ (function (_super) {\r\n    __extends(DefinitionAction, _super);\r\n    function DefinitionAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DefinitionAction.prototype._getLocationModel = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = ReferencesModel.bind;\r\n                        return [4 /*yield*/, getDefinitionsAtPosition(model, position, token)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('def.title', 'Definitions')]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DefinitionAction.prototype._getNoResultFoundMessage = function (info) {\r\n        return info && info.word\r\n            ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word)\r\n            : nls.localize('generic.noResults', \"No definition found\");\r\n    };\r\n    DefinitionAction.prototype._getAlternativeCommand = function (editor) {\r\n        return editor.getOption(41 /* gotoLocation */).alternativeDefinitionCommand;\r\n    };\r\n    DefinitionAction.prototype._getGoToPreference = function (editor) {\r\n        return editor.getOption(41 /* gotoLocation */).multipleDefinitions;\r\n    };\r\n    return DefinitionAction;\r\n}(SymbolNavigationAction));\r\nexport { DefinitionAction };\r\nvar goToDefinitionKb = isWeb && !isStandalone\r\n    ? 2048 /* CtrlCmd */ | 70 /* F12 */\r\n    : 70 /* F12 */;\r\nregisterEditorAction((_a = /** @class */ (function (_super) {\r\n        __extends(GoToDefinitionAction, _super);\r\n        function GoToDefinitionAction() {\r\n            var _this = _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: GoToDefinitionAction.id,\r\n                label: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\r\n                alias: 'Go to Definition',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                kbOpts: {\r\n                    kbExpr: EditorContextKeys.editorTextFocus,\r\n                    primary: goToDefinitionKb,\r\n                    weight: 100 /* EditorContrib */\r\n                },\r\n                contextMenuOpts: {\r\n                    group: 'navigation',\r\n                    order: 1.1\r\n                },\r\n                menuOpts: {\r\n                    menuId: 19 /* MenubarGoMenu */,\r\n                    group: '4_symbol_nav',\r\n                    order: 2,\r\n                    title: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\")\r\n                }\r\n            }) || this;\r\n            CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', GoToDefinitionAction.id);\r\n            return _this;\r\n        }\r\n        return GoToDefinitionAction;\r\n    }(DefinitionAction)),\r\n    _a.id = 'editor.action.revealDefinition',\r\n    _a));\r\nregisterEditorAction((_b = /** @class */ (function (_super) {\r\n        __extends(OpenDefinitionToSideAction, _super);\r\n        function OpenDefinitionToSideAction() {\r\n            var _this = _super.call(this, {\r\n                openToSide: true,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: OpenDefinitionToSideAction.id,\r\n                label: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\r\n                alias: 'Open Definition to the Side',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                kbOpts: {\r\n                    kbExpr: EditorContextKeys.editorTextFocus,\r\n                    primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KEY_K */, goToDefinitionKb),\r\n                    weight: 100 /* EditorContrib */\r\n                }\r\n            }) || this;\r\n            CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', OpenDefinitionToSideAction.id);\r\n            return _this;\r\n        }\r\n        return OpenDefinitionToSideAction;\r\n    }(DefinitionAction)),\r\n    _b.id = 'editor.action.revealDefinitionAside',\r\n    _b));\r\nregisterEditorAction((_c = /** @class */ (function (_super) {\r\n        __extends(PeekDefinitionAction, _super);\r\n        function PeekDefinitionAction() {\r\n            var _this = _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: true,\r\n                muteMessage: false\r\n            }, {\r\n                id: PeekDefinitionAction.id,\r\n                label: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\r\n                alias: 'Peek Definition',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                kbOpts: {\r\n                    kbExpr: EditorContextKeys.editorTextFocus,\r\n                    primary: 512 /* Alt */ | 70 /* F12 */,\r\n                    linux: { primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 68 /* F10 */ },\r\n                    weight: 100 /* EditorContrib */\r\n                },\r\n                contextMenuOpts: {\r\n                    menuId: 8 /* EditorContextPeek */,\r\n                    group: 'peek',\r\n                    order: 2\r\n                }\r\n            }) || this;\r\n            CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', PeekDefinitionAction.id);\r\n            return _this;\r\n        }\r\n        return PeekDefinitionAction;\r\n    }(DefinitionAction)),\r\n    _c.id = 'editor.action.peekDefinition',\r\n    _c));\r\n//#endregion\r\n//#region --- DECLARATION\r\nvar DeclarationAction = /** @class */ (function (_super) {\r\n    __extends(DeclarationAction, _super);\r\n    function DeclarationAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DeclarationAction.prototype._getLocationModel = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = ReferencesModel.bind;\r\n                        return [4 /*yield*/, getDeclarationsAtPosition(model, position, token)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('decl.title', 'Declarations')]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DeclarationAction.prototype._getNoResultFoundMessage = function (info) {\r\n        return info && info.word\r\n            ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\r\n            : nls.localize('decl.generic.noResults', \"No declaration found\");\r\n    };\r\n    DeclarationAction.prototype._getAlternativeCommand = function (editor) {\r\n        return editor.getOption(41 /* gotoLocation */).alternativeDeclarationCommand;\r\n    };\r\n    DeclarationAction.prototype._getGoToPreference = function (editor) {\r\n        return editor.getOption(41 /* gotoLocation */).multipleDeclarations;\r\n    };\r\n    return DeclarationAction;\r\n}(SymbolNavigationAction));\r\nregisterEditorAction((_d = /** @class */ (function (_super) {\r\n        __extends(GoToDeclarationAction, _super);\r\n        function GoToDeclarationAction() {\r\n            return _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: GoToDeclarationAction.id,\r\n                label: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\r\n                alias: 'Go to Declaration',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                contextMenuOpts: {\r\n                    group: 'navigation',\r\n                    order: 1.3\r\n                },\r\n                menuOpts: {\r\n                    menuId: 19 /* MenubarGoMenu */,\r\n                    group: '4_symbol_nav',\r\n                    order: 3,\r\n                    title: nls.localize({ key: 'miGotoDeclaration', comment: ['&& denotes a mnemonic'] }, \"Go to &&Declaration\")\r\n                },\r\n            }) || this;\r\n        }\r\n        GoToDeclarationAction.prototype._getNoResultFoundMessage = function (info) {\r\n            return info && info.word\r\n                ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\r\n                : nls.localize('decl.generic.noResults', \"No declaration found\");\r\n        };\r\n        return GoToDeclarationAction;\r\n    }(DeclarationAction)),\r\n    _d.id = 'editor.action.revealDeclaration',\r\n    _d));\r\nregisterEditorAction(/** @class */ (function (_super) {\r\n    __extends(PeekDeclarationAction, _super);\r\n    function PeekDeclarationAction() {\r\n        return _super.call(this, {\r\n            openToSide: false,\r\n            openInPeek: true,\r\n            muteMessage: false\r\n        }, {\r\n            id: 'editor.action.peekDeclaration',\r\n            label: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\r\n            alias: 'Peek Declaration',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n            contextMenuOpts: {\r\n                menuId: 8 /* EditorContextPeek */,\r\n                group: 'peek',\r\n                order: 3\r\n            }\r\n        }) || this;\r\n    }\r\n    return PeekDeclarationAction;\r\n}(DeclarationAction)));\r\n//#endregion\r\n//#region --- TYPE DEFINITION\r\nvar TypeDefinitionAction = /** @class */ (function (_super) {\r\n    __extends(TypeDefinitionAction, _super);\r\n    function TypeDefinitionAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TypeDefinitionAction.prototype._getLocationModel = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = ReferencesModel.bind;\r\n                        return [4 /*yield*/, getTypeDefinitionsAtPosition(model, position, token)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('typedef.title', 'Type Definitions')]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TypeDefinitionAction.prototype._getNoResultFoundMessage = function (info) {\r\n        return info && info.word\r\n            ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word)\r\n            : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\r\n    };\r\n    TypeDefinitionAction.prototype._getAlternativeCommand = function (editor) {\r\n        return editor.getOption(41 /* gotoLocation */).alternativeTypeDefinitionCommand;\r\n    };\r\n    TypeDefinitionAction.prototype._getGoToPreference = function (editor) {\r\n        return editor.getOption(41 /* gotoLocation */).multipleTypeDefinitions;\r\n    };\r\n    return TypeDefinitionAction;\r\n}(SymbolNavigationAction));\r\nregisterEditorAction((_e = /** @class */ (function (_super) {\r\n        __extends(GoToTypeDefinitionAction, _super);\r\n        function GoToTypeDefinitionAction() {\r\n            return _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: GoToTypeDefinitionAction.ID,\r\n                label: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\r\n                alias: 'Go to Type Definition',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                kbOpts: {\r\n                    kbExpr: EditorContextKeys.editorTextFocus,\r\n                    primary: 0,\r\n                    weight: 100 /* EditorContrib */\r\n                },\r\n                contextMenuOpts: {\r\n                    group: 'navigation',\r\n                    order: 1.4\r\n                },\r\n                menuOpts: {\r\n                    menuId: 19 /* MenubarGoMenu */,\r\n                    group: '4_symbol_nav',\r\n                    order: 3,\r\n                    title: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definition\")\r\n                }\r\n            }) || this;\r\n        }\r\n        return GoToTypeDefinitionAction;\r\n    }(TypeDefinitionAction)),\r\n    _e.ID = 'editor.action.goToTypeDefinition',\r\n    _e));\r\nregisterEditorAction((_f = /** @class */ (function (_super) {\r\n        __extends(PeekTypeDefinitionAction, _super);\r\n        function PeekTypeDefinitionAction() {\r\n            return _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: true,\r\n                muteMessage: false\r\n            }, {\r\n                id: PeekTypeDefinitionAction.ID,\r\n                label: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\r\n                alias: 'Peek Type Definition',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                contextMenuOpts: {\r\n                    menuId: 8 /* EditorContextPeek */,\r\n                    group: 'peek',\r\n                    order: 4\r\n                }\r\n            }) || this;\r\n        }\r\n        return PeekTypeDefinitionAction;\r\n    }(TypeDefinitionAction)),\r\n    _f.ID = 'editor.action.peekTypeDefinition',\r\n    _f));\r\n//#endregion\r\n//#region --- IMPLEMENTATION\r\nvar ImplementationAction = /** @class */ (function (_super) {\r\n    __extends(ImplementationAction, _super);\r\n    function ImplementationAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ImplementationAction.prototype._getLocationModel = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = ReferencesModel.bind;\r\n                        return [4 /*yield*/, getImplementationsAtPosition(model, position, token)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('impl.title', 'Implementations')]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ImplementationAction.prototype._getNoResultFoundMessage = function (info) {\r\n        return info && info.word\r\n            ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word)\r\n            : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\r\n    };\r\n    ImplementationAction.prototype._getAlternativeCommand = function (editor) {\r\n        return editor.getOption(41 /* gotoLocation */).alternativeImplementationCommand;\r\n    };\r\n    ImplementationAction.prototype._getGoToPreference = function (editor) {\r\n        return editor.getOption(41 /* gotoLocation */).multipleImplementations;\r\n    };\r\n    return ImplementationAction;\r\n}(SymbolNavigationAction));\r\nregisterEditorAction((_g = /** @class */ (function (_super) {\r\n        __extends(GoToImplementationAction, _super);\r\n        function GoToImplementationAction() {\r\n            return _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: GoToImplementationAction.ID,\r\n                label: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\r\n                alias: 'Go to Implementations',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                kbOpts: {\r\n                    kbExpr: EditorContextKeys.editorTextFocus,\r\n                    primary: 2048 /* CtrlCmd */ | 70 /* F12 */,\r\n                    weight: 100 /* EditorContrib */\r\n                },\r\n                menuOpts: {\r\n                    menuId: 19 /* MenubarGoMenu */,\r\n                    group: '4_symbol_nav',\r\n                    order: 4,\r\n                    title: nls.localize({ key: 'miGotoImplementation', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\")\r\n                },\r\n                contextMenuOpts: {\r\n                    group: 'navigation',\r\n                    order: 1.45\r\n                }\r\n            }) || this;\r\n        }\r\n        return GoToImplementationAction;\r\n    }(ImplementationAction)),\r\n    _g.ID = 'editor.action.goToImplementation',\r\n    _g));\r\nregisterEditorAction((_h = /** @class */ (function (_super) {\r\n        __extends(PeekImplementationAction, _super);\r\n        function PeekImplementationAction() {\r\n            return _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: true,\r\n                muteMessage: false\r\n            }, {\r\n                id: PeekImplementationAction.ID,\r\n                label: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\r\n                alias: 'Peek Implementations',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                kbOpts: {\r\n                    kbExpr: EditorContextKeys.editorTextFocus,\r\n                    primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 70 /* F12 */,\r\n                    weight: 100 /* EditorContrib */\r\n                },\r\n                contextMenuOpts: {\r\n                    menuId: 8 /* EditorContextPeek */,\r\n                    group: 'peek',\r\n                    order: 5\r\n                }\r\n            }) || this;\r\n        }\r\n        return PeekImplementationAction;\r\n    }(ImplementationAction)),\r\n    _h.ID = 'editor.action.peekImplementation',\r\n    _h));\r\n//#endregion\r\n//#region --- REFERENCES\r\nvar ReferencesAction = /** @class */ (function (_super) {\r\n    __extends(ReferencesAction, _super);\r\n    function ReferencesAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ReferencesAction.prototype._getNoResultFoundMessage = function (info) {\r\n        return info\r\n            ? nls.localize('references.no', \"No references found for '{0}'\", info.word)\r\n            : nls.localize('references.noGeneric', \"No references found\");\r\n    };\r\n    ReferencesAction.prototype._getAlternativeCommand = function (editor) {\r\n        return editor.getOption(41 /* gotoLocation */).alternativeReferenceCommand;\r\n    };\r\n    ReferencesAction.prototype._getGoToPreference = function (editor) {\r\n        return editor.getOption(41 /* gotoLocation */).multipleReferences;\r\n    };\r\n    return ReferencesAction;\r\n}(SymbolNavigationAction));\r\nregisterEditorAction(/** @class */ (function (_super) {\r\n    __extends(GoToReferencesAction, _super);\r\n    function GoToReferencesAction() {\r\n        return _super.call(this, {\r\n            openToSide: false,\r\n            openInPeek: false,\r\n            muteMessage: false\r\n        }, {\r\n            id: 'editor.action.goToReferences',\r\n            label: nls.localize('goToReferences.label', \"Go to References\"),\r\n            alias: 'Go to References',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* Shift */ | 70 /* F12 */,\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                group: 'navigation',\r\n                order: 1.45\r\n            },\r\n            menuOpts: {\r\n                menuId: 19 /* MenubarGoMenu */,\r\n                group: '4_symbol_nav',\r\n                order: 5,\r\n                title: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\")\r\n            },\r\n        }) || this;\r\n    }\r\n    GoToReferencesAction.prototype._getLocationModel = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = ReferencesModel.bind;\r\n                        return [4 /*yield*/, getReferencesAtPosition(model, position, true, token)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('ref.title', 'References')]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return GoToReferencesAction;\r\n}(ReferencesAction)));\r\nregisterEditorAction(/** @class */ (function (_super) {\r\n    __extends(PeekReferencesAction, _super);\r\n    function PeekReferencesAction() {\r\n        return _super.call(this, {\r\n            openToSide: false,\r\n            openInPeek: true,\r\n            muteMessage: false\r\n        }, {\r\n            id: 'editor.action.referenceSearch.trigger',\r\n            label: nls.localize('references.action.label', \"Peek References\"),\r\n            alias: 'Peek References',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n            contextMenuOpts: {\r\n                menuId: 8 /* EditorContextPeek */,\r\n                group: 'peek',\r\n                order: 6\r\n            }\r\n        }) || this;\r\n    }\r\n    PeekReferencesAction.prototype._getLocationModel = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = ReferencesModel.bind;\r\n                        return [4 /*yield*/, getReferencesAtPosition(model, position, false, token)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('ref.title', 'References')]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return PeekReferencesAction;\r\n}(ReferencesAction)));\r\n//#endregion\r\n//#region --- GENERIC goto symbols command\r\nvar GenericGoToLocationAction = /** @class */ (function (_super) {\r\n    __extends(GenericGoToLocationAction, _super);\r\n    function GenericGoToLocationAction(config, _references, _gotoMultipleBehaviour) {\r\n        var _this = _super.call(this, config, {\r\n            id: 'editor.action.goToLocation',\r\n            label: nls.localize('label.generic', \"Go To Any Symbol\"),\r\n            alias: 'Go To Any Symbol',\r\n            precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n        }) || this;\r\n        _this._references = _references;\r\n        _this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\r\n        return _this;\r\n    }\r\n    GenericGoToLocationAction.prototype._getLocationModel = function (_model, _position, _token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'))];\r\n            });\r\n        });\r\n    };\r\n    GenericGoToLocationAction.prototype._getNoResultFoundMessage = function (info) {\r\n        return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\r\n    };\r\n    GenericGoToLocationAction.prototype._getGoToPreference = function (editor) {\r\n        var _a;\r\n        return (_a = this._gotoMultipleBehaviour) !== null && _a !== void 0 ? _a : editor.getOption(41 /* gotoLocation */).multipleReferences;\r\n    };\r\n    GenericGoToLocationAction.prototype._getAlternativeCommand = function () { return ''; };\r\n    return GenericGoToLocationAction;\r\n}(SymbolNavigationAction));\r\nCommandsRegistry.registerCommand({\r\n    id: 'editor.action.goToLocations',\r\n    description: {\r\n        description: 'Go to locations from a position in a file',\r\n        args: [\r\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\r\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\r\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\r\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\r\n        ]\r\n    },\r\n    handler: function (accessor, resource, position, references, multiple, openInPeek) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var editorService, editor;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    assertType(URI.isUri(resource));\r\n                    assertType(corePosition.Position.isIPosition(position));\r\n                    assertType(Array.isArray(references));\r\n                    assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\r\n                    assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\r\n                    editorService = accessor.get(ICodeEditorService);\r\n                    return [4 /*yield*/, editorService.openCodeEditor({ resource: resource }, editorService.getFocusedCodeEditor())];\r\n                case 1:\r\n                    editor = _a.sent();\r\n                    if (isCodeEditor(editor)) {\r\n                        editor.setPosition(position);\r\n                        editor.revealPositionInCenterIfOutsideViewport(position, 0 /* Smooth */);\r\n                        return [2 /*return*/, editor.invokeWithinContext(function (accessor) {\r\n                                var command = new GenericGoToLocationAction({ muteMessage: true, openInPeek: Boolean(openInPeek), openToSide: false }, references, multiple);\r\n                                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\r\n                            })];\r\n                    }\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }\r\n});\r\nCommandsRegistry.registerCommand({\r\n    id: 'editor.action.peekLocations',\r\n    description: {\r\n        description: 'Peek locations from a position in a file',\r\n        args: [\r\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\r\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\r\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\r\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\r\n        ]\r\n    },\r\n    handler: function (accessor, resource, position, references, multiple) { return __awaiter(void 0, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, true);\r\n            return [2 /*return*/];\r\n        });\r\n    }); }\r\n});\r\n//#endregion\r\n//#region --- REFERENCE search special commands\r\nCommandsRegistry.registerCommand({\r\n    id: 'editor.action.findReferences',\r\n    handler: function (accessor, resource, position) {\r\n        assertType(URI.isUri(resource));\r\n        assertType(corePosition.Position.isIPosition(position));\r\n        var codeEditorService = accessor.get(ICodeEditorService);\r\n        return codeEditorService.openCodeEditor({ resource: resource }, codeEditorService.getFocusedCodeEditor()).then(function (control) {\r\n            if (!isCodeEditor(control) || !control.hasModel()) {\r\n                return undefined;\r\n            }\r\n            var controller = ReferencesController.get(control);\r\n            if (!controller) {\r\n                return undefined;\r\n            }\r\n            var references = createCancelablePromise(function (token) { return getReferencesAtPosition(control.getModel(), corePosition.Position.lift(position), false, token).then(function (references) { return new ReferencesModel(references, nls.localize('ref.title', 'References')); }); });\r\n            var range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n            return Promise.resolve(controller.toggleWidget(range, references, false));\r\n        });\r\n    }\r\n});\r\n// use NEW command\r\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations');\r\n//#endregion\r\n"]},"metadata":{},"sourceType":"module"}