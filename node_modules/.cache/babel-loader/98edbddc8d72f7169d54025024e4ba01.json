{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './rulers.css';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { ViewPart } from '../../view/viewPart.js';\nimport { editorRuler } from '../../../common/view/editorColorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\n\nvar Rulers =\n/** @class */\nfunction (_super) {\n  __extends(Rulers, _super);\n\n  function Rulers(context) {\n    var _this = _super.call(this, context) || this;\n\n    _this.domNode = createFastDomNode(document.createElement('div'));\n\n    _this.domNode.setAttribute('role', 'presentation');\n\n    _this.domNode.setAttribute('aria-hidden', 'true');\n\n    _this.domNode.setClassName('view-rulers');\n\n    _this._renderedRulers = [];\n    var options = _this._context.configuration.options;\n    _this._rulers = options.get(77\n    /* rulers */\n    );\n    _this._typicalHalfwidthCharacterWidth = options.get(34\n    /* fontInfo */\n    ).typicalHalfwidthCharacterWidth;\n    return _this;\n  }\n\n  Rulers.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n  }; // --- begin event handlers\n\n\n  Rulers.prototype.onConfigurationChanged = function (e) {\n    var options = this._context.configuration.options;\n    this._rulers = options.get(77\n    /* rulers */\n    );\n    this._typicalHalfwidthCharacterWidth = options.get(34\n    /* fontInfo */\n    ).typicalHalfwidthCharacterWidth;\n    return true;\n  };\n\n  Rulers.prototype.onScrollChanged = function (e) {\n    return e.scrollHeightChanged;\n  }; // --- end event handlers\n\n\n  Rulers.prototype.prepareRender = function (ctx) {// Nothing to read\n  };\n\n  Rulers.prototype._ensureRulersCount = function () {\n    var currentCount = this._renderedRulers.length;\n    var desiredCount = this._rulers.length;\n\n    if (currentCount === desiredCount) {\n      // Nothing to do\n      return;\n    }\n\n    if (currentCount < desiredCount) {\n      var tabSize = this._context.model.getOptions().tabSize;\n\n      var rulerWidth = tabSize;\n      var addCount = desiredCount - currentCount;\n\n      while (addCount > 0) {\n        var node = createFastDomNode(document.createElement('div'));\n        node.setClassName('view-ruler');\n        node.setWidth(rulerWidth);\n        this.domNode.appendChild(node);\n\n        this._renderedRulers.push(node);\n\n        addCount--;\n      }\n\n      return;\n    }\n\n    var removeCount = currentCount - desiredCount;\n\n    while (removeCount > 0) {\n      var node = this._renderedRulers.pop();\n\n      this.domNode.removeChild(node);\n      removeCount--;\n    }\n  };\n\n  Rulers.prototype.render = function (ctx) {\n    this._ensureRulersCount();\n\n    for (var i = 0, len = this._rulers.length; i < len; i++) {\n      var node = this._renderedRulers[i];\n      node.setHeight(Math.min(ctx.scrollHeight, 1000000));\n      node.setLeft(this._rulers[i] * this._typicalHalfwidthCharacterWidth);\n    }\n  };\n\n  return Rulers;\n}(ViewPart);\n\nexport { Rulers };\nregisterThemingParticipant(function (theme, collector) {\n  var rulerColor = theme.getColor(editorRuler);\n\n  if (rulerColor) {\n    collector.addRule(\".monaco-editor .view-ruler { box-shadow: 1px 0 0 0 \" + rulerColor + \" inset; }\");\n  }\n});","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/rulers/rulers.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","createFastDomNode","ViewPart","editorRuler","registerThemingParticipant","Rulers","_super","context","_this","call","domNode","document","createElement","setAttribute","setClassName","_renderedRulers","options","_context","configuration","_rulers","get","_typicalHalfwidthCharacterWidth","typicalHalfwidthCharacterWidth","dispose","onConfigurationChanged","e","onScrollChanged","scrollHeightChanged","prepareRender","ctx","_ensureRulersCount","currentCount","length","desiredCount","tabSize","model","getOptions","rulerWidth","addCount","node","setWidth","appendChild","push","removeCount","pop","removeChild","render","i","len","setHeight","Math","min","scrollHeight","setLeft","theme","collector","rulerColor","getColor","addRule"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './rulers.css';\r\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\r\nimport { ViewPart } from '../../view/viewPart.js';\r\nimport { editorRuler } from '../../../common/view/editorColorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\r\nvar Rulers = /** @class */ (function (_super) {\r\n    __extends(Rulers, _super);\r\n    function Rulers(context) {\r\n        var _this = _super.call(this, context) || this;\r\n        _this.domNode = createFastDomNode(document.createElement('div'));\r\n        _this.domNode.setAttribute('role', 'presentation');\r\n        _this.domNode.setAttribute('aria-hidden', 'true');\r\n        _this.domNode.setClassName('view-rulers');\r\n        _this._renderedRulers = [];\r\n        var options = _this._context.configuration.options;\r\n        _this._rulers = options.get(77 /* rulers */);\r\n        _this._typicalHalfwidthCharacterWidth = options.get(34 /* fontInfo */).typicalHalfwidthCharacterWidth;\r\n        return _this;\r\n    }\r\n    Rulers.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    // --- begin event handlers\r\n    Rulers.prototype.onConfigurationChanged = function (e) {\r\n        var options = this._context.configuration.options;\r\n        this._rulers = options.get(77 /* rulers */);\r\n        this._typicalHalfwidthCharacterWidth = options.get(34 /* fontInfo */).typicalHalfwidthCharacterWidth;\r\n        return true;\r\n    };\r\n    Rulers.prototype.onScrollChanged = function (e) {\r\n        return e.scrollHeightChanged;\r\n    };\r\n    // --- end event handlers\r\n    Rulers.prototype.prepareRender = function (ctx) {\r\n        // Nothing to read\r\n    };\r\n    Rulers.prototype._ensureRulersCount = function () {\r\n        var currentCount = this._renderedRulers.length;\r\n        var desiredCount = this._rulers.length;\r\n        if (currentCount === desiredCount) {\r\n            // Nothing to do\r\n            return;\r\n        }\r\n        if (currentCount < desiredCount) {\r\n            var tabSize = this._context.model.getOptions().tabSize;\r\n            var rulerWidth = tabSize;\r\n            var addCount = desiredCount - currentCount;\r\n            while (addCount > 0) {\r\n                var node = createFastDomNode(document.createElement('div'));\r\n                node.setClassName('view-ruler');\r\n                node.setWidth(rulerWidth);\r\n                this.domNode.appendChild(node);\r\n                this._renderedRulers.push(node);\r\n                addCount--;\r\n            }\r\n            return;\r\n        }\r\n        var removeCount = currentCount - desiredCount;\r\n        while (removeCount > 0) {\r\n            var node = this._renderedRulers.pop();\r\n            this.domNode.removeChild(node);\r\n            removeCount--;\r\n        }\r\n    };\r\n    Rulers.prototype.render = function (ctx) {\r\n        this._ensureRulersCount();\r\n        for (var i = 0, len = this._rulers.length; i < len; i++) {\r\n            var node = this._renderedRulers[i];\r\n            node.setHeight(Math.min(ctx.scrollHeight, 1000000));\r\n            node.setLeft(this._rulers[i] * this._typicalHalfwidthCharacterWidth);\r\n        }\r\n    };\r\n    return Rulers;\r\n}(ViewPart));\r\nexport { Rulers };\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var rulerColor = theme.getColor(editorRuler);\r\n    if (rulerColor) {\r\n        collector.addRule(\".monaco-editor .view-ruler { box-shadow: 1px 0 0 0 \" + rulerColor + \" inset; }\");\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}