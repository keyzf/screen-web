{"ast":null,"code":"import '../../editor/editor.api.js';\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport { typescriptVersion } from './lib/typescriptServicesMetadata.js'; // do not import the whole typescriptServices here\n\nvar Emitter = monaco.Emitter;\n\nvar LanguageServiceDefaultsImpl =\n/** @class */\nfunction () {\n  function LanguageServiceDefaultsImpl(compilerOptions, diagnosticsOptions) {\n    this._onDidChange = new Emitter();\n    this._onDidExtraLibsChange = new Emitter();\n    this._extraLibs = Object.create(null);\n    this._eagerModelSync = false;\n    this.setCompilerOptions(compilerOptions);\n    this.setDiagnosticsOptions(diagnosticsOptions);\n    this._onDidExtraLibsChangeTimeout = -1;\n  }\n\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidChange\", {\n    get: function () {\n      return this._onDidChange.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidExtraLibsChange\", {\n    get: function () {\n      return this._onDidExtraLibsChange.event;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  LanguageServiceDefaultsImpl.prototype.getExtraLibs = function () {\n    return this._extraLibs;\n  };\n\n  LanguageServiceDefaultsImpl.prototype.addExtraLib = function (content, _filePath) {\n    var _this = this;\n\n    var filePath;\n\n    if (typeof _filePath === 'undefined') {\n      filePath = \"ts:extralib-\" + Math.random().toString(36).substring(2, 15);\n    } else {\n      filePath = _filePath;\n    }\n\n    if (this._extraLibs[filePath] && this._extraLibs[filePath].content === content) {\n      // no-op, there already exists an extra lib with this content\n      return {\n        dispose: function () {}\n      };\n    }\n\n    var myVersion = 1;\n\n    if (this._extraLibs[filePath]) {\n      myVersion = this._extraLibs[filePath].version + 1;\n    }\n\n    this._extraLibs[filePath] = {\n      content: content,\n      version: myVersion\n    };\n\n    this._fireOnDidExtraLibsChangeSoon();\n\n    return {\n      dispose: function () {\n        var extraLib = _this._extraLibs[filePath];\n\n        if (!extraLib) {\n          return;\n        }\n\n        if (extraLib.version !== myVersion) {\n          return;\n        }\n\n        delete _this._extraLibs[filePath];\n\n        _this._fireOnDidExtraLibsChangeSoon();\n      }\n    };\n  };\n\n  LanguageServiceDefaultsImpl.prototype.setExtraLibs = function (libs) {\n    // clear out everything\n    this._extraLibs = Object.create(null);\n\n    if (libs && libs.length > 0) {\n      for (var _i = 0, libs_1 = libs; _i < libs_1.length; _i++) {\n        var lib = libs_1[_i];\n        var filePath = lib.filePath || \"ts:extralib-\" + Math.random().toString(36).substring(2, 15);\n        var content = lib.content;\n        this._extraLibs[filePath] = {\n          content: content,\n          version: 1\n        };\n      }\n    }\n\n    this._fireOnDidExtraLibsChangeSoon();\n  };\n\n  LanguageServiceDefaultsImpl.prototype._fireOnDidExtraLibsChangeSoon = function () {\n    var _this = this;\n\n    if (this._onDidExtraLibsChangeTimeout !== -1) {\n      // already scheduled\n      return;\n    }\n\n    this._onDidExtraLibsChangeTimeout = setTimeout(function () {\n      _this._onDidExtraLibsChangeTimeout = -1;\n\n      _this._onDidExtraLibsChange.fire(undefined);\n    }, 0);\n  };\n\n  LanguageServiceDefaultsImpl.prototype.getCompilerOptions = function () {\n    return this._compilerOptions;\n  };\n\n  LanguageServiceDefaultsImpl.prototype.setCompilerOptions = function (options) {\n    this._compilerOptions = options || Object.create(null);\n\n    this._onDidChange.fire(undefined);\n  };\n\n  LanguageServiceDefaultsImpl.prototype.getDiagnosticsOptions = function () {\n    return this._diagnosticsOptions;\n  };\n\n  LanguageServiceDefaultsImpl.prototype.setDiagnosticsOptions = function (options) {\n    this._diagnosticsOptions = options || Object.create(null);\n\n    this._onDidChange.fire(undefined);\n  };\n\n  LanguageServiceDefaultsImpl.prototype.setMaximumWorkerIdleTime = function (value) {};\n\n  LanguageServiceDefaultsImpl.prototype.setEagerModelSync = function (value) {\n    // doesn't fire an event since no\n    // worker restart is required here\n    this._eagerModelSync = value;\n  };\n\n  LanguageServiceDefaultsImpl.prototype.getEagerModelSync = function () {\n    return this._eagerModelSync;\n  };\n\n  return LanguageServiceDefaultsImpl;\n}();\n\nexport { LanguageServiceDefaultsImpl }; //#region enums copied from typescript to prevent loading the entire typescriptServices ---\n\nvar ModuleKind;\n\n(function (ModuleKind) {\n  ModuleKind[ModuleKind[\"None\"] = 0] = \"None\";\n  ModuleKind[ModuleKind[\"CommonJS\"] = 1] = \"CommonJS\";\n  ModuleKind[ModuleKind[\"AMD\"] = 2] = \"AMD\";\n  ModuleKind[ModuleKind[\"UMD\"] = 3] = \"UMD\";\n  ModuleKind[ModuleKind[\"System\"] = 4] = \"System\";\n  ModuleKind[ModuleKind[\"ES2015\"] = 5] = \"ES2015\";\n  ModuleKind[ModuleKind[\"ESNext\"] = 99] = \"ESNext\";\n})(ModuleKind || (ModuleKind = {}));\n\nvar JsxEmit;\n\n(function (JsxEmit) {\n  JsxEmit[JsxEmit[\"None\"] = 0] = \"None\";\n  JsxEmit[JsxEmit[\"Preserve\"] = 1] = \"Preserve\";\n  JsxEmit[JsxEmit[\"React\"] = 2] = \"React\";\n  JsxEmit[JsxEmit[\"ReactNative\"] = 3] = \"ReactNative\";\n})(JsxEmit || (JsxEmit = {}));\n\nvar NewLineKind;\n\n(function (NewLineKind) {\n  NewLineKind[NewLineKind[\"CarriageReturnLineFeed\"] = 0] = \"CarriageReturnLineFeed\";\n  NewLineKind[NewLineKind[\"LineFeed\"] = 1] = \"LineFeed\";\n})(NewLineKind || (NewLineKind = {}));\n\nvar ScriptTarget;\n\n(function (ScriptTarget) {\n  ScriptTarget[ScriptTarget[\"ES3\"] = 0] = \"ES3\";\n  ScriptTarget[ScriptTarget[\"ES5\"] = 1] = \"ES5\";\n  ScriptTarget[ScriptTarget[\"ES2015\"] = 2] = \"ES2015\";\n  ScriptTarget[ScriptTarget[\"ES2016\"] = 3] = \"ES2016\";\n  ScriptTarget[ScriptTarget[\"ES2017\"] = 4] = \"ES2017\";\n  ScriptTarget[ScriptTarget[\"ES2018\"] = 5] = \"ES2018\";\n  ScriptTarget[ScriptTarget[\"ES2019\"] = 6] = \"ES2019\";\n  ScriptTarget[ScriptTarget[\"ES2020\"] = 7] = \"ES2020\";\n  ScriptTarget[ScriptTarget[\"ESNext\"] = 99] = \"ESNext\";\n  ScriptTarget[ScriptTarget[\"JSON\"] = 100] = \"JSON\";\n  ScriptTarget[ScriptTarget[\"Latest\"] = 99] = \"Latest\";\n})(ScriptTarget || (ScriptTarget = {}));\n\nvar ModuleResolutionKind;\n\n(function (ModuleResolutionKind) {\n  ModuleResolutionKind[ModuleResolutionKind[\"Classic\"] = 1] = \"Classic\";\n  ModuleResolutionKind[ModuleResolutionKind[\"NodeJs\"] = 2] = \"NodeJs\";\n})(ModuleResolutionKind || (ModuleResolutionKind = {})); //#endregion\n\n\nvar typescriptDefaults = new LanguageServiceDefaultsImpl({\n  allowNonTsExtensions: true,\n  target: ScriptTarget.Latest\n}, {\n  noSemanticValidation: false,\n  noSyntaxValidation: false\n});\nvar javascriptDefaults = new LanguageServiceDefaultsImpl({\n  allowNonTsExtensions: true,\n  allowJs: true,\n  target: ScriptTarget.Latest\n}, {\n  noSemanticValidation: true,\n  noSyntaxValidation: false\n});\n\nfunction getTypeScriptWorker() {\n  return getMode().then(function (mode) {\n    return mode.getTypeScriptWorker();\n  });\n}\n\nfunction getJavaScriptWorker() {\n  return getMode().then(function (mode) {\n    return mode.getJavaScriptWorker();\n  });\n} // Export API\n\n\nfunction createAPI() {\n  return {\n    ModuleKind: ModuleKind,\n    JsxEmit: JsxEmit,\n    NewLineKind: NewLineKind,\n    ScriptTarget: ScriptTarget,\n    ModuleResolutionKind: ModuleResolutionKind,\n    typescriptVersion: typescriptVersion,\n    typescriptDefaults: typescriptDefaults,\n    javascriptDefaults: javascriptDefaults,\n    getTypeScriptWorker: getTypeScriptWorker,\n    getJavaScriptWorker: getJavaScriptWorker\n  };\n}\n\nmonaco.languages.typescript = createAPI(); // --- Registration to monaco editor ---\n\nfunction getMode() {\n  return import('./tsMode.js');\n}\n\nmonaco.languages.onLanguage('typescript', function () {\n  return getMode().then(function (mode) {\n    return mode.setupTypeScript(typescriptDefaults);\n  });\n});\nmonaco.languages.onLanguage('javascript', function () {\n  return getMode().then(function (mode) {\n    return mode.setupJavaScript(javascriptDefaults);\n  });\n});","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/language/typescript/monaco.contribution.js"],"names":["typescriptVersion","Emitter","monaco","LanguageServiceDefaultsImpl","compilerOptions","diagnosticsOptions","_onDidChange","_onDidExtraLibsChange","_extraLibs","Object","create","_eagerModelSync","setCompilerOptions","setDiagnosticsOptions","_onDidExtraLibsChangeTimeout","defineProperty","prototype","get","event","enumerable","configurable","getExtraLibs","addExtraLib","content","_filePath","_this","filePath","Math","random","toString","substring","dispose","myVersion","version","_fireOnDidExtraLibsChangeSoon","extraLib","setExtraLibs","libs","length","_i","libs_1","lib","setTimeout","fire","undefined","getCompilerOptions","_compilerOptions","options","getDiagnosticsOptions","_diagnosticsOptions","setMaximumWorkerIdleTime","value","setEagerModelSync","getEagerModelSync","ModuleKind","JsxEmit","NewLineKind","ScriptTarget","ModuleResolutionKind","typescriptDefaults","allowNonTsExtensions","target","Latest","noSemanticValidation","noSyntaxValidation","javascriptDefaults","allowJs","getTypeScriptWorker","getMode","then","mode","getJavaScriptWorker","createAPI","languages","typescript","onLanguage","setupTypeScript","setupJavaScript"],"mappings":"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","sourcesContent":["import '../../editor/editor.api.js';\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { typescriptVersion } from './lib/typescriptServicesMetadata.js'; // do not import the whole typescriptServices here\r\nvar Emitter = monaco.Emitter;\r\nvar LanguageServiceDefaultsImpl = /** @class */ (function () {\r\n    function LanguageServiceDefaultsImpl(compilerOptions, diagnosticsOptions) {\r\n        this._onDidChange = new Emitter();\r\n        this._onDidExtraLibsChange = new Emitter();\r\n        this._extraLibs = Object.create(null);\r\n        this._eagerModelSync = false;\r\n        this.setCompilerOptions(compilerOptions);\r\n        this.setDiagnosticsOptions(diagnosticsOptions);\r\n        this._onDidExtraLibsChangeTimeout = -1;\r\n    }\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidChange\", {\r\n        get: function () {\r\n            return this._onDidChange.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidExtraLibsChange\", {\r\n        get: function () {\r\n            return this._onDidExtraLibsChange.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LanguageServiceDefaultsImpl.prototype.getExtraLibs = function () {\r\n        return this._extraLibs;\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype.addExtraLib = function (content, _filePath) {\r\n        var _this = this;\r\n        var filePath;\r\n        if (typeof _filePath === 'undefined') {\r\n            filePath = \"ts:extralib-\" + Math.random().toString(36).substring(2, 15);\r\n        }\r\n        else {\r\n            filePath = _filePath;\r\n        }\r\n        if (this._extraLibs[filePath] && this._extraLibs[filePath].content === content) {\r\n            // no-op, there already exists an extra lib with this content\r\n            return {\r\n                dispose: function () { }\r\n            };\r\n        }\r\n        var myVersion = 1;\r\n        if (this._extraLibs[filePath]) {\r\n            myVersion = this._extraLibs[filePath].version + 1;\r\n        }\r\n        this._extraLibs[filePath] = {\r\n            content: content,\r\n            version: myVersion,\r\n        };\r\n        this._fireOnDidExtraLibsChangeSoon();\r\n        return {\r\n            dispose: function () {\r\n                var extraLib = _this._extraLibs[filePath];\r\n                if (!extraLib) {\r\n                    return;\r\n                }\r\n                if (extraLib.version !== myVersion) {\r\n                    return;\r\n                }\r\n                delete _this._extraLibs[filePath];\r\n                _this._fireOnDidExtraLibsChangeSoon();\r\n            }\r\n        };\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype.setExtraLibs = function (libs) {\r\n        // clear out everything\r\n        this._extraLibs = Object.create(null);\r\n        if (libs && libs.length > 0) {\r\n            for (var _i = 0, libs_1 = libs; _i < libs_1.length; _i++) {\r\n                var lib = libs_1[_i];\r\n                var filePath = lib.filePath || \"ts:extralib-\" + Math.random().toString(36).substring(2, 15);\r\n                var content = lib.content;\r\n                this._extraLibs[filePath] = {\r\n                    content: content,\r\n                    version: 1\r\n                };\r\n            }\r\n        }\r\n        this._fireOnDidExtraLibsChangeSoon();\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype._fireOnDidExtraLibsChangeSoon = function () {\r\n        var _this = this;\r\n        if (this._onDidExtraLibsChangeTimeout !== -1) {\r\n            // already scheduled\r\n            return;\r\n        }\r\n        this._onDidExtraLibsChangeTimeout = setTimeout(function () {\r\n            _this._onDidExtraLibsChangeTimeout = -1;\r\n            _this._onDidExtraLibsChange.fire(undefined);\r\n        }, 0);\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype.getCompilerOptions = function () {\r\n        return this._compilerOptions;\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype.setCompilerOptions = function (options) {\r\n        this._compilerOptions = options || Object.create(null);\r\n        this._onDidChange.fire(undefined);\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype.getDiagnosticsOptions = function () {\r\n        return this._diagnosticsOptions;\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype.setDiagnosticsOptions = function (options) {\r\n        this._diagnosticsOptions = options || Object.create(null);\r\n        this._onDidChange.fire(undefined);\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype.setMaximumWorkerIdleTime = function (value) {\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype.setEagerModelSync = function (value) {\r\n        // doesn't fire an event since no\r\n        // worker restart is required here\r\n        this._eagerModelSync = value;\r\n    };\r\n    LanguageServiceDefaultsImpl.prototype.getEagerModelSync = function () {\r\n        return this._eagerModelSync;\r\n    };\r\n    return LanguageServiceDefaultsImpl;\r\n}());\r\nexport { LanguageServiceDefaultsImpl };\r\n//#region enums copied from typescript to prevent loading the entire typescriptServices ---\r\nvar ModuleKind;\r\n(function (ModuleKind) {\r\n    ModuleKind[ModuleKind[\"None\"] = 0] = \"None\";\r\n    ModuleKind[ModuleKind[\"CommonJS\"] = 1] = \"CommonJS\";\r\n    ModuleKind[ModuleKind[\"AMD\"] = 2] = \"AMD\";\r\n    ModuleKind[ModuleKind[\"UMD\"] = 3] = \"UMD\";\r\n    ModuleKind[ModuleKind[\"System\"] = 4] = \"System\";\r\n    ModuleKind[ModuleKind[\"ES2015\"] = 5] = \"ES2015\";\r\n    ModuleKind[ModuleKind[\"ESNext\"] = 99] = \"ESNext\";\r\n})(ModuleKind || (ModuleKind = {}));\r\nvar JsxEmit;\r\n(function (JsxEmit) {\r\n    JsxEmit[JsxEmit[\"None\"] = 0] = \"None\";\r\n    JsxEmit[JsxEmit[\"Preserve\"] = 1] = \"Preserve\";\r\n    JsxEmit[JsxEmit[\"React\"] = 2] = \"React\";\r\n    JsxEmit[JsxEmit[\"ReactNative\"] = 3] = \"ReactNative\";\r\n})(JsxEmit || (JsxEmit = {}));\r\nvar NewLineKind;\r\n(function (NewLineKind) {\r\n    NewLineKind[NewLineKind[\"CarriageReturnLineFeed\"] = 0] = \"CarriageReturnLineFeed\";\r\n    NewLineKind[NewLineKind[\"LineFeed\"] = 1] = \"LineFeed\";\r\n})(NewLineKind || (NewLineKind = {}));\r\nvar ScriptTarget;\r\n(function (ScriptTarget) {\r\n    ScriptTarget[ScriptTarget[\"ES3\"] = 0] = \"ES3\";\r\n    ScriptTarget[ScriptTarget[\"ES5\"] = 1] = \"ES5\";\r\n    ScriptTarget[ScriptTarget[\"ES2015\"] = 2] = \"ES2015\";\r\n    ScriptTarget[ScriptTarget[\"ES2016\"] = 3] = \"ES2016\";\r\n    ScriptTarget[ScriptTarget[\"ES2017\"] = 4] = \"ES2017\";\r\n    ScriptTarget[ScriptTarget[\"ES2018\"] = 5] = \"ES2018\";\r\n    ScriptTarget[ScriptTarget[\"ES2019\"] = 6] = \"ES2019\";\r\n    ScriptTarget[ScriptTarget[\"ES2020\"] = 7] = \"ES2020\";\r\n    ScriptTarget[ScriptTarget[\"ESNext\"] = 99] = \"ESNext\";\r\n    ScriptTarget[ScriptTarget[\"JSON\"] = 100] = \"JSON\";\r\n    ScriptTarget[ScriptTarget[\"Latest\"] = 99] = \"Latest\";\r\n})(ScriptTarget || (ScriptTarget = {}));\r\nvar ModuleResolutionKind;\r\n(function (ModuleResolutionKind) {\r\n    ModuleResolutionKind[ModuleResolutionKind[\"Classic\"] = 1] = \"Classic\";\r\n    ModuleResolutionKind[ModuleResolutionKind[\"NodeJs\"] = 2] = \"NodeJs\";\r\n})(ModuleResolutionKind || (ModuleResolutionKind = {}));\r\n//#endregion\r\nvar typescriptDefaults = new LanguageServiceDefaultsImpl({ allowNonTsExtensions: true, target: ScriptTarget.Latest }, { noSemanticValidation: false, noSyntaxValidation: false });\r\nvar javascriptDefaults = new LanguageServiceDefaultsImpl({ allowNonTsExtensions: true, allowJs: true, target: ScriptTarget.Latest }, { noSemanticValidation: true, noSyntaxValidation: false });\r\nfunction getTypeScriptWorker() {\r\n    return getMode().then(function (mode) { return mode.getTypeScriptWorker(); });\r\n}\r\nfunction getJavaScriptWorker() {\r\n    return getMode().then(function (mode) { return mode.getJavaScriptWorker(); });\r\n}\r\n// Export API\r\nfunction createAPI() {\r\n    return {\r\n        ModuleKind: ModuleKind,\r\n        JsxEmit: JsxEmit,\r\n        NewLineKind: NewLineKind,\r\n        ScriptTarget: ScriptTarget,\r\n        ModuleResolutionKind: ModuleResolutionKind,\r\n        typescriptVersion: typescriptVersion,\r\n        typescriptDefaults: typescriptDefaults,\r\n        javascriptDefaults: javascriptDefaults,\r\n        getTypeScriptWorker: getTypeScriptWorker,\r\n        getJavaScriptWorker: getJavaScriptWorker\r\n    };\r\n}\r\nmonaco.languages.typescript = createAPI();\r\n// --- Registration to monaco editor ---\r\nfunction getMode() {\r\n    return import('./tsMode.js');\r\n}\r\nmonaco.languages.onLanguage('typescript', function () {\r\n    return getMode().then(function (mode) { return mode.setupTypeScript(typescriptDefaults); });\r\n});\r\nmonaco.languages.onLanguage('javascript', function () {\r\n    return getMode().then(function (mode) { return mode.setupJavaScript(javascriptDefaults); });\r\n});\r\n"]},"metadata":{},"sourceType":"module"}