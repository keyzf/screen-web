{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as dom from '../../base/browser/dom.js';\nimport { GlobalMouseMoveMonitor } from '../../base/browser/globalMouseMoveMonitor.js';\nimport { StandardMouseEvent } from '../../base/browser/mouseEvent.js';\nimport { Disposable } from '../../base/common/lifecycle.js';\n/**\r\n * Coordinates relative to the whole document (e.g. mouse event's pageX and pageY)\r\n */\n\nvar PageCoordinates =\n/** @class */\nfunction () {\n  function PageCoordinates(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  PageCoordinates.prototype.toClientCoordinates = function () {\n    return new ClientCoordinates(this.x - dom.StandardWindow.scrollX, this.y - dom.StandardWindow.scrollY);\n  };\n\n  return PageCoordinates;\n}();\n\nexport { PageCoordinates };\n/**\r\n * Coordinates within the application's client area (i.e. origin is document's scroll position).\r\n *\r\n * For example, clicking in the top-left corner of the client area will\r\n * always result in a mouse event with a client.x value of 0, regardless\r\n * of whether the page is scrolled horizontally.\r\n */\n\nvar ClientCoordinates =\n/** @class */\nfunction () {\n  function ClientCoordinates(clientX, clientY) {\n    this.clientX = clientX;\n    this.clientY = clientY;\n  }\n\n  ClientCoordinates.prototype.toPageCoordinates = function () {\n    return new PageCoordinates(this.clientX + dom.StandardWindow.scrollX, this.clientY + dom.StandardWindow.scrollY);\n  };\n\n  return ClientCoordinates;\n}();\n\nexport { ClientCoordinates };\n/**\r\n * The position of the editor in the page.\r\n */\n\nvar EditorPagePosition =\n/** @class */\nfunction () {\n  function EditorPagePosition(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n\n  return EditorPagePosition;\n}();\n\nexport { EditorPagePosition };\nexport function createEditorPagePosition(editorViewDomNode) {\n  var editorPos = dom.getDomNodePagePosition(editorViewDomNode);\n  return new EditorPagePosition(editorPos.left, editorPos.top, editorPos.width, editorPos.height);\n}\n\nvar EditorMouseEvent =\n/** @class */\nfunction (_super) {\n  __extends(EditorMouseEvent, _super);\n\n  function EditorMouseEvent(e, editorViewDomNode) {\n    var _this = _super.call(this, e) || this;\n\n    _this.pos = new PageCoordinates(_this.posx, _this.posy);\n    _this.editorPos = createEditorPagePosition(editorViewDomNode);\n    return _this;\n  }\n\n  return EditorMouseEvent;\n}(StandardMouseEvent);\n\nexport { EditorMouseEvent };\n\nvar EditorMouseEventFactory =\n/** @class */\nfunction () {\n  function EditorMouseEventFactory(editorViewDomNode) {\n    this._editorViewDomNode = editorViewDomNode;\n  }\n\n  EditorMouseEventFactory.prototype._create = function (e) {\n    return new EditorMouseEvent(e, this._editorViewDomNode);\n  };\n\n  EditorMouseEventFactory.prototype.onContextMenu = function (target, callback) {\n    var _this = this;\n\n    return dom.addDisposableListener(target, 'contextmenu', function (e) {\n      callback(_this._create(e));\n    });\n  };\n\n  EditorMouseEventFactory.prototype.onMouseUp = function (target, callback) {\n    var _this = this;\n\n    return dom.addDisposableListener(target, 'mouseup', function (e) {\n      callback(_this._create(e));\n    });\n  };\n\n  EditorMouseEventFactory.prototype.onMouseDown = function (target, callback) {\n    var _this = this;\n\n    return dom.addDisposableListener(target, 'mousedown', function (e) {\n      callback(_this._create(e));\n    });\n  };\n\n  EditorMouseEventFactory.prototype.onMouseLeave = function (target, callback) {\n    var _this = this;\n\n    return dom.addDisposableNonBubblingMouseOutListener(target, function (e) {\n      callback(_this._create(e));\n    });\n  };\n\n  EditorMouseEventFactory.prototype.onMouseMoveThrottled = function (target, callback, merger, minimumTimeMs) {\n    var _this = this;\n\n    var myMerger = function (lastEvent, currentEvent) {\n      return merger(lastEvent, _this._create(currentEvent));\n    };\n\n    return dom.addDisposableThrottledListener(target, 'mousemove', callback, myMerger, minimumTimeMs);\n  };\n\n  return EditorMouseEventFactory;\n}();\n\nexport { EditorMouseEventFactory };\n\nvar EditorPointerEventFactory =\n/** @class */\nfunction () {\n  function EditorPointerEventFactory(editorViewDomNode) {\n    this._editorViewDomNode = editorViewDomNode;\n  }\n\n  EditorPointerEventFactory.prototype._create = function (e) {\n    return new EditorMouseEvent(e, this._editorViewDomNode);\n  };\n\n  EditorPointerEventFactory.prototype.onPointerUp = function (target, callback) {\n    var _this = this;\n\n    return dom.addDisposableListener(target, 'pointerup', function (e) {\n      callback(_this._create(e));\n    });\n  };\n\n  EditorPointerEventFactory.prototype.onPointerDown = function (target, callback) {\n    var _this = this;\n\n    return dom.addDisposableListener(target, 'pointerdown', function (e) {\n      callback(_this._create(e));\n    });\n  };\n\n  EditorPointerEventFactory.prototype.onPointerLeave = function (target, callback) {\n    var _this = this;\n\n    return dom.addDisposableNonBubblingPointerOutListener(target, function (e) {\n      callback(_this._create(e));\n    });\n  };\n\n  EditorPointerEventFactory.prototype.onPointerMoveThrottled = function (target, callback, merger, minimumTimeMs) {\n    var _this = this;\n\n    var myMerger = function (lastEvent, currentEvent) {\n      return merger(lastEvent, _this._create(currentEvent));\n    };\n\n    return dom.addDisposableThrottledListener(target, 'pointermove', callback, myMerger, minimumTimeMs);\n  };\n\n  return EditorPointerEventFactory;\n}();\n\nexport { EditorPointerEventFactory };\n\nvar GlobalEditorMouseMoveMonitor =\n/** @class */\nfunction (_super) {\n  __extends(GlobalEditorMouseMoveMonitor, _super);\n\n  function GlobalEditorMouseMoveMonitor(editorViewDomNode) {\n    var _this = _super.call(this) || this;\n\n    _this._editorViewDomNode = editorViewDomNode;\n    _this._globalMouseMoveMonitor = _this._register(new GlobalMouseMoveMonitor());\n    _this._keydownListener = null;\n    return _this;\n  }\n\n  GlobalEditorMouseMoveMonitor.prototype.startMonitoring = function (initialElement, initialButtons, merger, mouseMoveCallback, onStopCallback) {\n    var _this = this; // Add a <<capture>> keydown event listener that will cancel the monitoring\n    // if something other than a modifier key is pressed\n\n\n    this._keydownListener = dom.addStandardDisposableListener(document, 'keydown', function (e) {\n      var kb = e.toKeybinding();\n\n      if (kb.isModifierKey()) {\n        // Allow modifier keys\n        return;\n      }\n\n      _this._globalMouseMoveMonitor.stopMonitoring(true);\n    }, true);\n\n    var myMerger = function (lastEvent, currentEvent) {\n      return merger(lastEvent, new EditorMouseEvent(currentEvent, _this._editorViewDomNode));\n    };\n\n    this._globalMouseMoveMonitor.startMonitoring(initialElement, initialButtons, myMerger, mouseMoveCallback, function () {\n      _this._keydownListener.dispose();\n\n      onStopCallback();\n    });\n  };\n\n  return GlobalEditorMouseMoveMonitor;\n}(Disposable);\n\nexport { GlobalEditorMouseMoveMonitor };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/browser/editorDom.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","dom","GlobalMouseMoveMonitor","StandardMouseEvent","Disposable","PageCoordinates","x","y","toClientCoordinates","ClientCoordinates","StandardWindow","scrollX","scrollY","clientX","clientY","toPageCoordinates","EditorPagePosition","width","height","createEditorPagePosition","editorViewDomNode","editorPos","getDomNodePagePosition","left","top","EditorMouseEvent","_super","e","_this","call","pos","posx","posy","EditorMouseEventFactory","_editorViewDomNode","_create","onContextMenu","target","callback","addDisposableListener","onMouseUp","onMouseDown","onMouseLeave","addDisposableNonBubblingMouseOutListener","onMouseMoveThrottled","merger","minimumTimeMs","myMerger","lastEvent","currentEvent","addDisposableThrottledListener","EditorPointerEventFactory","onPointerUp","onPointerDown","onPointerLeave","addDisposableNonBubblingPointerOutListener","onPointerMoveThrottled","GlobalEditorMouseMoveMonitor","_globalMouseMoveMonitor","_register","_keydownListener","startMonitoring","initialElement","initialButtons","mouseMoveCallback","onStopCallback","addStandardDisposableListener","document","kb","toKeybinding","isModifierKey","stopMonitoring","dispose"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as dom from '../../base/browser/dom.js';\r\nimport { GlobalMouseMoveMonitor } from '../../base/browser/globalMouseMoveMonitor.js';\r\nimport { StandardMouseEvent } from '../../base/browser/mouseEvent.js';\r\nimport { Disposable } from '../../base/common/lifecycle.js';\r\n/**\r\n * Coordinates relative to the whole document (e.g. mouse event's pageX and pageY)\r\n */\r\nvar PageCoordinates = /** @class */ (function () {\r\n    function PageCoordinates(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    PageCoordinates.prototype.toClientCoordinates = function () {\r\n        return new ClientCoordinates(this.x - dom.StandardWindow.scrollX, this.y - dom.StandardWindow.scrollY);\r\n    };\r\n    return PageCoordinates;\r\n}());\r\nexport { PageCoordinates };\r\n/**\r\n * Coordinates within the application's client area (i.e. origin is document's scroll position).\r\n *\r\n * For example, clicking in the top-left corner of the client area will\r\n * always result in a mouse event with a client.x value of 0, regardless\r\n * of whether the page is scrolled horizontally.\r\n */\r\nvar ClientCoordinates = /** @class */ (function () {\r\n    function ClientCoordinates(clientX, clientY) {\r\n        this.clientX = clientX;\r\n        this.clientY = clientY;\r\n    }\r\n    ClientCoordinates.prototype.toPageCoordinates = function () {\r\n        return new PageCoordinates(this.clientX + dom.StandardWindow.scrollX, this.clientY + dom.StandardWindow.scrollY);\r\n    };\r\n    return ClientCoordinates;\r\n}());\r\nexport { ClientCoordinates };\r\n/**\r\n * The position of the editor in the page.\r\n */\r\nvar EditorPagePosition = /** @class */ (function () {\r\n    function EditorPagePosition(x, y, width, height) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    return EditorPagePosition;\r\n}());\r\nexport { EditorPagePosition };\r\nexport function createEditorPagePosition(editorViewDomNode) {\r\n    var editorPos = dom.getDomNodePagePosition(editorViewDomNode);\r\n    return new EditorPagePosition(editorPos.left, editorPos.top, editorPos.width, editorPos.height);\r\n}\r\nvar EditorMouseEvent = /** @class */ (function (_super) {\r\n    __extends(EditorMouseEvent, _super);\r\n    function EditorMouseEvent(e, editorViewDomNode) {\r\n        var _this = _super.call(this, e) || this;\r\n        _this.pos = new PageCoordinates(_this.posx, _this.posy);\r\n        _this.editorPos = createEditorPagePosition(editorViewDomNode);\r\n        return _this;\r\n    }\r\n    return EditorMouseEvent;\r\n}(StandardMouseEvent));\r\nexport { EditorMouseEvent };\r\nvar EditorMouseEventFactory = /** @class */ (function () {\r\n    function EditorMouseEventFactory(editorViewDomNode) {\r\n        this._editorViewDomNode = editorViewDomNode;\r\n    }\r\n    EditorMouseEventFactory.prototype._create = function (e) {\r\n        return new EditorMouseEvent(e, this._editorViewDomNode);\r\n    };\r\n    EditorMouseEventFactory.prototype.onContextMenu = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableListener(target, 'contextmenu', function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorMouseEventFactory.prototype.onMouseUp = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableListener(target, 'mouseup', function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorMouseEventFactory.prototype.onMouseDown = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableListener(target, 'mousedown', function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorMouseEventFactory.prototype.onMouseLeave = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableNonBubblingMouseOutListener(target, function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorMouseEventFactory.prototype.onMouseMoveThrottled = function (target, callback, merger, minimumTimeMs) {\r\n        var _this = this;\r\n        var myMerger = function (lastEvent, currentEvent) {\r\n            return merger(lastEvent, _this._create(currentEvent));\r\n        };\r\n        return dom.addDisposableThrottledListener(target, 'mousemove', callback, myMerger, minimumTimeMs);\r\n    };\r\n    return EditorMouseEventFactory;\r\n}());\r\nexport { EditorMouseEventFactory };\r\nvar EditorPointerEventFactory = /** @class */ (function () {\r\n    function EditorPointerEventFactory(editorViewDomNode) {\r\n        this._editorViewDomNode = editorViewDomNode;\r\n    }\r\n    EditorPointerEventFactory.prototype._create = function (e) {\r\n        return new EditorMouseEvent(e, this._editorViewDomNode);\r\n    };\r\n    EditorPointerEventFactory.prototype.onPointerUp = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableListener(target, 'pointerup', function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorPointerEventFactory.prototype.onPointerDown = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableListener(target, 'pointerdown', function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorPointerEventFactory.prototype.onPointerLeave = function (target, callback) {\r\n        var _this = this;\r\n        return dom.addDisposableNonBubblingPointerOutListener(target, function (e) {\r\n            callback(_this._create(e));\r\n        });\r\n    };\r\n    EditorPointerEventFactory.prototype.onPointerMoveThrottled = function (target, callback, merger, minimumTimeMs) {\r\n        var _this = this;\r\n        var myMerger = function (lastEvent, currentEvent) {\r\n            return merger(lastEvent, _this._create(currentEvent));\r\n        };\r\n        return dom.addDisposableThrottledListener(target, 'pointermove', callback, myMerger, minimumTimeMs);\r\n    };\r\n    return EditorPointerEventFactory;\r\n}());\r\nexport { EditorPointerEventFactory };\r\nvar GlobalEditorMouseMoveMonitor = /** @class */ (function (_super) {\r\n    __extends(GlobalEditorMouseMoveMonitor, _super);\r\n    function GlobalEditorMouseMoveMonitor(editorViewDomNode) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editorViewDomNode = editorViewDomNode;\r\n        _this._globalMouseMoveMonitor = _this._register(new GlobalMouseMoveMonitor());\r\n        _this._keydownListener = null;\r\n        return _this;\r\n    }\r\n    GlobalEditorMouseMoveMonitor.prototype.startMonitoring = function (initialElement, initialButtons, merger, mouseMoveCallback, onStopCallback) {\r\n        var _this = this;\r\n        // Add a <<capture>> keydown event listener that will cancel the monitoring\r\n        // if something other than a modifier key is pressed\r\n        this._keydownListener = dom.addStandardDisposableListener(document, 'keydown', function (e) {\r\n            var kb = e.toKeybinding();\r\n            if (kb.isModifierKey()) {\r\n                // Allow modifier keys\r\n                return;\r\n            }\r\n            _this._globalMouseMoveMonitor.stopMonitoring(true);\r\n        }, true);\r\n        var myMerger = function (lastEvent, currentEvent) {\r\n            return merger(lastEvent, new EditorMouseEvent(currentEvent, _this._editorViewDomNode));\r\n        };\r\n        this._globalMouseMoveMonitor.startMonitoring(initialElement, initialButtons, myMerger, mouseMoveCallback, function () {\r\n            _this._keydownListener.dispose();\r\n            onStopCallback();\r\n        });\r\n    };\r\n    return GlobalEditorMouseMoveMonitor;\r\n}(Disposable));\r\nexport { GlobalEditorMouseMoveMonitor };\r\n"]},"metadata":{},"sourceType":"module"}