{"ast":null,"code":"var _jsxFileName = \"/Users/ifudata/eclipse-workspace/screen-web/src/components/Home/RoleList/table.js\";\nimport React, { Component, Fragment } from 'react';\nimport { Table, Tooltip, message, Modal } from 'antd';\nimport { EditOutlined, DeleteOutlined, MenuUnfoldOutlined } from '@ant-design/icons';\nimport _ from 'lodash';\nimport Util from '../../../util';\nconst {\n  confirm\n} = Modal;\n\nclass Datatable extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      refresh: \"\",\n      dataSource: [],\n      pagination: {},\n      loading: false,\n      searchValue: {}\n    };\n\n    this.showTotal = (total, range) => {\n      return \"共\" + total + \"条记录，当前显示\" + range[0] + \"到\" + range[1] + \"条\";\n    };\n\n    this.handleDelete = record => {\n      const _this = this;\n\n      confirm({\n        title: '确定删除该条信息吗?',\n        content: `该信息删除后将不能恢复!`,\n\n        onOk() {\n          Util.ajax({\n            url: '/role/del/' + record.key,\n            data: {}\n          }).then(res => {\n            if (res.code === 200) {\n              message.success(res.message);\n\n              _this.componentDidMount();\n            } else {\n              message.error(res.message);\n            }\n          });\n        }\n\n      });\n    };\n\n    this.handleSetMenu = record => {\n      this.props.handleSetMenu(record);\n    };\n\n    this.onChange = pagination => {\n      // 点击分页时执行这里\n      let cur = pagination.current;\n      this.setState({\n        pagination: {\n          current: cur\n        }\n      });\n      this.getTableData({\n        pageSize: pagination.pageSize,\n        startIndex: pagination.current\n      });\n    };\n\n    this.handleEdit = record => {\n      this.props.handleEdit(record);\n    };\n\n    this.columns = [{\n      //列数据\n      title: '角色名称',\n      align: 'center',\n      dataIndex: 'roleName'\n    }, {\n      title: '角色编码',\n      align: 'center',\n      dataIndex: 'roleCode'\n    }, {\n      title: '操作',\n      align: 'center',\n      dataIndex: 'action',\n      render: (text, record) => React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, React.createElement(Tooltip, {\n        title: \"\\u8D4B\\u6743\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      }, React.createElement(MenuUnfoldOutlined, {\n        className: \"table-btn\",\n        type: \"menu-unfold\",\n        onClick: this.handleSetMenu.bind(this, record),\n        style: {\n          color: 'blue'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      })), React.createElement(Tooltip, {\n        title: \"\\u7F16\\u8F91\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }, React.createElement(EditOutlined, {\n        className: \"table-btn\",\n        type: \"edit\",\n        onClick: this.handleEdit.bind(this, record),\n        style: {\n          color: 'green'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      })), React.createElement(Tooltip, {\n        title: \"\\u5220\\u9664\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, React.createElement(DeleteOutlined, {\n        className: \"table-btn\",\n        type: \"delete\",\n        onClick: this.handleDelete.bind(this, record),\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      })))\n    }];\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (!_.isEqual(this.props, nextProps) || !_.isEqual(this.state, nextState)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  componentDidMount() {\n    // 第一次渲染table时执行这里\n    this.setState({\n      pagination: {\n        current: 1\n      }\n    });\n    this.getTableData({\n      pageSize: 10,\n      startIndex: 1\n    });\n  }\n\n  getTableData(params) {\n    this.setState({\n      loading: true\n    });\n    Util.ajax({\n      url: '/role/query',\n      data: { ...params,\n        ...this.state.searchValue\n      }\n    }).then(res => {\n      //console.log(res)\n      let pagination;\n\n      if (res.code === 200) {\n        pagination = { ...this.state.pagination,\n          total: res.data.recordsTotal,\n          showTotal: this.showTotal\n        };\n        this.setState({\n          loading: false,\n          dataSource: res.data.data.map(item => {\n            return {\n              key: item.roleId,\n              roleName: item.roleName,\n              roleCode: item.roleCode,\n              createTime: item.createTime\n            };\n          }),\n          pagination\n        });\n      } else {\n        pagination = { ...this.state.pagination,\n          total: 0\n        };\n        this.setState({\n          loading: false,\n          pagination\n        });\n        message.error(res.message);\n      }\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (_.isEqual(this.props, nextProps)) {\n      return;\n    }\n\n    this.setState({\n      searchValue: nextProps.searchValue\n    }, () => {\n      this.setState({\n        pagination: {\n          current: 1\n        }\n      });\n      this.getTableData({\n        pageSize: 10,\n        startIndex: 1\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(Table, {\n      columns: this.columns,\n      dataSource: this.state.dataSource,\n      size: \"small\",\n      bordered: true,\n      pagination: this.state.pagination,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Datatable;","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/src/components/Home/RoleList/table.js"],"names":["React","Component","Fragment","Table","Tooltip","message","Modal","EditOutlined","DeleteOutlined","MenuUnfoldOutlined","_","Util","confirm","Datatable","constructor","props","state","refresh","dataSource","pagination","loading","searchValue","showTotal","total","range","handleDelete","record","_this","title","content","onOk","ajax","url","key","data","then","res","code","success","componentDidMount","error","handleSetMenu","onChange","cur","current","setState","getTableData","pageSize","startIndex","handleEdit","columns","align","dataIndex","render","text","bind","color","shouldComponentUpdate","nextProps","nextState","isEqual","params","recordsTotal","map","item","roleId","roleName","roleCode","createTime","componentWillReceiveProps"],"mappings":"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","sourcesContent":["import React,{ Component,Fragment } from 'react';\r\nimport { Table,Tooltip,message, Modal} from 'antd';\r\nimport { EditOutlined ,DeleteOutlined, MenuUnfoldOutlined  } from '@ant-design/icons';\r\nimport _ from 'lodash';\r\nimport Util from '../../../util';\r\nconst { confirm } = Modal;\r\n\r\nclass Datatable extends Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.columns = [{ //列数据\r\n\t\t\ttitle: '角色名称',\r\n\t\t\talign:'center',\r\n\t\t\tdataIndex: 'roleName'\r\n\t\t}, {\r\n\t\t\ttitle: '角色编码',\r\n\t\t\talign:'center',\r\n\t\t\tdataIndex: 'roleCode'\r\n\t\t},{\r\n\t\t\ttitle: '操作',\r\n\t\t\talign:'center',\r\n\t\t\tdataIndex: 'action',\r\n\t\t\trender: (text, record) => (\r\n\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t<Tooltip title=\"赋权\">\r\n\t\t\t\t\t\t\t<MenuUnfoldOutlined className=\"table-btn\" type='menu-unfold' onClick={this.handleSetMenu.bind(this,record)} style={{color:'blue'}} />\r\n\t\t\t\t\t\t</Tooltip>\r\n                \t\t<Tooltip title=\"编辑\">\r\n\t\t\t\t\t\t\t<EditOutlined  className=\"table-btn\" type='edit' onClick={this.handleEdit.bind(this,record)} style={{color:'green'}} />\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t<Tooltip title=\"删除\">\r\n\t\t\t\t\t\t\t<DeleteOutlined className=\"table-btn\" type='delete' onClick={this.handleDelete.bind(this,record)} style={{color:'red'}} />\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t)\r\n\t\t}]\r\n\t}\r\n\r\n\tstate = {\r\n\t\trefresh : \"\",\r\n\t\tdataSource:[],\r\n\t\tpagination:{\r\n\t\t},\r\n\t\tloading : false,\r\n\t\tsearchValue: {}\r\n\t};\r\n\r\n\tshowTotal = (total, range) => {\r\n\t\treturn \"共\"+total+\"条记录，当前显示\"+ range[0]+\"到\"+ range[1] +\"条\";\r\n\t};\r\n\r\n\thandleDelete = (record) => {\r\n\t\tconst _this=this;\r\n\t\tconfirm({\r\n\t\t\ttitle: '确定删除该条信息吗?',\r\n\t\t\tcontent: `该信息删除后将不能恢复!`,\r\n\t\t\tonOk() {\r\n\t\t\t\tUtil.ajax({\r\n\t\t\t\t\turl:'/role/del/'+record.key,\r\n\t\t\t\t\tdata:{}\r\n\t\t\t\t}).then((res)=>{\r\n\t\t\t\t\tif(res.code === 200){\r\n\t\t\t\t\t\tmessage.success(res.message);\r\n\t\t\t\t\t\t_this.componentDidMount();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tmessage.error(res.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\thandleSetMenu = (record)=>{\r\n\t\tthis.props.handleSetMenu(record);\r\n\t}\r\n\r\n\tonChange = (pagination)=>{\r\n\t\t// 点击分页时执行这里\r\n\t\tlet cur = pagination.current;\r\n\t\tthis.setState({pagination:{current:cur}});\r\n\t\tthis.getTableData({\r\n\t\t\tpageSize: pagination.pageSize,\r\n\t\t\tstartIndex: pagination.current\r\n\t\t});\r\n\t};\r\n\r\n\thandleEdit = (record)=>{\r\n\t\tthis.props.handleEdit(record);\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tif (!_.isEqual(this.props, nextProps) || !_.isEqual(this.state, nextState)) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\t// 第一次渲染table时执行这里\r\n\t\tthis.setState({pagination:{current:1}});\r\n\t\tthis.getTableData({\r\n\t\t\tpageSize:10,\r\n\t\t\tstartIndex:1\r\n\t\t})\r\n\r\n\t}\r\n\r\n\tgetTableData(params){\r\n\t\tthis.setState({ loading: true });\r\n\t\tUtil.ajax({\r\n\t\t\turl:'/role/query',\r\n\t\t\tdata:{\r\n\t\t\t\t...params,\r\n\t\t\t\t...this.state.searchValue\r\n\t\t\t}\r\n\t\t}).then((res)=>{\r\n\t\t\t//console.log(res)\r\n\t\t\tlet  pagination;\r\n\t\t\tif(res.code === 200){\r\n\t\t\t\tpagination = {\r\n\t\t\t\t\t...this.state.pagination,\r\n\t\t\t\t\ttotal : res.data.recordsTotal,\r\n\t\t\t\t\tshowTotal : this.showTotal\r\n\t\t\t\t};\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\tdataSource:res.data.data.map((item)=>{\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tkey:item.roleId,\r\n\t\t\t\t\t\t\troleName:item.roleName,\r\n\t\t\t\t\t\t\troleCode:item.roleCode,\r\n\t\t\t\t\t\t\tcreateTime:item.createTime\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tpagination\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tpagination = {\r\n\t\t\t\t\t...this.state.pagination,\r\n\t\t\t\t\ttotal : 0\r\n\t\t\t\t};\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\tpagination\r\n\t\t\t\t})\r\n\t\t\t\tmessage.error(res.message);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tcomponentWillReceiveProps(nextProps){\r\n\t\tif (_.isEqual(this.props, nextProps)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tsearchValue:nextProps.searchValue\r\n\t\t},()=>{\r\n\t\t\tthis.setState({pagination:{current:1}});\r\n\t\t\tthis.getTableData({\r\n\t\t\t\tpageSize:10,\r\n\t\t\t\tstartIndex:1\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<Table \r\n\t\t\t\t\tcolumns={this.columns}\r\n\t\t\t\t\tdataSource={this.state.dataSource}\r\n\t\t\t\t\tsize=\"small\" \r\n\t\t\t\t\tbordered={true}\r\n\t\t\t\t\tpagination={this.state.pagination}\r\n\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t/>\r\n\t\t\t</Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Datatable;"]},"metadata":{},"sourceType":"module"}