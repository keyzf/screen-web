{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './actionbar.css';\nimport * as platform from '../../../common/platform.js';\nimport * as nls from '../../../../nls.js';\nimport { Disposable, dispose } from '../../../common/lifecycle.js';\nimport { Action, ActionRunner } from '../../../common/actions.js';\nimport * as DOM from '../../dom.js';\nimport * as types from '../../../common/types.js';\nimport { EventType, Gesture } from '../../touch.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { Emitter } from '../../../common/event.js';\nimport { DataTransfers } from '../../dnd.js';\nimport { isFirefox } from '../../browser.js';\n\nvar BaseActionViewItem =\n/** @class */\nfunction (_super) {\n  __extends(BaseActionViewItem, _super);\n\n  function BaseActionViewItem(context, action, options) {\n    var _this = _super.call(this) || this;\n\n    _this.options = options;\n    _this._context = context || _this;\n    _this._action = action;\n\n    if (action instanceof Action) {\n      _this._register(action.onDidChange(function (event) {\n        if (!_this.element) {\n          // we have not been rendered yet, so there\n          // is no point in updating the UI\n          return;\n        }\n\n        _this.handleActionChangeEvent(event);\n      }));\n    }\n\n    return _this;\n  }\n\n  BaseActionViewItem.prototype.handleActionChangeEvent = function (event) {\n    if (event.enabled !== undefined) {\n      this.updateEnabled();\n    }\n\n    if (event.checked !== undefined) {\n      this.updateChecked();\n    }\n\n    if (event.class !== undefined) {\n      this.updateClass();\n    }\n\n    if (event.label !== undefined) {\n      this.updateLabel();\n      this.updateTooltip();\n    }\n\n    if (event.tooltip !== undefined) {\n      this.updateTooltip();\n    }\n  };\n\n  Object.defineProperty(BaseActionViewItem.prototype, \"actionRunner\", {\n    get: function () {\n      if (!this._actionRunner) {\n        this._actionRunner = this._register(new ActionRunner());\n      }\n\n      return this._actionRunner;\n    },\n    set: function (actionRunner) {\n      this._actionRunner = actionRunner;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  BaseActionViewItem.prototype.getAction = function () {\n    return this._action;\n  };\n\n  BaseActionViewItem.prototype.isEnabled = function () {\n    return this._action.enabled;\n  };\n\n  BaseActionViewItem.prototype.setActionContext = function (newContext) {\n    this._context = newContext;\n  };\n\n  BaseActionViewItem.prototype.render = function (container) {\n    var _this = this;\n\n    var element = this.element = container;\n\n    this._register(Gesture.addTarget(container));\n\n    var enableDragging = this.options && this.options.draggable;\n\n    if (enableDragging) {\n      container.draggable = true;\n\n      if (isFirefox) {\n        // Firefox: requires to set a text data transfer to get going\n        this._register(DOM.addDisposableListener(container, DOM.EventType.DRAG_START, function (e) {\n          var _a;\n\n          return (_a = e.dataTransfer) === null || _a === void 0 ? void 0 : _a.setData(DataTransfers.TEXT, _this._action.label);\n        }));\n      }\n    }\n\n    this._register(DOM.addDisposableListener(element, EventType.Tap, function (e) {\n      return _this.onClick(e);\n    }));\n\n    this._register(DOM.addDisposableListener(element, DOM.EventType.MOUSE_DOWN, function (e) {\n      if (!enableDragging) {\n        DOM.EventHelper.stop(e, true); // do not run when dragging is on because that would disable it\n      }\n\n      if (_this._action.enabled && e.button === 0) {\n        DOM.addClass(element, 'active');\n      }\n    }));\n\n    this._register(DOM.addDisposableListener(element, DOM.EventType.CLICK, function (e) {\n      DOM.EventHelper.stop(e, true); // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n      // > Writing to the clipboard\n      // > You can use the \"cut\" and \"copy\" commands without any special\n      // permission if you are using them in a short-lived event handler\n      // for a user action (for example, a click handler).\n      // => to get the Copy and Paste context menu actions working on Firefox,\n      // there should be no timeout here\n\n      if (_this.options && _this.options.isMenu) {\n        _this.onClick(e);\n      } else {\n        platform.setImmediate(function () {\n          return _this.onClick(e);\n        });\n      }\n    }));\n\n    this._register(DOM.addDisposableListener(element, DOM.EventType.DBLCLICK, function (e) {\n      DOM.EventHelper.stop(e, true);\n    }));\n\n    [DOM.EventType.MOUSE_UP, DOM.EventType.MOUSE_OUT].forEach(function (event) {\n      _this._register(DOM.addDisposableListener(element, event, function (e) {\n        DOM.EventHelper.stop(e);\n        DOM.removeClass(element, 'active');\n      }));\n    });\n  };\n\n  BaseActionViewItem.prototype.onClick = function (event) {\n    DOM.EventHelper.stop(event, true);\n    var context;\n\n    if (types.isUndefinedOrNull(this._context)) {\n      context = event;\n    } else {\n      context = this._context;\n\n      if (types.isObject(context)) {\n        context.event = event;\n      }\n    }\n\n    this.actionRunner.run(this._action, context);\n  };\n\n  BaseActionViewItem.prototype.focus = function () {\n    if (this.element) {\n      this.element.focus();\n      DOM.addClass(this.element, 'focused');\n    }\n  };\n\n  BaseActionViewItem.prototype.blur = function () {\n    if (this.element) {\n      this.element.blur();\n      DOM.removeClass(this.element, 'focused');\n    }\n  };\n\n  BaseActionViewItem.prototype.updateEnabled = function () {// implement in subclass\n  };\n\n  BaseActionViewItem.prototype.updateLabel = function () {// implement in subclass\n  };\n\n  BaseActionViewItem.prototype.updateTooltip = function () {// implement in subclass\n  };\n\n  BaseActionViewItem.prototype.updateClass = function () {// implement in subclass\n  };\n\n  BaseActionViewItem.prototype.updateChecked = function () {// implement in subclass\n  };\n\n  BaseActionViewItem.prototype.dispose = function () {\n    if (this.element) {\n      DOM.removeNode(this.element);\n      this.element = undefined;\n    }\n\n    _super.prototype.dispose.call(this);\n  };\n\n  return BaseActionViewItem;\n}(Disposable);\n\nexport { BaseActionViewItem };\n\nvar Separator =\n/** @class */\nfunction (_super) {\n  __extends(Separator, _super);\n\n  function Separator(label) {\n    var _this = _super.call(this, Separator.ID, label, label ? 'separator text' : 'separator') || this;\n\n    _this.checked = false;\n    _this.enabled = false;\n    return _this;\n  }\n\n  Separator.ID = 'vs.actions.separator';\n  return Separator;\n}(Action);\n\nexport { Separator };\n\nvar ActionViewItem =\n/** @class */\nfunction (_super) {\n  __extends(ActionViewItem, _super);\n\n  function ActionViewItem(context, action, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this, context, action, options) || this;\n\n    _this.options = options;\n    _this.options.icon = options.icon !== undefined ? options.icon : false;\n    _this.options.label = options.label !== undefined ? options.label : true;\n    _this.cssClass = '';\n    return _this;\n  }\n\n  ActionViewItem.prototype.render = function (container) {\n    _super.prototype.render.call(this, container);\n\n    if (this.element) {\n      this.label = DOM.append(this.element, DOM.$('a.action-label'));\n    }\n\n    if (this.label) {\n      if (this._action.id === Separator.ID) {\n        this.label.setAttribute('role', 'presentation'); // A separator is a presentation item\n      } else {\n        if (this.options.isMenu) {\n          this.label.setAttribute('role', 'menuitem');\n        } else {\n          this.label.setAttribute('role', 'button');\n        }\n      }\n    }\n\n    if (this.options.label && this.options.keybinding && this.element) {\n      DOM.append(this.element, DOM.$('span.keybinding')).textContent = this.options.keybinding;\n    }\n\n    this.updateClass();\n    this.updateLabel();\n    this.updateTooltip();\n    this.updateEnabled();\n    this.updateChecked();\n  };\n\n  ActionViewItem.prototype.focus = function () {\n    _super.prototype.focus.call(this);\n\n    if (this.label) {\n      this.label.focus();\n    }\n  };\n\n  ActionViewItem.prototype.updateLabel = function () {\n    if (this.options.label && this.label) {\n      this.label.textContent = this.getAction().label;\n    }\n  };\n\n  ActionViewItem.prototype.updateTooltip = function () {\n    var title = null;\n\n    if (this.getAction().tooltip) {\n      title = this.getAction().tooltip;\n    } else if (!this.options.label && this.getAction().label && this.options.icon) {\n      title = this.getAction().label;\n\n      if (this.options.keybinding) {\n        title = nls.localize({\n          key: 'titleLabel',\n          comment: ['action title', 'action keybinding']\n        }, \"{0} ({1})\", title, this.options.keybinding);\n      }\n    }\n\n    if (title && this.label) {\n      this.label.title = title;\n    }\n  };\n\n  ActionViewItem.prototype.updateClass = function () {\n    if (this.cssClass && this.label) {\n      DOM.removeClasses(this.label, this.cssClass);\n    }\n\n    if (this.options.icon) {\n      this.cssClass = this.getAction().class;\n\n      if (this.label) {\n        DOM.addClass(this.label, 'codicon');\n\n        if (this.cssClass) {\n          DOM.addClasses(this.label, this.cssClass);\n        }\n      }\n\n      this.updateEnabled();\n    } else {\n      if (this.label) {\n        DOM.removeClass(this.label, 'codicon');\n      }\n    }\n  };\n\n  ActionViewItem.prototype.updateEnabled = function () {\n    if (this.getAction().enabled) {\n      if (this.label) {\n        this.label.removeAttribute('aria-disabled');\n        DOM.removeClass(this.label, 'disabled');\n        this.label.tabIndex = 0;\n      }\n\n      if (this.element) {\n        DOM.removeClass(this.element, 'disabled');\n      }\n    } else {\n      if (this.label) {\n        this.label.setAttribute('aria-disabled', 'true');\n        DOM.addClass(this.label, 'disabled');\n        DOM.removeTabIndexAndUpdateFocus(this.label);\n      }\n\n      if (this.element) {\n        DOM.addClass(this.element, 'disabled');\n      }\n    }\n  };\n\n  ActionViewItem.prototype.updateChecked = function () {\n    if (this.label) {\n      if (this.getAction().checked) {\n        DOM.addClass(this.label, 'checked');\n      } else {\n        DOM.removeClass(this.label, 'checked');\n      }\n    }\n  };\n\n  return ActionViewItem;\n}(BaseActionViewItem);\n\nexport { ActionViewItem };\nvar defaultOptions = {\n  orientation: 0\n  /* HORIZONTAL */\n  ,\n  context: null,\n  triggerKeys: {\n    keys: [3\n    /* Enter */\n    , 10\n    /* Space */\n    ],\n    keyDown: false\n  }\n};\n\nvar ActionBar =\n/** @class */\nfunction (_super) {\n  __extends(ActionBar, _super);\n\n  function ActionBar(container, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this._onDidBlur = _this._register(new Emitter());\n    _this.onDidBlur = _this._onDidBlur.event;\n    _this._onDidCancel = _this._register(new Emitter());\n    _this.onDidCancel = _this._onDidCancel.event;\n    _this._onDidRun = _this._register(new Emitter());\n    _this.onDidRun = _this._onDidRun.event;\n    _this._onDidBeforeRun = _this._register(new Emitter());\n    _this.onDidBeforeRun = _this._onDidBeforeRun.event;\n    _this.options = options;\n    _this._context = options.context;\n\n    if (!_this.options.triggerKeys) {\n      _this.options.triggerKeys = defaultOptions.triggerKeys;\n    }\n\n    if (_this.options.actionRunner) {\n      _this._actionRunner = _this.options.actionRunner;\n    } else {\n      _this._actionRunner = new ActionRunner();\n\n      _this._register(_this._actionRunner);\n    }\n\n    _this._register(_this._actionRunner.onDidRun(function (e) {\n      return _this._onDidRun.fire(e);\n    }));\n\n    _this._register(_this._actionRunner.onDidBeforeRun(function (e) {\n      return _this._onDidBeforeRun.fire(e);\n    }));\n\n    _this.viewItems = [];\n    _this.focusedItem = undefined;\n    _this.domNode = document.createElement('div');\n    _this.domNode.className = 'monaco-action-bar';\n\n    if (options.animated !== false) {\n      DOM.addClass(_this.domNode, 'animated');\n    }\n\n    var previousKey;\n    var nextKey;\n\n    switch (_this.options.orientation) {\n      case 0\n      /* HORIZONTAL */\n      :\n        previousKey = 15\n        /* LeftArrow */\n        ;\n        nextKey = 17\n        /* RightArrow */\n        ;\n        break;\n\n      case 1\n      /* HORIZONTAL_REVERSE */\n      :\n        previousKey = 17\n        /* RightArrow */\n        ;\n        nextKey = 15\n        /* LeftArrow */\n        ;\n        _this.domNode.className += ' reverse';\n        break;\n\n      case 2\n      /* VERTICAL */\n      :\n        previousKey = 16\n        /* UpArrow */\n        ;\n        nextKey = 18\n        /* DownArrow */\n        ;\n        _this.domNode.className += ' vertical';\n        break;\n\n      case 3\n      /* VERTICAL_REVERSE */\n      :\n        previousKey = 18\n        /* DownArrow */\n        ;\n        nextKey = 16\n        /* UpArrow */\n        ;\n        _this.domNode.className += ' vertical reverse';\n        break;\n    }\n\n    _this._register(DOM.addDisposableListener(_this.domNode, DOM.EventType.KEY_DOWN, function (e) {\n      var event = new StandardKeyboardEvent(e);\n      var eventHandled = true;\n\n      if (event.equals(previousKey)) {\n        _this.focusPrevious();\n      } else if (event.equals(nextKey)) {\n        _this.focusNext();\n      } else if (event.equals(9\n      /* Escape */\n      )) {\n        _this.cancel();\n      } else if (_this.isTriggerKeyEvent(event)) {\n        // Staying out of the else branch even if not triggered\n        if (_this.options.triggerKeys && _this.options.triggerKeys.keyDown) {\n          _this.doTrigger(event);\n        }\n      } else {\n        eventHandled = false;\n      }\n\n      if (eventHandled) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }));\n\n    _this._register(DOM.addDisposableListener(_this.domNode, DOM.EventType.KEY_UP, function (e) {\n      var event = new StandardKeyboardEvent(e); // Run action on Enter/Space\n\n      if (_this.isTriggerKeyEvent(event)) {\n        if (_this.options.triggerKeys && !_this.options.triggerKeys.keyDown) {\n          _this.doTrigger(event);\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n      } // Recompute focused item\n      else if (event.equals(2\n        /* Tab */\n        ) || event.equals(1024\n        /* Shift */\n        | 2\n        /* Tab */\n        )) {\n          _this.updateFocusedItem();\n        }\n    }));\n\n    _this.focusTracker = _this._register(DOM.trackFocus(_this.domNode));\n\n    _this._register(_this.focusTracker.onDidBlur(function () {\n      if (document.activeElement === _this.domNode || !DOM.isAncestor(document.activeElement, _this.domNode)) {\n        _this._onDidBlur.fire();\n\n        _this.focusedItem = undefined;\n      }\n    }));\n\n    _this._register(_this.focusTracker.onDidFocus(function () {\n      return _this.updateFocusedItem();\n    }));\n\n    _this.actionsList = document.createElement('ul');\n    _this.actionsList.className = 'actions-container';\n\n    _this.actionsList.setAttribute('role', 'toolbar');\n\n    if (_this.options.ariaLabel) {\n      _this.actionsList.setAttribute('aria-label', _this.options.ariaLabel);\n    }\n\n    _this.domNode.appendChild(_this.actionsList);\n\n    container.appendChild(_this.domNode);\n    return _this;\n  }\n\n  ActionBar.prototype.isTriggerKeyEvent = function (event) {\n    var ret = false;\n\n    if (this.options.triggerKeys) {\n      this.options.triggerKeys.keys.forEach(function (keyCode) {\n        ret = ret || event.equals(keyCode);\n      });\n    }\n\n    return ret;\n  };\n\n  ActionBar.prototype.updateFocusedItem = function () {\n    for (var i = 0; i < this.actionsList.children.length; i++) {\n      var elem = this.actionsList.children[i];\n\n      if (DOM.isAncestor(document.activeElement, elem)) {\n        this.focusedItem = i;\n        break;\n      }\n    }\n  };\n\n  Object.defineProperty(ActionBar.prototype, \"context\", {\n    get: function () {\n      return this._context;\n    },\n    set: function (context) {\n      this._context = context;\n      this.viewItems.forEach(function (i) {\n        return i.setActionContext(context);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ActionBar.prototype.getContainer = function () {\n    return this.domNode;\n  };\n\n  ActionBar.prototype.push = function (arg, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var actions = Array.isArray(arg) ? arg : [arg];\n    var index = types.isNumber(options.index) ? options.index : null;\n    actions.forEach(function (action) {\n      var actionViewItemElement = document.createElement('li');\n      actionViewItemElement.className = 'action-item';\n      actionViewItemElement.setAttribute('role', 'presentation'); // Prevent native context menu on actions\n\n      _this._register(DOM.addDisposableListener(actionViewItemElement, DOM.EventType.CONTEXT_MENU, function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n      }));\n\n      var item;\n\n      if (_this.options.actionViewItemProvider) {\n        item = _this.options.actionViewItemProvider(action);\n      }\n\n      if (!item) {\n        item = new ActionViewItem(_this.context, action, options);\n      }\n\n      item.actionRunner = _this._actionRunner;\n      item.setActionContext(_this.context);\n      item.render(actionViewItemElement);\n\n      if (index === null || index < 0 || index >= _this.actionsList.children.length) {\n        _this.actionsList.appendChild(actionViewItemElement);\n\n        _this.viewItems.push(item);\n      } else {\n        _this.actionsList.insertBefore(actionViewItemElement, _this.actionsList.children[index]);\n\n        _this.viewItems.splice(index, 0, item);\n\n        index++;\n      }\n    });\n  };\n\n  ActionBar.prototype.clear = function () {\n    this.viewItems = dispose(this.viewItems);\n    DOM.clearNode(this.actionsList);\n  };\n\n  ActionBar.prototype.isEmpty = function () {\n    return this.viewItems.length === 0;\n  };\n\n  ActionBar.prototype.focus = function (arg) {\n    var selectFirst = false;\n    var index = undefined;\n\n    if (arg === undefined) {\n      selectFirst = true;\n    } else if (typeof arg === 'number') {\n      index = arg;\n    } else if (typeof arg === 'boolean') {\n      selectFirst = arg;\n    }\n\n    if (selectFirst && typeof this.focusedItem === 'undefined') {\n      // Focus the first enabled item\n      this.focusedItem = this.viewItems.length - 1;\n      this.focusNext();\n    } else {\n      if (index !== undefined) {\n        this.focusedItem = index;\n      }\n\n      this.updateFocus();\n    }\n  };\n\n  ActionBar.prototype.focusNext = function () {\n    if (typeof this.focusedItem === 'undefined') {\n      this.focusedItem = this.viewItems.length - 1;\n    }\n\n    var startIndex = this.focusedItem;\n    var item;\n\n    do {\n      this.focusedItem = (this.focusedItem + 1) % this.viewItems.length;\n      item = this.viewItems[this.focusedItem];\n    } while (this.focusedItem !== startIndex && !item.isEnabled());\n\n    if (this.focusedItem === startIndex && !item.isEnabled()) {\n      this.focusedItem = undefined;\n    }\n\n    this.updateFocus();\n  };\n\n  ActionBar.prototype.focusPrevious = function () {\n    if (typeof this.focusedItem === 'undefined') {\n      this.focusedItem = 0;\n    }\n\n    var startIndex = this.focusedItem;\n    var item;\n\n    do {\n      this.focusedItem = this.focusedItem - 1;\n\n      if (this.focusedItem < 0) {\n        this.focusedItem = this.viewItems.length - 1;\n      }\n\n      item = this.viewItems[this.focusedItem];\n    } while (this.focusedItem !== startIndex && !item.isEnabled());\n\n    if (this.focusedItem === startIndex && !item.isEnabled()) {\n      this.focusedItem = undefined;\n    }\n\n    this.updateFocus(true);\n  };\n\n  ActionBar.prototype.updateFocus = function (fromRight, preventScroll) {\n    if (typeof this.focusedItem === 'undefined') {\n      this.actionsList.focus({\n        preventScroll: preventScroll\n      });\n    }\n\n    for (var i = 0; i < this.viewItems.length; i++) {\n      var item = this.viewItems[i];\n      var actionViewItem = item;\n\n      if (i === this.focusedItem) {\n        if (types.isFunction(actionViewItem.isEnabled)) {\n          if (actionViewItem.isEnabled() && types.isFunction(actionViewItem.focus)) {\n            actionViewItem.focus(fromRight);\n          } else {\n            this.actionsList.focus({\n              preventScroll: preventScroll\n            });\n          }\n        }\n      } else {\n        if (types.isFunction(actionViewItem.blur)) {\n          actionViewItem.blur();\n        }\n      }\n    }\n  };\n\n  ActionBar.prototype.doTrigger = function (event) {\n    if (typeof this.focusedItem === 'undefined') {\n      return; //nothing to focus\n    } // trigger action\n\n\n    var actionViewItem = this.viewItems[this.focusedItem];\n\n    if (actionViewItem instanceof BaseActionViewItem) {\n      var context = actionViewItem._context === null || actionViewItem._context === undefined ? event : actionViewItem._context;\n      this.run(actionViewItem._action, context);\n    }\n  };\n\n  ActionBar.prototype.cancel = function () {\n    if (document.activeElement instanceof HTMLElement) {\n      document.activeElement.blur(); // remove focus from focused action\n    }\n\n    this._onDidCancel.fire();\n  };\n\n  ActionBar.prototype.run = function (action, context) {\n    return this._actionRunner.run(action, context);\n  };\n\n  ActionBar.prototype.dispose = function () {\n    dispose(this.viewItems);\n    this.viewItems = [];\n    DOM.removeNode(this.getContainer());\n\n    _super.prototype.dispose.call(this);\n  };\n\n  return ActionBar;\n}(Disposable);\n\nexport { ActionBar };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","platform","nls","Disposable","dispose","Action","ActionRunner","DOM","types","EventType","Gesture","StandardKeyboardEvent","Emitter","DataTransfers","isFirefox","BaseActionViewItem","_super","context","action","options","_this","call","_context","_action","_register","onDidChange","event","element","handleActionChangeEvent","enabled","undefined","updateEnabled","checked","updateChecked","class","updateClass","label","updateLabel","updateTooltip","tooltip","defineProperty","get","_actionRunner","set","actionRunner","enumerable","configurable","getAction","isEnabled","setActionContext","newContext","render","container","addTarget","enableDragging","draggable","addDisposableListener","DRAG_START","e","_a","dataTransfer","setData","TEXT","Tap","onClick","MOUSE_DOWN","EventHelper","stop","button","addClass","CLICK","isMenu","setImmediate","DBLCLICK","MOUSE_UP","MOUSE_OUT","forEach","removeClass","isUndefinedOrNull","isObject","run","focus","blur","removeNode","Separator","ID","ActionViewItem","icon","cssClass","append","$","id","setAttribute","keybinding","textContent","title","localize","key","comment","removeClasses","addClasses","removeAttribute","tabIndex","removeTabIndexAndUpdateFocus","defaultOptions","orientation","triggerKeys","keys","keyDown","ActionBar","_onDidBlur","onDidBlur","_onDidCancel","onDidCancel","_onDidRun","onDidRun","_onDidBeforeRun","onDidBeforeRun","fire","viewItems","focusedItem","domNode","document","createElement","className","animated","previousKey","nextKey","KEY_DOWN","eventHandled","equals","focusPrevious","focusNext","cancel","isTriggerKeyEvent","doTrigger","preventDefault","stopPropagation","KEY_UP","updateFocusedItem","focusTracker","trackFocus","activeElement","isAncestor","onDidFocus","actionsList","ariaLabel","appendChild","ret","keyCode","i","children","length","elem","getContainer","push","arg","actions","isArray","index","isNumber","actionViewItemElement","CONTEXT_MENU","item","actionViewItemProvider","insertBefore","splice","clear","clearNode","isEmpty","selectFirst","updateFocus","startIndex","fromRight","preventScroll","actionViewItem","isFunction","HTMLElement"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './actionbar.css';\r\nimport * as platform from '../../../common/platform.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { Disposable, dispose } from '../../../common/lifecycle.js';\r\nimport { Action, ActionRunner } from '../../../common/actions.js';\r\nimport * as DOM from '../../dom.js';\r\nimport * as types from '../../../common/types.js';\r\nimport { EventType, Gesture } from '../../touch.js';\r\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\r\nimport { Emitter } from '../../../common/event.js';\r\nimport { DataTransfers } from '../../dnd.js';\r\nimport { isFirefox } from '../../browser.js';\r\nvar BaseActionViewItem = /** @class */ (function (_super) {\r\n    __extends(BaseActionViewItem, _super);\r\n    function BaseActionViewItem(context, action, options) {\r\n        var _this = _super.call(this) || this;\r\n        _this.options = options;\r\n        _this._context = context || _this;\r\n        _this._action = action;\r\n        if (action instanceof Action) {\r\n            _this._register(action.onDidChange(function (event) {\r\n                if (!_this.element) {\r\n                    // we have not been rendered yet, so there\r\n                    // is no point in updating the UI\r\n                    return;\r\n                }\r\n                _this.handleActionChangeEvent(event);\r\n            }));\r\n        }\r\n        return _this;\r\n    }\r\n    BaseActionViewItem.prototype.handleActionChangeEvent = function (event) {\r\n        if (event.enabled !== undefined) {\r\n            this.updateEnabled();\r\n        }\r\n        if (event.checked !== undefined) {\r\n            this.updateChecked();\r\n        }\r\n        if (event.class !== undefined) {\r\n            this.updateClass();\r\n        }\r\n        if (event.label !== undefined) {\r\n            this.updateLabel();\r\n            this.updateTooltip();\r\n        }\r\n        if (event.tooltip !== undefined) {\r\n            this.updateTooltip();\r\n        }\r\n    };\r\n    Object.defineProperty(BaseActionViewItem.prototype, \"actionRunner\", {\r\n        get: function () {\r\n            if (!this._actionRunner) {\r\n                this._actionRunner = this._register(new ActionRunner());\r\n            }\r\n            return this._actionRunner;\r\n        },\r\n        set: function (actionRunner) {\r\n            this._actionRunner = actionRunner;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    BaseActionViewItem.prototype.getAction = function () {\r\n        return this._action;\r\n    };\r\n    BaseActionViewItem.prototype.isEnabled = function () {\r\n        return this._action.enabled;\r\n    };\r\n    BaseActionViewItem.prototype.setActionContext = function (newContext) {\r\n        this._context = newContext;\r\n    };\r\n    BaseActionViewItem.prototype.render = function (container) {\r\n        var _this = this;\r\n        var element = this.element = container;\r\n        this._register(Gesture.addTarget(container));\r\n        var enableDragging = this.options && this.options.draggable;\r\n        if (enableDragging) {\r\n            container.draggable = true;\r\n            if (isFirefox) {\r\n                // Firefox: requires to set a text data transfer to get going\r\n                this._register(DOM.addDisposableListener(container, DOM.EventType.DRAG_START, function (e) { var _a; return (_a = e.dataTransfer) === null || _a === void 0 ? void 0 : _a.setData(DataTransfers.TEXT, _this._action.label); }));\r\n            }\r\n        }\r\n        this._register(DOM.addDisposableListener(element, EventType.Tap, function (e) { return _this.onClick(e); }));\r\n        this._register(DOM.addDisposableListener(element, DOM.EventType.MOUSE_DOWN, function (e) {\r\n            if (!enableDragging) {\r\n                DOM.EventHelper.stop(e, true); // do not run when dragging is on because that would disable it\r\n            }\r\n            if (_this._action.enabled && e.button === 0) {\r\n                DOM.addClass(element, 'active');\r\n            }\r\n        }));\r\n        this._register(DOM.addDisposableListener(element, DOM.EventType.CLICK, function (e) {\r\n            DOM.EventHelper.stop(e, true);\r\n            // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\r\n            // > Writing to the clipboard\r\n            // > You can use the \"cut\" and \"copy\" commands without any special\r\n            // permission if you are using them in a short-lived event handler\r\n            // for a user action (for example, a click handler).\r\n            // => to get the Copy and Paste context menu actions working on Firefox,\r\n            // there should be no timeout here\r\n            if (_this.options && _this.options.isMenu) {\r\n                _this.onClick(e);\r\n            }\r\n            else {\r\n                platform.setImmediate(function () { return _this.onClick(e); });\r\n            }\r\n        }));\r\n        this._register(DOM.addDisposableListener(element, DOM.EventType.DBLCLICK, function (e) {\r\n            DOM.EventHelper.stop(e, true);\r\n        }));\r\n        [DOM.EventType.MOUSE_UP, DOM.EventType.MOUSE_OUT].forEach(function (event) {\r\n            _this._register(DOM.addDisposableListener(element, event, function (e) {\r\n                DOM.EventHelper.stop(e);\r\n                DOM.removeClass(element, 'active');\r\n            }));\r\n        });\r\n    };\r\n    BaseActionViewItem.prototype.onClick = function (event) {\r\n        DOM.EventHelper.stop(event, true);\r\n        var context;\r\n        if (types.isUndefinedOrNull(this._context)) {\r\n            context = event;\r\n        }\r\n        else {\r\n            context = this._context;\r\n            if (types.isObject(context)) {\r\n                context.event = event;\r\n            }\r\n        }\r\n        this.actionRunner.run(this._action, context);\r\n    };\r\n    BaseActionViewItem.prototype.focus = function () {\r\n        if (this.element) {\r\n            this.element.focus();\r\n            DOM.addClass(this.element, 'focused');\r\n        }\r\n    };\r\n    BaseActionViewItem.prototype.blur = function () {\r\n        if (this.element) {\r\n            this.element.blur();\r\n            DOM.removeClass(this.element, 'focused');\r\n        }\r\n    };\r\n    BaseActionViewItem.prototype.updateEnabled = function () {\r\n        // implement in subclass\r\n    };\r\n    BaseActionViewItem.prototype.updateLabel = function () {\r\n        // implement in subclass\r\n    };\r\n    BaseActionViewItem.prototype.updateTooltip = function () {\r\n        // implement in subclass\r\n    };\r\n    BaseActionViewItem.prototype.updateClass = function () {\r\n        // implement in subclass\r\n    };\r\n    BaseActionViewItem.prototype.updateChecked = function () {\r\n        // implement in subclass\r\n    };\r\n    BaseActionViewItem.prototype.dispose = function () {\r\n        if (this.element) {\r\n            DOM.removeNode(this.element);\r\n            this.element = undefined;\r\n        }\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    return BaseActionViewItem;\r\n}(Disposable));\r\nexport { BaseActionViewItem };\r\nvar Separator = /** @class */ (function (_super) {\r\n    __extends(Separator, _super);\r\n    function Separator(label) {\r\n        var _this = _super.call(this, Separator.ID, label, label ? 'separator text' : 'separator') || this;\r\n        _this.checked = false;\r\n        _this.enabled = false;\r\n        return _this;\r\n    }\r\n    Separator.ID = 'vs.actions.separator';\r\n    return Separator;\r\n}(Action));\r\nexport { Separator };\r\nvar ActionViewItem = /** @class */ (function (_super) {\r\n    __extends(ActionViewItem, _super);\r\n    function ActionViewItem(context, action, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, context, action, options) || this;\r\n        _this.options = options;\r\n        _this.options.icon = options.icon !== undefined ? options.icon : false;\r\n        _this.options.label = options.label !== undefined ? options.label : true;\r\n        _this.cssClass = '';\r\n        return _this;\r\n    }\r\n    ActionViewItem.prototype.render = function (container) {\r\n        _super.prototype.render.call(this, container);\r\n        if (this.element) {\r\n            this.label = DOM.append(this.element, DOM.$('a.action-label'));\r\n        }\r\n        if (this.label) {\r\n            if (this._action.id === Separator.ID) {\r\n                this.label.setAttribute('role', 'presentation'); // A separator is a presentation item\r\n            }\r\n            else {\r\n                if (this.options.isMenu) {\r\n                    this.label.setAttribute('role', 'menuitem');\r\n                }\r\n                else {\r\n                    this.label.setAttribute('role', 'button');\r\n                }\r\n            }\r\n        }\r\n        if (this.options.label && this.options.keybinding && this.element) {\r\n            DOM.append(this.element, DOM.$('span.keybinding')).textContent = this.options.keybinding;\r\n        }\r\n        this.updateClass();\r\n        this.updateLabel();\r\n        this.updateTooltip();\r\n        this.updateEnabled();\r\n        this.updateChecked();\r\n    };\r\n    ActionViewItem.prototype.focus = function () {\r\n        _super.prototype.focus.call(this);\r\n        if (this.label) {\r\n            this.label.focus();\r\n        }\r\n    };\r\n    ActionViewItem.prototype.updateLabel = function () {\r\n        if (this.options.label && this.label) {\r\n            this.label.textContent = this.getAction().label;\r\n        }\r\n    };\r\n    ActionViewItem.prototype.updateTooltip = function () {\r\n        var title = null;\r\n        if (this.getAction().tooltip) {\r\n            title = this.getAction().tooltip;\r\n        }\r\n        else if (!this.options.label && this.getAction().label && this.options.icon) {\r\n            title = this.getAction().label;\r\n            if (this.options.keybinding) {\r\n                title = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\r\n            }\r\n        }\r\n        if (title && this.label) {\r\n            this.label.title = title;\r\n        }\r\n    };\r\n    ActionViewItem.prototype.updateClass = function () {\r\n        if (this.cssClass && this.label) {\r\n            DOM.removeClasses(this.label, this.cssClass);\r\n        }\r\n        if (this.options.icon) {\r\n            this.cssClass = this.getAction().class;\r\n            if (this.label) {\r\n                DOM.addClass(this.label, 'codicon');\r\n                if (this.cssClass) {\r\n                    DOM.addClasses(this.label, this.cssClass);\r\n                }\r\n            }\r\n            this.updateEnabled();\r\n        }\r\n        else {\r\n            if (this.label) {\r\n                DOM.removeClass(this.label, 'codicon');\r\n            }\r\n        }\r\n    };\r\n    ActionViewItem.prototype.updateEnabled = function () {\r\n        if (this.getAction().enabled) {\r\n            if (this.label) {\r\n                this.label.removeAttribute('aria-disabled');\r\n                DOM.removeClass(this.label, 'disabled');\r\n                this.label.tabIndex = 0;\r\n            }\r\n            if (this.element) {\r\n                DOM.removeClass(this.element, 'disabled');\r\n            }\r\n        }\r\n        else {\r\n            if (this.label) {\r\n                this.label.setAttribute('aria-disabled', 'true');\r\n                DOM.addClass(this.label, 'disabled');\r\n                DOM.removeTabIndexAndUpdateFocus(this.label);\r\n            }\r\n            if (this.element) {\r\n                DOM.addClass(this.element, 'disabled');\r\n            }\r\n        }\r\n    };\r\n    ActionViewItem.prototype.updateChecked = function () {\r\n        if (this.label) {\r\n            if (this.getAction().checked) {\r\n                DOM.addClass(this.label, 'checked');\r\n            }\r\n            else {\r\n                DOM.removeClass(this.label, 'checked');\r\n            }\r\n        }\r\n    };\r\n    return ActionViewItem;\r\n}(BaseActionViewItem));\r\nexport { ActionViewItem };\r\nvar defaultOptions = {\r\n    orientation: 0 /* HORIZONTAL */,\r\n    context: null,\r\n    triggerKeys: {\r\n        keys: [3 /* Enter */, 10 /* Space */],\r\n        keyDown: false\r\n    }\r\n};\r\nvar ActionBar = /** @class */ (function (_super) {\r\n    __extends(ActionBar, _super);\r\n    function ActionBar(container, options) {\r\n        if (options === void 0) { options = defaultOptions; }\r\n        var _this = _super.call(this) || this;\r\n        _this._onDidBlur = _this._register(new Emitter());\r\n        _this.onDidBlur = _this._onDidBlur.event;\r\n        _this._onDidCancel = _this._register(new Emitter());\r\n        _this.onDidCancel = _this._onDidCancel.event;\r\n        _this._onDidRun = _this._register(new Emitter());\r\n        _this.onDidRun = _this._onDidRun.event;\r\n        _this._onDidBeforeRun = _this._register(new Emitter());\r\n        _this.onDidBeforeRun = _this._onDidBeforeRun.event;\r\n        _this.options = options;\r\n        _this._context = options.context;\r\n        if (!_this.options.triggerKeys) {\r\n            _this.options.triggerKeys = defaultOptions.triggerKeys;\r\n        }\r\n        if (_this.options.actionRunner) {\r\n            _this._actionRunner = _this.options.actionRunner;\r\n        }\r\n        else {\r\n            _this._actionRunner = new ActionRunner();\r\n            _this._register(_this._actionRunner);\r\n        }\r\n        _this._register(_this._actionRunner.onDidRun(function (e) { return _this._onDidRun.fire(e); }));\r\n        _this._register(_this._actionRunner.onDidBeforeRun(function (e) { return _this._onDidBeforeRun.fire(e); }));\r\n        _this.viewItems = [];\r\n        _this.focusedItem = undefined;\r\n        _this.domNode = document.createElement('div');\r\n        _this.domNode.className = 'monaco-action-bar';\r\n        if (options.animated !== false) {\r\n            DOM.addClass(_this.domNode, 'animated');\r\n        }\r\n        var previousKey;\r\n        var nextKey;\r\n        switch (_this.options.orientation) {\r\n            case 0 /* HORIZONTAL */:\r\n                previousKey = 15 /* LeftArrow */;\r\n                nextKey = 17 /* RightArrow */;\r\n                break;\r\n            case 1 /* HORIZONTAL_REVERSE */:\r\n                previousKey = 17 /* RightArrow */;\r\n                nextKey = 15 /* LeftArrow */;\r\n                _this.domNode.className += ' reverse';\r\n                break;\r\n            case 2 /* VERTICAL */:\r\n                previousKey = 16 /* UpArrow */;\r\n                nextKey = 18 /* DownArrow */;\r\n                _this.domNode.className += ' vertical';\r\n                break;\r\n            case 3 /* VERTICAL_REVERSE */:\r\n                previousKey = 18 /* DownArrow */;\r\n                nextKey = 16 /* UpArrow */;\r\n                _this.domNode.className += ' vertical reverse';\r\n                break;\r\n        }\r\n        _this._register(DOM.addDisposableListener(_this.domNode, DOM.EventType.KEY_DOWN, function (e) {\r\n            var event = new StandardKeyboardEvent(e);\r\n            var eventHandled = true;\r\n            if (event.equals(previousKey)) {\r\n                _this.focusPrevious();\r\n            }\r\n            else if (event.equals(nextKey)) {\r\n                _this.focusNext();\r\n            }\r\n            else if (event.equals(9 /* Escape */)) {\r\n                _this.cancel();\r\n            }\r\n            else if (_this.isTriggerKeyEvent(event)) {\r\n                // Staying out of the else branch even if not triggered\r\n                if (_this.options.triggerKeys && _this.options.triggerKeys.keyDown) {\r\n                    _this.doTrigger(event);\r\n                }\r\n            }\r\n            else {\r\n                eventHandled = false;\r\n            }\r\n            if (eventHandled) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }\r\n        }));\r\n        _this._register(DOM.addDisposableListener(_this.domNode, DOM.EventType.KEY_UP, function (e) {\r\n            var event = new StandardKeyboardEvent(e);\r\n            // Run action on Enter/Space\r\n            if (_this.isTriggerKeyEvent(event)) {\r\n                if (_this.options.triggerKeys && !_this.options.triggerKeys.keyDown) {\r\n                    _this.doTrigger(event);\r\n                }\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }\r\n            // Recompute focused item\r\n            else if (event.equals(2 /* Tab */) || event.equals(1024 /* Shift */ | 2 /* Tab */)) {\r\n                _this.updateFocusedItem();\r\n            }\r\n        }));\r\n        _this.focusTracker = _this._register(DOM.trackFocus(_this.domNode));\r\n        _this._register(_this.focusTracker.onDidBlur(function () {\r\n            if (document.activeElement === _this.domNode || !DOM.isAncestor(document.activeElement, _this.domNode)) {\r\n                _this._onDidBlur.fire();\r\n                _this.focusedItem = undefined;\r\n            }\r\n        }));\r\n        _this._register(_this.focusTracker.onDidFocus(function () { return _this.updateFocusedItem(); }));\r\n        _this.actionsList = document.createElement('ul');\r\n        _this.actionsList.className = 'actions-container';\r\n        _this.actionsList.setAttribute('role', 'toolbar');\r\n        if (_this.options.ariaLabel) {\r\n            _this.actionsList.setAttribute('aria-label', _this.options.ariaLabel);\r\n        }\r\n        _this.domNode.appendChild(_this.actionsList);\r\n        container.appendChild(_this.domNode);\r\n        return _this;\r\n    }\r\n    ActionBar.prototype.isTriggerKeyEvent = function (event) {\r\n        var ret = false;\r\n        if (this.options.triggerKeys) {\r\n            this.options.triggerKeys.keys.forEach(function (keyCode) {\r\n                ret = ret || event.equals(keyCode);\r\n            });\r\n        }\r\n        return ret;\r\n    };\r\n    ActionBar.prototype.updateFocusedItem = function () {\r\n        for (var i = 0; i < this.actionsList.children.length; i++) {\r\n            var elem = this.actionsList.children[i];\r\n            if (DOM.isAncestor(document.activeElement, elem)) {\r\n                this.focusedItem = i;\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(ActionBar.prototype, \"context\", {\r\n        get: function () {\r\n            return this._context;\r\n        },\r\n        set: function (context) {\r\n            this._context = context;\r\n            this.viewItems.forEach(function (i) { return i.setActionContext(context); });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ActionBar.prototype.getContainer = function () {\r\n        return this.domNode;\r\n    };\r\n    ActionBar.prototype.push = function (arg, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        var actions = Array.isArray(arg) ? arg : [arg];\r\n        var index = types.isNumber(options.index) ? options.index : null;\r\n        actions.forEach(function (action) {\r\n            var actionViewItemElement = document.createElement('li');\r\n            actionViewItemElement.className = 'action-item';\r\n            actionViewItemElement.setAttribute('role', 'presentation');\r\n            // Prevent native context menu on actions\r\n            _this._register(DOM.addDisposableListener(actionViewItemElement, DOM.EventType.CONTEXT_MENU, function (e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            }));\r\n            var item;\r\n            if (_this.options.actionViewItemProvider) {\r\n                item = _this.options.actionViewItemProvider(action);\r\n            }\r\n            if (!item) {\r\n                item = new ActionViewItem(_this.context, action, options);\r\n            }\r\n            item.actionRunner = _this._actionRunner;\r\n            item.setActionContext(_this.context);\r\n            item.render(actionViewItemElement);\r\n            if (index === null || index < 0 || index >= _this.actionsList.children.length) {\r\n                _this.actionsList.appendChild(actionViewItemElement);\r\n                _this.viewItems.push(item);\r\n            }\r\n            else {\r\n                _this.actionsList.insertBefore(actionViewItemElement, _this.actionsList.children[index]);\r\n                _this.viewItems.splice(index, 0, item);\r\n                index++;\r\n            }\r\n        });\r\n    };\r\n    ActionBar.prototype.clear = function () {\r\n        this.viewItems = dispose(this.viewItems);\r\n        DOM.clearNode(this.actionsList);\r\n    };\r\n    ActionBar.prototype.isEmpty = function () {\r\n        return this.viewItems.length === 0;\r\n    };\r\n    ActionBar.prototype.focus = function (arg) {\r\n        var selectFirst = false;\r\n        var index = undefined;\r\n        if (arg === undefined) {\r\n            selectFirst = true;\r\n        }\r\n        else if (typeof arg === 'number') {\r\n            index = arg;\r\n        }\r\n        else if (typeof arg === 'boolean') {\r\n            selectFirst = arg;\r\n        }\r\n        if (selectFirst && typeof this.focusedItem === 'undefined') {\r\n            // Focus the first enabled item\r\n            this.focusedItem = this.viewItems.length - 1;\r\n            this.focusNext();\r\n        }\r\n        else {\r\n            if (index !== undefined) {\r\n                this.focusedItem = index;\r\n            }\r\n            this.updateFocus();\r\n        }\r\n    };\r\n    ActionBar.prototype.focusNext = function () {\r\n        if (typeof this.focusedItem === 'undefined') {\r\n            this.focusedItem = this.viewItems.length - 1;\r\n        }\r\n        var startIndex = this.focusedItem;\r\n        var item;\r\n        do {\r\n            this.focusedItem = (this.focusedItem + 1) % this.viewItems.length;\r\n            item = this.viewItems[this.focusedItem];\r\n        } while (this.focusedItem !== startIndex && !item.isEnabled());\r\n        if (this.focusedItem === startIndex && !item.isEnabled()) {\r\n            this.focusedItem = undefined;\r\n        }\r\n        this.updateFocus();\r\n    };\r\n    ActionBar.prototype.focusPrevious = function () {\r\n        if (typeof this.focusedItem === 'undefined') {\r\n            this.focusedItem = 0;\r\n        }\r\n        var startIndex = this.focusedItem;\r\n        var item;\r\n        do {\r\n            this.focusedItem = this.focusedItem - 1;\r\n            if (this.focusedItem < 0) {\r\n                this.focusedItem = this.viewItems.length - 1;\r\n            }\r\n            item = this.viewItems[this.focusedItem];\r\n        } while (this.focusedItem !== startIndex && !item.isEnabled());\r\n        if (this.focusedItem === startIndex && !item.isEnabled()) {\r\n            this.focusedItem = undefined;\r\n        }\r\n        this.updateFocus(true);\r\n    };\r\n    ActionBar.prototype.updateFocus = function (fromRight, preventScroll) {\r\n        if (typeof this.focusedItem === 'undefined') {\r\n            this.actionsList.focus({ preventScroll: preventScroll });\r\n        }\r\n        for (var i = 0; i < this.viewItems.length; i++) {\r\n            var item = this.viewItems[i];\r\n            var actionViewItem = item;\r\n            if (i === this.focusedItem) {\r\n                if (types.isFunction(actionViewItem.isEnabled)) {\r\n                    if (actionViewItem.isEnabled() && types.isFunction(actionViewItem.focus)) {\r\n                        actionViewItem.focus(fromRight);\r\n                    }\r\n                    else {\r\n                        this.actionsList.focus({ preventScroll: preventScroll });\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (types.isFunction(actionViewItem.blur)) {\r\n                    actionViewItem.blur();\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ActionBar.prototype.doTrigger = function (event) {\r\n        if (typeof this.focusedItem === 'undefined') {\r\n            return; //nothing to focus\r\n        }\r\n        // trigger action\r\n        var actionViewItem = this.viewItems[this.focusedItem];\r\n        if (actionViewItem instanceof BaseActionViewItem) {\r\n            var context = (actionViewItem._context === null || actionViewItem._context === undefined) ? event : actionViewItem._context;\r\n            this.run(actionViewItem._action, context);\r\n        }\r\n    };\r\n    ActionBar.prototype.cancel = function () {\r\n        if (document.activeElement instanceof HTMLElement) {\r\n            document.activeElement.blur(); // remove focus from focused action\r\n        }\r\n        this._onDidCancel.fire();\r\n    };\r\n    ActionBar.prototype.run = function (action, context) {\r\n        return this._actionRunner.run(action, context);\r\n    };\r\n    ActionBar.prototype.dispose = function () {\r\n        dispose(this.viewItems);\r\n        this.viewItems = [];\r\n        DOM.removeNode(this.getContainer());\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    return ActionBar;\r\n}(Disposable));\r\nexport { ActionBar };\r\n"]},"metadata":{},"sourceType":"module"}