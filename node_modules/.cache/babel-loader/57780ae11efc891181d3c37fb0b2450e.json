{"ast":null,"code":"var _jsxFileName = \"/Users/ifudata/eclipse-workspace/screen-web/src/components/Home/UserList/index.js\";\nimport React, { Component, Fragment } from 'react';\nimport { Row, Col, Form, Input, Button, Card, Modal, message, Select } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons';\nimport Util from '../../../util';\nimport Datatable from './table.js';\nimport TreeSet from './tree.js';\nconst {\n  Option\n} = Select;\nconst layout = {\n  //弹窗表单布局\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 12\n  }\n};\nconst pageLoading = \"key\";\n\nclass UserList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchValue: {},\n      modalVisible: false,\n      loading: false,\n      modalTitle: \"\",\n      //角色员工权限弹框相关值\n      userRoleModalVisible: false,\n      selectUserId: 0,\n      selectRoleIds: [],\n      initTreeNodeData: {}\n    };\n\n    this.onSearch = value => {\n      value['refresh'] = Math.random();\n      this.setState({\n        searchValue: value\n      });\n    };\n\n    this.onReset = () => {\n      this.formRef.current.resetFields();\n    };\n\n    this.addItem = () => {\n      this.setState({\n        modalVisible: true,\n        modalTitle: \"新增用户\"\n      });\n    };\n\n    this.addItemOk = () => {\n      let value = this.addItemForm.current.getFieldsValue();\n      this.setState({\n        loading: true\n      });\n\n      let _this = this;\n\n      let param = {};\n      let url = \"\";\n\n      if (value.roleId == null) {\n        param = {\n          'loginCode': value.loginCode,\n          'userName': value.userName,\n          'phone': value.phone,\n          'sex': value.sex,\n          'email': value.email\n        };\n        url = \"/user/save/\";\n      } else {\n        param = {\n          'userId': value.userId,\n          'loginCode': value.loginCode,\n          'userName': value.userName,\n          'phone': value.phone,\n          'sex': value.sex,\n          'email': value.email\n        };\n        url = '/user/update/';\n      }\n\n      Util.ajax({\n        url: url,\n        data: param\n      }).then(res => {\n        _this.setState({\n          loading: false\n        });\n\n        if (res.code === 200) {\n          message.success(res.message);\n\n          _this.setState({\n            modalVisible: false,\n            searchValue: {}\n          });\n\n          _this.addItemForm.current.resetFields();\n        } else {\n          message.error(res.message);\n        }\n      });\n    };\n\n    this.addItemCancel = () => {\n      this.setState({\n        modalVisible: false\n      });\n    };\n\n    this.handleEdit = record => {\n      let _this = this;\n\n      Util.ajax({\n        url: '/user/get/' + record.key,\n        data: {}\n      }).then(res => {\n        if (res.code === 200) {\n          _this.setState({\n            modalVisible: true,\n            modalTitle: \"修改用户\"\n          });\n\n          _this.addItemForm.current.setFieldsValue({\n            userId: res.data.data.userId,\n            loginCode: res.data.data.loginCode,\n            userName: res.data.data.userName,\n            phone: res.data.data.phone,\n            sex: res.data.data.sex,\n            email: res.data.data.email\n          });\n        } else {\n          message.error(res.message);\n        }\n      });\n    };\n\n    this.userRoleItemCancel = () => {\n      this.setState({\n        userRoleModalVisible: false\n      });\n    };\n\n    this.handleSetRole = record => {\n      const _this = this;\n\n      this.setState({\n        loading: true\n      });\n      Util.ajax({\n        url: '/user/queryUserRole/' + record.key,\n        data: {}\n      }).then(res => {\n        if (res.code === 200) {\n          _this.setState({\n            selectUserId: record.key,\n            userRoleModalVisible: true,\n            loading: false,\n            selectRoleIds: res.data.data.map(item => {\n              return item.roleId + \"\";\n            })\n          });\n        } else {\n          message.error(res.message);\n        }\n      });\n    };\n\n    this.handleSetUserRole = values => {\n      let _this = this;\n\n      _this.setState({\n        loading: true,\n        userRoleModalVisible: false\n      });\n\n      Util.ajax({\n        url: '/user/setUserRole/',\n        data: {\n          'userId': _this.state.selectUserId,\n          'roleIds': _this.state.selectRoleIds\n        }\n      }).then(res => {\n        _this.setState({\n          loading: false\n        });\n\n        if (res.code === 200) {\n          message.success(res.message);\n\n          _this.setState({\n            loading: false,\n            userRoleModalVisible: false\n          });\n        } else {\n          message.error(res.message);\n        }\n      });\n    };\n\n    this.addItemForm = React.createRef();\n    this.formRef = React.createRef();\n    this.initTreeNode();\n    message.loading({\n      content: \"页面正在加载...\",\n      duration: 0,\n      key: pageLoading\n    });\n  }\n\n  //第一次加载树形菜单数据\n  initTreeNode() {\n    Util.ajax({\n      url: '/role/query',\n      data: {\n        \"startIndex\": 1,\n        \"pageSize\": 9999\n      }\n    }).then(res => {\n      if (res.code === 200) {\n        this.setState({\n          initTreeNodeData: res.data.data\n        });\n      } else {\n        message.error(res.message);\n      }\n    });\n  }\n\n  //从tree组件获取所选值\n  getSelectUserRole(values) {\n    this.setState({\n      selectRoleIds: values\n    });\n  } //获取角色已经设置的菜单\n\n\n  componentDidMount() {\n    message.success({\n      content: \"页面加载成功！\",\n      duration: 2,\n      key: pageLoading\n    });\n  }\n\n  render() {\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(Row, {\n      gutter: [10, 10],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 24,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(Card, {\n      title: \"\\u67E5\\u8BE2\\u6761\\u4EF6\",\n      bordered: false,\n      size: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onFinish: this.onSearch,\n      layout: \"inline\",\n      ref: this.formRef,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(Form.Item, {\n      label: \"\\u7528\\u6237\\u59D3\\u540D\",\n      name: \"userName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u5B57\",\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      label: \"\\u767B\\u5F55\\u8D26\\u53F7\",\n      name: \"loginCode\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u5B57\",\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, \"\\u67E5\\u8BE2\")), React.createElement(Form.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(Button, {\n      htmlType: \"button\",\n      onClick: this.onReset,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, \"\\u91CD\\u7F6E\"))))), React.createElement(Col, {\n      span: 24,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(Card, {\n      title: \"\\u67E5\\u8BE2\\u7ED3\\u679C\",\n      bordered: false,\n      size: \"small\",\n      extra: React.createElement(Button, {\n        type: \"primary\",\n        icon: React.createElement(PlusOutlined, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        }),\n        onClick: this.addItem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, \"\\u65B0\\u589E\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(Datatable, {\n      searchValue: this.state.searchValue,\n      handleEdit: this.handleEdit,\n      handleSetRole: this.handleSetRole,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    })))), React.createElement(Modal, {\n      title: this.state.modalTitle,\n      maskClosable: false,\n      visible: this.state.modalVisible,\n      onOk: this.addItemOk,\n      onCancel: this.addItemCancel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, React.createElement(Form, Object.assign({}, layout, {\n      ref: this.addItemForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }), React.createElement(Form.Item, {\n      name: \"userId\",\n      rules: [],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"hidden\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      label: \"\\u767B\\u5F55\\u8D26\\u53F7\",\n      name: \"loginCode\",\n      rules: [{\n        required: true,\n        message: '登录账号不能为空！'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u767B\\u5F55\\u8D26\\u53F7\",\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      label: \"\\u7528\\u6237\\u59D3\\u540D\",\n      name: \"userName\",\n      rules: [{\n        required: true,\n        message: '用户姓名不能为空！'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u59D3\\u540D\",\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      label: \"\\u624B\\u673A\\u53F7\\u7801\",\n      name: \"phone\",\n      rules: [{\n        required: true,\n        pattern: /^[1][3,4,5,7,8][0-9]{9}$/,\n        message: '手机号码不能为空！'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\",\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      label: \"\\u6027\\u522B\",\n      name: \"sex\",\n      rules: [{\n        required: true,\n        message: '性别不能为空！'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }, React.createElement(Select, {\n      placeholder: \"\\u8BF7\\u9009\\u62E9\\u6027\\u522B\",\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, React.createElement(Option, {\n      value: \"\\u7537\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, \"\\u7537\"), React.createElement(Option, {\n      value: \"\\u5973\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, \"\\u5973\"))), React.createElement(Form.Item, {\n      label: \"\\u7535\\u5B50\\u90AE\\u7BB1\",\n      name: \"email\",\n      rules: [{\n        required: true,\n        pattern: /^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.[a-zA-Z0-9]{2,6}$/,\n        message: '电子邮箱不能为空！'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u7535\\u5B50\\u90AE\\u7BB1\",\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    })))), React.createElement(Modal, {\n      title: '设置角色',\n      visible: this.state.userRoleModalVisible,\n      maskClosable: false,\n      confirmLoading: this.state.loading,\n      onCancel: this.userRoleItemCancel,\n      onOk: this.handleSetUserRole,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372\n      },\n      __self: this\n    }, React.createElement(TreeSet, {\n      selectRoleIds: this.state.selectRoleIds,\n      getSelectUserRole: this.getSelectUserRole.bind(this),\n      initTreeNodeData: this.state.initTreeNodeData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default UserList;","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/src/components/Home/UserList/index.js"],"names":["React","Component","Fragment","Row","Col","Form","Input","Button","Card","Modal","message","Select","PlusOutlined","Util","Datatable","TreeSet","Option","layout","labelCol","span","wrapperCol","pageLoading","UserList","constructor","props","state","searchValue","modalVisible","loading","modalTitle","userRoleModalVisible","selectUserId","selectRoleIds","initTreeNodeData","onSearch","value","Math","random","setState","onReset","formRef","current","resetFields","addItem","addItemOk","addItemForm","getFieldsValue","_this","param","url","roleId","loginCode","userName","phone","sex","email","userId","ajax","data","then","res","code","success","error","addItemCancel","handleEdit","record","key","setFieldsValue","userRoleItemCancel","handleSetRole","map","item","handleSetUserRole","values","createRef","initTreeNode","content","duration","getSelectUserRole","componentDidMount","render","required","pattern","bind"],"mappings":"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","sourcesContent":["import React,{Component,Fragment} from 'react'\r\nimport { \r\n\tRow,\r\n\tCol,\r\n\tForm,\r\n\tInput,\r\n\tButton,\r\n\tCard,\r\n\tModal,\r\n\tmessage,\r\n\tSelect\r\n} from 'antd';\r\nimport { PlusOutlined } from '@ant-design/icons';\r\n\r\nimport Util from '../../../util';\r\nimport Datatable from './table.js';\r\nimport TreeSet from './tree.js';\r\n\r\nconst { Option } = Select;\r\nconst layout = {//弹窗表单布局\r\n\tlabelCol: { span: 8 },\r\n\twrapperCol: { span: 12 },\r\n};\r\nconst pageLoading = \"key\"\r\nclass UserList extends Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.addItemForm = React.createRef();\r\n\t\tthis.formRef = React.createRef();\r\n\t\tthis.initTreeNode();\r\n\t\tmessage.loading({\r\n            content:\"页面正在加载...\",\r\n            duration:0,\r\n            key:pageLoading\r\n        })\r\n\t}\r\n\r\n\tstate = {\r\n\t\tsearchValue:{},\r\n\t\tmodalVisible:false,\r\n\t\tloading:false,\r\n\t\tmodalTitle:\"\",\r\n\r\n\t\t//角色员工权限弹框相关值\r\n\t\tuserRoleModalVisible : false,\r\n\t\tselectUserId:0,\r\n\t\tselectRoleIds:[],\r\n\t\tinitTreeNodeData : {},\r\n\r\n\t};\r\n\r\n\tonSearch = (value)=>{\r\n\t\tvalue['refresh']=Math.random();\r\n\t\tthis.setState({\r\n\t\t\tsearchValue:value\r\n\t\t})\r\n\t};\r\n\r\n\tonReset = () => {\r\n\t\tthis.formRef.current.resetFields();\r\n\t};\r\n\r\n\taddItem = ()=>{\r\n\t\tthis.setState({\r\n\t\t\tmodalVisible:true,\r\n\t\t\tmodalTitle:\"新增用户\"\r\n\t\t})\r\n\t};\r\n\r\n\taddItemOk = ()=>{\r\n\t\tlet value = this.addItemForm.current.getFieldsValue();\r\n\t\tthis.setState({loading:true})\r\n\t\tlet _this = this;\r\n\t\tlet param = {};\r\n\t\tlet url = \"\";\r\n\t\tif (value.roleId==null) {\r\n\t\t\tparam = {\r\n\t\t\t\t'loginCode':value.loginCode,\r\n\t\t\t\t'userName':value.userName,\r\n\t\t\t\t'phone':value.phone,\r\n\t\t\t\t'sex':value.sex,\r\n\t\t\t\t'email':value.email\r\n\t\t\t};\r\n\t\t\turl = \"/user/save/\";\r\n\t\t} else {\r\n\t\t\tparam = {\r\n\t\t\t\t'userId':value.userId,\r\n\t\t\t\t'loginCode':value.loginCode,\r\n\t\t\t\t'userName':value.userName,\r\n\t\t\t\t'phone':value.phone,\r\n\t\t\t\t'sex':value.sex,\r\n\t\t\t\t'email':value.email\r\n\t\t\t};\r\n\t\t\turl = '/user/update/';\r\n\t\t}\r\n\t\tUtil.ajax({\r\n\t\t\turl:url,\r\n\t\t\tdata:param\r\n\t\t}).then((res)=>{\r\n\t\t\t_this.setState({loading:false});\r\n\t\t\tif(res.code === 200){\r\n\t\t\t\tmessage.success(res.message);\r\n\t\t\t\t_this.setState({\r\n\t\t\t\t\tmodalVisible:false, searchValue:{}\r\n\t\t\t\t});\r\n\t\t\t\t_this.addItemForm.current.resetFields();\r\n\t\t\t}else{\r\n\t\t\t\tmessage.error(res.message);\r\n\t\t\t}\r\n\t\t})\r\n\t};\r\n\r\n\taddItemCancel = ()=>{\r\n\t\tthis.setState({\r\n\t\t\tmodalVisible:false\r\n\t\t})\r\n\t};\r\n\r\n\thandleEdit = (record)=>{\r\n\t\tlet _this = this;\r\n\t\tUtil.ajax({\r\n\t\t\turl:'/user/get/'+record.key,\r\n\t\t\tdata:{}\r\n\t\t}).then((res)=>{\r\n\t\t\tif(res.code === 200){\r\n\t\t\t\t_this.setState({modalVisible:true,\r\n\t\t\t\t\tmodalTitle:\"修改用户\"\r\n\t\t\t\t})\r\n\t\t\t\t_this.addItemForm.current.setFieldsValue({\r\n\t\t\t\t\tuserId:res.data.data.userId,\r\n\t\t\t\t\tloginCode:res.data.data.loginCode,\r\n\t\t\t\t\tuserName:res.data.data.userName,\r\n\t\t\t\t\tphone:res.data.data.phone,\r\n\t\t\t\t\tsex:res.data.data.sex,\r\n\t\t\t\t\temail:res.data.data.email\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tmessage.error(res.message);\r\n\t\t\t}\r\n\t\t})\r\n\t};\r\n\r\n\r\n\t//第一次加载树形菜单数据\r\n\tinitTreeNode(){\r\n\t\tUtil.ajax({\r\n\t\t\turl:'/role/query',\r\n\t\t\tdata:{\"startIndex\":1,\"pageSize\":9999\r\n\t\t\t}\r\n\t\t}).then((res)=>{\r\n\t\t\tif(res.code === 200){\r\n\t\t\t\tthis.setState({initTreeNodeData: res.data.data})\r\n\t\t\t}else{\r\n\t\t\t\tmessage.error(res.message);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tuserRoleItemCancel = ()=>{\r\n\t\tthis.setState({\r\n\t\t\tuserRoleModalVisible:false\r\n\t\t})\r\n\t};\r\n\r\n\t//从tree组件获取所选值\r\n\tgetSelectUserRole(values){\r\n\t\tthis.setState({selectRoleIds:values});\r\n\t}\r\n\r\n\t//获取角色已经设置的菜单\r\n\thandleSetRole = (record)=>{\r\n\t\tconst _this = this;\r\n\t\tthis.setState({loading: true})\r\n\t\tUtil.ajax({\r\n\t\t\turl:'/user/queryUserRole/'+record.key,\r\n\t\t\tdata:{}\r\n\t\t}).then((res)=>{\r\n\t\t\tif(res.code === 200){\r\n\t\t\t\t_this.setState({\r\n\t\t\t\t\tselectUserId:record.key,\r\n\t\t\t\t\tuserRoleModalVisible:true,\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\tselectRoleIds:res.data.data.map((item)=>{\r\n\t\t\t\t\t\treturn item.roleId+\"\"\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tmessage.error(res.message);\r\n\t\t\t}\r\n\t\t})\r\n\t};\r\n\r\n\t//设置角色用户关系     确定按钮事件\r\n\thandleSetUserRole = (values)=>{\r\n\t\tlet _this = this;\r\n\t\t_this.setState({loading: true,userRoleModalVisible:false});\r\n\t\tUtil.ajax({\r\n\t\t\turl:'/user/setUserRole/',\r\n\t\t\tdata:{'userId':_this.state.selectUserId,'roleIds':_this.state.selectRoleIds}\r\n\t\t}).then((res)=>{\r\n\t\t\t_this.setState({loading:false});\r\n\t\t\tif(res.code === 200){\r\n\t\t\t\tmessage.success(res.message);\r\n\t\t\t\t_this.setState({loading: false,userRoleModalVisible:false});\r\n\t\t\t}else{\r\n\t\t\t\tmessage.error(res.message);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n        message.success({\r\n            content:\"页面加载成功！\",\r\n            duration:2,\r\n            key:pageLoading\r\n        })\r\n    }\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<Row\r\n\t\t\t\t\tgutter={[10,10]}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\ttitle=\"查询条件\" \r\n\t\t\t\t\t\t\tbordered={false}\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Form\r\n\t\t\t\t\t\t\t\tonFinish={this.onSearch}\r\n\t\t\t\t\t\t\t\tlayout=\"inline\"\r\n\t\t\t\t\t\t\t\tref={this.formRef}\r\n\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\tlabel=\"用户姓名\"\r\n\t\t\t\t\t\t\t\t\tname=\"userName\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Input \r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入关键字\"\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\t\t\tlabel=\"登录账号\"\r\n\t\t\t\t\t\t\t\t\tname=\"loginCode\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入关键字\"\r\n\t\t\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">查询</Button>\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t<Form.Item>\r\n\t\t\t\t\t\t\t\t\t<Button htmlType=\"button\" onClick={this.onReset}>重置</Button>\r\n\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col span={24}>\r\n\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\ttitle=\"查询结果\" \r\n\t\t\t\t\t\t\tbordered={false}\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\textra={\r\n\t\t\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\t\ticon={<PlusOutlined />}\r\n\t\t\t\t\t\t\t\t\tonClick={this.addItem}\r\n\t\t\t\t\t\t\t\t>新增</Button>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Datatable\r\n\t\t\t\t\t\t\t\tsearchValue={this.state.searchValue} handleEdit={this.handleEdit} handleSetRole={this.handleSetRole}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle={this.state.modalTitle}\r\n\t\t\t\t\tmaskClosable={false}\r\n\t\t\t\t\tvisible={this.state.modalVisible}\r\n\t\t\t\t\tonOk={this.addItemOk}\r\n\t\t\t\t\tonCancel={this.addItemCancel}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Form\r\n\t\t\t\t\t\t{...layout}\r\n\t\t\t\t\t\tref={this.addItemForm}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\tname=\"userId\"\r\n\t\t\t\t\t\t\trules={[]}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Input type=\"hidden\"/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\tlabel=\"登录账号\"\r\n\t\t\t\t\t\t\tname=\"loginCode\"\r\n\t\t\t\t\t\t\trules={[{\r\n\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\tmessage: '登录账号不能为空！',\r\n\t\t\t\t\t\t\t}]}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Input \r\n\t\t\t\t\t\t\t\tplaceholder=\"请输入登录账号\"\r\n\t\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"用户姓名\"\r\n\t\t\t\t\t\tname=\"userName\"\r\n\t\t\t\t\t\trules={[{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: '用户姓名不能为空！',\r\n\t\t\t\t\t\t}]}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tplaceholder=\"请输入用户姓名\"\r\n\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"手机号码\"\r\n\t\t\t\t\t\tname=\"phone\"\r\n\t\t\t\t\t\trules={[{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tpattern: /^[1][3,4,5,7,8][0-9]{9}$/,\r\n\t\t\t\t\t\t\tmessage: '手机号码不能为空！',\r\n\t\t\t\t\t\t}]}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tplaceholder=\"请输入手机号码\"\r\n\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"性别\"\r\n\t\t\t\t\t\tname=\"sex\"\r\n\t\t\t\t\t\trules={[{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: '性别不能为空！',\r\n\t\t\t\t\t\t}]}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Select placeholder=\"请选择性别\" autoComplete=\"off\">\r\n\t\t\t\t\t\t\t<Option value=\"男\">男</Option>\r\n\t\t\t\t\t\t\t<Option value=\"女\">女</Option>\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form.Item>\r\n\r\n\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\tlabel=\"电子邮箱\"\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\trules={[{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tpattern: /^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.[a-zA-Z0-9]{2,6}$/,\r\n\t\t\t\t\t\t\tmessage: '电子邮箱不能为空！',\r\n\t\t\t\t\t\t}]}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tplaceholder=\"请输入电子邮箱\"\r\n\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</Modal>\r\n\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle={'设置角色'}\r\n\t\t\t\t\tvisible={this.state.userRoleModalVisible}\r\n\t\t\t\t\tmaskClosable={false}\r\n\t\t\t\t\tconfirmLoading={this.state.loading}\r\n\t\t\t\t\tonCancel={this.userRoleItemCancel}\r\n\t\t\t\t\tonOk={this.handleSetUserRole}\r\n\t\t\t\t>\r\n\t\t\t\t\t<TreeSet selectRoleIds={this.state.selectRoleIds}  getSelectUserRole = {this.getSelectUserRole.bind(this)}  initTreeNodeData={this.state.initTreeNodeData} ></TreeSet>\r\n\t\t\t\t</Modal>\r\n\r\n\t\t\t</Fragment>\r\n\t\t)\r\n\t}\r\n}\r\nexport default UserList;"]},"metadata":{},"sourceType":"module"}