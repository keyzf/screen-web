{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { isFalsyOrWhitespace } from '../../../base/common/strings.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\n\nvar ContextKeyExpr =\n/** @class */\nfunction () {\n  function ContextKeyExpr() {}\n\n  ContextKeyExpr.has = function (key) {\n    return ContextKeyDefinedExpr.create(key);\n  };\n\n  ContextKeyExpr.equals = function (key, value) {\n    return ContextKeyEqualsExpr.create(key, value);\n  };\n\n  ContextKeyExpr.regex = function (key, value) {\n    return ContextKeyRegexExpr.create(key, value);\n  };\n\n  ContextKeyExpr.not = function (key) {\n    return ContextKeyNotExpr.create(key);\n  };\n\n  ContextKeyExpr.and = function () {\n    var expr = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      expr[_i] = arguments[_i];\n    }\n\n    return ContextKeyAndExpr.create(expr);\n  };\n\n  ContextKeyExpr.or = function () {\n    var expr = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      expr[_i] = arguments[_i];\n    }\n\n    return ContextKeyOrExpr.create(expr);\n  };\n\n  ContextKeyExpr.deserialize = function (serialized, strict) {\n    if (strict === void 0) {\n      strict = false;\n    }\n\n    if (!serialized) {\n      return undefined;\n    }\n\n    return this._deserializeOrExpression(serialized, strict);\n  };\n\n  ContextKeyExpr._deserializeOrExpression = function (serialized, strict) {\n    var _this = this;\n\n    var pieces = serialized.split('||');\n    return ContextKeyOrExpr.create(pieces.map(function (p) {\n      return _this._deserializeAndExpression(p, strict);\n    }));\n  };\n\n  ContextKeyExpr._deserializeAndExpression = function (serialized, strict) {\n    var _this = this;\n\n    var pieces = serialized.split('&&');\n    return ContextKeyAndExpr.create(pieces.map(function (p) {\n      return _this._deserializeOne(p, strict);\n    }));\n  };\n\n  ContextKeyExpr._deserializeOne = function (serializedOne, strict) {\n    serializedOne = serializedOne.trim();\n\n    if (serializedOne.indexOf('!=') >= 0) {\n      var pieces = serializedOne.split('!=');\n      return ContextKeyNotEqualsExpr.create(pieces[0].trim(), this._deserializeValue(pieces[1], strict));\n    }\n\n    if (serializedOne.indexOf('==') >= 0) {\n      var pieces = serializedOne.split('==');\n      return ContextKeyEqualsExpr.create(pieces[0].trim(), this._deserializeValue(pieces[1], strict));\n    }\n\n    if (serializedOne.indexOf('=~') >= 0) {\n      var pieces = serializedOne.split('=~');\n      return ContextKeyRegexExpr.create(pieces[0].trim(), this._deserializeRegexValue(pieces[1], strict));\n    }\n\n    if (/^\\!\\s*/.test(serializedOne)) {\n      return ContextKeyNotExpr.create(serializedOne.substr(1).trim());\n    }\n\n    return ContextKeyDefinedExpr.create(serializedOne);\n  };\n\n  ContextKeyExpr._deserializeValue = function (serializedValue, strict) {\n    serializedValue = serializedValue.trim();\n\n    if (serializedValue === 'true') {\n      return true;\n    }\n\n    if (serializedValue === 'false') {\n      return false;\n    }\n\n    var m = /^'([^']*)'$/.exec(serializedValue);\n\n    if (m) {\n      return m[1].trim();\n    }\n\n    return serializedValue;\n  };\n\n  ContextKeyExpr._deserializeRegexValue = function (serializedValue, strict) {\n    if (isFalsyOrWhitespace(serializedValue)) {\n      if (strict) {\n        throw new Error('missing regexp-value for =~-expression');\n      } else {\n        console.warn('missing regexp-value for =~-expression');\n      }\n\n      return null;\n    }\n\n    var start = serializedValue.indexOf('/');\n    var end = serializedValue.lastIndexOf('/');\n\n    if (start === end || start < 0\n    /* || to < 0 */\n    ) {\n        if (strict) {\n          throw new Error(\"bad regexp-value '\" + serializedValue + \"', missing /-enclosure\");\n        } else {\n          console.warn(\"bad regexp-value '\" + serializedValue + \"', missing /-enclosure\");\n        }\n\n        return null;\n      }\n\n    var value = serializedValue.slice(start + 1, end);\n    var caseIgnoreFlag = serializedValue[end + 1] === 'i' ? 'i' : '';\n\n    try {\n      return new RegExp(value, caseIgnoreFlag);\n    } catch (e) {\n      if (strict) {\n        throw new Error(\"bad regexp-value '\" + serializedValue + \"', parse error: \" + e);\n      } else {\n        console.warn(\"bad regexp-value '\" + serializedValue + \"', parse error: \" + e);\n      }\n\n      return null;\n    }\n  };\n\n  return ContextKeyExpr;\n}();\n\nexport { ContextKeyExpr };\n\nfunction cmp(a, b) {\n  var aType = a.getType();\n  var bType = b.getType();\n\n  if (aType !== bType) {\n    return aType - bType;\n  }\n\n  switch (aType) {\n    case 1\n    /* Defined */\n    :\n      return a.cmp(b);\n\n    case 2\n    /* Not */\n    :\n      return a.cmp(b);\n\n    case 3\n    /* Equals */\n    :\n      return a.cmp(b);\n\n    case 4\n    /* NotEquals */\n    :\n      return a.cmp(b);\n\n    case 6\n    /* Regex */\n    :\n      return a.cmp(b);\n\n    case 7\n    /* NotRegex */\n    :\n      return a.cmp(b);\n\n    case 5\n    /* And */\n    :\n      return a.cmp(b);\n\n    default:\n      throw new Error('Unknown ContextKeyExpr!');\n  }\n}\n\nvar ContextKeyDefinedExpr =\n/** @class */\nfunction () {\n  function ContextKeyDefinedExpr(key) {\n    this.key = key;\n  }\n\n  ContextKeyDefinedExpr.create = function (key) {\n    return new ContextKeyDefinedExpr(key);\n  };\n\n  ContextKeyDefinedExpr.prototype.getType = function () {\n    return 1\n    /* Defined */\n    ;\n  };\n\n  ContextKeyDefinedExpr.prototype.cmp = function (other) {\n    if (this.key < other.key) {\n      return -1;\n    }\n\n    if (this.key > other.key) {\n      return 1;\n    }\n\n    return 0;\n  };\n\n  ContextKeyDefinedExpr.prototype.equals = function (other) {\n    if (other instanceof ContextKeyDefinedExpr) {\n      return this.key === other.key;\n    }\n\n    return false;\n  };\n\n  ContextKeyDefinedExpr.prototype.evaluate = function (context) {\n    return !!context.getValue(this.key);\n  };\n\n  ContextKeyDefinedExpr.prototype.keys = function () {\n    return [this.key];\n  };\n\n  ContextKeyDefinedExpr.prototype.negate = function () {\n    return ContextKeyNotExpr.create(this.key);\n  };\n\n  return ContextKeyDefinedExpr;\n}();\n\nexport { ContextKeyDefinedExpr };\n\nvar ContextKeyEqualsExpr =\n/** @class */\nfunction () {\n  function ContextKeyEqualsExpr(key, value) {\n    this.key = key;\n    this.value = value;\n  }\n\n  ContextKeyEqualsExpr.create = function (key, value) {\n    if (typeof value === 'boolean') {\n      if (value) {\n        return ContextKeyDefinedExpr.create(key);\n      }\n\n      return ContextKeyNotExpr.create(key);\n    }\n\n    return new ContextKeyEqualsExpr(key, value);\n  };\n\n  ContextKeyEqualsExpr.prototype.getType = function () {\n    return 3\n    /* Equals */\n    ;\n  };\n\n  ContextKeyEqualsExpr.prototype.cmp = function (other) {\n    if (this.key < other.key) {\n      return -1;\n    }\n\n    if (this.key > other.key) {\n      return 1;\n    }\n\n    if (this.value < other.value) {\n      return -1;\n    }\n\n    if (this.value > other.value) {\n      return 1;\n    }\n\n    return 0;\n  };\n\n  ContextKeyEqualsExpr.prototype.equals = function (other) {\n    if (other instanceof ContextKeyEqualsExpr) {\n      return this.key === other.key && this.value === other.value;\n    }\n\n    return false;\n  };\n\n  ContextKeyEqualsExpr.prototype.evaluate = function (context) {\n    // Intentional ==\n    // eslint-disable-next-line eqeqeq\n    return context.getValue(this.key) == this.value;\n  };\n\n  ContextKeyEqualsExpr.prototype.keys = function () {\n    return [this.key];\n  };\n\n  ContextKeyEqualsExpr.prototype.negate = function () {\n    return ContextKeyNotEqualsExpr.create(this.key, this.value);\n  };\n\n  return ContextKeyEqualsExpr;\n}();\n\nexport { ContextKeyEqualsExpr };\n\nvar ContextKeyNotEqualsExpr =\n/** @class */\nfunction () {\n  function ContextKeyNotEqualsExpr(key, value) {\n    this.key = key;\n    this.value = value;\n  }\n\n  ContextKeyNotEqualsExpr.create = function (key, value) {\n    if (typeof value === 'boolean') {\n      if (value) {\n        return ContextKeyNotExpr.create(key);\n      }\n\n      return ContextKeyDefinedExpr.create(key);\n    }\n\n    return new ContextKeyNotEqualsExpr(key, value);\n  };\n\n  ContextKeyNotEqualsExpr.prototype.getType = function () {\n    return 4\n    /* NotEquals */\n    ;\n  };\n\n  ContextKeyNotEqualsExpr.prototype.cmp = function (other) {\n    if (this.key < other.key) {\n      return -1;\n    }\n\n    if (this.key > other.key) {\n      return 1;\n    }\n\n    if (this.value < other.value) {\n      return -1;\n    }\n\n    if (this.value > other.value) {\n      return 1;\n    }\n\n    return 0;\n  };\n\n  ContextKeyNotEqualsExpr.prototype.equals = function (other) {\n    if (other instanceof ContextKeyNotEqualsExpr) {\n      return this.key === other.key && this.value === other.value;\n    }\n\n    return false;\n  };\n\n  ContextKeyNotEqualsExpr.prototype.evaluate = function (context) {\n    // Intentional !=\n    // eslint-disable-next-line eqeqeq\n    return context.getValue(this.key) != this.value;\n  };\n\n  ContextKeyNotEqualsExpr.prototype.keys = function () {\n    return [this.key];\n  };\n\n  ContextKeyNotEqualsExpr.prototype.negate = function () {\n    return ContextKeyEqualsExpr.create(this.key, this.value);\n  };\n\n  return ContextKeyNotEqualsExpr;\n}();\n\nexport { ContextKeyNotEqualsExpr };\n\nvar ContextKeyNotExpr =\n/** @class */\nfunction () {\n  function ContextKeyNotExpr(key) {\n    this.key = key;\n  }\n\n  ContextKeyNotExpr.create = function (key) {\n    return new ContextKeyNotExpr(key);\n  };\n\n  ContextKeyNotExpr.prototype.getType = function () {\n    return 2\n    /* Not */\n    ;\n  };\n\n  ContextKeyNotExpr.prototype.cmp = function (other) {\n    if (this.key < other.key) {\n      return -1;\n    }\n\n    if (this.key > other.key) {\n      return 1;\n    }\n\n    return 0;\n  };\n\n  ContextKeyNotExpr.prototype.equals = function (other) {\n    if (other instanceof ContextKeyNotExpr) {\n      return this.key === other.key;\n    }\n\n    return false;\n  };\n\n  ContextKeyNotExpr.prototype.evaluate = function (context) {\n    return !context.getValue(this.key);\n  };\n\n  ContextKeyNotExpr.prototype.keys = function () {\n    return [this.key];\n  };\n\n  ContextKeyNotExpr.prototype.negate = function () {\n    return ContextKeyDefinedExpr.create(this.key);\n  };\n\n  return ContextKeyNotExpr;\n}();\n\nexport { ContextKeyNotExpr };\n\nvar ContextKeyRegexExpr =\n/** @class */\nfunction () {\n  function ContextKeyRegexExpr(key, regexp) {\n    this.key = key;\n    this.regexp = regexp; //\n  }\n\n  ContextKeyRegexExpr.create = function (key, regexp) {\n    return new ContextKeyRegexExpr(key, regexp);\n  };\n\n  ContextKeyRegexExpr.prototype.getType = function () {\n    return 6\n    /* Regex */\n    ;\n  };\n\n  ContextKeyRegexExpr.prototype.cmp = function (other) {\n    if (this.key < other.key) {\n      return -1;\n    }\n\n    if (this.key > other.key) {\n      return 1;\n    }\n\n    var thisSource = this.regexp ? this.regexp.source : '';\n    var otherSource = other.regexp ? other.regexp.source : '';\n\n    if (thisSource < otherSource) {\n      return -1;\n    }\n\n    if (thisSource > otherSource) {\n      return 1;\n    }\n\n    return 0;\n  };\n\n  ContextKeyRegexExpr.prototype.equals = function (other) {\n    if (other instanceof ContextKeyRegexExpr) {\n      var thisSource = this.regexp ? this.regexp.source : '';\n      var otherSource = other.regexp ? other.regexp.source : '';\n      return this.key === other.key && thisSource === otherSource;\n    }\n\n    return false;\n  };\n\n  ContextKeyRegexExpr.prototype.evaluate = function (context) {\n    var value = context.getValue(this.key);\n    return this.regexp ? this.regexp.test(value) : false;\n  };\n\n  ContextKeyRegexExpr.prototype.keys = function () {\n    return [this.key];\n  };\n\n  ContextKeyRegexExpr.prototype.negate = function () {\n    return ContextKeyNotRegexExpr.create(this);\n  };\n\n  return ContextKeyRegexExpr;\n}();\n\nexport { ContextKeyRegexExpr };\n\nvar ContextKeyNotRegexExpr =\n/** @class */\nfunction () {\n  function ContextKeyNotRegexExpr(_actual) {\n    this._actual = _actual; //\n  }\n\n  ContextKeyNotRegexExpr.create = function (actual) {\n    return new ContextKeyNotRegexExpr(actual);\n  };\n\n  ContextKeyNotRegexExpr.prototype.getType = function () {\n    return 7\n    /* NotRegex */\n    ;\n  };\n\n  ContextKeyNotRegexExpr.prototype.cmp = function (other) {\n    return this._actual.cmp(other._actual);\n  };\n\n  ContextKeyNotRegexExpr.prototype.equals = function (other) {\n    if (other instanceof ContextKeyNotRegexExpr) {\n      return this._actual.equals(other._actual);\n    }\n\n    return false;\n  };\n\n  ContextKeyNotRegexExpr.prototype.evaluate = function (context) {\n    return !this._actual.evaluate(context);\n  };\n\n  ContextKeyNotRegexExpr.prototype.keys = function () {\n    return this._actual.keys();\n  };\n\n  ContextKeyNotRegexExpr.prototype.negate = function () {\n    return this._actual;\n  };\n\n  return ContextKeyNotRegexExpr;\n}();\n\nexport { ContextKeyNotRegexExpr };\n\nvar ContextKeyAndExpr =\n/** @class */\nfunction () {\n  function ContextKeyAndExpr(expr) {\n    this.expr = expr;\n  }\n\n  ContextKeyAndExpr.create = function (_expr) {\n    var expr = ContextKeyAndExpr._normalizeArr(_expr);\n\n    if (expr.length === 0) {\n      return undefined;\n    }\n\n    if (expr.length === 1) {\n      return expr[0];\n    }\n\n    return new ContextKeyAndExpr(expr);\n  };\n\n  ContextKeyAndExpr.prototype.getType = function () {\n    return 5\n    /* And */\n    ;\n  };\n\n  ContextKeyAndExpr.prototype.cmp = function (other) {\n    if (this.expr.length < other.expr.length) {\n      return -1;\n    }\n\n    if (this.expr.length > other.expr.length) {\n      return 1;\n    }\n\n    for (var i = 0, len = this.expr.length; i < len; i++) {\n      var r = cmp(this.expr[i], other.expr[i]);\n\n      if (r !== 0) {\n        return r;\n      }\n    }\n\n    return 0;\n  };\n\n  ContextKeyAndExpr.prototype.equals = function (other) {\n    if (other instanceof ContextKeyAndExpr) {\n      if (this.expr.length !== other.expr.length) {\n        return false;\n      }\n\n      for (var i = 0, len = this.expr.length; i < len; i++) {\n        if (!this.expr[i].equals(other.expr[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  ContextKeyAndExpr.prototype.evaluate = function (context) {\n    for (var i = 0, len = this.expr.length; i < len; i++) {\n      if (!this.expr[i].evaluate(context)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  ContextKeyAndExpr._normalizeArr = function (arr) {\n    var expr = [];\n\n    if (arr) {\n      for (var i = 0, len = arr.length; i < len; i++) {\n        var e = arr[i];\n\n        if (!e) {\n          continue;\n        }\n\n        if (e instanceof ContextKeyAndExpr) {\n          expr = expr.concat(e.expr);\n          continue;\n        }\n\n        if (e instanceof ContextKeyOrExpr) {\n          // Not allowed, because we don't have parens!\n          throw new Error(\"It is not allowed to have an or expression here due to lack of parens! For example \\\"a && (b||c)\\\" is not supported, use \\\"(a&&b) || (a&&c)\\\" instead.\");\n        }\n\n        expr.push(e);\n      }\n\n      expr.sort(cmp);\n    }\n\n    return expr;\n  };\n\n  ContextKeyAndExpr.prototype.keys = function () {\n    var result = [];\n\n    for (var _i = 0, _a = this.expr; _i < _a.length; _i++) {\n      var expr = _a[_i];\n      result.push.apply(result, expr.keys());\n    }\n\n    return result;\n  };\n\n  ContextKeyAndExpr.prototype.negate = function () {\n    var result = [];\n\n    for (var _i = 0, _a = this.expr; _i < _a.length; _i++) {\n      var expr = _a[_i];\n      result.push(expr.negate());\n    }\n\n    return ContextKeyOrExpr.create(result);\n  };\n\n  return ContextKeyAndExpr;\n}();\n\nexport { ContextKeyAndExpr };\n\nvar ContextKeyOrExpr =\n/** @class */\nfunction () {\n  function ContextKeyOrExpr(expr) {\n    this.expr = expr;\n  }\n\n  ContextKeyOrExpr.create = function (_expr) {\n    var expr = ContextKeyOrExpr._normalizeArr(_expr);\n\n    if (expr.length === 0) {\n      return undefined;\n    }\n\n    if (expr.length === 1) {\n      return expr[0];\n    }\n\n    return new ContextKeyOrExpr(expr);\n  };\n\n  ContextKeyOrExpr.prototype.getType = function () {\n    return 8\n    /* Or */\n    ;\n  };\n\n  ContextKeyOrExpr.prototype.equals = function (other) {\n    if (other instanceof ContextKeyOrExpr) {\n      if (this.expr.length !== other.expr.length) {\n        return false;\n      }\n\n      for (var i = 0, len = this.expr.length; i < len; i++) {\n        if (!this.expr[i].equals(other.expr[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  ContextKeyOrExpr.prototype.evaluate = function (context) {\n    for (var i = 0, len = this.expr.length; i < len; i++) {\n      if (this.expr[i].evaluate(context)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  ContextKeyOrExpr._normalizeArr = function (arr) {\n    var expr = [];\n\n    if (arr) {\n      for (var i = 0, len = arr.length; i < len; i++) {\n        var e = arr[i];\n\n        if (!e) {\n          continue;\n        }\n\n        if (e instanceof ContextKeyOrExpr) {\n          expr = expr.concat(e.expr);\n          continue;\n        }\n\n        expr.push(e);\n      }\n\n      expr.sort(cmp);\n    }\n\n    return expr;\n  };\n\n  ContextKeyOrExpr.prototype.keys = function () {\n    var result = [];\n\n    for (var _i = 0, _a = this.expr; _i < _a.length; _i++) {\n      var expr = _a[_i];\n      result.push.apply(result, expr.keys());\n    }\n\n    return result;\n  };\n\n  ContextKeyOrExpr.prototype.negate = function () {\n    var result = [];\n\n    for (var _i = 0, _a = this.expr; _i < _a.length; _i++) {\n      var expr = _a[_i];\n      result.push(expr.negate());\n    }\n\n    var terminals = function (node) {\n      if (node instanceof ContextKeyOrExpr) {\n        return node.expr;\n      }\n\n      return [node];\n    }; // We don't support parens, so here we distribute the AND over the OR terminals\n    // We always take the first 2 AND pairs and distribute them\n\n\n    while (result.length > 1) {\n      var LEFT = result.shift();\n      var RIGHT = result.shift();\n      var all = [];\n\n      for (var _b = 0, _c = terminals(LEFT); _b < _c.length; _b++) {\n        var left = _c[_b];\n\n        for (var _d = 0, _e = terminals(RIGHT); _d < _e.length; _d++) {\n          var right = _e[_d];\n          all.push(ContextKeyExpr.and(left, right));\n        }\n      }\n\n      result.unshift(ContextKeyExpr.or.apply(ContextKeyExpr, all));\n    }\n\n    return result[0];\n  };\n\n  return ContextKeyOrExpr;\n}();\n\nexport { ContextKeyOrExpr };\n\nvar RawContextKey =\n/** @class */\nfunction (_super) {\n  __extends(RawContextKey, _super);\n\n  function RawContextKey(key, defaultValue) {\n    var _this = _super.call(this, key) || this;\n\n    _this._defaultValue = defaultValue;\n    return _this;\n  }\n\n  RawContextKey.prototype.bindTo = function (target) {\n    return target.createKey(this.key, this._defaultValue);\n  };\n\n  RawContextKey.prototype.getValue = function (target) {\n    return target.getContextKeyValue(this.key);\n  };\n\n  RawContextKey.prototype.toNegated = function () {\n    return ContextKeyExpr.not(this.key);\n  };\n\n  return RawContextKey;\n}(ContextKeyDefinedExpr);\n\nexport { RawContextKey };\nexport var IContextKeyService = createDecorator('contextKeyService');\nexport var SET_CONTEXT_COMMAND_ID = 'setContext';","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/platform/contextkey/common/contextkey.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","isFalsyOrWhitespace","createDecorator","ContextKeyExpr","has","key","ContextKeyDefinedExpr","equals","value","ContextKeyEqualsExpr","regex","ContextKeyRegexExpr","not","ContextKeyNotExpr","and","expr","_i","arguments","length","ContextKeyAndExpr","or","ContextKeyOrExpr","deserialize","serialized","strict","undefined","_deserializeOrExpression","_this","pieces","split","map","_deserializeAndExpression","_deserializeOne","serializedOne","trim","indexOf","ContextKeyNotEqualsExpr","_deserializeValue","_deserializeRegexValue","test","substr","serializedValue","m","exec","Error","console","warn","start","end","lastIndexOf","slice","caseIgnoreFlag","RegExp","e","cmp","a","aType","getType","bType","other","evaluate","context","getValue","keys","negate","regexp","thisSource","source","otherSource","ContextKeyNotRegexExpr","_actual","actual","_expr","_normalizeArr","i","len","r","arr","concat","push","sort","result","_a","apply","terminals","node","LEFT","shift","RIGHT","all","_b","_c","left","_d","_e","right","unshift","RawContextKey","_super","defaultValue","call","_defaultValue","bindTo","target","createKey","getContextKeyValue","toNegated","IContextKeyService","SET_CONTEXT_COMMAND_ID"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { isFalsyOrWhitespace } from '../../../base/common/strings.js';\r\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\r\nvar ContextKeyExpr = /** @class */ (function () {\r\n    function ContextKeyExpr() {\r\n    }\r\n    ContextKeyExpr.has = function (key) {\r\n        return ContextKeyDefinedExpr.create(key);\r\n    };\r\n    ContextKeyExpr.equals = function (key, value) {\r\n        return ContextKeyEqualsExpr.create(key, value);\r\n    };\r\n    ContextKeyExpr.regex = function (key, value) {\r\n        return ContextKeyRegexExpr.create(key, value);\r\n    };\r\n    ContextKeyExpr.not = function (key) {\r\n        return ContextKeyNotExpr.create(key);\r\n    };\r\n    ContextKeyExpr.and = function () {\r\n        var expr = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            expr[_i] = arguments[_i];\r\n        }\r\n        return ContextKeyAndExpr.create(expr);\r\n    };\r\n    ContextKeyExpr.or = function () {\r\n        var expr = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            expr[_i] = arguments[_i];\r\n        }\r\n        return ContextKeyOrExpr.create(expr);\r\n    };\r\n    ContextKeyExpr.deserialize = function (serialized, strict) {\r\n        if (strict === void 0) { strict = false; }\r\n        if (!serialized) {\r\n            return undefined;\r\n        }\r\n        return this._deserializeOrExpression(serialized, strict);\r\n    };\r\n    ContextKeyExpr._deserializeOrExpression = function (serialized, strict) {\r\n        var _this = this;\r\n        var pieces = serialized.split('||');\r\n        return ContextKeyOrExpr.create(pieces.map(function (p) { return _this._deserializeAndExpression(p, strict); }));\r\n    };\r\n    ContextKeyExpr._deserializeAndExpression = function (serialized, strict) {\r\n        var _this = this;\r\n        var pieces = serialized.split('&&');\r\n        return ContextKeyAndExpr.create(pieces.map(function (p) { return _this._deserializeOne(p, strict); }));\r\n    };\r\n    ContextKeyExpr._deserializeOne = function (serializedOne, strict) {\r\n        serializedOne = serializedOne.trim();\r\n        if (serializedOne.indexOf('!=') >= 0) {\r\n            var pieces = serializedOne.split('!=');\r\n            return ContextKeyNotEqualsExpr.create(pieces[0].trim(), this._deserializeValue(pieces[1], strict));\r\n        }\r\n        if (serializedOne.indexOf('==') >= 0) {\r\n            var pieces = serializedOne.split('==');\r\n            return ContextKeyEqualsExpr.create(pieces[0].trim(), this._deserializeValue(pieces[1], strict));\r\n        }\r\n        if (serializedOne.indexOf('=~') >= 0) {\r\n            var pieces = serializedOne.split('=~');\r\n            return ContextKeyRegexExpr.create(pieces[0].trim(), this._deserializeRegexValue(pieces[1], strict));\r\n        }\r\n        if (/^\\!\\s*/.test(serializedOne)) {\r\n            return ContextKeyNotExpr.create(serializedOne.substr(1).trim());\r\n        }\r\n        return ContextKeyDefinedExpr.create(serializedOne);\r\n    };\r\n    ContextKeyExpr._deserializeValue = function (serializedValue, strict) {\r\n        serializedValue = serializedValue.trim();\r\n        if (serializedValue === 'true') {\r\n            return true;\r\n        }\r\n        if (serializedValue === 'false') {\r\n            return false;\r\n        }\r\n        var m = /^'([^']*)'$/.exec(serializedValue);\r\n        if (m) {\r\n            return m[1].trim();\r\n        }\r\n        return serializedValue;\r\n    };\r\n    ContextKeyExpr._deserializeRegexValue = function (serializedValue, strict) {\r\n        if (isFalsyOrWhitespace(serializedValue)) {\r\n            if (strict) {\r\n                throw new Error('missing regexp-value for =~-expression');\r\n            }\r\n            else {\r\n                console.warn('missing regexp-value for =~-expression');\r\n            }\r\n            return null;\r\n        }\r\n        var start = serializedValue.indexOf('/');\r\n        var end = serializedValue.lastIndexOf('/');\r\n        if (start === end || start < 0 /* || to < 0 */) {\r\n            if (strict) {\r\n                throw new Error(\"bad regexp-value '\" + serializedValue + \"', missing /-enclosure\");\r\n            }\r\n            else {\r\n                console.warn(\"bad regexp-value '\" + serializedValue + \"', missing /-enclosure\");\r\n            }\r\n            return null;\r\n        }\r\n        var value = serializedValue.slice(start + 1, end);\r\n        var caseIgnoreFlag = serializedValue[end + 1] === 'i' ? 'i' : '';\r\n        try {\r\n            return new RegExp(value, caseIgnoreFlag);\r\n        }\r\n        catch (e) {\r\n            if (strict) {\r\n                throw new Error(\"bad regexp-value '\" + serializedValue + \"', parse error: \" + e);\r\n            }\r\n            else {\r\n                console.warn(\"bad regexp-value '\" + serializedValue + \"', parse error: \" + e);\r\n            }\r\n            return null;\r\n        }\r\n    };\r\n    return ContextKeyExpr;\r\n}());\r\nexport { ContextKeyExpr };\r\nfunction cmp(a, b) {\r\n    var aType = a.getType();\r\n    var bType = b.getType();\r\n    if (aType !== bType) {\r\n        return aType - bType;\r\n    }\r\n    switch (aType) {\r\n        case 1 /* Defined */:\r\n            return a.cmp(b);\r\n        case 2 /* Not */:\r\n            return a.cmp(b);\r\n        case 3 /* Equals */:\r\n            return a.cmp(b);\r\n        case 4 /* NotEquals */:\r\n            return a.cmp(b);\r\n        case 6 /* Regex */:\r\n            return a.cmp(b);\r\n        case 7 /* NotRegex */:\r\n            return a.cmp(b);\r\n        case 5 /* And */:\r\n            return a.cmp(b);\r\n        default:\r\n            throw new Error('Unknown ContextKeyExpr!');\r\n    }\r\n}\r\nvar ContextKeyDefinedExpr = /** @class */ (function () {\r\n    function ContextKeyDefinedExpr(key) {\r\n        this.key = key;\r\n    }\r\n    ContextKeyDefinedExpr.create = function (key) {\r\n        return new ContextKeyDefinedExpr(key);\r\n    };\r\n    ContextKeyDefinedExpr.prototype.getType = function () {\r\n        return 1 /* Defined */;\r\n    };\r\n    ContextKeyDefinedExpr.prototype.cmp = function (other) {\r\n        if (this.key < other.key) {\r\n            return -1;\r\n        }\r\n        if (this.key > other.key) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    };\r\n    ContextKeyDefinedExpr.prototype.equals = function (other) {\r\n        if (other instanceof ContextKeyDefinedExpr) {\r\n            return (this.key === other.key);\r\n        }\r\n        return false;\r\n    };\r\n    ContextKeyDefinedExpr.prototype.evaluate = function (context) {\r\n        return (!!context.getValue(this.key));\r\n    };\r\n    ContextKeyDefinedExpr.prototype.keys = function () {\r\n        return [this.key];\r\n    };\r\n    ContextKeyDefinedExpr.prototype.negate = function () {\r\n        return ContextKeyNotExpr.create(this.key);\r\n    };\r\n    return ContextKeyDefinedExpr;\r\n}());\r\nexport { ContextKeyDefinedExpr };\r\nvar ContextKeyEqualsExpr = /** @class */ (function () {\r\n    function ContextKeyEqualsExpr(key, value) {\r\n        this.key = key;\r\n        this.value = value;\r\n    }\r\n    ContextKeyEqualsExpr.create = function (key, value) {\r\n        if (typeof value === 'boolean') {\r\n            if (value) {\r\n                return ContextKeyDefinedExpr.create(key);\r\n            }\r\n            return ContextKeyNotExpr.create(key);\r\n        }\r\n        return new ContextKeyEqualsExpr(key, value);\r\n    };\r\n    ContextKeyEqualsExpr.prototype.getType = function () {\r\n        return 3 /* Equals */;\r\n    };\r\n    ContextKeyEqualsExpr.prototype.cmp = function (other) {\r\n        if (this.key < other.key) {\r\n            return -1;\r\n        }\r\n        if (this.key > other.key) {\r\n            return 1;\r\n        }\r\n        if (this.value < other.value) {\r\n            return -1;\r\n        }\r\n        if (this.value > other.value) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    };\r\n    ContextKeyEqualsExpr.prototype.equals = function (other) {\r\n        if (other instanceof ContextKeyEqualsExpr) {\r\n            return (this.key === other.key && this.value === other.value);\r\n        }\r\n        return false;\r\n    };\r\n    ContextKeyEqualsExpr.prototype.evaluate = function (context) {\r\n        // Intentional ==\r\n        // eslint-disable-next-line eqeqeq\r\n        return (context.getValue(this.key) == this.value);\r\n    };\r\n    ContextKeyEqualsExpr.prototype.keys = function () {\r\n        return [this.key];\r\n    };\r\n    ContextKeyEqualsExpr.prototype.negate = function () {\r\n        return ContextKeyNotEqualsExpr.create(this.key, this.value);\r\n    };\r\n    return ContextKeyEqualsExpr;\r\n}());\r\nexport { ContextKeyEqualsExpr };\r\nvar ContextKeyNotEqualsExpr = /** @class */ (function () {\r\n    function ContextKeyNotEqualsExpr(key, value) {\r\n        this.key = key;\r\n        this.value = value;\r\n    }\r\n    ContextKeyNotEqualsExpr.create = function (key, value) {\r\n        if (typeof value === 'boolean') {\r\n            if (value) {\r\n                return ContextKeyNotExpr.create(key);\r\n            }\r\n            return ContextKeyDefinedExpr.create(key);\r\n        }\r\n        return new ContextKeyNotEqualsExpr(key, value);\r\n    };\r\n    ContextKeyNotEqualsExpr.prototype.getType = function () {\r\n        return 4 /* NotEquals */;\r\n    };\r\n    ContextKeyNotEqualsExpr.prototype.cmp = function (other) {\r\n        if (this.key < other.key) {\r\n            return -1;\r\n        }\r\n        if (this.key > other.key) {\r\n            return 1;\r\n        }\r\n        if (this.value < other.value) {\r\n            return -1;\r\n        }\r\n        if (this.value > other.value) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    };\r\n    ContextKeyNotEqualsExpr.prototype.equals = function (other) {\r\n        if (other instanceof ContextKeyNotEqualsExpr) {\r\n            return (this.key === other.key && this.value === other.value);\r\n        }\r\n        return false;\r\n    };\r\n    ContextKeyNotEqualsExpr.prototype.evaluate = function (context) {\r\n        // Intentional !=\r\n        // eslint-disable-next-line eqeqeq\r\n        return (context.getValue(this.key) != this.value);\r\n    };\r\n    ContextKeyNotEqualsExpr.prototype.keys = function () {\r\n        return [this.key];\r\n    };\r\n    ContextKeyNotEqualsExpr.prototype.negate = function () {\r\n        return ContextKeyEqualsExpr.create(this.key, this.value);\r\n    };\r\n    return ContextKeyNotEqualsExpr;\r\n}());\r\nexport { ContextKeyNotEqualsExpr };\r\nvar ContextKeyNotExpr = /** @class */ (function () {\r\n    function ContextKeyNotExpr(key) {\r\n        this.key = key;\r\n    }\r\n    ContextKeyNotExpr.create = function (key) {\r\n        return new ContextKeyNotExpr(key);\r\n    };\r\n    ContextKeyNotExpr.prototype.getType = function () {\r\n        return 2 /* Not */;\r\n    };\r\n    ContextKeyNotExpr.prototype.cmp = function (other) {\r\n        if (this.key < other.key) {\r\n            return -1;\r\n        }\r\n        if (this.key > other.key) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    };\r\n    ContextKeyNotExpr.prototype.equals = function (other) {\r\n        if (other instanceof ContextKeyNotExpr) {\r\n            return (this.key === other.key);\r\n        }\r\n        return false;\r\n    };\r\n    ContextKeyNotExpr.prototype.evaluate = function (context) {\r\n        return (!context.getValue(this.key));\r\n    };\r\n    ContextKeyNotExpr.prototype.keys = function () {\r\n        return [this.key];\r\n    };\r\n    ContextKeyNotExpr.prototype.negate = function () {\r\n        return ContextKeyDefinedExpr.create(this.key);\r\n    };\r\n    return ContextKeyNotExpr;\r\n}());\r\nexport { ContextKeyNotExpr };\r\nvar ContextKeyRegexExpr = /** @class */ (function () {\r\n    function ContextKeyRegexExpr(key, regexp) {\r\n        this.key = key;\r\n        this.regexp = regexp;\r\n        //\r\n    }\r\n    ContextKeyRegexExpr.create = function (key, regexp) {\r\n        return new ContextKeyRegexExpr(key, regexp);\r\n    };\r\n    ContextKeyRegexExpr.prototype.getType = function () {\r\n        return 6 /* Regex */;\r\n    };\r\n    ContextKeyRegexExpr.prototype.cmp = function (other) {\r\n        if (this.key < other.key) {\r\n            return -1;\r\n        }\r\n        if (this.key > other.key) {\r\n            return 1;\r\n        }\r\n        var thisSource = this.regexp ? this.regexp.source : '';\r\n        var otherSource = other.regexp ? other.regexp.source : '';\r\n        if (thisSource < otherSource) {\r\n            return -1;\r\n        }\r\n        if (thisSource > otherSource) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    };\r\n    ContextKeyRegexExpr.prototype.equals = function (other) {\r\n        if (other instanceof ContextKeyRegexExpr) {\r\n            var thisSource = this.regexp ? this.regexp.source : '';\r\n            var otherSource = other.regexp ? other.regexp.source : '';\r\n            return (this.key === other.key && thisSource === otherSource);\r\n        }\r\n        return false;\r\n    };\r\n    ContextKeyRegexExpr.prototype.evaluate = function (context) {\r\n        var value = context.getValue(this.key);\r\n        return this.regexp ? this.regexp.test(value) : false;\r\n    };\r\n    ContextKeyRegexExpr.prototype.keys = function () {\r\n        return [this.key];\r\n    };\r\n    ContextKeyRegexExpr.prototype.negate = function () {\r\n        return ContextKeyNotRegexExpr.create(this);\r\n    };\r\n    return ContextKeyRegexExpr;\r\n}());\r\nexport { ContextKeyRegexExpr };\r\nvar ContextKeyNotRegexExpr = /** @class */ (function () {\r\n    function ContextKeyNotRegexExpr(_actual) {\r\n        this._actual = _actual;\r\n        //\r\n    }\r\n    ContextKeyNotRegexExpr.create = function (actual) {\r\n        return new ContextKeyNotRegexExpr(actual);\r\n    };\r\n    ContextKeyNotRegexExpr.prototype.getType = function () {\r\n        return 7 /* NotRegex */;\r\n    };\r\n    ContextKeyNotRegexExpr.prototype.cmp = function (other) {\r\n        return this._actual.cmp(other._actual);\r\n    };\r\n    ContextKeyNotRegexExpr.prototype.equals = function (other) {\r\n        if (other instanceof ContextKeyNotRegexExpr) {\r\n            return this._actual.equals(other._actual);\r\n        }\r\n        return false;\r\n    };\r\n    ContextKeyNotRegexExpr.prototype.evaluate = function (context) {\r\n        return !this._actual.evaluate(context);\r\n    };\r\n    ContextKeyNotRegexExpr.prototype.keys = function () {\r\n        return this._actual.keys();\r\n    };\r\n    ContextKeyNotRegexExpr.prototype.negate = function () {\r\n        return this._actual;\r\n    };\r\n    return ContextKeyNotRegexExpr;\r\n}());\r\nexport { ContextKeyNotRegexExpr };\r\nvar ContextKeyAndExpr = /** @class */ (function () {\r\n    function ContextKeyAndExpr(expr) {\r\n        this.expr = expr;\r\n    }\r\n    ContextKeyAndExpr.create = function (_expr) {\r\n        var expr = ContextKeyAndExpr._normalizeArr(_expr);\r\n        if (expr.length === 0) {\r\n            return undefined;\r\n        }\r\n        if (expr.length === 1) {\r\n            return expr[0];\r\n        }\r\n        return new ContextKeyAndExpr(expr);\r\n    };\r\n    ContextKeyAndExpr.prototype.getType = function () {\r\n        return 5 /* And */;\r\n    };\r\n    ContextKeyAndExpr.prototype.cmp = function (other) {\r\n        if (this.expr.length < other.expr.length) {\r\n            return -1;\r\n        }\r\n        if (this.expr.length > other.expr.length) {\r\n            return 1;\r\n        }\r\n        for (var i = 0, len = this.expr.length; i < len; i++) {\r\n            var r = cmp(this.expr[i], other.expr[i]);\r\n            if (r !== 0) {\r\n                return r;\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n    ContextKeyAndExpr.prototype.equals = function (other) {\r\n        if (other instanceof ContextKeyAndExpr) {\r\n            if (this.expr.length !== other.expr.length) {\r\n                return false;\r\n            }\r\n            for (var i = 0, len = this.expr.length; i < len; i++) {\r\n                if (!this.expr[i].equals(other.expr[i])) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ContextKeyAndExpr.prototype.evaluate = function (context) {\r\n        for (var i = 0, len = this.expr.length; i < len; i++) {\r\n            if (!this.expr[i].evaluate(context)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    ContextKeyAndExpr._normalizeArr = function (arr) {\r\n        var expr = [];\r\n        if (arr) {\r\n            for (var i = 0, len = arr.length; i < len; i++) {\r\n                var e = arr[i];\r\n                if (!e) {\r\n                    continue;\r\n                }\r\n                if (e instanceof ContextKeyAndExpr) {\r\n                    expr = expr.concat(e.expr);\r\n                    continue;\r\n                }\r\n                if (e instanceof ContextKeyOrExpr) {\r\n                    // Not allowed, because we don't have parens!\r\n                    throw new Error(\"It is not allowed to have an or expression here due to lack of parens! For example \\\"a && (b||c)\\\" is not supported, use \\\"(a&&b) || (a&&c)\\\" instead.\");\r\n                }\r\n                expr.push(e);\r\n            }\r\n            expr.sort(cmp);\r\n        }\r\n        return expr;\r\n    };\r\n    ContextKeyAndExpr.prototype.keys = function () {\r\n        var result = [];\r\n        for (var _i = 0, _a = this.expr; _i < _a.length; _i++) {\r\n            var expr = _a[_i];\r\n            result.push.apply(result, expr.keys());\r\n        }\r\n        return result;\r\n    };\r\n    ContextKeyAndExpr.prototype.negate = function () {\r\n        var result = [];\r\n        for (var _i = 0, _a = this.expr; _i < _a.length; _i++) {\r\n            var expr = _a[_i];\r\n            result.push(expr.negate());\r\n        }\r\n        return ContextKeyOrExpr.create(result);\r\n    };\r\n    return ContextKeyAndExpr;\r\n}());\r\nexport { ContextKeyAndExpr };\r\nvar ContextKeyOrExpr = /** @class */ (function () {\r\n    function ContextKeyOrExpr(expr) {\r\n        this.expr = expr;\r\n    }\r\n    ContextKeyOrExpr.create = function (_expr) {\r\n        var expr = ContextKeyOrExpr._normalizeArr(_expr);\r\n        if (expr.length === 0) {\r\n            return undefined;\r\n        }\r\n        if (expr.length === 1) {\r\n            return expr[0];\r\n        }\r\n        return new ContextKeyOrExpr(expr);\r\n    };\r\n    ContextKeyOrExpr.prototype.getType = function () {\r\n        return 8 /* Or */;\r\n    };\r\n    ContextKeyOrExpr.prototype.equals = function (other) {\r\n        if (other instanceof ContextKeyOrExpr) {\r\n            if (this.expr.length !== other.expr.length) {\r\n                return false;\r\n            }\r\n            for (var i = 0, len = this.expr.length; i < len; i++) {\r\n                if (!this.expr[i].equals(other.expr[i])) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ContextKeyOrExpr.prototype.evaluate = function (context) {\r\n        for (var i = 0, len = this.expr.length; i < len; i++) {\r\n            if (this.expr[i].evaluate(context)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ContextKeyOrExpr._normalizeArr = function (arr) {\r\n        var expr = [];\r\n        if (arr) {\r\n            for (var i = 0, len = arr.length; i < len; i++) {\r\n                var e = arr[i];\r\n                if (!e) {\r\n                    continue;\r\n                }\r\n                if (e instanceof ContextKeyOrExpr) {\r\n                    expr = expr.concat(e.expr);\r\n                    continue;\r\n                }\r\n                expr.push(e);\r\n            }\r\n            expr.sort(cmp);\r\n        }\r\n        return expr;\r\n    };\r\n    ContextKeyOrExpr.prototype.keys = function () {\r\n        var result = [];\r\n        for (var _i = 0, _a = this.expr; _i < _a.length; _i++) {\r\n            var expr = _a[_i];\r\n            result.push.apply(result, expr.keys());\r\n        }\r\n        return result;\r\n    };\r\n    ContextKeyOrExpr.prototype.negate = function () {\r\n        var result = [];\r\n        for (var _i = 0, _a = this.expr; _i < _a.length; _i++) {\r\n            var expr = _a[_i];\r\n            result.push(expr.negate());\r\n        }\r\n        var terminals = function (node) {\r\n            if (node instanceof ContextKeyOrExpr) {\r\n                return node.expr;\r\n            }\r\n            return [node];\r\n        };\r\n        // We don't support parens, so here we distribute the AND over the OR terminals\r\n        // We always take the first 2 AND pairs and distribute them\r\n        while (result.length > 1) {\r\n            var LEFT = result.shift();\r\n            var RIGHT = result.shift();\r\n            var all = [];\r\n            for (var _b = 0, _c = terminals(LEFT); _b < _c.length; _b++) {\r\n                var left = _c[_b];\r\n                for (var _d = 0, _e = terminals(RIGHT); _d < _e.length; _d++) {\r\n                    var right = _e[_d];\r\n                    all.push(ContextKeyExpr.and(left, right));\r\n                }\r\n            }\r\n            result.unshift(ContextKeyExpr.or.apply(ContextKeyExpr, all));\r\n        }\r\n        return result[0];\r\n    };\r\n    return ContextKeyOrExpr;\r\n}());\r\nexport { ContextKeyOrExpr };\r\nvar RawContextKey = /** @class */ (function (_super) {\r\n    __extends(RawContextKey, _super);\r\n    function RawContextKey(key, defaultValue) {\r\n        var _this = _super.call(this, key) || this;\r\n        _this._defaultValue = defaultValue;\r\n        return _this;\r\n    }\r\n    RawContextKey.prototype.bindTo = function (target) {\r\n        return target.createKey(this.key, this._defaultValue);\r\n    };\r\n    RawContextKey.prototype.getValue = function (target) {\r\n        return target.getContextKeyValue(this.key);\r\n    };\r\n    RawContextKey.prototype.toNegated = function () {\r\n        return ContextKeyExpr.not(this.key);\r\n    };\r\n    return RawContextKey;\r\n}(ContextKeyDefinedExpr));\r\nexport { RawContextKey };\r\nexport var IContextKeyService = createDecorator('contextKeyService');\r\nexport var SET_CONTEXT_COMMAND_ID = 'setContext';\r\n"]},"metadata":{},"sourceType":"module"}