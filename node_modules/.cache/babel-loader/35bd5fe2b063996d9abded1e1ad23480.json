{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar _a;\n\nimport { createStyleSheet } from '../../../base/browser/dom.js';\nimport { DefaultStyleController, isSelectionRangeChangeEvent, isSelectionSingleChangeEvent } from '../../../base/browser/ui/list/listWidget.js';\nimport { Disposable, dispose, toDisposable, DisposableStore, combinedDisposable } from '../../../base/common/lifecycle.js';\nimport { localize } from '../../../nls.js';\nimport { IConfigurationService, getMigratedSettingValue } from '../../configuration/common/configuration.js';\nimport { Extensions as ConfigurationExtensions } from '../../configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { Registry } from '../../registry/common/platform.js';\nimport { attachListStyler } from '../../theme/common/styler.js';\nimport { IThemeService } from '../../theme/common/themeService.js';\nimport { InputFocusedContextKey } from '../../contextkey/common/contextkeys.js';\nimport { ObjectTree } from '../../../base/browser/ui/tree/objectTree.js';\nimport { AsyncDataTree, CompressibleAsyncDataTree } from '../../../base/browser/ui/tree/asyncDataTree.js';\nimport { DataTree } from '../../../base/browser/ui/tree/dataTree.js';\nimport { IAccessibilityService } from '../../accessibility/common/accessibility.js';\nexport var IListService = createDecorator('listService');\n\nvar ListService =\n/** @class */\nfunction () {\n  function ListService(_themeService) {\n    this._themeService = _themeService;\n    this.disposables = new DisposableStore();\n    this.lists = [];\n    this._lastFocusedWidget = undefined;\n    this._hasCreatedStyleController = false;\n  }\n\n  Object.defineProperty(ListService.prototype, \"lastFocusedList\", {\n    get: function () {\n      return this._lastFocusedWidget;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ListService.prototype.register = function (widget, extraContextKeys) {\n    var _this = this;\n\n    if (!this._hasCreatedStyleController) {\n      this._hasCreatedStyleController = true; // create a shared default tree style sheet for performance reasons\n\n      var styleController = new DefaultStyleController(createStyleSheet(), '');\n      this.disposables.add(attachListStyler(styleController, this._themeService));\n    }\n\n    if (this.lists.some(function (l) {\n      return l.widget === widget;\n    })) {\n      throw new Error('Cannot register the same widget multiple times');\n    } // Keep in our lists list\n\n\n    var registeredList = {\n      widget: widget,\n      extraContextKeys: extraContextKeys\n    };\n    this.lists.push(registeredList); // Check for currently being focused\n\n    if (widget.getHTMLElement() === document.activeElement) {\n      this._lastFocusedWidget = widget;\n    }\n\n    return combinedDisposable(widget.onDidFocus(function () {\n      return _this._lastFocusedWidget = widget;\n    }), toDisposable(function () {\n      return _this.lists.splice(_this.lists.indexOf(registeredList), 1);\n    }), widget.onDidDispose(function () {\n      _this.lists = _this.lists.filter(function (l) {\n        return l !== registeredList;\n      });\n\n      if (_this._lastFocusedWidget === widget) {\n        _this._lastFocusedWidget = undefined;\n      }\n    }));\n  };\n\n  ListService.prototype.dispose = function () {\n    this.disposables.dispose();\n  };\n\n  ListService = __decorate([__param(0, IThemeService)], ListService);\n  return ListService;\n}();\n\nexport { ListService };\nvar RawWorkbenchListFocusContextKey = new RawContextKey('listFocus', true);\nexport var WorkbenchListSupportsMultiSelectContextKey = new RawContextKey('listSupportsMultiselect', true);\nexport var WorkbenchListFocusContextKey = ContextKeyExpr.and(RawWorkbenchListFocusContextKey, ContextKeyExpr.not(InputFocusedContextKey));\nexport var WorkbenchListHasSelectionOrFocus = new RawContextKey('listHasSelectionOrFocus', false);\nexport var WorkbenchListDoubleSelection = new RawContextKey('listDoubleSelection', false);\nexport var WorkbenchListMultiSelection = new RawContextKey('listMultiSelection', false);\nexport var WorkbenchListSupportsKeyboardNavigation = new RawContextKey('listSupportsKeyboardNavigation', true);\nexport var WorkbenchListAutomaticKeyboardNavigationKey = 'listAutomaticKeyboardNavigation';\nexport var WorkbenchListAutomaticKeyboardNavigation = new RawContextKey(WorkbenchListAutomaticKeyboardNavigationKey, true);\nexport var didBindWorkbenchListAutomaticKeyboardNavigation = false;\n\nfunction createScopedContextKeyService(contextKeyService, widget) {\n  var result = contextKeyService.createScoped(widget.getHTMLElement());\n  RawWorkbenchListFocusContextKey.bindTo(result);\n  return result;\n}\n\nexport var multiSelectModifierSettingKey = 'workbench.list.multiSelectModifier';\nexport var openModeSettingKey = 'workbench.list.openMode';\nexport var horizontalScrollingKey = 'workbench.list.horizontalScrolling';\nexport var keyboardNavigationSettingKey = 'workbench.list.keyboardNavigation';\nexport var automaticKeyboardNavigationSettingKey = 'workbench.list.automaticKeyboardNavigation';\nvar treeIndentKey = 'workbench.tree.indent';\nvar treeRenderIndentGuidesKey = 'workbench.tree.renderIndentGuides';\n\nfunction getHorizontalScrollingSetting(configurationService) {\n  return getMigratedSettingValue(configurationService, horizontalScrollingKey, 'workbench.tree.horizontalScrolling');\n}\n\nfunction useAltAsMultipleSelectionModifier(configurationService) {\n  return configurationService.getValue(multiSelectModifierSettingKey) === 'alt';\n}\n\nfunction useSingleClickToOpen(configurationService) {\n  return configurationService.getValue(openModeSettingKey) !== 'doubleClick';\n}\n\nvar MultipleSelectionController =\n/** @class */\nfunction (_super) {\n  __extends(MultipleSelectionController, _super);\n\n  function MultipleSelectionController(configurationService) {\n    var _this = _super.call(this) || this;\n\n    _this.configurationService = configurationService;\n    _this.useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\n\n    _this.registerListeners();\n\n    return _this;\n  }\n\n  MultipleSelectionController.prototype.registerListeners = function () {\n    var _this = this;\n\n    this._register(this.configurationService.onDidChangeConfiguration(function (e) {\n      if (e.affectsConfiguration(multiSelectModifierSettingKey)) {\n        _this.useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(_this.configurationService);\n      }\n    }));\n  };\n\n  MultipleSelectionController.prototype.isSelectionSingleChangeEvent = function (event) {\n    if (this.useAltAsMultipleSelectionModifier) {\n      return event.browserEvent.altKey;\n    }\n\n    return isSelectionSingleChangeEvent(event);\n  };\n\n  MultipleSelectionController.prototype.isSelectionRangeChangeEvent = function (event) {\n    return isSelectionRangeChangeEvent(event);\n  };\n\n  return MultipleSelectionController;\n}(Disposable);\n\nvar WorkbenchOpenController =\n/** @class */\nfunction (_super) {\n  __extends(WorkbenchOpenController, _super);\n\n  function WorkbenchOpenController(configurationService, existingOpenController) {\n    var _this = _super.call(this) || this;\n\n    _this.configurationService = configurationService;\n    _this.existingOpenController = existingOpenController;\n    _this.openOnSingleClick = useSingleClickToOpen(configurationService);\n\n    _this.registerListeners();\n\n    return _this;\n  }\n\n  WorkbenchOpenController.prototype.registerListeners = function () {\n    var _this = this;\n\n    this._register(this.configurationService.onDidChangeConfiguration(function (e) {\n      if (e.affectsConfiguration(openModeSettingKey)) {\n        _this.openOnSingleClick = useSingleClickToOpen(_this.configurationService);\n      }\n    }));\n  };\n\n  WorkbenchOpenController.prototype.shouldOpen = function (event) {\n    if (event instanceof MouseEvent) {\n      var isLeftButton = event.button === 0;\n      var isDoubleClick = event.detail === 2;\n\n      if (isLeftButton && !this.openOnSingleClick && !isDoubleClick) {\n        return false;\n      }\n\n      if (isLeftButton\n      /* left mouse button */\n      || event.button === 1\n      /* middle mouse button */\n      ) {\n          return this.existingOpenController ? this.existingOpenController.shouldOpen(event) : true;\n        }\n\n      return false;\n    }\n\n    return this.existingOpenController ? this.existingOpenController.shouldOpen(event) : true;\n  };\n\n  return WorkbenchOpenController;\n}(Disposable);\n\nfunction toWorkbenchListOptions(options, configurationService, keybindingService) {\n  var disposables = new DisposableStore();\n\n  var result = __assign({}, options);\n\n  if (options.multipleSelectionSupport !== false && !options.multipleSelectionController) {\n    var multipleSelectionController = new MultipleSelectionController(configurationService);\n    result.multipleSelectionController = multipleSelectionController;\n    disposables.add(multipleSelectionController);\n  }\n\n  var openController = new WorkbenchOpenController(configurationService, options.openController);\n  result.openController = openController;\n  disposables.add(openController);\n  result.keyboardNavigationDelegate = {\n    mightProducePrintableCharacter: function (e) {\n      return keybindingService.mightProducePrintableCharacter(e);\n    }\n  };\n  return [result, disposables];\n}\n\nfunction createKeyboardNavigationEventFilter(container, keybindingService) {\n  var inChord = false;\n  return function (event) {\n    if (inChord) {\n      inChord = false;\n      return false;\n    }\n\n    var result = keybindingService.softDispatch(event, container);\n\n    if (result && result.enterChord) {\n      inChord = true;\n      return false;\n    }\n\n    inChord = false;\n    return true;\n  };\n}\n\nvar WorkbenchObjectTree =\n/** @class */\nfunction (_super) {\n  __extends(WorkbenchObjectTree, _super);\n\n  function WorkbenchObjectTree(user, container, delegate, renderers, options, contextKeyService, listService, themeService, configurationService, keybindingService, accessibilityService) {\n    var _this = this;\n\n    var _a = workbenchTreeDataPreamble(container, options, contextKeyService, configurationService, keybindingService, accessibilityService),\n        treeOptions = _a.options,\n        getAutomaticKeyboardNavigation = _a.getAutomaticKeyboardNavigation,\n        disposable = _a.disposable;\n\n    _this = _super.call(this, user, container, delegate, renderers, treeOptions) || this;\n\n    _this.disposables.add(disposable);\n\n    _this.internals = new WorkbenchTreeInternals(_this, treeOptions, getAutomaticKeyboardNavigation, options.overrideStyles, contextKeyService, listService, themeService, configurationService, accessibilityService);\n\n    _this.disposables.add(_this.internals);\n\n    return _this;\n  }\n\n  WorkbenchObjectTree = __decorate([__param(5, IContextKeyService), __param(6, IListService), __param(7, IThemeService), __param(8, IConfigurationService), __param(9, IKeybindingService), __param(10, IAccessibilityService)], WorkbenchObjectTree);\n  return WorkbenchObjectTree;\n}(ObjectTree);\n\nexport { WorkbenchObjectTree };\n\nvar WorkbenchDataTree =\n/** @class */\nfunction (_super) {\n  __extends(WorkbenchDataTree, _super);\n\n  function WorkbenchDataTree(user, container, delegate, renderers, dataSource, options, contextKeyService, listService, themeService, configurationService, keybindingService, accessibilityService) {\n    var _this = this;\n\n    var _a = workbenchTreeDataPreamble(container, options, contextKeyService, configurationService, keybindingService, accessibilityService),\n        treeOptions = _a.options,\n        getAutomaticKeyboardNavigation = _a.getAutomaticKeyboardNavigation,\n        disposable = _a.disposable;\n\n    _this = _super.call(this, user, container, delegate, renderers, dataSource, treeOptions) || this;\n\n    _this.disposables.add(disposable);\n\n    _this.internals = new WorkbenchTreeInternals(_this, treeOptions, getAutomaticKeyboardNavigation, options.overrideStyles, contextKeyService, listService, themeService, configurationService, accessibilityService);\n\n    _this.disposables.add(_this.internals);\n\n    return _this;\n  }\n\n  WorkbenchDataTree.prototype.updateOptions = function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    _super.prototype.updateOptions.call(this, options);\n\n    if (options.overrideStyles) {\n      this.internals.updateStyleOverrides(options.overrideStyles);\n    }\n  };\n\n  WorkbenchDataTree = __decorate([__param(6, IContextKeyService), __param(7, IListService), __param(8, IThemeService), __param(9, IConfigurationService), __param(10, IKeybindingService), __param(11, IAccessibilityService)], WorkbenchDataTree);\n  return WorkbenchDataTree;\n}(DataTree);\n\nexport { WorkbenchDataTree };\n\nvar WorkbenchAsyncDataTree =\n/** @class */\nfunction (_super) {\n  __extends(WorkbenchAsyncDataTree, _super);\n\n  function WorkbenchAsyncDataTree(user, container, delegate, renderers, dataSource, options, contextKeyService, listService, themeService, configurationService, keybindingService, accessibilityService) {\n    var _this = this;\n\n    var _a = workbenchTreeDataPreamble(container, options, contextKeyService, configurationService, keybindingService, accessibilityService),\n        treeOptions = _a.options,\n        getAutomaticKeyboardNavigation = _a.getAutomaticKeyboardNavigation,\n        disposable = _a.disposable;\n\n    _this = _super.call(this, user, container, delegate, renderers, dataSource, treeOptions) || this;\n\n    _this.disposables.add(disposable);\n\n    _this.internals = new WorkbenchTreeInternals(_this, treeOptions, getAutomaticKeyboardNavigation, options.overrideStyles, contextKeyService, listService, themeService, configurationService, accessibilityService);\n\n    _this.disposables.add(_this.internals);\n\n    return _this;\n  }\n\n  WorkbenchAsyncDataTree.prototype.updateOptions = function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    _super.prototype.updateOptions.call(this, options);\n\n    if (options.overrideStyles) {\n      this.internals.updateStyleOverrides(options.overrideStyles);\n    }\n  };\n\n  WorkbenchAsyncDataTree = __decorate([__param(6, IContextKeyService), __param(7, IListService), __param(8, IThemeService), __param(9, IConfigurationService), __param(10, IKeybindingService), __param(11, IAccessibilityService)], WorkbenchAsyncDataTree);\n  return WorkbenchAsyncDataTree;\n}(AsyncDataTree);\n\nexport { WorkbenchAsyncDataTree };\n\nvar WorkbenchCompressibleAsyncDataTree =\n/** @class */\nfunction (_super) {\n  __extends(WorkbenchCompressibleAsyncDataTree, _super);\n\n  function WorkbenchCompressibleAsyncDataTree(user, container, virtualDelegate, compressionDelegate, renderers, dataSource, options, contextKeyService, listService, themeService, configurationService, keybindingService, accessibilityService) {\n    var _this = this;\n\n    var _a = workbenchTreeDataPreamble(container, options, contextKeyService, configurationService, keybindingService, accessibilityService),\n        treeOptions = _a.options,\n        getAutomaticKeyboardNavigation = _a.getAutomaticKeyboardNavigation,\n        disposable = _a.disposable;\n\n    _this = _super.call(this, user, container, virtualDelegate, compressionDelegate, renderers, dataSource, treeOptions) || this;\n\n    _this.disposables.add(disposable);\n\n    _this.internals = new WorkbenchTreeInternals(_this, treeOptions, getAutomaticKeyboardNavigation, options.overrideStyles, contextKeyService, listService, themeService, configurationService, accessibilityService);\n\n    _this.disposables.add(_this.internals);\n\n    return _this;\n  }\n\n  WorkbenchCompressibleAsyncDataTree = __decorate([__param(7, IContextKeyService), __param(8, IListService), __param(9, IThemeService), __param(10, IConfigurationService), __param(11, IKeybindingService), __param(12, IAccessibilityService)], WorkbenchCompressibleAsyncDataTree);\n  return WorkbenchCompressibleAsyncDataTree;\n}(CompressibleAsyncDataTree);\n\nexport { WorkbenchCompressibleAsyncDataTree };\n\nfunction workbenchTreeDataPreamble(container, options, contextKeyService, configurationService, keybindingService, accessibilityService) {\n  WorkbenchListSupportsKeyboardNavigation.bindTo(contextKeyService);\n\n  if (!didBindWorkbenchListAutomaticKeyboardNavigation) {\n    WorkbenchListAutomaticKeyboardNavigation.bindTo(contextKeyService);\n    didBindWorkbenchListAutomaticKeyboardNavigation = true;\n  }\n\n  var getAutomaticKeyboardNavigation = function () {\n    // give priority to the context key value to disable this completely\n    var automaticKeyboardNavigation = contextKeyService.getContextKeyValue(WorkbenchListAutomaticKeyboardNavigationKey);\n\n    if (automaticKeyboardNavigation) {\n      automaticKeyboardNavigation = configurationService.getValue(automaticKeyboardNavigationSettingKey);\n    }\n\n    return automaticKeyboardNavigation;\n  };\n\n  var accessibilityOn = accessibilityService.isScreenReaderOptimized();\n  var keyboardNavigation = accessibilityOn ? 'simple' : configurationService.getValue(keyboardNavigationSettingKey);\n  var horizontalScrolling = typeof options.horizontalScrolling !== 'undefined' ? options.horizontalScrolling : getHorizontalScrollingSetting(configurationService);\n  var openOnSingleClick = useSingleClickToOpen(configurationService);\n\n  var _a = toWorkbenchListOptions(options, configurationService, keybindingService),\n      workbenchListOptions = _a[0],\n      disposable = _a[1];\n\n  var additionalScrollHeight = options.additionalScrollHeight;\n  return {\n    getAutomaticKeyboardNavigation: getAutomaticKeyboardNavigation,\n    disposable: disposable,\n    options: __assign(__assign({\n      // ...options, // TODO@Joao why is this not splatted here?\n      keyboardSupport: false\n    }, workbenchListOptions), {\n      indent: configurationService.getValue(treeIndentKey),\n      renderIndentGuides: configurationService.getValue(treeRenderIndentGuidesKey),\n      automaticKeyboardNavigation: getAutomaticKeyboardNavigation(),\n      simpleKeyboardNavigation: keyboardNavigation === 'simple',\n      filterOnType: keyboardNavigation === 'filter',\n      horizontalScrolling: horizontalScrolling,\n      openOnSingleClick: openOnSingleClick,\n      keyboardNavigationEventFilter: createKeyboardNavigationEventFilter(container, keybindingService),\n      additionalScrollHeight: additionalScrollHeight,\n      hideTwistiesOfChildlessElements: options.hideTwistiesOfChildlessElements\n    })\n  };\n}\n\nvar WorkbenchTreeInternals =\n/** @class */\nfunction () {\n  function WorkbenchTreeInternals(tree, options, getAutomaticKeyboardNavigation, overrideStyles, contextKeyService, listService, themeService, configurationService, accessibilityService) {\n    var _this = this;\n\n    this.tree = tree;\n    this.themeService = themeService;\n    this.disposables = [];\n    this.contextKeyService = createScopedContextKeyService(contextKeyService, tree);\n    var listSupportsMultiSelect = WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService);\n    listSupportsMultiSelect.set(!(options.multipleSelectionSupport === false));\n    this.hasSelectionOrFocus = WorkbenchListHasSelectionOrFocus.bindTo(this.contextKeyService);\n    this.hasDoubleSelection = WorkbenchListDoubleSelection.bindTo(this.contextKeyService);\n    this.hasMultiSelection = WorkbenchListMultiSelection.bindTo(this.contextKeyService);\n    this._useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\n    var interestingContextKeys = new Set();\n    interestingContextKeys.add(WorkbenchListAutomaticKeyboardNavigationKey);\n\n    var updateKeyboardNavigation = function () {\n      var accessibilityOn = accessibilityService.isScreenReaderOptimized();\n      var keyboardNavigation = accessibilityOn ? 'simple' : configurationService.getValue(keyboardNavigationSettingKey);\n      tree.updateOptions({\n        simpleKeyboardNavigation: keyboardNavigation === 'simple',\n        filterOnType: keyboardNavigation === 'filter'\n      });\n    };\n\n    this.updateStyleOverrides(overrideStyles);\n    this.disposables.push(this.contextKeyService, listService.register(tree), tree.onDidChangeSelection(function () {\n      var selection = tree.getSelection();\n      var focus = tree.getFocus();\n\n      _this.hasSelectionOrFocus.set(selection.length > 0 || focus.length > 0);\n\n      _this.hasMultiSelection.set(selection.length > 1);\n\n      _this.hasDoubleSelection.set(selection.length === 2);\n    }), tree.onDidChangeFocus(function () {\n      var selection = tree.getSelection();\n      var focus = tree.getFocus();\n\n      _this.hasSelectionOrFocus.set(selection.length > 0 || focus.length > 0);\n    }), configurationService.onDidChangeConfiguration(function (e) {\n      if (e.affectsConfiguration(openModeSettingKey)) {\n        tree.updateOptions({\n          openOnSingleClick: useSingleClickToOpen(configurationService)\n        });\n      }\n\n      if (e.affectsConfiguration(multiSelectModifierSettingKey)) {\n        _this._useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\n      }\n\n      if (e.affectsConfiguration(treeIndentKey)) {\n        var indent = configurationService.getValue(treeIndentKey);\n        tree.updateOptions({\n          indent: indent\n        });\n      }\n\n      if (e.affectsConfiguration(treeRenderIndentGuidesKey)) {\n        var renderIndentGuides = configurationService.getValue(treeRenderIndentGuidesKey);\n        tree.updateOptions({\n          renderIndentGuides: renderIndentGuides\n        });\n      }\n\n      if (e.affectsConfiguration(keyboardNavigationSettingKey)) {\n        updateKeyboardNavigation();\n      }\n\n      if (e.affectsConfiguration(automaticKeyboardNavigationSettingKey)) {\n        tree.updateOptions({\n          automaticKeyboardNavigation: getAutomaticKeyboardNavigation()\n        });\n      }\n    }), this.contextKeyService.onDidChangeContext(function (e) {\n      if (e.affectsSome(interestingContextKeys)) {\n        tree.updateOptions({\n          automaticKeyboardNavigation: getAutomaticKeyboardNavigation()\n        });\n      }\n    }), accessibilityService.onDidChangeScreenReaderOptimized(function () {\n      return updateKeyboardNavigation();\n    }));\n  }\n\n  WorkbenchTreeInternals.prototype.updateStyleOverrides = function (overrideStyles) {\n    dispose(this.styler);\n    this.styler = overrideStyles ? attachListStyler(this.tree, this.themeService, overrideStyles) : Disposable.None;\n  };\n\n  WorkbenchTreeInternals.prototype.dispose = function () {\n    this.disposables = dispose(this.disposables);\n    this.styler = dispose(this.styler);\n  };\n\n  WorkbenchTreeInternals = __decorate([__param(4, IContextKeyService), __param(5, IListService), __param(6, IThemeService), __param(7, IConfigurationService), __param(8, IAccessibilityService)], WorkbenchTreeInternals);\n  return WorkbenchTreeInternals;\n}();\n\nvar configurationRegistry = Registry.as(ConfigurationExtensions.Configuration);\nconfigurationRegistry.registerConfiguration({\n  'id': 'workbench',\n  'order': 7,\n  'title': localize('workbenchConfigurationTitle', \"Workbench\"),\n  'type': 'object',\n  'properties': (_a = {}, _a[multiSelectModifierSettingKey] = {\n    'type': 'string',\n    'enum': ['ctrlCmd', 'alt'],\n    'enumDescriptions': [localize('multiSelectModifier.ctrlCmd', \"Maps to `Control` on Windows and Linux and to `Command` on macOS.\"), localize('multiSelectModifier.alt', \"Maps to `Alt` on Windows and Linux and to `Option` on macOS.\")],\n    'default': 'ctrlCmd',\n    'description': localize({\n      key: 'multiSelectModifier',\n      comment: ['- `ctrlCmd` refers to a value the setting can take and should not be localized.', '- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized.']\n    }, \"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.\")\n  }, _a[openModeSettingKey] = {\n    'type': 'string',\n    'enum': ['singleClick', 'doubleClick'],\n    'default': 'singleClick',\n    'description': localize({\n      key: 'openModeModifier',\n      comment: ['`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized.']\n    }, \"Controls how to open items in trees and lists using the mouse (if supported). For parents with children in trees, this setting will control if a single click expands the parent or a double click. Note that some trees and lists might choose to ignore this setting if it is not applicable. \")\n  }, _a[horizontalScrollingKey] = {\n    'type': 'boolean',\n    'default': false,\n    'description': localize('horizontalScrolling setting', \"Controls whether lists and trees support horizontal scrolling in the workbench.\")\n  }, _a['workbench.tree.horizontalScrolling'] = {\n    'type': 'boolean',\n    'default': false,\n    'description': localize('tree horizontalScrolling setting', \"Controls whether trees support horizontal scrolling in the workbench.\"),\n    'deprecationMessage': localize('deprecated', \"This setting is deprecated, please use '{0}' instead.\", horizontalScrollingKey)\n  }, _a[treeIndentKey] = {\n    'type': 'number',\n    'default': 8,\n    minimum: 0,\n    maximum: 40,\n    'description': localize('tree indent setting', \"Controls tree indentation in pixels.\")\n  }, _a[treeRenderIndentGuidesKey] = {\n    type: 'string',\n    enum: ['none', 'onHover', 'always'],\n    default: 'onHover',\n    description: localize('render tree indent guides', \"Controls whether the tree should render indent guides.\")\n  }, _a[keyboardNavigationSettingKey] = {\n    'type': 'string',\n    'enum': ['simple', 'highlight', 'filter'],\n    'enumDescriptions': [localize('keyboardNavigationSettingKey.simple', \"Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes.\"), localize('keyboardNavigationSettingKey.highlight', \"Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements.\"), localize('keyboardNavigationSettingKey.filter', \"Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.\")],\n    'default': 'highlight',\n    'description': localize('keyboardNavigationSettingKey', \"Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.\")\n  }, _a[automaticKeyboardNavigationSettingKey] = {\n    'type': 'boolean',\n    'default': true,\n    markdownDescription: localize('automatic keyboard navigation setting', \"Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.\")\n  }, _a)\n});","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/platform/list/browser/listService.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","_a","createStyleSheet","DefaultStyleController","isSelectionRangeChangeEvent","isSelectionSingleChangeEvent","Disposable","dispose","toDisposable","DisposableStore","combinedDisposable","localize","IConfigurationService","getMigratedSettingValue","Extensions","ConfigurationExtensions","ContextKeyExpr","IContextKeyService","RawContextKey","createDecorator","IKeybindingService","Registry","attachListStyler","IThemeService","InputFocusedContextKey","ObjectTree","AsyncDataTree","CompressibleAsyncDataTree","DataTree","IAccessibilityService","IListService","ListService","_themeService","disposables","lists","_lastFocusedWidget","undefined","_hasCreatedStyleController","get","enumerable","configurable","register","widget","extraContextKeys","_this","styleController","add","some","l","Error","registeredList","push","getHTMLElement","document","activeElement","onDidFocus","splice","indexOf","onDidDispose","filter","RawWorkbenchListFocusContextKey","WorkbenchListSupportsMultiSelectContextKey","WorkbenchListFocusContextKey","and","not","WorkbenchListHasSelectionOrFocus","WorkbenchListDoubleSelection","WorkbenchListMultiSelection","WorkbenchListSupportsKeyboardNavigation","WorkbenchListAutomaticKeyboardNavigationKey","WorkbenchListAutomaticKeyboardNavigation","didBindWorkbenchListAutomaticKeyboardNavigation","createScopedContextKeyService","contextKeyService","result","createScoped","bindTo","multiSelectModifierSettingKey","openModeSettingKey","horizontalScrollingKey","keyboardNavigationSettingKey","automaticKeyboardNavigationSettingKey","treeIndentKey","treeRenderIndentGuidesKey","getHorizontalScrollingSetting","configurationService","useAltAsMultipleSelectionModifier","getValue","useSingleClickToOpen","MultipleSelectionController","_super","registerListeners","_register","onDidChangeConfiguration","e","affectsConfiguration","event","browserEvent","altKey","WorkbenchOpenController","existingOpenController","openOnSingleClick","shouldOpen","MouseEvent","isLeftButton","button","isDoubleClick","detail","toWorkbenchListOptions","options","keybindingService","multipleSelectionSupport","multipleSelectionController","openController","keyboardNavigationDelegate","mightProducePrintableCharacter","createKeyboardNavigationEventFilter","container","inChord","softDispatch","enterChord","WorkbenchObjectTree","user","delegate","renderers","listService","themeService","accessibilityService","workbenchTreeDataPreamble","treeOptions","getAutomaticKeyboardNavigation","disposable","internals","WorkbenchTreeInternals","overrideStyles","WorkbenchDataTree","dataSource","updateOptions","updateStyleOverrides","WorkbenchAsyncDataTree","WorkbenchCompressibleAsyncDataTree","virtualDelegate","compressionDelegate","automaticKeyboardNavigation","getContextKeyValue","accessibilityOn","isScreenReaderOptimized","keyboardNavigation","horizontalScrolling","workbenchListOptions","additionalScrollHeight","keyboardSupport","indent","renderIndentGuides","simpleKeyboardNavigation","filterOnType","keyboardNavigationEventFilter","hideTwistiesOfChildlessElements","tree","listSupportsMultiSelect","set","hasSelectionOrFocus","hasDoubleSelection","hasMultiSelection","_useAltAsMultipleSelectionModifier","interestingContextKeys","Set","updateKeyboardNavigation","onDidChangeSelection","selection","getSelection","focus","getFocus","onDidChangeFocus","onDidChangeContext","affectsSome","onDidChangeScreenReaderOptimized","styler","None","configurationRegistry","as","Configuration","registerConfiguration","comment","minimum","maximum","type","enum","default","description","markdownDescription"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar _a;\r\nimport { createStyleSheet } from '../../../base/browser/dom.js';\r\nimport { DefaultStyleController, isSelectionRangeChangeEvent, isSelectionSingleChangeEvent } from '../../../base/browser/ui/list/listWidget.js';\r\nimport { Disposable, dispose, toDisposable, DisposableStore, combinedDisposable } from '../../../base/common/lifecycle.js';\r\nimport { localize } from '../../../nls.js';\r\nimport { IConfigurationService, getMigratedSettingValue } from '../../configuration/common/configuration.js';\r\nimport { Extensions as ConfigurationExtensions } from '../../configuration/common/configurationRegistry.js';\r\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\r\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\r\nimport { Registry } from '../../registry/common/platform.js';\r\nimport { attachListStyler } from '../../theme/common/styler.js';\r\nimport { IThemeService } from '../../theme/common/themeService.js';\r\nimport { InputFocusedContextKey } from '../../contextkey/common/contextkeys.js';\r\nimport { ObjectTree } from '../../../base/browser/ui/tree/objectTree.js';\r\nimport { AsyncDataTree, CompressibleAsyncDataTree } from '../../../base/browser/ui/tree/asyncDataTree.js';\r\nimport { DataTree } from '../../../base/browser/ui/tree/dataTree.js';\r\nimport { IAccessibilityService } from '../../accessibility/common/accessibility.js';\r\nexport var IListService = createDecorator('listService');\r\nvar ListService = /** @class */ (function () {\r\n    function ListService(_themeService) {\r\n        this._themeService = _themeService;\r\n        this.disposables = new DisposableStore();\r\n        this.lists = [];\r\n        this._lastFocusedWidget = undefined;\r\n        this._hasCreatedStyleController = false;\r\n    }\r\n    Object.defineProperty(ListService.prototype, \"lastFocusedList\", {\r\n        get: function () {\r\n            return this._lastFocusedWidget;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ListService.prototype.register = function (widget, extraContextKeys) {\r\n        var _this = this;\r\n        if (!this._hasCreatedStyleController) {\r\n            this._hasCreatedStyleController = true;\r\n            // create a shared default tree style sheet for performance reasons\r\n            var styleController = new DefaultStyleController(createStyleSheet(), '');\r\n            this.disposables.add(attachListStyler(styleController, this._themeService));\r\n        }\r\n        if (this.lists.some(function (l) { return l.widget === widget; })) {\r\n            throw new Error('Cannot register the same widget multiple times');\r\n        }\r\n        // Keep in our lists list\r\n        var registeredList = { widget: widget, extraContextKeys: extraContextKeys };\r\n        this.lists.push(registeredList);\r\n        // Check for currently being focused\r\n        if (widget.getHTMLElement() === document.activeElement) {\r\n            this._lastFocusedWidget = widget;\r\n        }\r\n        return combinedDisposable(widget.onDidFocus(function () { return _this._lastFocusedWidget = widget; }), toDisposable(function () { return _this.lists.splice(_this.lists.indexOf(registeredList), 1); }), widget.onDidDispose(function () {\r\n            _this.lists = _this.lists.filter(function (l) { return l !== registeredList; });\r\n            if (_this._lastFocusedWidget === widget) {\r\n                _this._lastFocusedWidget = undefined;\r\n            }\r\n        }));\r\n    };\r\n    ListService.prototype.dispose = function () {\r\n        this.disposables.dispose();\r\n    };\r\n    ListService = __decorate([\r\n        __param(0, IThemeService)\r\n    ], ListService);\r\n    return ListService;\r\n}());\r\nexport { ListService };\r\nvar RawWorkbenchListFocusContextKey = new RawContextKey('listFocus', true);\r\nexport var WorkbenchListSupportsMultiSelectContextKey = new RawContextKey('listSupportsMultiselect', true);\r\nexport var WorkbenchListFocusContextKey = ContextKeyExpr.and(RawWorkbenchListFocusContextKey, ContextKeyExpr.not(InputFocusedContextKey));\r\nexport var WorkbenchListHasSelectionOrFocus = new RawContextKey('listHasSelectionOrFocus', false);\r\nexport var WorkbenchListDoubleSelection = new RawContextKey('listDoubleSelection', false);\r\nexport var WorkbenchListMultiSelection = new RawContextKey('listMultiSelection', false);\r\nexport var WorkbenchListSupportsKeyboardNavigation = new RawContextKey('listSupportsKeyboardNavigation', true);\r\nexport var WorkbenchListAutomaticKeyboardNavigationKey = 'listAutomaticKeyboardNavigation';\r\nexport var WorkbenchListAutomaticKeyboardNavigation = new RawContextKey(WorkbenchListAutomaticKeyboardNavigationKey, true);\r\nexport var didBindWorkbenchListAutomaticKeyboardNavigation = false;\r\nfunction createScopedContextKeyService(contextKeyService, widget) {\r\n    var result = contextKeyService.createScoped(widget.getHTMLElement());\r\n    RawWorkbenchListFocusContextKey.bindTo(result);\r\n    return result;\r\n}\r\nexport var multiSelectModifierSettingKey = 'workbench.list.multiSelectModifier';\r\nexport var openModeSettingKey = 'workbench.list.openMode';\r\nexport var horizontalScrollingKey = 'workbench.list.horizontalScrolling';\r\nexport var keyboardNavigationSettingKey = 'workbench.list.keyboardNavigation';\r\nexport var automaticKeyboardNavigationSettingKey = 'workbench.list.automaticKeyboardNavigation';\r\nvar treeIndentKey = 'workbench.tree.indent';\r\nvar treeRenderIndentGuidesKey = 'workbench.tree.renderIndentGuides';\r\nfunction getHorizontalScrollingSetting(configurationService) {\r\n    return getMigratedSettingValue(configurationService, horizontalScrollingKey, 'workbench.tree.horizontalScrolling');\r\n}\r\nfunction useAltAsMultipleSelectionModifier(configurationService) {\r\n    return configurationService.getValue(multiSelectModifierSettingKey) === 'alt';\r\n}\r\nfunction useSingleClickToOpen(configurationService) {\r\n    return configurationService.getValue(openModeSettingKey) !== 'doubleClick';\r\n}\r\nvar MultipleSelectionController = /** @class */ (function (_super) {\r\n    __extends(MultipleSelectionController, _super);\r\n    function MultipleSelectionController(configurationService) {\r\n        var _this = _super.call(this) || this;\r\n        _this.configurationService = configurationService;\r\n        _this.useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\r\n        _this.registerListeners();\r\n        return _this;\r\n    }\r\n    MultipleSelectionController.prototype.registerListeners = function () {\r\n        var _this = this;\r\n        this._register(this.configurationService.onDidChangeConfiguration(function (e) {\r\n            if (e.affectsConfiguration(multiSelectModifierSettingKey)) {\r\n                _this.useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(_this.configurationService);\r\n            }\r\n        }));\r\n    };\r\n    MultipleSelectionController.prototype.isSelectionSingleChangeEvent = function (event) {\r\n        if (this.useAltAsMultipleSelectionModifier) {\r\n            return event.browserEvent.altKey;\r\n        }\r\n        return isSelectionSingleChangeEvent(event);\r\n    };\r\n    MultipleSelectionController.prototype.isSelectionRangeChangeEvent = function (event) {\r\n        return isSelectionRangeChangeEvent(event);\r\n    };\r\n    return MultipleSelectionController;\r\n}(Disposable));\r\nvar WorkbenchOpenController = /** @class */ (function (_super) {\r\n    __extends(WorkbenchOpenController, _super);\r\n    function WorkbenchOpenController(configurationService, existingOpenController) {\r\n        var _this = _super.call(this) || this;\r\n        _this.configurationService = configurationService;\r\n        _this.existingOpenController = existingOpenController;\r\n        _this.openOnSingleClick = useSingleClickToOpen(configurationService);\r\n        _this.registerListeners();\r\n        return _this;\r\n    }\r\n    WorkbenchOpenController.prototype.registerListeners = function () {\r\n        var _this = this;\r\n        this._register(this.configurationService.onDidChangeConfiguration(function (e) {\r\n            if (e.affectsConfiguration(openModeSettingKey)) {\r\n                _this.openOnSingleClick = useSingleClickToOpen(_this.configurationService);\r\n            }\r\n        }));\r\n    };\r\n    WorkbenchOpenController.prototype.shouldOpen = function (event) {\r\n        if (event instanceof MouseEvent) {\r\n            var isLeftButton = event.button === 0;\r\n            var isDoubleClick = event.detail === 2;\r\n            if (isLeftButton && !this.openOnSingleClick && !isDoubleClick) {\r\n                return false;\r\n            }\r\n            if (isLeftButton /* left mouse button */ || event.button === 1 /* middle mouse button */) {\r\n                return this.existingOpenController ? this.existingOpenController.shouldOpen(event) : true;\r\n            }\r\n            return false;\r\n        }\r\n        return this.existingOpenController ? this.existingOpenController.shouldOpen(event) : true;\r\n    };\r\n    return WorkbenchOpenController;\r\n}(Disposable));\r\nfunction toWorkbenchListOptions(options, configurationService, keybindingService) {\r\n    var disposables = new DisposableStore();\r\n    var result = __assign({}, options);\r\n    if (options.multipleSelectionSupport !== false && !options.multipleSelectionController) {\r\n        var multipleSelectionController = new MultipleSelectionController(configurationService);\r\n        result.multipleSelectionController = multipleSelectionController;\r\n        disposables.add(multipleSelectionController);\r\n    }\r\n    var openController = new WorkbenchOpenController(configurationService, options.openController);\r\n    result.openController = openController;\r\n    disposables.add(openController);\r\n    result.keyboardNavigationDelegate = {\r\n        mightProducePrintableCharacter: function (e) {\r\n            return keybindingService.mightProducePrintableCharacter(e);\r\n        }\r\n    };\r\n    return [result, disposables];\r\n}\r\nfunction createKeyboardNavigationEventFilter(container, keybindingService) {\r\n    var inChord = false;\r\n    return function (event) {\r\n        if (inChord) {\r\n            inChord = false;\r\n            return false;\r\n        }\r\n        var result = keybindingService.softDispatch(event, container);\r\n        if (result && result.enterChord) {\r\n            inChord = true;\r\n            return false;\r\n        }\r\n        inChord = false;\r\n        return true;\r\n    };\r\n}\r\nvar WorkbenchObjectTree = /** @class */ (function (_super) {\r\n    __extends(WorkbenchObjectTree, _super);\r\n    function WorkbenchObjectTree(user, container, delegate, renderers, options, contextKeyService, listService, themeService, configurationService, keybindingService, accessibilityService) {\r\n        var _this = this;\r\n        var _a = workbenchTreeDataPreamble(container, options, contextKeyService, configurationService, keybindingService, accessibilityService), treeOptions = _a.options, getAutomaticKeyboardNavigation = _a.getAutomaticKeyboardNavigation, disposable = _a.disposable;\r\n        _this = _super.call(this, user, container, delegate, renderers, treeOptions) || this;\r\n        _this.disposables.add(disposable);\r\n        _this.internals = new WorkbenchTreeInternals(_this, treeOptions, getAutomaticKeyboardNavigation, options.overrideStyles, contextKeyService, listService, themeService, configurationService, accessibilityService);\r\n        _this.disposables.add(_this.internals);\r\n        return _this;\r\n    }\r\n    WorkbenchObjectTree = __decorate([\r\n        __param(5, IContextKeyService),\r\n        __param(6, IListService),\r\n        __param(7, IThemeService),\r\n        __param(8, IConfigurationService),\r\n        __param(9, IKeybindingService),\r\n        __param(10, IAccessibilityService)\r\n    ], WorkbenchObjectTree);\r\n    return WorkbenchObjectTree;\r\n}(ObjectTree));\r\nexport { WorkbenchObjectTree };\r\nvar WorkbenchDataTree = /** @class */ (function (_super) {\r\n    __extends(WorkbenchDataTree, _super);\r\n    function WorkbenchDataTree(user, container, delegate, renderers, dataSource, options, contextKeyService, listService, themeService, configurationService, keybindingService, accessibilityService) {\r\n        var _this = this;\r\n        var _a = workbenchTreeDataPreamble(container, options, contextKeyService, configurationService, keybindingService, accessibilityService), treeOptions = _a.options, getAutomaticKeyboardNavigation = _a.getAutomaticKeyboardNavigation, disposable = _a.disposable;\r\n        _this = _super.call(this, user, container, delegate, renderers, dataSource, treeOptions) || this;\r\n        _this.disposables.add(disposable);\r\n        _this.internals = new WorkbenchTreeInternals(_this, treeOptions, getAutomaticKeyboardNavigation, options.overrideStyles, contextKeyService, listService, themeService, configurationService, accessibilityService);\r\n        _this.disposables.add(_this.internals);\r\n        return _this;\r\n    }\r\n    WorkbenchDataTree.prototype.updateOptions = function (options) {\r\n        if (options === void 0) { options = {}; }\r\n        _super.prototype.updateOptions.call(this, options);\r\n        if (options.overrideStyles) {\r\n            this.internals.updateStyleOverrides(options.overrideStyles);\r\n        }\r\n    };\r\n    WorkbenchDataTree = __decorate([\r\n        __param(6, IContextKeyService),\r\n        __param(7, IListService),\r\n        __param(8, IThemeService),\r\n        __param(9, IConfigurationService),\r\n        __param(10, IKeybindingService),\r\n        __param(11, IAccessibilityService)\r\n    ], WorkbenchDataTree);\r\n    return WorkbenchDataTree;\r\n}(DataTree));\r\nexport { WorkbenchDataTree };\r\nvar WorkbenchAsyncDataTree = /** @class */ (function (_super) {\r\n    __extends(WorkbenchAsyncDataTree, _super);\r\n    function WorkbenchAsyncDataTree(user, container, delegate, renderers, dataSource, options, contextKeyService, listService, themeService, configurationService, keybindingService, accessibilityService) {\r\n        var _this = this;\r\n        var _a = workbenchTreeDataPreamble(container, options, contextKeyService, configurationService, keybindingService, accessibilityService), treeOptions = _a.options, getAutomaticKeyboardNavigation = _a.getAutomaticKeyboardNavigation, disposable = _a.disposable;\r\n        _this = _super.call(this, user, container, delegate, renderers, dataSource, treeOptions) || this;\r\n        _this.disposables.add(disposable);\r\n        _this.internals = new WorkbenchTreeInternals(_this, treeOptions, getAutomaticKeyboardNavigation, options.overrideStyles, contextKeyService, listService, themeService, configurationService, accessibilityService);\r\n        _this.disposables.add(_this.internals);\r\n        return _this;\r\n    }\r\n    WorkbenchAsyncDataTree.prototype.updateOptions = function (options) {\r\n        if (options === void 0) { options = {}; }\r\n        _super.prototype.updateOptions.call(this, options);\r\n        if (options.overrideStyles) {\r\n            this.internals.updateStyleOverrides(options.overrideStyles);\r\n        }\r\n    };\r\n    WorkbenchAsyncDataTree = __decorate([\r\n        __param(6, IContextKeyService),\r\n        __param(7, IListService),\r\n        __param(8, IThemeService),\r\n        __param(9, IConfigurationService),\r\n        __param(10, IKeybindingService),\r\n        __param(11, IAccessibilityService)\r\n    ], WorkbenchAsyncDataTree);\r\n    return WorkbenchAsyncDataTree;\r\n}(AsyncDataTree));\r\nexport { WorkbenchAsyncDataTree };\r\nvar WorkbenchCompressibleAsyncDataTree = /** @class */ (function (_super) {\r\n    __extends(WorkbenchCompressibleAsyncDataTree, _super);\r\n    function WorkbenchCompressibleAsyncDataTree(user, container, virtualDelegate, compressionDelegate, renderers, dataSource, options, contextKeyService, listService, themeService, configurationService, keybindingService, accessibilityService) {\r\n        var _this = this;\r\n        var _a = workbenchTreeDataPreamble(container, options, contextKeyService, configurationService, keybindingService, accessibilityService), treeOptions = _a.options, getAutomaticKeyboardNavigation = _a.getAutomaticKeyboardNavigation, disposable = _a.disposable;\r\n        _this = _super.call(this, user, container, virtualDelegate, compressionDelegate, renderers, dataSource, treeOptions) || this;\r\n        _this.disposables.add(disposable);\r\n        _this.internals = new WorkbenchTreeInternals(_this, treeOptions, getAutomaticKeyboardNavigation, options.overrideStyles, contextKeyService, listService, themeService, configurationService, accessibilityService);\r\n        _this.disposables.add(_this.internals);\r\n        return _this;\r\n    }\r\n    WorkbenchCompressibleAsyncDataTree = __decorate([\r\n        __param(7, IContextKeyService),\r\n        __param(8, IListService),\r\n        __param(9, IThemeService),\r\n        __param(10, IConfigurationService),\r\n        __param(11, IKeybindingService),\r\n        __param(12, IAccessibilityService)\r\n    ], WorkbenchCompressibleAsyncDataTree);\r\n    return WorkbenchCompressibleAsyncDataTree;\r\n}(CompressibleAsyncDataTree));\r\nexport { WorkbenchCompressibleAsyncDataTree };\r\nfunction workbenchTreeDataPreamble(container, options, contextKeyService, configurationService, keybindingService, accessibilityService) {\r\n    WorkbenchListSupportsKeyboardNavigation.bindTo(contextKeyService);\r\n    if (!didBindWorkbenchListAutomaticKeyboardNavigation) {\r\n        WorkbenchListAutomaticKeyboardNavigation.bindTo(contextKeyService);\r\n        didBindWorkbenchListAutomaticKeyboardNavigation = true;\r\n    }\r\n    var getAutomaticKeyboardNavigation = function () {\r\n        // give priority to the context key value to disable this completely\r\n        var automaticKeyboardNavigation = contextKeyService.getContextKeyValue(WorkbenchListAutomaticKeyboardNavigationKey);\r\n        if (automaticKeyboardNavigation) {\r\n            automaticKeyboardNavigation = configurationService.getValue(automaticKeyboardNavigationSettingKey);\r\n        }\r\n        return automaticKeyboardNavigation;\r\n    };\r\n    var accessibilityOn = accessibilityService.isScreenReaderOptimized();\r\n    var keyboardNavigation = accessibilityOn ? 'simple' : configurationService.getValue(keyboardNavigationSettingKey);\r\n    var horizontalScrolling = typeof options.horizontalScrolling !== 'undefined' ? options.horizontalScrolling : getHorizontalScrollingSetting(configurationService);\r\n    var openOnSingleClick = useSingleClickToOpen(configurationService);\r\n    var _a = toWorkbenchListOptions(options, configurationService, keybindingService), workbenchListOptions = _a[0], disposable = _a[1];\r\n    var additionalScrollHeight = options.additionalScrollHeight;\r\n    return {\r\n        getAutomaticKeyboardNavigation: getAutomaticKeyboardNavigation,\r\n        disposable: disposable,\r\n        options: __assign(__assign({ \r\n            // ...options, // TODO@Joao why is this not splatted here?\r\n            keyboardSupport: false }, workbenchListOptions), { indent: configurationService.getValue(treeIndentKey), renderIndentGuides: configurationService.getValue(treeRenderIndentGuidesKey), automaticKeyboardNavigation: getAutomaticKeyboardNavigation(), simpleKeyboardNavigation: keyboardNavigation === 'simple', filterOnType: keyboardNavigation === 'filter', horizontalScrolling: horizontalScrolling,\r\n            openOnSingleClick: openOnSingleClick, keyboardNavigationEventFilter: createKeyboardNavigationEventFilter(container, keybindingService), additionalScrollHeight: additionalScrollHeight, hideTwistiesOfChildlessElements: options.hideTwistiesOfChildlessElements })\r\n    };\r\n}\r\nvar WorkbenchTreeInternals = /** @class */ (function () {\r\n    function WorkbenchTreeInternals(tree, options, getAutomaticKeyboardNavigation, overrideStyles, contextKeyService, listService, themeService, configurationService, accessibilityService) {\r\n        var _this = this;\r\n        this.tree = tree;\r\n        this.themeService = themeService;\r\n        this.disposables = [];\r\n        this.contextKeyService = createScopedContextKeyService(contextKeyService, tree);\r\n        var listSupportsMultiSelect = WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService);\r\n        listSupportsMultiSelect.set(!(options.multipleSelectionSupport === false));\r\n        this.hasSelectionOrFocus = WorkbenchListHasSelectionOrFocus.bindTo(this.contextKeyService);\r\n        this.hasDoubleSelection = WorkbenchListDoubleSelection.bindTo(this.contextKeyService);\r\n        this.hasMultiSelection = WorkbenchListMultiSelection.bindTo(this.contextKeyService);\r\n        this._useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\r\n        var interestingContextKeys = new Set();\r\n        interestingContextKeys.add(WorkbenchListAutomaticKeyboardNavigationKey);\r\n        var updateKeyboardNavigation = function () {\r\n            var accessibilityOn = accessibilityService.isScreenReaderOptimized();\r\n            var keyboardNavigation = accessibilityOn ? 'simple' : configurationService.getValue(keyboardNavigationSettingKey);\r\n            tree.updateOptions({\r\n                simpleKeyboardNavigation: keyboardNavigation === 'simple',\r\n                filterOnType: keyboardNavigation === 'filter'\r\n            });\r\n        };\r\n        this.updateStyleOverrides(overrideStyles);\r\n        this.disposables.push(this.contextKeyService, listService.register(tree), tree.onDidChangeSelection(function () {\r\n            var selection = tree.getSelection();\r\n            var focus = tree.getFocus();\r\n            _this.hasSelectionOrFocus.set(selection.length > 0 || focus.length > 0);\r\n            _this.hasMultiSelection.set(selection.length > 1);\r\n            _this.hasDoubleSelection.set(selection.length === 2);\r\n        }), tree.onDidChangeFocus(function () {\r\n            var selection = tree.getSelection();\r\n            var focus = tree.getFocus();\r\n            _this.hasSelectionOrFocus.set(selection.length > 0 || focus.length > 0);\r\n        }), configurationService.onDidChangeConfiguration(function (e) {\r\n            if (e.affectsConfiguration(openModeSettingKey)) {\r\n                tree.updateOptions({ openOnSingleClick: useSingleClickToOpen(configurationService) });\r\n            }\r\n            if (e.affectsConfiguration(multiSelectModifierSettingKey)) {\r\n                _this._useAltAsMultipleSelectionModifier = useAltAsMultipleSelectionModifier(configurationService);\r\n            }\r\n            if (e.affectsConfiguration(treeIndentKey)) {\r\n                var indent = configurationService.getValue(treeIndentKey);\r\n                tree.updateOptions({ indent: indent });\r\n            }\r\n            if (e.affectsConfiguration(treeRenderIndentGuidesKey)) {\r\n                var renderIndentGuides = configurationService.getValue(treeRenderIndentGuidesKey);\r\n                tree.updateOptions({ renderIndentGuides: renderIndentGuides });\r\n            }\r\n            if (e.affectsConfiguration(keyboardNavigationSettingKey)) {\r\n                updateKeyboardNavigation();\r\n            }\r\n            if (e.affectsConfiguration(automaticKeyboardNavigationSettingKey)) {\r\n                tree.updateOptions({ automaticKeyboardNavigation: getAutomaticKeyboardNavigation() });\r\n            }\r\n        }), this.contextKeyService.onDidChangeContext(function (e) {\r\n            if (e.affectsSome(interestingContextKeys)) {\r\n                tree.updateOptions({ automaticKeyboardNavigation: getAutomaticKeyboardNavigation() });\r\n            }\r\n        }), accessibilityService.onDidChangeScreenReaderOptimized(function () { return updateKeyboardNavigation(); }));\r\n    }\r\n    WorkbenchTreeInternals.prototype.updateStyleOverrides = function (overrideStyles) {\r\n        dispose(this.styler);\r\n        this.styler = overrideStyles ? attachListStyler(this.tree, this.themeService, overrideStyles) : Disposable.None;\r\n    };\r\n    WorkbenchTreeInternals.prototype.dispose = function () {\r\n        this.disposables = dispose(this.disposables);\r\n        this.styler = dispose(this.styler);\r\n    };\r\n    WorkbenchTreeInternals = __decorate([\r\n        __param(4, IContextKeyService),\r\n        __param(5, IListService),\r\n        __param(6, IThemeService),\r\n        __param(7, IConfigurationService),\r\n        __param(8, IAccessibilityService)\r\n    ], WorkbenchTreeInternals);\r\n    return WorkbenchTreeInternals;\r\n}());\r\nvar configurationRegistry = Registry.as(ConfigurationExtensions.Configuration);\r\nconfigurationRegistry.registerConfiguration({\r\n    'id': 'workbench',\r\n    'order': 7,\r\n    'title': localize('workbenchConfigurationTitle', \"Workbench\"),\r\n    'type': 'object',\r\n    'properties': (_a = {},\r\n        _a[multiSelectModifierSettingKey] = {\r\n            'type': 'string',\r\n            'enum': ['ctrlCmd', 'alt'],\r\n            'enumDescriptions': [\r\n                localize('multiSelectModifier.ctrlCmd', \"Maps to `Control` on Windows and Linux and to `Command` on macOS.\"),\r\n                localize('multiSelectModifier.alt', \"Maps to `Alt` on Windows and Linux and to `Option` on macOS.\")\r\n            ],\r\n            'default': 'ctrlCmd',\r\n            'description': localize({\r\n                key: 'multiSelectModifier',\r\n                comment: [\r\n                    '- `ctrlCmd` refers to a value the setting can take and should not be localized.',\r\n                    '- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized.'\r\n                ]\r\n            }, \"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.\")\r\n        },\r\n        _a[openModeSettingKey] = {\r\n            'type': 'string',\r\n            'enum': ['singleClick', 'doubleClick'],\r\n            'default': 'singleClick',\r\n            'description': localize({\r\n                key: 'openModeModifier',\r\n                comment: ['`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized.']\r\n            }, \"Controls how to open items in trees and lists using the mouse (if supported). For parents with children in trees, this setting will control if a single click expands the parent or a double click. Note that some trees and lists might choose to ignore this setting if it is not applicable. \")\r\n        },\r\n        _a[horizontalScrollingKey] = {\r\n            'type': 'boolean',\r\n            'default': false,\r\n            'description': localize('horizontalScrolling setting', \"Controls whether lists and trees support horizontal scrolling in the workbench.\")\r\n        },\r\n        _a['workbench.tree.horizontalScrolling'] = {\r\n            'type': 'boolean',\r\n            'default': false,\r\n            'description': localize('tree horizontalScrolling setting', \"Controls whether trees support horizontal scrolling in the workbench.\"),\r\n            'deprecationMessage': localize('deprecated', \"This setting is deprecated, please use '{0}' instead.\", horizontalScrollingKey)\r\n        },\r\n        _a[treeIndentKey] = {\r\n            'type': 'number',\r\n            'default': 8,\r\n            minimum: 0,\r\n            maximum: 40,\r\n            'description': localize('tree indent setting', \"Controls tree indentation in pixels.\")\r\n        },\r\n        _a[treeRenderIndentGuidesKey] = {\r\n            type: 'string',\r\n            enum: ['none', 'onHover', 'always'],\r\n            default: 'onHover',\r\n            description: localize('render tree indent guides', \"Controls whether the tree should render indent guides.\")\r\n        },\r\n        _a[keyboardNavigationSettingKey] = {\r\n            'type': 'string',\r\n            'enum': ['simple', 'highlight', 'filter'],\r\n            'enumDescriptions': [\r\n                localize('keyboardNavigationSettingKey.simple', \"Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes.\"),\r\n                localize('keyboardNavigationSettingKey.highlight', \"Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements.\"),\r\n                localize('keyboardNavigationSettingKey.filter', \"Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.\")\r\n            ],\r\n            'default': 'highlight',\r\n            'description': localize('keyboardNavigationSettingKey', \"Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter.\")\r\n        },\r\n        _a[automaticKeyboardNavigationSettingKey] = {\r\n            'type': 'boolean',\r\n            'default': true,\r\n            markdownDescription: localize('automatic keyboard navigation setting', \"Controls whether keyboard navigation in lists and trees is automatically triggered simply by typing. If set to `false`, keyboard navigation is only triggered when executing the `list.toggleKeyboardNavigation` command, for which you can assign a keyboard shortcut.\")\r\n        },\r\n        _a)\r\n});\r\n"]},"metadata":{},"sourceType":"module"}