{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { TimeoutTimer, createCancelablePromise } from '../../../base/common/async.js';\nimport { RGBA } from '../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { hash } from '../../../base/common/hash.js';\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { Range } from '../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { ColorProviderRegistry } from '../../common/modes.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nvar MAX_DECORATORS = 500;\n\nvar ColorDetector =\n/** @class */\nfunction (_super) {\n  __extends(ColorDetector, _super);\n\n  function ColorDetector(_editor, _codeEditorService, _configurationService) {\n    var _this = _super.call(this) || this;\n\n    _this._editor = _editor;\n    _this._codeEditorService = _codeEditorService;\n    _this._configurationService = _configurationService;\n    _this._localToDispose = _this._register(new DisposableStore());\n    _this._decorationsIds = [];\n    _this._colorDatas = new Map();\n    _this._colorDecoratorIds = [];\n    _this._decorationsTypes = new Set();\n\n    _this._register(_editor.onDidChangeModel(function (e) {\n      _this._isEnabled = _this.isEnabled();\n\n      _this.onModelChanged();\n    }));\n\n    _this._register(_editor.onDidChangeModelLanguage(function (e) {\n      return _this.onModelChanged();\n    }));\n\n    _this._register(ColorProviderRegistry.onDidChange(function (e) {\n      return _this.onModelChanged();\n    }));\n\n    _this._register(_editor.onDidChangeConfiguration(function (e) {\n      var prevIsEnabled = _this._isEnabled;\n      _this._isEnabled = _this.isEnabled();\n\n      if (prevIsEnabled !== _this._isEnabled) {\n        if (_this._isEnabled) {\n          _this.onModelChanged();\n        } else {\n          _this.removeAllDecorations();\n        }\n      }\n    }));\n\n    _this._timeoutTimer = null;\n    _this._computePromise = null;\n    _this._isEnabled = _this.isEnabled();\n\n    _this.onModelChanged();\n\n    return _this;\n  }\n\n  ColorDetector.prototype.isEnabled = function () {\n    var model = this._editor.getModel();\n\n    if (!model) {\n      return false;\n    }\n\n    var languageId = model.getLanguageIdentifier(); // handle deprecated settings. [languageId].colorDecorators.enable\n\n    var deprecatedConfig = this._configurationService.getValue(languageId.language);\n\n    if (deprecatedConfig) {\n      var colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n\n      if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n        return colorDecorators['enable'];\n      }\n    }\n\n    return this._editor.getOption(12\n    /* colorDecorators */\n    );\n  };\n\n  ColorDetector.get = function (editor) {\n    return editor.getContribution(this.ID);\n  };\n\n  ColorDetector.prototype.dispose = function () {\n    this.stop();\n    this.removeAllDecorations();\n\n    _super.prototype.dispose.call(this);\n  };\n\n  ColorDetector.prototype.onModelChanged = function () {\n    var _this = this;\n\n    this.stop();\n\n    if (!this._isEnabled) {\n      return;\n    }\n\n    var model = this._editor.getModel();\n\n    if (!model || !ColorProviderRegistry.has(model)) {\n      return;\n    }\n\n    this._localToDispose.add(this._editor.onDidChangeModelContent(function (e) {\n      if (!_this._timeoutTimer) {\n        _this._timeoutTimer = new TimeoutTimer();\n\n        _this._timeoutTimer.cancelAndSet(function () {\n          _this._timeoutTimer = null;\n\n          _this.beginCompute();\n        }, ColorDetector.RECOMPUTE_TIME);\n      }\n    }));\n\n    this.beginCompute();\n  };\n\n  ColorDetector.prototype.beginCompute = function () {\n    var _this = this;\n\n    this._computePromise = createCancelablePromise(function (token) {\n      var model = _this._editor.getModel();\n\n      if (!model) {\n        return Promise.resolve([]);\n      }\n\n      return getColors(model, token);\n    });\n\n    this._computePromise.then(function (colorInfos) {\n      _this.updateDecorations(colorInfos);\n\n      _this.updateColorDecorators(colorInfos);\n\n      _this._computePromise = null;\n    }, onUnexpectedError);\n  };\n\n  ColorDetector.prototype.stop = function () {\n    if (this._timeoutTimer) {\n      this._timeoutTimer.cancel();\n\n      this._timeoutTimer = null;\n    }\n\n    if (this._computePromise) {\n      this._computePromise.cancel();\n\n      this._computePromise = null;\n    }\n\n    this._localToDispose.clear();\n  };\n\n  ColorDetector.prototype.updateDecorations = function (colorDatas) {\n    var _this = this;\n\n    var decorations = colorDatas.map(function (c) {\n      return {\n        range: {\n          startLineNumber: c.colorInfo.range.startLineNumber,\n          startColumn: c.colorInfo.range.startColumn,\n          endLineNumber: c.colorInfo.range.endLineNumber,\n          endColumn: c.colorInfo.range.endColumn\n        },\n        options: ModelDecorationOptions.EMPTY\n      };\n    });\n    this._decorationsIds = this._editor.deltaDecorations(this._decorationsIds, decorations);\n    this._colorDatas = new Map();\n\n    this._decorationsIds.forEach(function (id, i) {\n      return _this._colorDatas.set(id, colorDatas[i]);\n    });\n  };\n\n  ColorDetector.prototype.updateColorDecorators = function (colorData) {\n    var _this = this;\n\n    var decorations = [];\n    var newDecorationsTypes = {};\n\n    for (var i = 0; i < colorData.length && decorations.length < MAX_DECORATORS; i++) {\n      var _a = colorData[i].colorInfo.color,\n          red = _a.red,\n          green = _a.green,\n          blue = _a.blue,\n          alpha = _a.alpha;\n      var rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n      var subKey = hash(rgba).toString(16);\n      var color = \"rgba(\" + rgba.r + \", \" + rgba.g + \", \" + rgba.b + \", \" + rgba.a + \")\";\n      var key = 'colorBox-' + subKey;\n\n      if (!this._decorationsTypes.has(key) && !newDecorationsTypes[key]) {\n        this._codeEditorService.registerDecorationType(key, {\n          before: {\n            contentText: ' ',\n            border: 'solid 0.1em #000',\n            margin: '0.1em 0.2em 0 0.2em',\n            width: '0.8em',\n            height: '0.8em',\n            backgroundColor: color\n          },\n          dark: {\n            before: {\n              border: 'solid 0.1em #eee'\n            }\n          }\n        }, undefined, this._editor);\n      }\n\n      newDecorationsTypes[key] = true;\n      decorations.push({\n        range: {\n          startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n          startColumn: colorData[i].colorInfo.range.startColumn,\n          endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n          endColumn: colorData[i].colorInfo.range.endColumn\n        },\n        options: this._codeEditorService.resolveDecorationOptions(key, true)\n      });\n    }\n\n    this._decorationsTypes.forEach(function (subType) {\n      if (!newDecorationsTypes[subType]) {\n        _this._codeEditorService.removeDecorationType(subType);\n      }\n    });\n\n    this._colorDecoratorIds = this._editor.deltaDecorations(this._colorDecoratorIds, decorations);\n  };\n\n  ColorDetector.prototype.removeAllDecorations = function () {\n    var _this = this;\n\n    this._decorationsIds = this._editor.deltaDecorations(this._decorationsIds, []);\n    this._colorDecoratorIds = this._editor.deltaDecorations(this._colorDecoratorIds, []);\n\n    this._decorationsTypes.forEach(function (subType) {\n      _this._codeEditorService.removeDecorationType(subType);\n    });\n  };\n\n  ColorDetector.prototype.getColorData = function (position) {\n    var _this = this;\n\n    var model = this._editor.getModel();\n\n    if (!model) {\n      return null;\n    }\n\n    var decorations = model.getDecorationsInRange(Range.fromPositions(position, position)).filter(function (d) {\n      return _this._colorDatas.has(d.id);\n    });\n\n    if (decorations.length === 0) {\n      return null;\n    }\n\n    return this._colorDatas.get(decorations[0].id);\n  };\n\n  ColorDetector.ID = 'editor.contrib.colorDetector';\n  ColorDetector.RECOMPUTE_TIME = 1000; // ms\n\n  ColorDetector = __decorate([__param(1, ICodeEditorService), __param(2, IConfigurationService)], ColorDetector);\n  return ColorDetector;\n}(Disposable);\n\nexport { ColorDetector };\nregisterEditorContribution(ColorDetector.ID, ColorDetector);","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","TimeoutTimer","createCancelablePromise","RGBA","onUnexpectedError","hash","Disposable","DisposableStore","registerEditorContribution","ICodeEditorService","Range","ModelDecorationOptions","ColorProviderRegistry","getColors","IConfigurationService","MAX_DECORATORS","ColorDetector","_super","_editor","_codeEditorService","_configurationService","_this","call","_localToDispose","_register","_decorationsIds","_colorDatas","Map","_colorDecoratorIds","_decorationsTypes","Set","onDidChangeModel","e","_isEnabled","isEnabled","onModelChanged","onDidChangeModelLanguage","onDidChange","onDidChangeConfiguration","prevIsEnabled","removeAllDecorations","_timeoutTimer","_computePromise","model","getModel","languageId","getLanguageIdentifier","deprecatedConfig","getValue","language","colorDecorators","undefined","getOption","get","editor","getContribution","ID","dispose","stop","has","add","onDidChangeModelContent","cancelAndSet","beginCompute","RECOMPUTE_TIME","token","Promise","resolve","then","colorInfos","updateDecorations","updateColorDecorators","cancel","clear","colorDatas","decorations","map","range","startLineNumber","colorInfo","startColumn","endLineNumber","endColumn","options","EMPTY","deltaDecorations","forEach","id","set","colorData","newDecorationsTypes","_a","color","red","green","blue","alpha","rgba","Math","round","subKey","toString","g","a","registerDecorationType","before","contentText","border","margin","width","height","backgroundColor","dark","push","resolveDecorationOptions","subType","removeDecorationType","getColorData","position","getDecorationsInRange","fromPositions","filter"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { TimeoutTimer, createCancelablePromise } from '../../../base/common/async.js';\r\nimport { RGBA } from '../../../base/common/color.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { hash } from '../../../base/common/hash.js';\r\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { ColorProviderRegistry } from '../../common/modes.js';\r\nimport { getColors } from './color.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nvar MAX_DECORATORS = 500;\r\nvar ColorDetector = /** @class */ (function (_super) {\r\n    __extends(ColorDetector, _super);\r\n    function ColorDetector(_editor, _codeEditorService, _configurationService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = _editor;\r\n        _this._codeEditorService = _codeEditorService;\r\n        _this._configurationService = _configurationService;\r\n        _this._localToDispose = _this._register(new DisposableStore());\r\n        _this._decorationsIds = [];\r\n        _this._colorDatas = new Map();\r\n        _this._colorDecoratorIds = [];\r\n        _this._decorationsTypes = new Set();\r\n        _this._register(_editor.onDidChangeModel(function (e) {\r\n            _this._isEnabled = _this.isEnabled();\r\n            _this.onModelChanged();\r\n        }));\r\n        _this._register(_editor.onDidChangeModelLanguage(function (e) { return _this.onModelChanged(); }));\r\n        _this._register(ColorProviderRegistry.onDidChange(function (e) { return _this.onModelChanged(); }));\r\n        _this._register(_editor.onDidChangeConfiguration(function (e) {\r\n            var prevIsEnabled = _this._isEnabled;\r\n            _this._isEnabled = _this.isEnabled();\r\n            if (prevIsEnabled !== _this._isEnabled) {\r\n                if (_this._isEnabled) {\r\n                    _this.onModelChanged();\r\n                }\r\n                else {\r\n                    _this.removeAllDecorations();\r\n                }\r\n            }\r\n        }));\r\n        _this._timeoutTimer = null;\r\n        _this._computePromise = null;\r\n        _this._isEnabled = _this.isEnabled();\r\n        _this.onModelChanged();\r\n        return _this;\r\n    }\r\n    ColorDetector.prototype.isEnabled = function () {\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            return false;\r\n        }\r\n        var languageId = model.getLanguageIdentifier();\r\n        // handle deprecated settings. [languageId].colorDecorators.enable\r\n        var deprecatedConfig = this._configurationService.getValue(languageId.language);\r\n        if (deprecatedConfig) {\r\n            var colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\r\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\r\n                return colorDecorators['enable'];\r\n            }\r\n        }\r\n        return this._editor.getOption(12 /* colorDecorators */);\r\n    };\r\n    ColorDetector.get = function (editor) {\r\n        return editor.getContribution(this.ID);\r\n    };\r\n    ColorDetector.prototype.dispose = function () {\r\n        this.stop();\r\n        this.removeAllDecorations();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ColorDetector.prototype.onModelChanged = function () {\r\n        var _this = this;\r\n        this.stop();\r\n        if (!this._isEnabled) {\r\n            return;\r\n        }\r\n        var model = this._editor.getModel();\r\n        if (!model || !ColorProviderRegistry.has(model)) {\r\n            return;\r\n        }\r\n        this._localToDispose.add(this._editor.onDidChangeModelContent(function (e) {\r\n            if (!_this._timeoutTimer) {\r\n                _this._timeoutTimer = new TimeoutTimer();\r\n                _this._timeoutTimer.cancelAndSet(function () {\r\n                    _this._timeoutTimer = null;\r\n                    _this.beginCompute();\r\n                }, ColorDetector.RECOMPUTE_TIME);\r\n            }\r\n        }));\r\n        this.beginCompute();\r\n    };\r\n    ColorDetector.prototype.beginCompute = function () {\r\n        var _this = this;\r\n        this._computePromise = createCancelablePromise(function (token) {\r\n            var model = _this._editor.getModel();\r\n            if (!model) {\r\n                return Promise.resolve([]);\r\n            }\r\n            return getColors(model, token);\r\n        });\r\n        this._computePromise.then(function (colorInfos) {\r\n            _this.updateDecorations(colorInfos);\r\n            _this.updateColorDecorators(colorInfos);\r\n            _this._computePromise = null;\r\n        }, onUnexpectedError);\r\n    };\r\n    ColorDetector.prototype.stop = function () {\r\n        if (this._timeoutTimer) {\r\n            this._timeoutTimer.cancel();\r\n            this._timeoutTimer = null;\r\n        }\r\n        if (this._computePromise) {\r\n            this._computePromise.cancel();\r\n            this._computePromise = null;\r\n        }\r\n        this._localToDispose.clear();\r\n    };\r\n    ColorDetector.prototype.updateDecorations = function (colorDatas) {\r\n        var _this = this;\r\n        var decorations = colorDatas.map(function (c) { return ({\r\n            range: {\r\n                startLineNumber: c.colorInfo.range.startLineNumber,\r\n                startColumn: c.colorInfo.range.startColumn,\r\n                endLineNumber: c.colorInfo.range.endLineNumber,\r\n                endColumn: c.colorInfo.range.endColumn\r\n            },\r\n            options: ModelDecorationOptions.EMPTY\r\n        }); });\r\n        this._decorationsIds = this._editor.deltaDecorations(this._decorationsIds, decorations);\r\n        this._colorDatas = new Map();\r\n        this._decorationsIds.forEach(function (id, i) { return _this._colorDatas.set(id, colorDatas[i]); });\r\n    };\r\n    ColorDetector.prototype.updateColorDecorators = function (colorData) {\r\n        var _this = this;\r\n        var decorations = [];\r\n        var newDecorationsTypes = {};\r\n        for (var i = 0; i < colorData.length && decorations.length < MAX_DECORATORS; i++) {\r\n            var _a = colorData[i].colorInfo.color, red = _a.red, green = _a.green, blue = _a.blue, alpha = _a.alpha;\r\n            var rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\r\n            var subKey = hash(rgba).toString(16);\r\n            var color = \"rgba(\" + rgba.r + \", \" + rgba.g + \", \" + rgba.b + \", \" + rgba.a + \")\";\r\n            var key = 'colorBox-' + subKey;\r\n            if (!this._decorationsTypes.has(key) && !newDecorationsTypes[key]) {\r\n                this._codeEditorService.registerDecorationType(key, {\r\n                    before: {\r\n                        contentText: ' ',\r\n                        border: 'solid 0.1em #000',\r\n                        margin: '0.1em 0.2em 0 0.2em',\r\n                        width: '0.8em',\r\n                        height: '0.8em',\r\n                        backgroundColor: color\r\n                    },\r\n                    dark: {\r\n                        before: {\r\n                            border: 'solid 0.1em #eee'\r\n                        }\r\n                    }\r\n                }, undefined, this._editor);\r\n            }\r\n            newDecorationsTypes[key] = true;\r\n            decorations.push({\r\n                range: {\r\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\r\n                    startColumn: colorData[i].colorInfo.range.startColumn,\r\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\r\n                    endColumn: colorData[i].colorInfo.range.endColumn\r\n                },\r\n                options: this._codeEditorService.resolveDecorationOptions(key, true)\r\n            });\r\n        }\r\n        this._decorationsTypes.forEach(function (subType) {\r\n            if (!newDecorationsTypes[subType]) {\r\n                _this._codeEditorService.removeDecorationType(subType);\r\n            }\r\n        });\r\n        this._colorDecoratorIds = this._editor.deltaDecorations(this._colorDecoratorIds, decorations);\r\n    };\r\n    ColorDetector.prototype.removeAllDecorations = function () {\r\n        var _this = this;\r\n        this._decorationsIds = this._editor.deltaDecorations(this._decorationsIds, []);\r\n        this._colorDecoratorIds = this._editor.deltaDecorations(this._colorDecoratorIds, []);\r\n        this._decorationsTypes.forEach(function (subType) {\r\n            _this._codeEditorService.removeDecorationType(subType);\r\n        });\r\n    };\r\n    ColorDetector.prototype.getColorData = function (position) {\r\n        var _this = this;\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            return null;\r\n        }\r\n        var decorations = model\r\n            .getDecorationsInRange(Range.fromPositions(position, position))\r\n            .filter(function (d) { return _this._colorDatas.has(d.id); });\r\n        if (decorations.length === 0) {\r\n            return null;\r\n        }\r\n        return this._colorDatas.get(decorations[0].id);\r\n    };\r\n    ColorDetector.ID = 'editor.contrib.colorDetector';\r\n    ColorDetector.RECOMPUTE_TIME = 1000; // ms\r\n    ColorDetector = __decorate([\r\n        __param(1, ICodeEditorService),\r\n        __param(2, IConfigurationService)\r\n    ], ColorDetector);\r\n    return ColorDetector;\r\n}(Disposable));\r\nexport { ColorDetector };\r\nregisterEditorContribution(ColorDetector.ID, ColorDetector);\r\n"]},"metadata":{},"sourceType":"module"}