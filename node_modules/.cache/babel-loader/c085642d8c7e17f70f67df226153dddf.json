{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { $ } from '../../../base/browser/dom.js';\nimport { isEmptyMarkdownString } from '../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { HoverOperation } from './hoverOperation.js';\nimport { GlyphHoverWidget } from './hoverWidgets.js';\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\nimport { NullOpenerService } from '../../../platform/opener/common/opener.js';\nimport { asArray } from '../../../base/common/arrays.js';\n\nvar MarginComputer =\n/** @class */\nfunction () {\n  function MarginComputer(editor) {\n    this._editor = editor;\n    this._lineNumber = -1;\n    this._result = [];\n  }\n\n  MarginComputer.prototype.setLineNumber = function (lineNumber) {\n    this._lineNumber = lineNumber;\n    this._result = [];\n  };\n\n  MarginComputer.prototype.clearResult = function () {\n    this._result = [];\n  };\n\n  MarginComputer.prototype.computeSync = function () {\n    var toHoverMessage = function (contents) {\n      return {\n        value: contents\n      };\n    };\n\n    var lineDecorations = this._editor.getLineDecorations(this._lineNumber);\n\n    var result = [];\n\n    if (!lineDecorations) {\n      return result;\n    }\n\n    for (var _i = 0, lineDecorations_1 = lineDecorations; _i < lineDecorations_1.length; _i++) {\n      var d = lineDecorations_1[_i];\n\n      if (!d.options.glyphMarginClassName) {\n        continue;\n      }\n\n      var hoverMessage = d.options.glyphMarginHoverMessage;\n\n      if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\n        continue;\n      }\n\n      result.push.apply(result, asArray(hoverMessage).map(toHoverMessage));\n    }\n\n    return result;\n  };\n\n  MarginComputer.prototype.onResult = function (result, isFromSynchronousComputation) {\n    this._result = this._result.concat(result);\n  };\n\n  MarginComputer.prototype.getResult = function () {\n    return this._result;\n  };\n\n  MarginComputer.prototype.getResultWithLoadingMessage = function () {\n    return this.getResult();\n  };\n\n  return MarginComputer;\n}();\n\nvar ModesGlyphHoverWidget =\n/** @class */\nfunction (_super) {\n  __extends(ModesGlyphHoverWidget, _super);\n\n  function ModesGlyphHoverWidget(editor, modeService, openerService) {\n    if (openerService === void 0) {\n      openerService = NullOpenerService;\n    }\n\n    var _this = _super.call(this, ModesGlyphHoverWidget.ID, editor) || this;\n\n    _this._renderDisposeables = _this._register(new DisposableStore());\n    _this._messages = [];\n    _this._lastLineNumber = -1;\n    _this._markdownRenderer = _this._register(new MarkdownRenderer(_this._editor, modeService, openerService));\n    _this._computer = new MarginComputer(_this._editor);\n    _this._hoverOperation = new HoverOperation(_this._computer, function (result) {\n      return _this._withResult(result);\n    }, undefined, function (result) {\n      return _this._withResult(result);\n    }, 300);\n    return _this;\n  }\n\n  ModesGlyphHoverWidget.prototype.dispose = function () {\n    this._hoverOperation.cancel();\n\n    _super.prototype.dispose.call(this);\n  };\n\n  ModesGlyphHoverWidget.prototype.onModelDecorationsChanged = function () {\n    if (this.isVisible) {\n      // The decorations have changed and the hover is visible,\n      // we need to recompute the displayed text\n      this._hoverOperation.cancel();\n\n      this._computer.clearResult();\n\n      this._hoverOperation.start(0\n      /* Delayed */\n      );\n    }\n  };\n\n  ModesGlyphHoverWidget.prototype.startShowingAt = function (lineNumber) {\n    if (this._lastLineNumber === lineNumber) {\n      // We have to show the widget at the exact same line number as before, so no work is needed\n      return;\n    }\n\n    this._hoverOperation.cancel();\n\n    this.hide();\n    this._lastLineNumber = lineNumber;\n\n    this._computer.setLineNumber(lineNumber);\n\n    this._hoverOperation.start(0\n    /* Delayed */\n    );\n  };\n\n  ModesGlyphHoverWidget.prototype.hide = function () {\n    this._lastLineNumber = -1;\n\n    this._hoverOperation.cancel();\n\n    _super.prototype.hide.call(this);\n  };\n\n  ModesGlyphHoverWidget.prototype._withResult = function (result) {\n    this._messages = result;\n\n    if (this._messages.length > 0) {\n      this._renderMessages(this._lastLineNumber, this._messages);\n    } else {\n      this.hide();\n    }\n  };\n\n  ModesGlyphHoverWidget.prototype._renderMessages = function (lineNumber, messages) {\n    this._renderDisposeables.clear();\n\n    var fragment = document.createDocumentFragment();\n\n    for (var _i = 0, messages_1 = messages; _i < messages_1.length; _i++) {\n      var msg = messages_1[_i];\n\n      var renderedContents = this._markdownRenderer.render(msg.value);\n\n      this._renderDisposeables.add(renderedContents);\n\n      fragment.appendChild($('div.hover-row', undefined, renderedContents.element));\n    }\n\n    this.updateContents(fragment);\n    this.showAt(lineNumber);\n  };\n\n  ModesGlyphHoverWidget.ID = 'editor.contrib.modesGlyphHoverWidget';\n  return ModesGlyphHoverWidget;\n}(GlyphHoverWidget);\n\nexport { ModesGlyphHoverWidget };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/hover/modesGlyphHover.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","$","isEmptyMarkdownString","DisposableStore","HoverOperation","GlyphHoverWidget","MarkdownRenderer","NullOpenerService","asArray","MarginComputer","editor","_editor","_lineNumber","_result","setLineNumber","lineNumber","clearResult","computeSync","toHoverMessage","contents","value","lineDecorations","getLineDecorations","result","_i","lineDecorations_1","length","options","glyphMarginClassName","hoverMessage","glyphMarginHoverMessage","push","apply","map","onResult","isFromSynchronousComputation","concat","getResult","getResultWithLoadingMessage","ModesGlyphHoverWidget","_super","modeService","openerService","_this","call","ID","_renderDisposeables","_register","_messages","_lastLineNumber","_markdownRenderer","_computer","_hoverOperation","_withResult","undefined","dispose","cancel","onModelDecorationsChanged","isVisible","start","startShowingAt","hide","_renderMessages","messages","clear","fragment","document","createDocumentFragment","messages_1","msg","renderedContents","render","add","appendChild","element","updateContents","showAt"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { $ } from '../../../base/browser/dom.js';\r\nimport { isEmptyMarkdownString } from '../../../base/common/htmlContent.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { HoverOperation } from './hoverOperation.js';\r\nimport { GlyphHoverWidget } from './hoverWidgets.js';\r\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\r\nimport { NullOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { asArray } from '../../../base/common/arrays.js';\r\nvar MarginComputer = /** @class */ (function () {\r\n    function MarginComputer(editor) {\r\n        this._editor = editor;\r\n        this._lineNumber = -1;\r\n        this._result = [];\r\n    }\r\n    MarginComputer.prototype.setLineNumber = function (lineNumber) {\r\n        this._lineNumber = lineNumber;\r\n        this._result = [];\r\n    };\r\n    MarginComputer.prototype.clearResult = function () {\r\n        this._result = [];\r\n    };\r\n    MarginComputer.prototype.computeSync = function () {\r\n        var toHoverMessage = function (contents) {\r\n            return {\r\n                value: contents\r\n            };\r\n        };\r\n        var lineDecorations = this._editor.getLineDecorations(this._lineNumber);\r\n        var result = [];\r\n        if (!lineDecorations) {\r\n            return result;\r\n        }\r\n        for (var _i = 0, lineDecorations_1 = lineDecorations; _i < lineDecorations_1.length; _i++) {\r\n            var d = lineDecorations_1[_i];\r\n            if (!d.options.glyphMarginClassName) {\r\n                continue;\r\n            }\r\n            var hoverMessage = d.options.glyphMarginHoverMessage;\r\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\r\n                continue;\r\n            }\r\n            result.push.apply(result, asArray(hoverMessage).map(toHoverMessage));\r\n        }\r\n        return result;\r\n    };\r\n    MarginComputer.prototype.onResult = function (result, isFromSynchronousComputation) {\r\n        this._result = this._result.concat(result);\r\n    };\r\n    MarginComputer.prototype.getResult = function () {\r\n        return this._result;\r\n    };\r\n    MarginComputer.prototype.getResultWithLoadingMessage = function () {\r\n        return this.getResult();\r\n    };\r\n    return MarginComputer;\r\n}());\r\nvar ModesGlyphHoverWidget = /** @class */ (function (_super) {\r\n    __extends(ModesGlyphHoverWidget, _super);\r\n    function ModesGlyphHoverWidget(editor, modeService, openerService) {\r\n        if (openerService === void 0) { openerService = NullOpenerService; }\r\n        var _this = _super.call(this, ModesGlyphHoverWidget.ID, editor) || this;\r\n        _this._renderDisposeables = _this._register(new DisposableStore());\r\n        _this._messages = [];\r\n        _this._lastLineNumber = -1;\r\n        _this._markdownRenderer = _this._register(new MarkdownRenderer(_this._editor, modeService, openerService));\r\n        _this._computer = new MarginComputer(_this._editor);\r\n        _this._hoverOperation = new HoverOperation(_this._computer, function (result) { return _this._withResult(result); }, undefined, function (result) { return _this._withResult(result); }, 300);\r\n        return _this;\r\n    }\r\n    ModesGlyphHoverWidget.prototype.dispose = function () {\r\n        this._hoverOperation.cancel();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ModesGlyphHoverWidget.prototype.onModelDecorationsChanged = function () {\r\n        if (this.isVisible) {\r\n            // The decorations have changed and the hover is visible,\r\n            // we need to recompute the displayed text\r\n            this._hoverOperation.cancel();\r\n            this._computer.clearResult();\r\n            this._hoverOperation.start(0 /* Delayed */);\r\n        }\r\n    };\r\n    ModesGlyphHoverWidget.prototype.startShowingAt = function (lineNumber) {\r\n        if (this._lastLineNumber === lineNumber) {\r\n            // We have to show the widget at the exact same line number as before, so no work is needed\r\n            return;\r\n        }\r\n        this._hoverOperation.cancel();\r\n        this.hide();\r\n        this._lastLineNumber = lineNumber;\r\n        this._computer.setLineNumber(lineNumber);\r\n        this._hoverOperation.start(0 /* Delayed */);\r\n    };\r\n    ModesGlyphHoverWidget.prototype.hide = function () {\r\n        this._lastLineNumber = -1;\r\n        this._hoverOperation.cancel();\r\n        _super.prototype.hide.call(this);\r\n    };\r\n    ModesGlyphHoverWidget.prototype._withResult = function (result) {\r\n        this._messages = result;\r\n        if (this._messages.length > 0) {\r\n            this._renderMessages(this._lastLineNumber, this._messages);\r\n        }\r\n        else {\r\n            this.hide();\r\n        }\r\n    };\r\n    ModesGlyphHoverWidget.prototype._renderMessages = function (lineNumber, messages) {\r\n        this._renderDisposeables.clear();\r\n        var fragment = document.createDocumentFragment();\r\n        for (var _i = 0, messages_1 = messages; _i < messages_1.length; _i++) {\r\n            var msg = messages_1[_i];\r\n            var renderedContents = this._markdownRenderer.render(msg.value);\r\n            this._renderDisposeables.add(renderedContents);\r\n            fragment.appendChild($('div.hover-row', undefined, renderedContents.element));\r\n        }\r\n        this.updateContents(fragment);\r\n        this.showAt(lineNumber);\r\n    };\r\n    ModesGlyphHoverWidget.ID = 'editor.contrib.modesGlyphHoverWidget';\r\n    return ModesGlyphHoverWidget;\r\n}(GlyphHoverWidget));\r\nexport { ModesGlyphHoverWidget };\r\n"]},"metadata":{},"sourceType":"module"}