{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { renderMarkdown } from '../../../base/browser/markdownRenderer.js';\nimport { IOpenerService, NullOpenerService } from '../../../platform/opener/common/opener.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { tokenizeToString } from '../../common/modes/textToHtmlTokenizer.js';\nimport { optional } from '../../../platform/instantiation/common/instantiation.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { DisposableStore, Disposable } from '../../../base/common/lifecycle.js';\nimport { TokenizationRegistry } from '../../common/modes.js';\n\nvar MarkdownRenderer =\n/** @class */\nfunction (_super) {\n  __extends(MarkdownRenderer, _super);\n\n  function MarkdownRenderer(_editor, _modeService, _openerService) {\n    if (_openerService === void 0) {\n      _openerService = NullOpenerService;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this._editor = _editor;\n    _this._modeService = _modeService;\n    _this._openerService = _openerService;\n    _this._onDidRenderCodeBlock = _this._register(new Emitter());\n    _this.onDidRenderCodeBlock = _this._onDidRenderCodeBlock.event;\n    return _this;\n  }\n\n  MarkdownRenderer.prototype.getOptions = function (disposeables) {\n    var _this = this;\n\n    return {\n      codeBlockRenderer: function (languageAlias, value) {\n        // In markdown,\n        // it is possible that we stumble upon language aliases (e.g.js instead of javascript)\n        // it is possible no alias is given in which case we fall back to the current editor lang\n        var modeId = null;\n\n        if (languageAlias) {\n          modeId = _this._modeService.getModeIdForLanguageName(languageAlias);\n        } else {\n          var model = _this._editor.getModel();\n\n          if (model) {\n            modeId = model.getLanguageIdentifier().language;\n          }\n        }\n\n        _this._modeService.triggerMode(modeId || '');\n\n        return Promise.resolve(true).then(function (_) {\n          var promise = TokenizationRegistry.getPromise(modeId || '');\n\n          if (promise) {\n            return promise.then(function (support) {\n              return tokenizeToString(value, support);\n            });\n          }\n\n          return tokenizeToString(value, undefined);\n        }).then(function (code) {\n          return \"<span style=\\\"font-family: \" + _this._editor.getOption(34\n          /* fontInfo */\n          ).fontFamily + \"\\\">\" + code + \"</span>\";\n        });\n      },\n      codeBlockRenderCallback: function () {\n        return _this._onDidRenderCodeBlock.fire();\n      },\n      actionHandler: {\n        callback: function (content) {\n          _this._openerService.open(content, {\n            fromUserGesture: true\n          }).catch(onUnexpectedError);\n        },\n        disposeables: disposeables\n      }\n    };\n  };\n\n  MarkdownRenderer.prototype.render = function (markdown) {\n    var disposeables = new DisposableStore();\n    var element;\n\n    if (!markdown) {\n      element = document.createElement('span');\n    } else {\n      element = renderMarkdown(markdown, this.getOptions(disposeables));\n    }\n\n    return {\n      element: element,\n      dispose: function () {\n        return disposeables.dispose();\n      }\n    };\n  };\n\n  MarkdownRenderer = __decorate([__param(1, IModeService), __param(2, optional(IOpenerService))], MarkdownRenderer);\n  return MarkdownRenderer;\n}(Disposable);\n\nexport { MarkdownRenderer };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/markdown/markdownRenderer.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","renderMarkdown","IOpenerService","NullOpenerService","IModeService","onUnexpectedError","tokenizeToString","optional","Emitter","DisposableStore","Disposable","TokenizationRegistry","MarkdownRenderer","_super","_editor","_modeService","_openerService","_this","call","_onDidRenderCodeBlock","_register","onDidRenderCodeBlock","event","getOptions","disposeables","codeBlockRenderer","languageAlias","value","modeId","getModeIdForLanguageName","model","getModel","getLanguageIdentifier","language","triggerMode","Promise","resolve","then","_","promise","getPromise","support","undefined","code","getOption","fontFamily","codeBlockRenderCallback","fire","actionHandler","callback","content","open","fromUserGesture","catch","render","markdown","element","document","createElement","dispose"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { renderMarkdown } from '../../../base/browser/markdownRenderer.js';\r\nimport { IOpenerService, NullOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { IModeService } from '../../common/services/modeService.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { tokenizeToString } from '../../common/modes/textToHtmlTokenizer.js';\r\nimport { optional } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { DisposableStore, Disposable } from '../../../base/common/lifecycle.js';\r\nimport { TokenizationRegistry } from '../../common/modes.js';\r\nvar MarkdownRenderer = /** @class */ (function (_super) {\r\n    __extends(MarkdownRenderer, _super);\r\n    function MarkdownRenderer(_editor, _modeService, _openerService) {\r\n        if (_openerService === void 0) { _openerService = NullOpenerService; }\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = _editor;\r\n        _this._modeService = _modeService;\r\n        _this._openerService = _openerService;\r\n        _this._onDidRenderCodeBlock = _this._register(new Emitter());\r\n        _this.onDidRenderCodeBlock = _this._onDidRenderCodeBlock.event;\r\n        return _this;\r\n    }\r\n    MarkdownRenderer.prototype.getOptions = function (disposeables) {\r\n        var _this = this;\r\n        return {\r\n            codeBlockRenderer: function (languageAlias, value) {\r\n                // In markdown,\r\n                // it is possible that we stumble upon language aliases (e.g.js instead of javascript)\r\n                // it is possible no alias is given in which case we fall back to the current editor lang\r\n                var modeId = null;\r\n                if (languageAlias) {\r\n                    modeId = _this._modeService.getModeIdForLanguageName(languageAlias);\r\n                }\r\n                else {\r\n                    var model = _this._editor.getModel();\r\n                    if (model) {\r\n                        modeId = model.getLanguageIdentifier().language;\r\n                    }\r\n                }\r\n                _this._modeService.triggerMode(modeId || '');\r\n                return Promise.resolve(true).then(function (_) {\r\n                    var promise = TokenizationRegistry.getPromise(modeId || '');\r\n                    if (promise) {\r\n                        return promise.then(function (support) { return tokenizeToString(value, support); });\r\n                    }\r\n                    return tokenizeToString(value, undefined);\r\n                }).then(function (code) {\r\n                    return \"<span style=\\\"font-family: \" + _this._editor.getOption(34 /* fontInfo */).fontFamily + \"\\\">\" + code + \"</span>\";\r\n                });\r\n            },\r\n            codeBlockRenderCallback: function () { return _this._onDidRenderCodeBlock.fire(); },\r\n            actionHandler: {\r\n                callback: function (content) {\r\n                    _this._openerService.open(content, { fromUserGesture: true }).catch(onUnexpectedError);\r\n                },\r\n                disposeables: disposeables\r\n            }\r\n        };\r\n    };\r\n    MarkdownRenderer.prototype.render = function (markdown) {\r\n        var disposeables = new DisposableStore();\r\n        var element;\r\n        if (!markdown) {\r\n            element = document.createElement('span');\r\n        }\r\n        else {\r\n            element = renderMarkdown(markdown, this.getOptions(disposeables));\r\n        }\r\n        return {\r\n            element: element,\r\n            dispose: function () { return disposeables.dispose(); }\r\n        };\r\n    };\r\n    MarkdownRenderer = __decorate([\r\n        __param(1, IModeService),\r\n        __param(2, optional(IOpenerService))\r\n    ], MarkdownRenderer);\r\n    return MarkdownRenderer;\r\n}(Disposable));\r\nexport { MarkdownRenderer };\r\n"]},"metadata":{},"sourceType":"module"}