{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport './splitview.css';\nimport { toDisposable, Disposable, combinedDisposable } from '../../../common/lifecycle.js';\nimport { Event, Emitter } from '../../../common/event.js';\nimport * as types from '../../../common/types.js';\nimport * as dom from '../../dom.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { range, firstIndex, pushToStart, pushToEnd } from '../../../common/arrays.js';\nimport { Sash } from '../sash/sash.js';\nimport { Color } from '../../../common/color.js';\nimport { domEvent } from '../../event.js';\nvar defaultStyles = {\n  separatorBorder: Color.transparent\n};\n\nvar ViewItem =\n/** @class */\nfunction () {\n  function ViewItem(container, view, size, disposable) {\n    this.container = container;\n    this.view = view;\n    this.disposable = disposable;\n    this._cachedVisibleSize = undefined;\n\n    if (typeof size === 'number') {\n      this._size = size;\n      this._cachedVisibleSize = undefined;\n      dom.addClass(container, 'visible');\n    } else {\n      this._size = 0;\n      this._cachedVisibleSize = size.cachedVisibleSize;\n    }\n  }\n\n  Object.defineProperty(ViewItem.prototype, \"size\", {\n    get: function () {\n      return this._size;\n    },\n    set: function (size) {\n      this._size = size;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"visible\", {\n    get: function () {\n      return typeof this._cachedVisibleSize === 'undefined';\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ViewItem.prototype.setVisible = function (visible, size) {\n    if (visible === this.visible) {\n      return;\n    }\n\n    if (visible) {\n      this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n      this._cachedVisibleSize = undefined;\n    } else {\n      this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n      this.size = 0;\n    }\n\n    dom.toggleClass(this.container, 'visible', visible);\n\n    if (this.view.setVisible) {\n      this.view.setVisible(visible);\n    }\n  };\n\n  Object.defineProperty(ViewItem.prototype, \"minimumSize\", {\n    get: function () {\n      return this.visible ? this.view.minimumSize : 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"viewMinimumSize\", {\n    get: function () {\n      return this.view.minimumSize;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"maximumSize\", {\n    get: function () {\n      return this.visible ? this.view.maximumSize : 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"viewMaximumSize\", {\n    get: function () {\n      return this.view.maximumSize;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"priority\", {\n    get: function () {\n      return this.view.priority;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"snap\", {\n    get: function () {\n      return !!this.view.snap;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(ViewItem.prototype, \"enabled\", {\n    set: function (enabled) {\n      this.container.style.pointerEvents = enabled ? null : 'none';\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ViewItem.prototype.layout = function (offset, layoutContext) {\n    this.layoutContainer(offset);\n    this.view.layout(this.size, offset, layoutContext);\n  };\n\n  ViewItem.prototype.dispose = function () {\n    this.disposable.dispose();\n    return this.view;\n  };\n\n  return ViewItem;\n}();\n\nvar VerticalViewItem =\n/** @class */\nfunction (_super) {\n  __extends(VerticalViewItem, _super);\n\n  function VerticalViewItem() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  VerticalViewItem.prototype.layoutContainer = function (offset) {\n    this.container.style.top = offset + \"px\";\n    this.container.style.height = this.size + \"px\";\n  };\n\n  return VerticalViewItem;\n}(ViewItem);\n\nvar HorizontalViewItem =\n/** @class */\nfunction (_super) {\n  __extends(HorizontalViewItem, _super);\n\n  function HorizontalViewItem() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  HorizontalViewItem.prototype.layoutContainer = function (offset) {\n    this.container.style.left = offset + \"px\";\n    this.container.style.width = this.size + \"px\";\n  };\n\n  return HorizontalViewItem;\n}(ViewItem);\n\nvar State;\n\n(function (State) {\n  State[State[\"Idle\"] = 0] = \"Idle\";\n  State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\n\nexport var Sizing;\n\n(function (Sizing) {\n  Sizing.Distribute = {\n    type: 'distribute'\n  };\n\n  function Split(index) {\n    return {\n      type: 'split',\n      index: index\n    };\n  }\n\n  Sizing.Split = Split;\n\n  function Invisible(cachedVisibleSize) {\n    return {\n      type: 'invisible',\n      cachedVisibleSize: cachedVisibleSize\n    };\n  }\n\n  Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n\nvar SplitView =\n/** @class */\nfunction (_super) {\n  __extends(SplitView, _super);\n\n  function SplitView(container, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.size = 0;\n    _this.contentSize = 0;\n    _this.proportions = undefined;\n    _this.viewItems = [];\n    _this.sashItems = [];\n    _this.state = State.Idle;\n    _this._onDidSashChange = _this._register(new Emitter());\n    _this.onDidSashChange = _this._onDidSashChange.event;\n    _this._onDidSashReset = _this._register(new Emitter());\n    _this._startSnappingEnabled = true;\n    _this._endSnappingEnabled = true;\n    _this.orientation = types.isUndefined(options.orientation) ? 0\n    /* VERTICAL */\n    : options.orientation;\n    _this.inverseAltBehavior = !!options.inverseAltBehavior;\n    _this.proportionalLayout = types.isUndefined(options.proportionalLayout) ? true : !!options.proportionalLayout;\n    _this.el = document.createElement('div');\n    dom.addClass(_this.el, 'monaco-split-view2');\n    dom.addClass(_this.el, _this.orientation === 0\n    /* VERTICAL */\n    ? 'vertical' : 'horizontal');\n    container.appendChild(_this.el);\n    _this.sashContainer = dom.append(_this.el, dom.$('.sash-container'));\n    _this.viewContainer = dom.append(_this.el, dom.$('.split-view-container'));\n\n    _this.style(options.styles || defaultStyles); // We have an existing set of view, add them now\n\n\n    if (options.descriptor) {\n      _this.size = options.descriptor.size;\n      options.descriptor.views.forEach(function (viewDescriptor, index) {\n        var sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : {\n          type: 'invisible',\n          cachedVisibleSize: viewDescriptor.size\n        };\n        var view = viewDescriptor.view;\n\n        _this.doAddView(view, sizing, index, true);\n      }); // Initialize content size and proportions for first layout\n\n      _this.contentSize = _this.viewItems.reduce(function (r, i) {\n        return r + i.size;\n      }, 0);\n\n      _this.saveProportions();\n    }\n\n    return _this;\n  }\n\n  Object.defineProperty(SplitView.prototype, \"orthogonalStartSash\", {\n    get: function () {\n      return this._orthogonalStartSash;\n    },\n    set: function (sash) {\n      for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\n        var sashItem = _a[_i];\n        sashItem.sash.orthogonalStartSash = sash;\n      }\n\n      this._orthogonalStartSash = sash;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SplitView.prototype, \"orthogonalEndSash\", {\n    get: function () {\n      return this._orthogonalEndSash;\n    },\n    set: function (sash) {\n      for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\n        var sashItem = _a[_i];\n        sashItem.sash.orthogonalEndSash = sash;\n      }\n\n      this._orthogonalEndSash = sash;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SplitView.prototype, \"startSnappingEnabled\", {\n    get: function () {\n      return this._startSnappingEnabled;\n    },\n    set: function (startSnappingEnabled) {\n      if (this._startSnappingEnabled === startSnappingEnabled) {\n        return;\n      }\n\n      this._startSnappingEnabled = startSnappingEnabled;\n      this.updateSashEnablement();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SplitView.prototype, \"endSnappingEnabled\", {\n    get: function () {\n      return this._endSnappingEnabled;\n    },\n    set: function (endSnappingEnabled) {\n      if (this._endSnappingEnabled === endSnappingEnabled) {\n        return;\n      }\n\n      this._endSnappingEnabled = endSnappingEnabled;\n      this.updateSashEnablement();\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  SplitView.prototype.style = function (styles) {\n    if (styles.separatorBorder.isTransparent()) {\n      dom.removeClass(this.el, 'separator-border');\n      this.el.style.removeProperty('--separator-border');\n    } else {\n      dom.addClass(this.el, 'separator-border');\n      this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n    }\n  };\n\n  SplitView.prototype.addView = function (view, size, index) {\n    if (index === void 0) {\n      index = this.viewItems.length;\n    }\n\n    this.doAddView(view, size, index, false);\n  };\n\n  SplitView.prototype.layout = function (size, layoutContext) {\n    var _this = this;\n\n    var previousSize = Math.max(this.size, this.contentSize);\n    this.size = size;\n    this.layoutContext = layoutContext;\n\n    if (!this.proportions) {\n      var indexes = range(this.viewItems.length);\n      var lowPriorityIndexes = indexes.filter(function (i) {\n        return _this.viewItems[i].priority === 1\n        /* Low */\n        ;\n      });\n      var highPriorityIndexes = indexes.filter(function (i) {\n        return _this.viewItems[i].priority === 2\n        /* High */\n        ;\n      });\n      this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n    } else {\n      for (var i = 0; i < this.viewItems.length; i++) {\n        var item = this.viewItems[i];\n        item.size = clamp(Math.round(this.proportions[i] * size), item.minimumSize, item.maximumSize);\n      }\n    }\n\n    this.distributeEmptySpace();\n    this.layoutViews();\n  };\n\n  SplitView.prototype.saveProportions = function () {\n    var _this = this;\n\n    if (this.proportionalLayout && this.contentSize > 0) {\n      this.proportions = this.viewItems.map(function (i) {\n        return i.size / _this.contentSize;\n      });\n    }\n  };\n\n  SplitView.prototype.onSashStart = function (_a) {\n    var _this = this;\n\n    var sash = _a.sash,\n        start = _a.start,\n        alt = _a.alt;\n\n    for (var _i = 0, _b = this.viewItems; _i < _b.length; _i++) {\n      var item = _b[_i];\n      item.enabled = false;\n    }\n\n    var index = firstIndex(this.sashItems, function (item) {\n      return item.sash === sash;\n    }); // This way, we can press Alt while we resize a sash, macOS style!\n\n    var disposable = combinedDisposable(domEvent(document.body, 'keydown')(function (e) {\n      return resetSashDragState(_this.sashDragState.current, e.altKey);\n    }), domEvent(document.body, 'keyup')(function () {\n      return resetSashDragState(_this.sashDragState.current, false);\n    }));\n\n    var resetSashDragState = function (start, alt) {\n      var sizes = _this.viewItems.map(function (i) {\n        return i.size;\n      });\n\n      var minDelta = Number.NEGATIVE_INFINITY;\n      var maxDelta = Number.POSITIVE_INFINITY;\n\n      if (_this.inverseAltBehavior) {\n        alt = !alt;\n      }\n\n      if (alt) {\n        // When we're using the last sash with Alt, we're resizing\n        // the view to the left/up, instead of right/down as usual\n        // Thus, we must do the inverse of the usual\n        var isLastSash = index === _this.sashItems.length - 1;\n\n        if (isLastSash) {\n          var viewItem = _this.viewItems[index];\n          minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n          maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n        } else {\n          var viewItem = _this.viewItems[index + 1];\n          minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n          maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n        }\n      }\n\n      var snapBefore;\n      var snapAfter;\n\n      if (!alt) {\n        var upIndexes = range(index, -1);\n        var downIndexes = range(index + 1, _this.viewItems.length);\n        var minDeltaUp = upIndexes.reduce(function (r, i) {\n          return r + (_this.viewItems[i].minimumSize - sizes[i]);\n        }, 0);\n        var maxDeltaUp = upIndexes.reduce(function (r, i) {\n          return r + (_this.viewItems[i].viewMaximumSize - sizes[i]);\n        }, 0);\n        var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) {\n          return r + (sizes[i] - _this.viewItems[i].minimumSize);\n        }, 0);\n        var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) {\n          return r + (sizes[i] - _this.viewItems[i].viewMaximumSize);\n        }, 0);\n        var minDelta_1 = Math.max(minDeltaUp, minDeltaDown);\n        var maxDelta_1 = Math.min(maxDeltaDown, maxDeltaUp);\n\n        var snapBeforeIndex = _this.findFirstSnapIndex(upIndexes);\n\n        var snapAfterIndex = _this.findFirstSnapIndex(downIndexes);\n\n        if (typeof snapBeforeIndex === 'number') {\n          var viewItem = _this.viewItems[snapBeforeIndex];\n          var halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n          snapBefore = {\n            index: snapBeforeIndex,\n            limitDelta: viewItem.visible ? minDelta_1 - halfSize : minDelta_1 + halfSize,\n            size: viewItem.size\n          };\n        }\n\n        if (typeof snapAfterIndex === 'number') {\n          var viewItem = _this.viewItems[snapAfterIndex];\n          var halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n          snapAfter = {\n            index: snapAfterIndex,\n            limitDelta: viewItem.visible ? maxDelta_1 + halfSize : maxDelta_1 - halfSize,\n            size: viewItem.size\n          };\n        }\n      }\n\n      _this.sashDragState = {\n        start: start,\n        current: start,\n        index: index,\n        sizes: sizes,\n        minDelta: minDelta,\n        maxDelta: maxDelta,\n        alt: alt,\n        snapBefore: snapBefore,\n        snapAfter: snapAfter,\n        disposable: disposable\n      };\n    };\n\n    resetSashDragState(start, alt);\n  };\n\n  SplitView.prototype.onSashChange = function (_a) {\n    var current = _a.current;\n    var _b = this.sashDragState,\n        index = _b.index,\n        start = _b.start,\n        sizes = _b.sizes,\n        alt = _b.alt,\n        minDelta = _b.minDelta,\n        maxDelta = _b.maxDelta,\n        snapBefore = _b.snapBefore,\n        snapAfter = _b.snapAfter;\n    this.sashDragState.current = current;\n    var delta = current - start;\n    var newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n\n    if (alt) {\n      var isLastSash = index === this.sashItems.length - 1;\n      var newSizes = this.viewItems.map(function (i) {\n        return i.size;\n      });\n      var viewItemIndex = isLastSash ? index : index + 1;\n      var viewItem = this.viewItems[viewItemIndex];\n      var newMinDelta = viewItem.size - viewItem.maximumSize;\n      var newMaxDelta = viewItem.size - viewItem.minimumSize;\n      var resizeIndex = isLastSash ? index - 1 : index + 1;\n      this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n    }\n\n    this.distributeEmptySpace();\n    this.layoutViews();\n  };\n\n  SplitView.prototype.onSashEnd = function (index) {\n    this._onDidSashChange.fire(index);\n\n    this.sashDragState.disposable.dispose();\n    this.saveProportions();\n\n    for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\n      var item = _a[_i];\n      item.enabled = true;\n    }\n  };\n\n  SplitView.prototype.onViewChange = function (item, size) {\n    var index = this.viewItems.indexOf(item);\n\n    if (index < 0 || index >= this.viewItems.length) {\n      return;\n    }\n\n    size = typeof size === 'number' ? size : item.size;\n    size = clamp(size, item.minimumSize, item.maximumSize);\n\n    if (this.inverseAltBehavior && index > 0) {\n      // In this case, we want the view to grow or shrink both sides equally\n      // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n      this.resize(index - 1, Math.floor((item.size - size) / 2));\n      this.distributeEmptySpace();\n      this.layoutViews();\n    } else {\n      item.size = size;\n      this.relayout([index], undefined);\n    }\n  };\n\n  SplitView.prototype.resizeView = function (index, size) {\n    var _this = this;\n\n    if (this.state !== State.Idle) {\n      throw new Error('Cant modify splitview');\n    }\n\n    this.state = State.Busy;\n\n    if (index < 0 || index >= this.viewItems.length) {\n      return;\n    }\n\n    var indexes = range(this.viewItems.length).filter(function (i) {\n      return i !== index;\n    });\n\n    var lowPriorityIndexes = __spreadArrays(indexes.filter(function (i) {\n      return _this.viewItems[i].priority === 1\n      /* Low */\n      ;\n    }), [index]);\n\n    var highPriorityIndexes = indexes.filter(function (i) {\n      return _this.viewItems[i].priority === 2\n      /* High */\n      ;\n    });\n    var item = this.viewItems[index];\n    size = Math.round(size);\n    size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n    item.size = size;\n    this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    this.state = State.Idle;\n  };\n\n  SplitView.prototype.distributeViewSizes = function () {\n    var _this = this;\n\n    var flexibleViewItems = [];\n    var flexibleSize = 0;\n\n    for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\n      var item = _a[_i];\n\n      if (item.maximumSize - item.minimumSize > 0) {\n        flexibleViewItems.push(item);\n        flexibleSize += item.size;\n      }\n    }\n\n    var size = Math.floor(flexibleSize / flexibleViewItems.length);\n\n    for (var _b = 0, flexibleViewItems_1 = flexibleViewItems; _b < flexibleViewItems_1.length; _b++) {\n      var item = flexibleViewItems_1[_b];\n      item.size = clamp(size, item.minimumSize, item.maximumSize);\n    }\n\n    var indexes = range(this.viewItems.length);\n    var lowPriorityIndexes = indexes.filter(function (i) {\n      return _this.viewItems[i].priority === 1\n      /* Low */\n      ;\n    });\n    var highPriorityIndexes = indexes.filter(function (i) {\n      return _this.viewItems[i].priority === 2\n      /* High */\n      ;\n    });\n    this.relayout(lowPriorityIndexes, highPriorityIndexes);\n  };\n\n  SplitView.prototype.getViewSize = function (index) {\n    if (index < 0 || index >= this.viewItems.length) {\n      return -1;\n    }\n\n    return this.viewItems[index].size;\n  };\n\n  SplitView.prototype.doAddView = function (view, size, index, skipLayout) {\n    var _this = this;\n\n    if (index === void 0) {\n      index = this.viewItems.length;\n    }\n\n    if (this.state !== State.Idle) {\n      throw new Error('Cant modify splitview');\n    }\n\n    this.state = State.Busy; // Add view\n\n    var container = dom.$('.split-view-view');\n\n    if (index === this.viewItems.length) {\n      this.viewContainer.appendChild(container);\n    } else {\n      this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n    }\n\n    var onChangeDisposable = view.onDidChange(function (size) {\n      return _this.onViewChange(item, size);\n    });\n    var containerDisposable = toDisposable(function () {\n      return _this.viewContainer.removeChild(container);\n    });\n    var disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n    var viewSize;\n\n    if (typeof size === 'number') {\n      viewSize = size;\n    } else if (size.type === 'split') {\n      viewSize = this.getViewSize(size.index) / 2;\n    } else if (size.type === 'invisible') {\n      viewSize = {\n        cachedVisibleSize: size.cachedVisibleSize\n      };\n    } else {\n      viewSize = view.minimumSize;\n    }\n\n    var item = this.orientation === 0\n    /* VERTICAL */\n    ? new VerticalViewItem(container, view, viewSize, disposable) : new HorizontalViewItem(container, view, viewSize, disposable);\n    this.viewItems.splice(index, 0, item); // Add sash\n\n    if (this.viewItems.length > 1) {\n      var orientation_1 = this.orientation === 0\n      /* VERTICAL */\n      ? 1\n      /* HORIZONTAL */\n      : 0\n      /* VERTICAL */\n      ;\n      var layoutProvider = this.orientation === 0\n      /* VERTICAL */\n      ? {\n        getHorizontalSashTop: function (sash) {\n          return _this.getSashPosition(sash);\n        }\n      } : {\n        getVerticalSashLeft: function (sash) {\n          return _this.getSashPosition(sash);\n        }\n      };\n      var sash_1 = new Sash(this.sashContainer, layoutProvider, {\n        orientation: orientation_1,\n        orthogonalStartSash: this.orthogonalStartSash,\n        orthogonalEndSash: this.orthogonalEndSash\n      });\n      var sashEventMapper = this.orientation === 0\n      /* VERTICAL */\n      ? function (e) {\n        return {\n          sash: sash_1,\n          start: e.startY,\n          current: e.currentY,\n          alt: e.altKey\n        };\n      } : function (e) {\n        return {\n          sash: sash_1,\n          start: e.startX,\n          current: e.currentX,\n          alt: e.altKey\n        };\n      };\n      var onStart = Event.map(sash_1.onDidStart, sashEventMapper);\n      var onStartDisposable = onStart(this.onSashStart, this);\n      var onChange = Event.map(sash_1.onDidChange, sashEventMapper);\n      var onChangeDisposable_1 = onChange(this.onSashChange, this);\n      var onEnd = Event.map(sash_1.onDidEnd, function () {\n        return firstIndex(_this.sashItems, function (item) {\n          return item.sash === sash_1;\n        });\n      });\n      var onEndDisposable = onEnd(this.onSashEnd, this);\n      var onDidResetDisposable = sash_1.onDidReset(function () {\n        var index = firstIndex(_this.sashItems, function (item) {\n          return item.sash === sash_1;\n        });\n        var upIndexes = range(index, -1);\n        var downIndexes = range(index + 1, _this.viewItems.length);\n\n        var snapBeforeIndex = _this.findFirstSnapIndex(upIndexes);\n\n        var snapAfterIndex = _this.findFirstSnapIndex(downIndexes);\n\n        if (typeof snapBeforeIndex === 'number' && !_this.viewItems[snapBeforeIndex].visible) {\n          return;\n        }\n\n        if (typeof snapAfterIndex === 'number' && !_this.viewItems[snapAfterIndex].visible) {\n          return;\n        }\n\n        _this._onDidSashReset.fire(index);\n      });\n      var disposable_1 = combinedDisposable(onStartDisposable, onChangeDisposable_1, onEndDisposable, onDidResetDisposable, sash_1);\n      var sashItem = {\n        sash: sash_1,\n        disposable: disposable_1\n      };\n      this.sashItems.splice(index - 1, 0, sashItem);\n    }\n\n    container.appendChild(view.element);\n    var highPriorityIndexes;\n\n    if (typeof size !== 'number' && size.type === 'split') {\n      highPriorityIndexes = [size.index];\n    }\n\n    if (!skipLayout) {\n      this.relayout([index], highPriorityIndexes);\n    }\n\n    this.state = State.Idle;\n\n    if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n      this.distributeViewSizes();\n    }\n  };\n\n  SplitView.prototype.relayout = function (lowPriorityIndexes, highPriorityIndexes) {\n    var contentSize = this.viewItems.reduce(function (r, i) {\n      return r + i.size;\n    }, 0);\n    this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n    this.distributeEmptySpace();\n    this.layoutViews();\n    this.saveProportions();\n  };\n\n  SplitView.prototype.resize = function (index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta, snapBefore, snapAfter) {\n    var _this = this;\n\n    if (sizes === void 0) {\n      sizes = this.viewItems.map(function (i) {\n        return i.size;\n      });\n    }\n\n    if (overloadMinDelta === void 0) {\n      overloadMinDelta = Number.NEGATIVE_INFINITY;\n    }\n\n    if (overloadMaxDelta === void 0) {\n      overloadMaxDelta = Number.POSITIVE_INFINITY;\n    }\n\n    if (index < 0 || index >= this.viewItems.length) {\n      return 0;\n    }\n\n    var upIndexes = range(index, -1);\n    var downIndexes = range(index + 1, this.viewItems.length);\n\n    if (highPriorityIndexes) {\n      for (var _i = 0, highPriorityIndexes_1 = highPriorityIndexes; _i < highPriorityIndexes_1.length; _i++) {\n        var index_1 = highPriorityIndexes_1[_i];\n        pushToStart(upIndexes, index_1);\n        pushToStart(downIndexes, index_1);\n      }\n    }\n\n    if (lowPriorityIndexes) {\n      for (var _a = 0, lowPriorityIndexes_1 = lowPriorityIndexes; _a < lowPriorityIndexes_1.length; _a++) {\n        var index_2 = lowPriorityIndexes_1[_a];\n        pushToEnd(upIndexes, index_2);\n        pushToEnd(downIndexes, index_2);\n      }\n    }\n\n    var upItems = upIndexes.map(function (i) {\n      return _this.viewItems[i];\n    });\n    var upSizes = upIndexes.map(function (i) {\n      return sizes[i];\n    });\n    var downItems = downIndexes.map(function (i) {\n      return _this.viewItems[i];\n    });\n    var downSizes = downIndexes.map(function (i) {\n      return sizes[i];\n    });\n    var minDeltaUp = upIndexes.reduce(function (r, i) {\n      return r + (_this.viewItems[i].minimumSize - sizes[i]);\n    }, 0);\n    var maxDeltaUp = upIndexes.reduce(function (r, i) {\n      return r + (_this.viewItems[i].maximumSize - sizes[i]);\n    }, 0);\n    var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) {\n      return r + (sizes[i] - _this.viewItems[i].minimumSize);\n    }, 0);\n    var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) {\n      return r + (sizes[i] - _this.viewItems[i].maximumSize);\n    }, 0);\n    var minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n    var maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n    var snapped = false;\n\n    if (snapBefore) {\n      var snapView = this.viewItems[snapBefore.index];\n      var visible = delta >= snapBefore.limitDelta;\n      snapped = visible !== snapView.visible;\n      snapView.setVisible(visible, snapBefore.size);\n    }\n\n    if (!snapped && snapAfter) {\n      var snapView = this.viewItems[snapAfter.index];\n      var visible = delta < snapAfter.limitDelta;\n      snapped = visible !== snapView.visible;\n      snapView.setVisible(visible, snapAfter.size);\n    }\n\n    if (snapped) {\n      return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n    }\n\n    delta = clamp(delta, minDelta, maxDelta);\n\n    for (var i = 0, deltaUp = delta; i < upItems.length; i++) {\n      var item = upItems[i];\n      var size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n      var viewDelta = size - upSizes[i];\n      deltaUp -= viewDelta;\n      item.size = size;\n    }\n\n    for (var i = 0, deltaDown = delta; i < downItems.length; i++) {\n      var item = downItems[i];\n      var size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n      var viewDelta = size - downSizes[i];\n      deltaDown += viewDelta;\n      item.size = size;\n    }\n\n    return delta;\n  };\n\n  SplitView.prototype.distributeEmptySpace = function (lowPriorityIndex) {\n    var _this = this;\n\n    var contentSize = this.viewItems.reduce(function (r, i) {\n      return r + i.size;\n    }, 0);\n    var emptyDelta = this.size - contentSize;\n    var indexes = range(this.viewItems.length - 1, -1);\n    var lowPriorityIndexes = indexes.filter(function (i) {\n      return _this.viewItems[i].priority === 1\n      /* Low */\n      ;\n    });\n    var highPriorityIndexes = indexes.filter(function (i) {\n      return _this.viewItems[i].priority === 2\n      /* High */\n      ;\n    });\n\n    for (var _i = 0, highPriorityIndexes_2 = highPriorityIndexes; _i < highPriorityIndexes_2.length; _i++) {\n      var index = highPriorityIndexes_2[_i];\n      pushToStart(indexes, index);\n    }\n\n    for (var _a = 0, lowPriorityIndexes_2 = lowPriorityIndexes; _a < lowPriorityIndexes_2.length; _a++) {\n      var index = lowPriorityIndexes_2[_a];\n      pushToEnd(indexes, index);\n    }\n\n    if (typeof lowPriorityIndex === 'number') {\n      pushToEnd(indexes, lowPriorityIndex);\n    }\n\n    for (var i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n      var item = this.viewItems[indexes[i]];\n      var size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n      var viewDelta = size - item.size;\n      emptyDelta -= viewDelta;\n      item.size = size;\n    }\n  };\n\n  SplitView.prototype.layoutViews = function () {\n    // Save new content size\n    this.contentSize = this.viewItems.reduce(function (r, i) {\n      return r + i.size;\n    }, 0); // Layout views\n\n    var offset = 0;\n\n    for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\n      var viewItem = _a[_i];\n      viewItem.layout(offset, this.layoutContext);\n      offset += viewItem.size;\n    } // Layout sashes\n\n\n    this.sashItems.forEach(function (item) {\n      return item.sash.layout();\n    });\n    this.updateSashEnablement();\n  };\n\n  SplitView.prototype.updateSashEnablement = function () {\n    var previous = false;\n    var collapsesDown = this.viewItems.map(function (i) {\n      return previous = i.size - i.minimumSize > 0 || previous;\n    });\n    previous = false;\n    var expandsDown = this.viewItems.map(function (i) {\n      return previous = i.maximumSize - i.size > 0 || previous;\n    });\n\n    var reverseViews = __spreadArrays(this.viewItems).reverse();\n\n    previous = false;\n    var collapsesUp = reverseViews.map(function (i) {\n      return previous = i.size - i.minimumSize > 0 || previous;\n    }).reverse();\n    previous = false;\n    var expandsUp = reverseViews.map(function (i) {\n      return previous = i.maximumSize - i.size > 0 || previous;\n    }).reverse();\n    var position = 0;\n\n    for (var index = 0; index < this.sashItems.length; index++) {\n      var sash = this.sashItems[index].sash;\n      var viewItem = this.viewItems[index];\n      position += viewItem.size;\n      var min = !(collapsesDown[index] && expandsUp[index + 1]);\n      var max = !(expandsDown[index] && collapsesUp[index + 1]);\n\n      if (min && max) {\n        var upIndexes = range(index, -1);\n        var downIndexes = range(index + 1, this.viewItems.length);\n        var snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n        var snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n        var snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n        var snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n\n        if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n          sash.state = 1\n          /* Minimum */\n          ;\n        } else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\n          sash.state = 2\n          /* Maximum */\n          ;\n        } else {\n          sash.state = 0\n          /* Disabled */\n          ;\n        }\n      } else if (min && !max) {\n        sash.state = 1\n        /* Minimum */\n        ;\n      } else if (!min && max) {\n        sash.state = 2\n        /* Maximum */\n        ;\n      } else {\n        sash.state = 3\n        /* Enabled */\n        ;\n      }\n    }\n  };\n\n  SplitView.prototype.getSashPosition = function (sash) {\n    var position = 0;\n\n    for (var i = 0; i < this.sashItems.length; i++) {\n      position += this.viewItems[i].size;\n\n      if (this.sashItems[i].sash === sash) {\n        return Math.min(position, this.contentSize - 2);\n      }\n    }\n\n    return 0;\n  };\n\n  SplitView.prototype.findFirstSnapIndex = function (indexes) {\n    // visible views first\n    for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\n      var index = indexes_1[_i];\n      var viewItem = this.viewItems[index];\n\n      if (!viewItem.visible) {\n        continue;\n      }\n\n      if (viewItem.snap) {\n        return index;\n      }\n    } // then, hidden views\n\n\n    for (var _a = 0, indexes_2 = indexes; _a < indexes_2.length; _a++) {\n      var index = indexes_2[_a];\n      var viewItem = this.viewItems[index];\n\n      if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n        return undefined;\n      }\n\n      if (!viewItem.visible && viewItem.snap) {\n        return index;\n      }\n    }\n\n    return undefined;\n  };\n\n  SplitView.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this.viewItems.forEach(function (i) {\n      return i.dispose();\n    });\n    this.viewItems = [];\n    this.sashItems.forEach(function (i) {\n      return i.disposable.dispose();\n    });\n    this.sashItems = [];\n  };\n\n  return SplitView;\n}(Disposable);\n\nexport { SplitView };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__spreadArrays","s","i","il","arguments","length","r","k","a","j","jl","toDisposable","Disposable","combinedDisposable","Event","Emitter","types","dom","clamp","range","firstIndex","pushToStart","pushToEnd","Sash","Color","domEvent","defaultStyles","separatorBorder","transparent","ViewItem","container","view","size","disposable","_cachedVisibleSize","undefined","_size","addClass","cachedVisibleSize","defineProperty","get","set","enumerable","configurable","setVisible","visible","viewMinimumSize","viewMaximumSize","toggleClass","minimumSize","maximumSize","priority","snap","enabled","style","pointerEvents","layout","offset","layoutContext","layoutContainer","dispose","VerticalViewItem","_super","apply","top","height","HorizontalViewItem","left","width","State","Sizing","Distribute","type","Split","index","Invisible","SplitView","options","_this","call","contentSize","proportions","viewItems","sashItems","state","Idle","_onDidSashChange","_register","onDidSashChange","event","_onDidSashReset","_startSnappingEnabled","_endSnappingEnabled","orientation","isUndefined","inverseAltBehavior","proportionalLayout","el","document","createElement","appendChild","sashContainer","append","$","viewContainer","styles","descriptor","views","forEach","viewDescriptor","sizing","doAddView","reduce","saveProportions","_orthogonalStartSash","sash","_i","_a","sashItem","orthogonalStartSash","_orthogonalEndSash","orthogonalEndSash","startSnappingEnabled","updateSashEnablement","endSnappingEnabled","isTransparent","removeClass","removeProperty","setProperty","toString","addView","previousSize","Math","max","indexes","lowPriorityIndexes","filter","highPriorityIndexes","resize","item","round","distributeEmptySpace","layoutViews","map","onSashStart","start","alt","_b","body","e","resetSashDragState","sashDragState","current","altKey","sizes","minDelta","Number","NEGATIVE_INFINITY","maxDelta","POSITIVE_INFINITY","isLastSash","viewItem","snapBefore","snapAfter","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","minDelta_1","maxDelta_1","min","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","halfSize","floor","limitDelta","onSashChange","delta","newDelta","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","onSashEnd","fire","onViewChange","indexOf","relayout","resizeView","Error","Busy","distributeViewSizes","flexibleViewItems","flexibleSize","push","flexibleViewItems_1","getViewSize","skipLayout","insertBefore","children","onChangeDisposable","onDidChange","containerDisposable","removeChild","viewSize","splice","orientation_1","layoutProvider","getHorizontalSashTop","getSashPosition","getVerticalSashLeft","sash_1","sashEventMapper","startY","currentY","startX","currentX","onStart","onDidStart","onStartDisposable","onChange","onChangeDisposable_1","onEnd","onDidEnd","onEndDisposable","onDidResetDisposable","onDidReset","disposable_1","element","overloadMinDelta","overloadMaxDelta","highPriorityIndexes_1","index_1","lowPriorityIndexes_1","index_2","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","viewDelta","deltaDown","lowPriorityIndex","emptyDelta","highPriorityIndexes_2","lowPriorityIndexes_2","previous","collapsesDown","expandsDown","reverseViews","reverse","collapsesUp","expandsUp","position","snappedBefore","snappedAfter","indexes_1","indexes_2"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport './splitview.css';\r\nimport { toDisposable, Disposable, combinedDisposable } from '../../../common/lifecycle.js';\r\nimport { Event, Emitter } from '../../../common/event.js';\r\nimport * as types from '../../../common/types.js';\r\nimport * as dom from '../../dom.js';\r\nimport { clamp } from '../../../common/numbers.js';\r\nimport { range, firstIndex, pushToStart, pushToEnd } from '../../../common/arrays.js';\r\nimport { Sash } from '../sash/sash.js';\r\nimport { Color } from '../../../common/color.js';\r\nimport { domEvent } from '../../event.js';\r\nvar defaultStyles = {\r\n    separatorBorder: Color.transparent\r\n};\r\nvar ViewItem = /** @class */ (function () {\r\n    function ViewItem(container, view, size, disposable) {\r\n        this.container = container;\r\n        this.view = view;\r\n        this.disposable = disposable;\r\n        this._cachedVisibleSize = undefined;\r\n        if (typeof size === 'number') {\r\n            this._size = size;\r\n            this._cachedVisibleSize = undefined;\r\n            dom.addClass(container, 'visible');\r\n        }\r\n        else {\r\n            this._size = 0;\r\n            this._cachedVisibleSize = size.cachedVisibleSize;\r\n        }\r\n    }\r\n    Object.defineProperty(ViewItem.prototype, \"size\", {\r\n        get: function () {\r\n            return this._size;\r\n        },\r\n        set: function (size) {\r\n            this._size = size;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"visible\", {\r\n        get: function () {\r\n            return typeof this._cachedVisibleSize === 'undefined';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ViewItem.prototype.setVisible = function (visible, size) {\r\n        if (visible === this.visible) {\r\n            return;\r\n        }\r\n        if (visible) {\r\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\r\n            this._cachedVisibleSize = undefined;\r\n        }\r\n        else {\r\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\r\n            this.size = 0;\r\n        }\r\n        dom.toggleClass(this.container, 'visible', visible);\r\n        if (this.view.setVisible) {\r\n            this.view.setVisible(visible);\r\n        }\r\n    };\r\n    Object.defineProperty(ViewItem.prototype, \"minimumSize\", {\r\n        get: function () { return this.visible ? this.view.minimumSize : 0; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"viewMinimumSize\", {\r\n        get: function () { return this.view.minimumSize; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"maximumSize\", {\r\n        get: function () { return this.visible ? this.view.maximumSize : 0; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"viewMaximumSize\", {\r\n        get: function () { return this.view.maximumSize; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"priority\", {\r\n        get: function () { return this.view.priority; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"snap\", {\r\n        get: function () { return !!this.view.snap; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"enabled\", {\r\n        set: function (enabled) {\r\n            this.container.style.pointerEvents = enabled ? null : 'none';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ViewItem.prototype.layout = function (offset, layoutContext) {\r\n        this.layoutContainer(offset);\r\n        this.view.layout(this.size, offset, layoutContext);\r\n    };\r\n    ViewItem.prototype.dispose = function () {\r\n        this.disposable.dispose();\r\n        return this.view;\r\n    };\r\n    return ViewItem;\r\n}());\r\nvar VerticalViewItem = /** @class */ (function (_super) {\r\n    __extends(VerticalViewItem, _super);\r\n    function VerticalViewItem() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    VerticalViewItem.prototype.layoutContainer = function (offset) {\r\n        this.container.style.top = offset + \"px\";\r\n        this.container.style.height = this.size + \"px\";\r\n    };\r\n    return VerticalViewItem;\r\n}(ViewItem));\r\nvar HorizontalViewItem = /** @class */ (function (_super) {\r\n    __extends(HorizontalViewItem, _super);\r\n    function HorizontalViewItem() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    HorizontalViewItem.prototype.layoutContainer = function (offset) {\r\n        this.container.style.left = offset + \"px\";\r\n        this.container.style.width = this.size + \"px\";\r\n    };\r\n    return HorizontalViewItem;\r\n}(ViewItem));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Idle\"] = 0] = \"Idle\";\r\n    State[State[\"Busy\"] = 1] = \"Busy\";\r\n})(State || (State = {}));\r\nexport var Sizing;\r\n(function (Sizing) {\r\n    Sizing.Distribute = { type: 'distribute' };\r\n    function Split(index) { return { type: 'split', index: index }; }\r\n    Sizing.Split = Split;\r\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize: cachedVisibleSize }; }\r\n    Sizing.Invisible = Invisible;\r\n})(Sizing || (Sizing = {}));\r\nvar SplitView = /** @class */ (function (_super) {\r\n    __extends(SplitView, _super);\r\n    function SplitView(container, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this) || this;\r\n        _this.size = 0;\r\n        _this.contentSize = 0;\r\n        _this.proportions = undefined;\r\n        _this.viewItems = [];\r\n        _this.sashItems = [];\r\n        _this.state = State.Idle;\r\n        _this._onDidSashChange = _this._register(new Emitter());\r\n        _this.onDidSashChange = _this._onDidSashChange.event;\r\n        _this._onDidSashReset = _this._register(new Emitter());\r\n        _this._startSnappingEnabled = true;\r\n        _this._endSnappingEnabled = true;\r\n        _this.orientation = types.isUndefined(options.orientation) ? 0 /* VERTICAL */ : options.orientation;\r\n        _this.inverseAltBehavior = !!options.inverseAltBehavior;\r\n        _this.proportionalLayout = types.isUndefined(options.proportionalLayout) ? true : !!options.proportionalLayout;\r\n        _this.el = document.createElement('div');\r\n        dom.addClass(_this.el, 'monaco-split-view2');\r\n        dom.addClass(_this.el, _this.orientation === 0 /* VERTICAL */ ? 'vertical' : 'horizontal');\r\n        container.appendChild(_this.el);\r\n        _this.sashContainer = dom.append(_this.el, dom.$('.sash-container'));\r\n        _this.viewContainer = dom.append(_this.el, dom.$('.split-view-container'));\r\n        _this.style(options.styles || defaultStyles);\r\n        // We have an existing set of view, add them now\r\n        if (options.descriptor) {\r\n            _this.size = options.descriptor.size;\r\n            options.descriptor.views.forEach(function (viewDescriptor, index) {\r\n                var sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\r\n                var view = viewDescriptor.view;\r\n                _this.doAddView(view, sizing, index, true);\r\n            });\r\n            // Initialize content size and proportions for first layout\r\n            _this.contentSize = _this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n            _this.saveProportions();\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SplitView.prototype, \"orthogonalStartSash\", {\r\n        get: function () { return this._orthogonalStartSash; },\r\n        set: function (sash) {\r\n            for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\r\n                var sashItem = _a[_i];\r\n                sashItem.sash.orthogonalStartSash = sash;\r\n            }\r\n            this._orthogonalStartSash = sash;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SplitView.prototype, \"orthogonalEndSash\", {\r\n        get: function () { return this._orthogonalEndSash; },\r\n        set: function (sash) {\r\n            for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\r\n                var sashItem = _a[_i];\r\n                sashItem.sash.orthogonalEndSash = sash;\r\n            }\r\n            this._orthogonalEndSash = sash;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SplitView.prototype, \"startSnappingEnabled\", {\r\n        get: function () { return this._startSnappingEnabled; },\r\n        set: function (startSnappingEnabled) {\r\n            if (this._startSnappingEnabled === startSnappingEnabled) {\r\n                return;\r\n            }\r\n            this._startSnappingEnabled = startSnappingEnabled;\r\n            this.updateSashEnablement();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SplitView.prototype, \"endSnappingEnabled\", {\r\n        get: function () { return this._endSnappingEnabled; },\r\n        set: function (endSnappingEnabled) {\r\n            if (this._endSnappingEnabled === endSnappingEnabled) {\r\n                return;\r\n            }\r\n            this._endSnappingEnabled = endSnappingEnabled;\r\n            this.updateSashEnablement();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SplitView.prototype.style = function (styles) {\r\n        if (styles.separatorBorder.isTransparent()) {\r\n            dom.removeClass(this.el, 'separator-border');\r\n            this.el.style.removeProperty('--separator-border');\r\n        }\r\n        else {\r\n            dom.addClass(this.el, 'separator-border');\r\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\r\n        }\r\n    };\r\n    SplitView.prototype.addView = function (view, size, index) {\r\n        if (index === void 0) { index = this.viewItems.length; }\r\n        this.doAddView(view, size, index, false);\r\n    };\r\n    SplitView.prototype.layout = function (size, layoutContext) {\r\n        var _this = this;\r\n        var previousSize = Math.max(this.size, this.contentSize);\r\n        this.size = size;\r\n        this.layoutContext = layoutContext;\r\n        if (!this.proportions) {\r\n            var indexes = range(this.viewItems.length);\r\n            var lowPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; });\r\n            var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\r\n        }\r\n        else {\r\n            for (var i = 0; i < this.viewItems.length; i++) {\r\n                var item = this.viewItems[i];\r\n                item.size = clamp(Math.round(this.proportions[i] * size), item.minimumSize, item.maximumSize);\r\n            }\r\n        }\r\n        this.distributeEmptySpace();\r\n        this.layoutViews();\r\n    };\r\n    SplitView.prototype.saveProportions = function () {\r\n        var _this = this;\r\n        if (this.proportionalLayout && this.contentSize > 0) {\r\n            this.proportions = this.viewItems.map(function (i) { return i.size / _this.contentSize; });\r\n        }\r\n    };\r\n    SplitView.prototype.onSashStart = function (_a) {\r\n        var _this = this;\r\n        var sash = _a.sash, start = _a.start, alt = _a.alt;\r\n        for (var _i = 0, _b = this.viewItems; _i < _b.length; _i++) {\r\n            var item = _b[_i];\r\n            item.enabled = false;\r\n        }\r\n        var index = firstIndex(this.sashItems, function (item) { return item.sash === sash; });\r\n        // This way, we can press Alt while we resize a sash, macOS style!\r\n        var disposable = combinedDisposable(domEvent(document.body, 'keydown')(function (e) { return resetSashDragState(_this.sashDragState.current, e.altKey); }), domEvent(document.body, 'keyup')(function () { return resetSashDragState(_this.sashDragState.current, false); }));\r\n        var resetSashDragState = function (start, alt) {\r\n            var sizes = _this.viewItems.map(function (i) { return i.size; });\r\n            var minDelta = Number.NEGATIVE_INFINITY;\r\n            var maxDelta = Number.POSITIVE_INFINITY;\r\n            if (_this.inverseAltBehavior) {\r\n                alt = !alt;\r\n            }\r\n            if (alt) {\r\n                // When we're using the last sash with Alt, we're resizing\r\n                // the view to the left/up, instead of right/down as usual\r\n                // Thus, we must do the inverse of the usual\r\n                var isLastSash = index === _this.sashItems.length - 1;\r\n                if (isLastSash) {\r\n                    var viewItem = _this.viewItems[index];\r\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\r\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\r\n                }\r\n                else {\r\n                    var viewItem = _this.viewItems[index + 1];\r\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\r\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\r\n                }\r\n            }\r\n            var snapBefore;\r\n            var snapAfter;\r\n            if (!alt) {\r\n                var upIndexes = range(index, -1);\r\n                var downIndexes = range(index + 1, _this.viewItems.length);\r\n                var minDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].minimumSize - sizes[i]); }, 0);\r\n                var maxDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].viewMaximumSize - sizes[i]); }, 0);\r\n                var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].minimumSize); }, 0);\r\n                var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].viewMaximumSize); }, 0);\r\n                var minDelta_1 = Math.max(minDeltaUp, minDeltaDown);\r\n                var maxDelta_1 = Math.min(maxDeltaDown, maxDeltaUp);\r\n                var snapBeforeIndex = _this.findFirstSnapIndex(upIndexes);\r\n                var snapAfterIndex = _this.findFirstSnapIndex(downIndexes);\r\n                if (typeof snapBeforeIndex === 'number') {\r\n                    var viewItem = _this.viewItems[snapBeforeIndex];\r\n                    var halfSize = Math.floor(viewItem.viewMinimumSize / 2);\r\n                    snapBefore = {\r\n                        index: snapBeforeIndex,\r\n                        limitDelta: viewItem.visible ? minDelta_1 - halfSize : minDelta_1 + halfSize,\r\n                        size: viewItem.size\r\n                    };\r\n                }\r\n                if (typeof snapAfterIndex === 'number') {\r\n                    var viewItem = _this.viewItems[snapAfterIndex];\r\n                    var halfSize = Math.floor(viewItem.viewMinimumSize / 2);\r\n                    snapAfter = {\r\n                        index: snapAfterIndex,\r\n                        limitDelta: viewItem.visible ? maxDelta_1 + halfSize : maxDelta_1 - halfSize,\r\n                        size: viewItem.size\r\n                    };\r\n                }\r\n            }\r\n            _this.sashDragState = { start: start, current: start, index: index, sizes: sizes, minDelta: minDelta, maxDelta: maxDelta, alt: alt, snapBefore: snapBefore, snapAfter: snapAfter, disposable: disposable };\r\n        };\r\n        resetSashDragState(start, alt);\r\n    };\r\n    SplitView.prototype.onSashChange = function (_a) {\r\n        var current = _a.current;\r\n        var _b = this.sashDragState, index = _b.index, start = _b.start, sizes = _b.sizes, alt = _b.alt, minDelta = _b.minDelta, maxDelta = _b.maxDelta, snapBefore = _b.snapBefore, snapAfter = _b.snapAfter;\r\n        this.sashDragState.current = current;\r\n        var delta = current - start;\r\n        var newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\r\n        if (alt) {\r\n            var isLastSash = index === this.sashItems.length - 1;\r\n            var newSizes = this.viewItems.map(function (i) { return i.size; });\r\n            var viewItemIndex = isLastSash ? index : index + 1;\r\n            var viewItem = this.viewItems[viewItemIndex];\r\n            var newMinDelta = viewItem.size - viewItem.maximumSize;\r\n            var newMaxDelta = viewItem.size - viewItem.minimumSize;\r\n            var resizeIndex = isLastSash ? index - 1 : index + 1;\r\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\r\n        }\r\n        this.distributeEmptySpace();\r\n        this.layoutViews();\r\n    };\r\n    SplitView.prototype.onSashEnd = function (index) {\r\n        this._onDidSashChange.fire(index);\r\n        this.sashDragState.disposable.dispose();\r\n        this.saveProportions();\r\n        for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            item.enabled = true;\r\n        }\r\n    };\r\n    SplitView.prototype.onViewChange = function (item, size) {\r\n        var index = this.viewItems.indexOf(item);\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return;\r\n        }\r\n        size = typeof size === 'number' ? size : item.size;\r\n        size = clamp(size, item.minimumSize, item.maximumSize);\r\n        if (this.inverseAltBehavior && index > 0) {\r\n            // In this case, we want the view to grow or shrink both sides equally\r\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\r\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\r\n            this.distributeEmptySpace();\r\n            this.layoutViews();\r\n        }\r\n        else {\r\n            item.size = size;\r\n            this.relayout([index], undefined);\r\n        }\r\n    };\r\n    SplitView.prototype.resizeView = function (index, size) {\r\n        var _this = this;\r\n        if (this.state !== State.Idle) {\r\n            throw new Error('Cant modify splitview');\r\n        }\r\n        this.state = State.Busy;\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return;\r\n        }\r\n        var indexes = range(this.viewItems.length).filter(function (i) { return i !== index; });\r\n        var lowPriorityIndexes = __spreadArrays(indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; }), [index]);\r\n        var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n        var item = this.viewItems[index];\r\n        size = Math.round(size);\r\n        size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\r\n        item.size = size;\r\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\r\n        this.state = State.Idle;\r\n    };\r\n    SplitView.prototype.distributeViewSizes = function () {\r\n        var _this = this;\r\n        var flexibleViewItems = [];\r\n        var flexibleSize = 0;\r\n        for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item.maximumSize - item.minimumSize > 0) {\r\n                flexibleViewItems.push(item);\r\n                flexibleSize += item.size;\r\n            }\r\n        }\r\n        var size = Math.floor(flexibleSize / flexibleViewItems.length);\r\n        for (var _b = 0, flexibleViewItems_1 = flexibleViewItems; _b < flexibleViewItems_1.length; _b++) {\r\n            var item = flexibleViewItems_1[_b];\r\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\r\n        }\r\n        var indexes = range(this.viewItems.length);\r\n        var lowPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; });\r\n        var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\r\n    };\r\n    SplitView.prototype.getViewSize = function (index) {\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return -1;\r\n        }\r\n        return this.viewItems[index].size;\r\n    };\r\n    SplitView.prototype.doAddView = function (view, size, index, skipLayout) {\r\n        var _this = this;\r\n        if (index === void 0) { index = this.viewItems.length; }\r\n        if (this.state !== State.Idle) {\r\n            throw new Error('Cant modify splitview');\r\n        }\r\n        this.state = State.Busy;\r\n        // Add view\r\n        var container = dom.$('.split-view-view');\r\n        if (index === this.viewItems.length) {\r\n            this.viewContainer.appendChild(container);\r\n        }\r\n        else {\r\n            this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\r\n        }\r\n        var onChangeDisposable = view.onDidChange(function (size) { return _this.onViewChange(item, size); });\r\n        var containerDisposable = toDisposable(function () { return _this.viewContainer.removeChild(container); });\r\n        var disposable = combinedDisposable(onChangeDisposable, containerDisposable);\r\n        var viewSize;\r\n        if (typeof size === 'number') {\r\n            viewSize = size;\r\n        }\r\n        else if (size.type === 'split') {\r\n            viewSize = this.getViewSize(size.index) / 2;\r\n        }\r\n        else if (size.type === 'invisible') {\r\n            viewSize = { cachedVisibleSize: size.cachedVisibleSize };\r\n        }\r\n        else {\r\n            viewSize = view.minimumSize;\r\n        }\r\n        var item = this.orientation === 0 /* VERTICAL */\r\n            ? new VerticalViewItem(container, view, viewSize, disposable)\r\n            : new HorizontalViewItem(container, view, viewSize, disposable);\r\n        this.viewItems.splice(index, 0, item);\r\n        // Add sash\r\n        if (this.viewItems.length > 1) {\r\n            var orientation_1 = this.orientation === 0 /* VERTICAL */ ? 1 /* HORIZONTAL */ : 0 /* VERTICAL */;\r\n            var layoutProvider = this.orientation === 0 /* VERTICAL */ ? { getHorizontalSashTop: function (sash) { return _this.getSashPosition(sash); } } : { getVerticalSashLeft: function (sash) { return _this.getSashPosition(sash); } };\r\n            var sash_1 = new Sash(this.sashContainer, layoutProvider, {\r\n                orientation: orientation_1,\r\n                orthogonalStartSash: this.orthogonalStartSash,\r\n                orthogonalEndSash: this.orthogonalEndSash\r\n            });\r\n            var sashEventMapper = this.orientation === 0 /* VERTICAL */\r\n                ? function (e) { return ({ sash: sash_1, start: e.startY, current: e.currentY, alt: e.altKey }); }\r\n                : function (e) { return ({ sash: sash_1, start: e.startX, current: e.currentX, alt: e.altKey }); };\r\n            var onStart = Event.map(sash_1.onDidStart, sashEventMapper);\r\n            var onStartDisposable = onStart(this.onSashStart, this);\r\n            var onChange = Event.map(sash_1.onDidChange, sashEventMapper);\r\n            var onChangeDisposable_1 = onChange(this.onSashChange, this);\r\n            var onEnd = Event.map(sash_1.onDidEnd, function () { return firstIndex(_this.sashItems, function (item) { return item.sash === sash_1; }); });\r\n            var onEndDisposable = onEnd(this.onSashEnd, this);\r\n            var onDidResetDisposable = sash_1.onDidReset(function () {\r\n                var index = firstIndex(_this.sashItems, function (item) { return item.sash === sash_1; });\r\n                var upIndexes = range(index, -1);\r\n                var downIndexes = range(index + 1, _this.viewItems.length);\r\n                var snapBeforeIndex = _this.findFirstSnapIndex(upIndexes);\r\n                var snapAfterIndex = _this.findFirstSnapIndex(downIndexes);\r\n                if (typeof snapBeforeIndex === 'number' && !_this.viewItems[snapBeforeIndex].visible) {\r\n                    return;\r\n                }\r\n                if (typeof snapAfterIndex === 'number' && !_this.viewItems[snapAfterIndex].visible) {\r\n                    return;\r\n                }\r\n                _this._onDidSashReset.fire(index);\r\n            });\r\n            var disposable_1 = combinedDisposable(onStartDisposable, onChangeDisposable_1, onEndDisposable, onDidResetDisposable, sash_1);\r\n            var sashItem = { sash: sash_1, disposable: disposable_1 };\r\n            this.sashItems.splice(index - 1, 0, sashItem);\r\n        }\r\n        container.appendChild(view.element);\r\n        var highPriorityIndexes;\r\n        if (typeof size !== 'number' && size.type === 'split') {\r\n            highPriorityIndexes = [size.index];\r\n        }\r\n        if (!skipLayout) {\r\n            this.relayout([index], highPriorityIndexes);\r\n        }\r\n        this.state = State.Idle;\r\n        if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\r\n            this.distributeViewSizes();\r\n        }\r\n    };\r\n    SplitView.prototype.relayout = function (lowPriorityIndexes, highPriorityIndexes) {\r\n        var contentSize = this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\r\n        this.distributeEmptySpace();\r\n        this.layoutViews();\r\n        this.saveProportions();\r\n    };\r\n    SplitView.prototype.resize = function (index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta, snapBefore, snapAfter) {\r\n        var _this = this;\r\n        if (sizes === void 0) { sizes = this.viewItems.map(function (i) { return i.size; }); }\r\n        if (overloadMinDelta === void 0) { overloadMinDelta = Number.NEGATIVE_INFINITY; }\r\n        if (overloadMaxDelta === void 0) { overloadMaxDelta = Number.POSITIVE_INFINITY; }\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return 0;\r\n        }\r\n        var upIndexes = range(index, -1);\r\n        var downIndexes = range(index + 1, this.viewItems.length);\r\n        if (highPriorityIndexes) {\r\n            for (var _i = 0, highPriorityIndexes_1 = highPriorityIndexes; _i < highPriorityIndexes_1.length; _i++) {\r\n                var index_1 = highPriorityIndexes_1[_i];\r\n                pushToStart(upIndexes, index_1);\r\n                pushToStart(downIndexes, index_1);\r\n            }\r\n        }\r\n        if (lowPriorityIndexes) {\r\n            for (var _a = 0, lowPriorityIndexes_1 = lowPriorityIndexes; _a < lowPriorityIndexes_1.length; _a++) {\r\n                var index_2 = lowPriorityIndexes_1[_a];\r\n                pushToEnd(upIndexes, index_2);\r\n                pushToEnd(downIndexes, index_2);\r\n            }\r\n        }\r\n        var upItems = upIndexes.map(function (i) { return _this.viewItems[i]; });\r\n        var upSizes = upIndexes.map(function (i) { return sizes[i]; });\r\n        var downItems = downIndexes.map(function (i) { return _this.viewItems[i]; });\r\n        var downSizes = downIndexes.map(function (i) { return sizes[i]; });\r\n        var minDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].minimumSize - sizes[i]); }, 0);\r\n        var maxDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].maximumSize - sizes[i]); }, 0);\r\n        var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].minimumSize); }, 0);\r\n        var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].maximumSize); }, 0);\r\n        var minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\r\n        var maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\r\n        var snapped = false;\r\n        if (snapBefore) {\r\n            var snapView = this.viewItems[snapBefore.index];\r\n            var visible = delta >= snapBefore.limitDelta;\r\n            snapped = visible !== snapView.visible;\r\n            snapView.setVisible(visible, snapBefore.size);\r\n        }\r\n        if (!snapped && snapAfter) {\r\n            var snapView = this.viewItems[snapAfter.index];\r\n            var visible = delta < snapAfter.limitDelta;\r\n            snapped = visible !== snapView.visible;\r\n            snapView.setVisible(visible, snapAfter.size);\r\n        }\r\n        if (snapped) {\r\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\r\n        }\r\n        delta = clamp(delta, minDelta, maxDelta);\r\n        for (var i = 0, deltaUp = delta; i < upItems.length; i++) {\r\n            var item = upItems[i];\r\n            var size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\r\n            var viewDelta = size - upSizes[i];\r\n            deltaUp -= viewDelta;\r\n            item.size = size;\r\n        }\r\n        for (var i = 0, deltaDown = delta; i < downItems.length; i++) {\r\n            var item = downItems[i];\r\n            var size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\r\n            var viewDelta = size - downSizes[i];\r\n            deltaDown += viewDelta;\r\n            item.size = size;\r\n        }\r\n        return delta;\r\n    };\r\n    SplitView.prototype.distributeEmptySpace = function (lowPriorityIndex) {\r\n        var _this = this;\r\n        var contentSize = this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n        var emptyDelta = this.size - contentSize;\r\n        var indexes = range(this.viewItems.length - 1, -1);\r\n        var lowPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; });\r\n        var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n        for (var _i = 0, highPriorityIndexes_2 = highPriorityIndexes; _i < highPriorityIndexes_2.length; _i++) {\r\n            var index = highPriorityIndexes_2[_i];\r\n            pushToStart(indexes, index);\r\n        }\r\n        for (var _a = 0, lowPriorityIndexes_2 = lowPriorityIndexes; _a < lowPriorityIndexes_2.length; _a++) {\r\n            var index = lowPriorityIndexes_2[_a];\r\n            pushToEnd(indexes, index);\r\n        }\r\n        if (typeof lowPriorityIndex === 'number') {\r\n            pushToEnd(indexes, lowPriorityIndex);\r\n        }\r\n        for (var i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\r\n            var item = this.viewItems[indexes[i]];\r\n            var size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\r\n            var viewDelta = size - item.size;\r\n            emptyDelta -= viewDelta;\r\n            item.size = size;\r\n        }\r\n    };\r\n    SplitView.prototype.layoutViews = function () {\r\n        // Save new content size\r\n        this.contentSize = this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n        // Layout views\r\n        var offset = 0;\r\n        for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\r\n            var viewItem = _a[_i];\r\n            viewItem.layout(offset, this.layoutContext);\r\n            offset += viewItem.size;\r\n        }\r\n        // Layout sashes\r\n        this.sashItems.forEach(function (item) { return item.sash.layout(); });\r\n        this.updateSashEnablement();\r\n    };\r\n    SplitView.prototype.updateSashEnablement = function () {\r\n        var previous = false;\r\n        var collapsesDown = this.viewItems.map(function (i) { return previous = (i.size - i.minimumSize > 0) || previous; });\r\n        previous = false;\r\n        var expandsDown = this.viewItems.map(function (i) { return previous = (i.maximumSize - i.size > 0) || previous; });\r\n        var reverseViews = __spreadArrays(this.viewItems).reverse();\r\n        previous = false;\r\n        var collapsesUp = reverseViews.map(function (i) { return previous = (i.size - i.minimumSize > 0) || previous; }).reverse();\r\n        previous = false;\r\n        var expandsUp = reverseViews.map(function (i) { return previous = (i.maximumSize - i.size > 0) || previous; }).reverse();\r\n        var position = 0;\r\n        for (var index = 0; index < this.sashItems.length; index++) {\r\n            var sash = this.sashItems[index].sash;\r\n            var viewItem = this.viewItems[index];\r\n            position += viewItem.size;\r\n            var min = !(collapsesDown[index] && expandsUp[index + 1]);\r\n            var max = !(expandsDown[index] && collapsesUp[index + 1]);\r\n            if (min && max) {\r\n                var upIndexes = range(index, -1);\r\n                var downIndexes = range(index + 1, this.viewItems.length);\r\n                var snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\r\n                var snapAfterIndex = this.findFirstSnapIndex(downIndexes);\r\n                var snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\r\n                var snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\r\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\r\n                    sash.state = 1 /* Minimum */;\r\n                }\r\n                else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\r\n                    sash.state = 2 /* Maximum */;\r\n                }\r\n                else {\r\n                    sash.state = 0 /* Disabled */;\r\n                }\r\n            }\r\n            else if (min && !max) {\r\n                sash.state = 1 /* Minimum */;\r\n            }\r\n            else if (!min && max) {\r\n                sash.state = 2 /* Maximum */;\r\n            }\r\n            else {\r\n                sash.state = 3 /* Enabled */;\r\n            }\r\n        }\r\n    };\r\n    SplitView.prototype.getSashPosition = function (sash) {\r\n        var position = 0;\r\n        for (var i = 0; i < this.sashItems.length; i++) {\r\n            position += this.viewItems[i].size;\r\n            if (this.sashItems[i].sash === sash) {\r\n                return Math.min(position, this.contentSize - 2);\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n    SplitView.prototype.findFirstSnapIndex = function (indexes) {\r\n        // visible views first\r\n        for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\r\n            var index = indexes_1[_i];\r\n            var viewItem = this.viewItems[index];\r\n            if (!viewItem.visible) {\r\n                continue;\r\n            }\r\n            if (viewItem.snap) {\r\n                return index;\r\n            }\r\n        }\r\n        // then, hidden views\r\n        for (var _a = 0, indexes_2 = indexes; _a < indexes_2.length; _a++) {\r\n            var index = indexes_2[_a];\r\n            var viewItem = this.viewItems[index];\r\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\r\n                return undefined;\r\n            }\r\n            if (!viewItem.visible && viewItem.snap) {\r\n                return index;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    SplitView.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this.viewItems.forEach(function (i) { return i.dispose(); });\r\n        this.viewItems = [];\r\n        this.sashItems.forEach(function (i) { return i.disposable.dispose(); });\r\n        this.sashItems = [];\r\n    };\r\n    return SplitView;\r\n}(Disposable));\r\nexport { SplitView };\r\n"]},"metadata":{},"sourceType":"module"}