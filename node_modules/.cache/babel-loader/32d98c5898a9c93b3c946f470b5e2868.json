{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as strings from '../../../base/common/strings.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { EditorKeybindingCancellationTokenSource } from './keybindingCancellation.js';\n\nvar EditorState =\n/** @class */\nfunction () {\n  function EditorState(editor, flags) {\n    this.flags = flags;\n\n    if ((this.flags & 1\n    /* Value */\n    ) !== 0) {\n      var model = editor.getModel();\n      this.modelVersionId = model ? strings.format('{0}#{1}', model.uri.toString(), model.getVersionId()) : null;\n    } else {\n      this.modelVersionId = null;\n    }\n\n    if ((this.flags & 4\n    /* Position */\n    ) !== 0) {\n      this.position = editor.getPosition();\n    } else {\n      this.position = null;\n    }\n\n    if ((this.flags & 2\n    /* Selection */\n    ) !== 0) {\n      this.selection = editor.getSelection();\n    } else {\n      this.selection = null;\n    }\n\n    if ((this.flags & 8\n    /* Scroll */\n    ) !== 0) {\n      this.scrollLeft = editor.getScrollLeft();\n      this.scrollTop = editor.getScrollTop();\n    } else {\n      this.scrollLeft = -1;\n      this.scrollTop = -1;\n    }\n  }\n\n  EditorState.prototype._equals = function (other) {\n    if (!(other instanceof EditorState)) {\n      return false;\n    }\n\n    var state = other;\n\n    if (this.modelVersionId !== state.modelVersionId) {\n      return false;\n    }\n\n    if (this.scrollLeft !== state.scrollLeft || this.scrollTop !== state.scrollTop) {\n      return false;\n    }\n\n    if (!this.position && state.position || this.position && !state.position || this.position && state.position && !this.position.equals(state.position)) {\n      return false;\n    }\n\n    if (!this.selection && state.selection || this.selection && !state.selection || this.selection && state.selection && !this.selection.equalsRange(state.selection)) {\n      return false;\n    }\n\n    return true;\n  };\n\n  EditorState.prototype.validate = function (editor) {\n    return this._equals(new EditorState(editor, this.flags));\n  };\n\n  return EditorState;\n}();\n\nexport { EditorState };\n/**\r\n * A cancellation token source that cancels when the editor changes as expressed\r\n * by the provided flags\r\n */\n\nvar EditorStateCancellationTokenSource =\n/** @class */\nfunction (_super) {\n  __extends(EditorStateCancellationTokenSource, _super);\n\n  function EditorStateCancellationTokenSource(editor, flags, parent) {\n    var _this = _super.call(this, editor, parent) || this;\n\n    _this.editor = editor;\n    _this._listener = new DisposableStore();\n\n    if (flags & 4\n    /* Position */\n    ) {\n        _this._listener.add(editor.onDidChangeCursorPosition(function (_) {\n          return _this.cancel();\n        }));\n      }\n\n    if (flags & 2\n    /* Selection */\n    ) {\n        _this._listener.add(editor.onDidChangeCursorSelection(function (_) {\n          return _this.cancel();\n        }));\n      }\n\n    if (flags & 8\n    /* Scroll */\n    ) {\n        _this._listener.add(editor.onDidScrollChange(function (_) {\n          return _this.cancel();\n        }));\n      }\n\n    if (flags & 1\n    /* Value */\n    ) {\n        _this._listener.add(editor.onDidChangeModel(function (_) {\n          return _this.cancel();\n        }));\n\n        _this._listener.add(editor.onDidChangeModelContent(function (_) {\n          return _this.cancel();\n        }));\n      }\n\n    return _this;\n  }\n\n  EditorStateCancellationTokenSource.prototype.dispose = function () {\n    this._listener.dispose();\n\n    _super.prototype.dispose.call(this);\n  };\n\n  return EditorStateCancellationTokenSource;\n}(EditorKeybindingCancellationTokenSource);\n\nexport { EditorStateCancellationTokenSource };\n/**\r\n * A cancellation token source that cancels when the provided model changes\r\n */\n\nvar TextModelCancellationTokenSource =\n/** @class */\nfunction (_super) {\n  __extends(TextModelCancellationTokenSource, _super);\n\n  function TextModelCancellationTokenSource(model, parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this._listener = model.onDidChangeContent(function () {\n      return _this.cancel();\n    });\n    return _this;\n  }\n\n  TextModelCancellationTokenSource.prototype.dispose = function () {\n    this._listener.dispose();\n\n    _super.prototype.dispose.call(this);\n  };\n\n  return TextModelCancellationTokenSource;\n}(CancellationTokenSource);\n\nexport { TextModelCancellationTokenSource };\n\nvar StableEditorScrollState =\n/** @class */\nfunction () {\n  function StableEditorScrollState(_visiblePosition, _visiblePositionScrollDelta) {\n    this._visiblePosition = _visiblePosition;\n    this._visiblePositionScrollDelta = _visiblePositionScrollDelta;\n  }\n\n  StableEditorScrollState.capture = function (editor) {\n    var visiblePosition = null;\n    var visiblePositionScrollDelta = 0;\n\n    if (editor.getScrollTop() !== 0) {\n      var visibleRanges = editor.getVisibleRanges();\n\n      if (visibleRanges.length > 0) {\n        visiblePosition = visibleRanges[0].getStartPosition();\n        var visiblePositionScrollTop = editor.getTopForPosition(visiblePosition.lineNumber, visiblePosition.column);\n        visiblePositionScrollDelta = editor.getScrollTop() - visiblePositionScrollTop;\n      }\n    }\n\n    return new StableEditorScrollState(visiblePosition, visiblePositionScrollDelta);\n  };\n\n  StableEditorScrollState.prototype.restore = function (editor) {\n    if (this._visiblePosition) {\n      var visiblePositionScrollTop = editor.getTopForPosition(this._visiblePosition.lineNumber, this._visiblePosition.column);\n      editor.setScrollTop(visiblePositionScrollTop + this._visiblePositionScrollDelta);\n    }\n  };\n\n  return StableEditorScrollState;\n}();\n\nexport { StableEditorScrollState };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/browser/core/editorState.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","strings","CancellationTokenSource","DisposableStore","EditorKeybindingCancellationTokenSource","EditorState","editor","flags","model","getModel","modelVersionId","format","uri","toString","getVersionId","position","getPosition","selection","getSelection","scrollLeft","getScrollLeft","scrollTop","getScrollTop","_equals","other","state","equals","equalsRange","validate","EditorStateCancellationTokenSource","_super","parent","_this","call","_listener","add","onDidChangeCursorPosition","_","cancel","onDidChangeCursorSelection","onDidScrollChange","onDidChangeModel","onDidChangeModelContent","dispose","TextModelCancellationTokenSource","onDidChangeContent","StableEditorScrollState","_visiblePosition","_visiblePositionScrollDelta","capture","visiblePosition","visiblePositionScrollDelta","visibleRanges","getVisibleRanges","length","getStartPosition","visiblePositionScrollTop","getTopForPosition","lineNumber","column","restore","setScrollTop"],"mappings":"AAAA;;;;AAIA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAF9E;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C;;AAaA,OAAO,KAAKI,OAAZ,MAAyB,iCAAzB;AACA,SAASC,uBAAT,QAAwC,sCAAxC;AACA,SAASC,eAAT,QAAgC,mCAAhC;AACA,SAASC,uCAAT,QAAwD,6BAAxD;;AACA,IAAIC,WAAW;AAAG;AAAe,YAAY;AACzC,WAASA,WAAT,CAAqBC,MAArB,EAA6BC,KAA7B,EAAoC;AAChC,SAAKA,KAAL,GAAaA,KAAb;;AACA,QAAI,CAAC,KAAKA,KAAL,GAAa;AAAE;AAAhB,UAAiC,CAArC,EAAwC;AACpC,UAAIC,KAAK,GAAGF,MAAM,CAACG,QAAP,EAAZ;AACA,WAAKC,cAAL,GAAsBF,KAAK,GAAGP,OAAO,CAACU,MAAR,CAAe,SAAf,EAA0BH,KAAK,CAACI,GAAN,CAAUC,QAAV,EAA1B,EAAgDL,KAAK,CAACM,YAAN,EAAhD,CAAH,GAA2E,IAAtG;AACH,KAHD,MAIK;AACD,WAAKJ,cAAL,GAAsB,IAAtB;AACH;;AACD,QAAI,CAAC,KAAKH,KAAL,GAAa;AAAE;AAAhB,UAAoC,CAAxC,EAA2C;AACvC,WAAKQ,QAAL,GAAgBT,MAAM,CAACU,WAAP,EAAhB;AACH,KAFD,MAGK;AACD,WAAKD,QAAL,GAAgB,IAAhB;AACH;;AACD,QAAI,CAAC,KAAKR,KAAL,GAAa;AAAE;AAAhB,UAAqC,CAAzC,EAA4C;AACxC,WAAKU,SAAL,GAAiBX,MAAM,CAACY,YAAP,EAAjB;AACH,KAFD,MAGK;AACD,WAAKD,SAAL,GAAiB,IAAjB;AACH;;AACD,QAAI,CAAC,KAAKV,KAAL,GAAa;AAAE;AAAhB,UAAkC,CAAtC,EAAyC;AACrC,WAAKY,UAAL,GAAkBb,MAAM,CAACc,aAAP,EAAlB;AACA,WAAKC,SAAL,GAAiBf,MAAM,CAACgB,YAAP,EAAjB;AACH,KAHD,MAIK;AACD,WAAKH,UAAL,GAAkB,CAAC,CAAnB;AACA,WAAKE,SAAL,GAAiB,CAAC,CAAlB;AACH;AACJ;;AACDhB,EAAAA,WAAW,CAACN,SAAZ,CAAsBwB,OAAtB,GAAgC,UAAUC,KAAV,EAAiB;AAC7C,QAAI,EAAEA,KAAK,YAAYnB,WAAnB,CAAJ,EAAqC;AACjC,aAAO,KAAP;AACH;;AACD,QAAIoB,KAAK,GAAGD,KAAZ;;AACA,QAAI,KAAKd,cAAL,KAAwBe,KAAK,CAACf,cAAlC,EAAkD;AAC9C,aAAO,KAAP;AACH;;AACD,QAAI,KAAKS,UAAL,KAAoBM,KAAK,CAACN,UAA1B,IAAwC,KAAKE,SAAL,KAAmBI,KAAK,CAACJ,SAArE,EAAgF;AAC5E,aAAO,KAAP;AACH;;AACD,QAAI,CAAC,KAAKN,QAAN,IAAkBU,KAAK,CAACV,QAAxB,IAAoC,KAAKA,QAAL,IAAiB,CAACU,KAAK,CAACV,QAA5D,IAAwE,KAAKA,QAAL,IAAiBU,KAAK,CAACV,QAAvB,IAAmC,CAAC,KAAKA,QAAL,CAAcW,MAAd,CAAqBD,KAAK,CAACV,QAA3B,CAAhH,EAAsJ;AAClJ,aAAO,KAAP;AACH;;AACD,QAAI,CAAC,KAAKE,SAAN,IAAmBQ,KAAK,CAACR,SAAzB,IAAsC,KAAKA,SAAL,IAAkB,CAACQ,KAAK,CAACR,SAA/D,IAA4E,KAAKA,SAAL,IAAkBQ,KAAK,CAACR,SAAxB,IAAqC,CAAC,KAAKA,SAAL,CAAeU,WAAf,CAA2BF,KAAK,CAACR,SAAjC,CAAtH,EAAmK;AAC/J,aAAO,KAAP;AACH;;AACD,WAAO,IAAP;AACH,GAlBD;;AAmBAZ,EAAAA,WAAW,CAACN,SAAZ,CAAsB6B,QAAtB,GAAiC,UAAUtB,MAAV,EAAkB;AAC/C,WAAO,KAAKiB,OAAL,CAAa,IAAIlB,WAAJ,CAAgBC,MAAhB,EAAwB,KAAKC,KAA7B,CAAb,CAAP;AACH,GAFD;;AAGA,SAAOF,WAAP;AACH,CAtDgC,EAAjC;;AAuDA,SAASA,WAAT;AACA;;;;;AAIA,IAAIwB,kCAAkC;AAAG;AAAe,UAAUC,MAAV,EAAkB;AACtE3C,EAAAA,SAAS,CAAC0C,kCAAD,EAAqCC,MAArC,CAAT;;AACA,WAASD,kCAAT,CAA4CvB,MAA5C,EAAoDC,KAApD,EAA2DwB,MAA3D,EAAmE;AAC/D,QAAIC,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkB3B,MAAlB,EAA0ByB,MAA1B,KAAqC,IAAjD;;AACAC,IAAAA,KAAK,CAAC1B,MAAN,GAAeA,MAAf;AACA0B,IAAAA,KAAK,CAACE,SAAN,GAAkB,IAAI/B,eAAJ,EAAlB;;AACA,QAAII,KAAK,GAAG;AAAE;AAAd,MAA8B;AAC1ByB,QAAAA,KAAK,CAACE,SAAN,CAAgBC,GAAhB,CAAoB7B,MAAM,CAAC8B,yBAAP,CAAiC,UAAUC,CAAV,EAAa;AAAE,iBAAOL,KAAK,CAACM,MAAN,EAAP;AAAwB,SAAxE,CAApB;AACH;;AACD,QAAI/B,KAAK,GAAG;AAAE;AAAd,MAA+B;AAC3ByB,QAAAA,KAAK,CAACE,SAAN,CAAgBC,GAAhB,CAAoB7B,MAAM,CAACiC,0BAAP,CAAkC,UAAUF,CAAV,EAAa;AAAE,iBAAOL,KAAK,CAACM,MAAN,EAAP;AAAwB,SAAzE,CAApB;AACH;;AACD,QAAI/B,KAAK,GAAG;AAAE;AAAd,MAA4B;AACxByB,QAAAA,KAAK,CAACE,SAAN,CAAgBC,GAAhB,CAAoB7B,MAAM,CAACkC,iBAAP,CAAyB,UAAUH,CAAV,EAAa;AAAE,iBAAOL,KAAK,CAACM,MAAN,EAAP;AAAwB,SAAhE,CAApB;AACH;;AACD,QAAI/B,KAAK,GAAG;AAAE;AAAd,MAA2B;AACvByB,QAAAA,KAAK,CAACE,SAAN,CAAgBC,GAAhB,CAAoB7B,MAAM,CAACmC,gBAAP,CAAwB,UAAUJ,CAAV,EAAa;AAAE,iBAAOL,KAAK,CAACM,MAAN,EAAP;AAAwB,SAA/D,CAApB;;AACAN,QAAAA,KAAK,CAACE,SAAN,CAAgBC,GAAhB,CAAoB7B,MAAM,CAACoC,uBAAP,CAA+B,UAAUL,CAAV,EAAa;AAAE,iBAAOL,KAAK,CAACM,MAAN,EAAP;AAAwB,SAAtE,CAApB;AACH;;AACD,WAAON,KAAP;AACH;;AACDH,EAAAA,kCAAkC,CAAC9B,SAAnC,CAA6C4C,OAA7C,GAAuD,YAAY;AAC/D,SAAKT,SAAL,CAAeS,OAAf;;AACAb,IAAAA,MAAM,CAAC/B,SAAP,CAAiB4C,OAAjB,CAAyBV,IAAzB,CAA8B,IAA9B;AACH,GAHD;;AAIA,SAAOJ,kCAAP;AACH,CA1BuD,CA0BtDzB,uCA1BsD,CAAxD;;AA2BA,SAASyB,kCAAT;AACA;;;;AAGA,IAAIe,gCAAgC;AAAG;AAAe,UAAUd,MAAV,EAAkB;AACpE3C,EAAAA,SAAS,CAACyD,gCAAD,EAAmCd,MAAnC,CAAT;;AACA,WAASc,gCAAT,CAA0CpC,KAA1C,EAAiDuB,MAAjD,EAAyD;AACrD,QAAIC,KAAK,GAAGF,MAAM,CAACG,IAAP,CAAY,IAAZ,EAAkBF,MAAlB,KAA6B,IAAzC;;AACAC,IAAAA,KAAK,CAACE,SAAN,GAAkB1B,KAAK,CAACqC,kBAAN,CAAyB,YAAY;AAAE,aAAOb,KAAK,CAACM,MAAN,EAAP;AAAwB,KAA/D,CAAlB;AACA,WAAON,KAAP;AACH;;AACDY,EAAAA,gCAAgC,CAAC7C,SAAjC,CAA2C4C,OAA3C,GAAqD,YAAY;AAC7D,SAAKT,SAAL,CAAeS,OAAf;;AACAb,IAAAA,MAAM,CAAC/B,SAAP,CAAiB4C,OAAjB,CAAyBV,IAAzB,CAA8B,IAA9B;AACH,GAHD;;AAIA,SAAOW,gCAAP;AACH,CAZqD,CAYpD1C,uBAZoD,CAAtD;;AAaA,SAAS0C,gCAAT;;AACA,IAAIE,uBAAuB;AAAG;AAAe,YAAY;AACrD,WAASA,uBAAT,CAAiCC,gBAAjC,EAAmDC,2BAAnD,EAAgF;AAC5E,SAAKD,gBAAL,GAAwBA,gBAAxB;AACA,SAAKC,2BAAL,GAAmCA,2BAAnC;AACH;;AACDF,EAAAA,uBAAuB,CAACG,OAAxB,GAAkC,UAAU3C,MAAV,EAAkB;AAChD,QAAI4C,eAAe,GAAG,IAAtB;AACA,QAAIC,0BAA0B,GAAG,CAAjC;;AACA,QAAI7C,MAAM,CAACgB,YAAP,OAA0B,CAA9B,EAAiC;AAC7B,UAAI8B,aAAa,GAAG9C,MAAM,CAAC+C,gBAAP,EAApB;;AACA,UAAID,aAAa,CAACE,MAAd,GAAuB,CAA3B,EAA8B;AAC1BJ,QAAAA,eAAe,GAAGE,aAAa,CAAC,CAAD,CAAb,CAAiBG,gBAAjB,EAAlB;AACA,YAAIC,wBAAwB,GAAGlD,MAAM,CAACmD,iBAAP,CAAyBP,eAAe,CAACQ,UAAzC,EAAqDR,eAAe,CAACS,MAArE,CAA/B;AACAR,QAAAA,0BAA0B,GAAG7C,MAAM,CAACgB,YAAP,KAAwBkC,wBAArD;AACH;AACJ;;AACD,WAAO,IAAIV,uBAAJ,CAA4BI,eAA5B,EAA6CC,0BAA7C,CAAP;AACH,GAZD;;AAaAL,EAAAA,uBAAuB,CAAC/C,SAAxB,CAAkC6D,OAAlC,GAA4C,UAAUtD,MAAV,EAAkB;AAC1D,QAAI,KAAKyC,gBAAT,EAA2B;AACvB,UAAIS,wBAAwB,GAAGlD,MAAM,CAACmD,iBAAP,CAAyB,KAAKV,gBAAL,CAAsBW,UAA/C,EAA2D,KAAKX,gBAAL,CAAsBY,MAAjF,CAA/B;AACArD,MAAAA,MAAM,CAACuD,YAAP,CAAoBL,wBAAwB,GAAG,KAAKR,2BAApD;AACH;AACJ,GALD;;AAMA,SAAOF,uBAAP;AACH,CAzB4C,EAA7C;;AA0BA,SAASA,uBAAT","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { EditorKeybindingCancellationTokenSource } from './keybindingCancellation.js';\r\nvar EditorState = /** @class */ (function () {\r\n    function EditorState(editor, flags) {\r\n        this.flags = flags;\r\n        if ((this.flags & 1 /* Value */) !== 0) {\r\n            var model = editor.getModel();\r\n            this.modelVersionId = model ? strings.format('{0}#{1}', model.uri.toString(), model.getVersionId()) : null;\r\n        }\r\n        else {\r\n            this.modelVersionId = null;\r\n        }\r\n        if ((this.flags & 4 /* Position */) !== 0) {\r\n            this.position = editor.getPosition();\r\n        }\r\n        else {\r\n            this.position = null;\r\n        }\r\n        if ((this.flags & 2 /* Selection */) !== 0) {\r\n            this.selection = editor.getSelection();\r\n        }\r\n        else {\r\n            this.selection = null;\r\n        }\r\n        if ((this.flags & 8 /* Scroll */) !== 0) {\r\n            this.scrollLeft = editor.getScrollLeft();\r\n            this.scrollTop = editor.getScrollTop();\r\n        }\r\n        else {\r\n            this.scrollLeft = -1;\r\n            this.scrollTop = -1;\r\n        }\r\n    }\r\n    EditorState.prototype._equals = function (other) {\r\n        if (!(other instanceof EditorState)) {\r\n            return false;\r\n        }\r\n        var state = other;\r\n        if (this.modelVersionId !== state.modelVersionId) {\r\n            return false;\r\n        }\r\n        if (this.scrollLeft !== state.scrollLeft || this.scrollTop !== state.scrollTop) {\r\n            return false;\r\n        }\r\n        if (!this.position && state.position || this.position && !state.position || this.position && state.position && !this.position.equals(state.position)) {\r\n            return false;\r\n        }\r\n        if (!this.selection && state.selection || this.selection && !state.selection || this.selection && state.selection && !this.selection.equalsRange(state.selection)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    EditorState.prototype.validate = function (editor) {\r\n        return this._equals(new EditorState(editor, this.flags));\r\n    };\r\n    return EditorState;\r\n}());\r\nexport { EditorState };\r\n/**\r\n * A cancellation token source that cancels when the editor changes as expressed\r\n * by the provided flags\r\n */\r\nvar EditorStateCancellationTokenSource = /** @class */ (function (_super) {\r\n    __extends(EditorStateCancellationTokenSource, _super);\r\n    function EditorStateCancellationTokenSource(editor, flags, parent) {\r\n        var _this = _super.call(this, editor, parent) || this;\r\n        _this.editor = editor;\r\n        _this._listener = new DisposableStore();\r\n        if (flags & 4 /* Position */) {\r\n            _this._listener.add(editor.onDidChangeCursorPosition(function (_) { return _this.cancel(); }));\r\n        }\r\n        if (flags & 2 /* Selection */) {\r\n            _this._listener.add(editor.onDidChangeCursorSelection(function (_) { return _this.cancel(); }));\r\n        }\r\n        if (flags & 8 /* Scroll */) {\r\n            _this._listener.add(editor.onDidScrollChange(function (_) { return _this.cancel(); }));\r\n        }\r\n        if (flags & 1 /* Value */) {\r\n            _this._listener.add(editor.onDidChangeModel(function (_) { return _this.cancel(); }));\r\n            _this._listener.add(editor.onDidChangeModelContent(function (_) { return _this.cancel(); }));\r\n        }\r\n        return _this;\r\n    }\r\n    EditorStateCancellationTokenSource.prototype.dispose = function () {\r\n        this._listener.dispose();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    return EditorStateCancellationTokenSource;\r\n}(EditorKeybindingCancellationTokenSource));\r\nexport { EditorStateCancellationTokenSource };\r\n/**\r\n * A cancellation token source that cancels when the provided model changes\r\n */\r\nvar TextModelCancellationTokenSource = /** @class */ (function (_super) {\r\n    __extends(TextModelCancellationTokenSource, _super);\r\n    function TextModelCancellationTokenSource(model, parent) {\r\n        var _this = _super.call(this, parent) || this;\r\n        _this._listener = model.onDidChangeContent(function () { return _this.cancel(); });\r\n        return _this;\r\n    }\r\n    TextModelCancellationTokenSource.prototype.dispose = function () {\r\n        this._listener.dispose();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    return TextModelCancellationTokenSource;\r\n}(CancellationTokenSource));\r\nexport { TextModelCancellationTokenSource };\r\nvar StableEditorScrollState = /** @class */ (function () {\r\n    function StableEditorScrollState(_visiblePosition, _visiblePositionScrollDelta) {\r\n        this._visiblePosition = _visiblePosition;\r\n        this._visiblePositionScrollDelta = _visiblePositionScrollDelta;\r\n    }\r\n    StableEditorScrollState.capture = function (editor) {\r\n        var visiblePosition = null;\r\n        var visiblePositionScrollDelta = 0;\r\n        if (editor.getScrollTop() !== 0) {\r\n            var visibleRanges = editor.getVisibleRanges();\r\n            if (visibleRanges.length > 0) {\r\n                visiblePosition = visibleRanges[0].getStartPosition();\r\n                var visiblePositionScrollTop = editor.getTopForPosition(visiblePosition.lineNumber, visiblePosition.column);\r\n                visiblePositionScrollDelta = editor.getScrollTop() - visiblePositionScrollTop;\r\n            }\r\n        }\r\n        return new StableEditorScrollState(visiblePosition, visiblePositionScrollDelta);\r\n    };\r\n    StableEditorScrollState.prototype.restore = function (editor) {\r\n        if (this._visiblePosition) {\r\n            var visiblePositionScrollTop = editor.getTopForPosition(this._visiblePosition.lineNumber, this._visiblePosition.column);\r\n            editor.setScrollTop(visiblePositionScrollTop + this._visiblePositionScrollDelta);\r\n        }\r\n    };\r\n    return StableEditorScrollState;\r\n}());\r\nexport { StableEditorScrollState };\r\n"]},"metadata":{},"sourceType":"module"}