{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as dom from '../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { PointerHandler } from '../controller/pointerHandler.js';\nimport { TextAreaHandler } from '../controller/textAreaHandler.js';\nimport { ViewController } from './viewController.js';\nimport { ViewOutgoingEvents } from './viewOutgoingEvents.js';\nimport { ContentViewOverlays, MarginViewOverlays } from './viewOverlays.js';\nimport { PartFingerprints } from './viewPart.js';\nimport { ViewContentWidgets } from '../viewParts/contentWidgets/contentWidgets.js';\nimport { CurrentLineHighlightOverlay, CurrentLineMarginHighlightOverlay } from '../viewParts/currentLineHighlight/currentLineHighlight.js';\nimport { DecorationsOverlay } from '../viewParts/decorations/decorations.js';\nimport { EditorScrollbar } from '../viewParts/editorScrollbar/editorScrollbar.js';\nimport { GlyphMarginOverlay } from '../viewParts/glyphMargin/glyphMargin.js';\nimport { IndentGuidesOverlay } from '../viewParts/indentGuides/indentGuides.js';\nimport { LineNumbersOverlay } from '../viewParts/lineNumbers/lineNumbers.js';\nimport { ViewLines } from '../viewParts/lines/viewLines.js';\nimport { LinesDecorationsOverlay } from '../viewParts/linesDecorations/linesDecorations.js';\nimport { Margin } from '../viewParts/margin/margin.js';\nimport { MarginViewLineDecorationsOverlay } from '../viewParts/marginDecorations/marginDecorations.js';\nimport { Minimap } from '../viewParts/minimap/minimap.js';\nimport { ViewOverlayWidgets } from '../viewParts/overlayWidgets/overlayWidgets.js';\nimport { DecorationsOverviewRuler } from '../viewParts/overviewRuler/decorationsOverviewRuler.js';\nimport { OverviewRuler } from '../viewParts/overviewRuler/overviewRuler.js';\nimport { Rulers } from '../viewParts/rulers/rulers.js';\nimport { ScrollDecorationViewPart } from '../viewParts/scrollDecoration/scrollDecoration.js';\nimport { SelectionsOverlay } from '../viewParts/selections/selections.js';\nimport { ViewCursors } from '../viewParts/viewCursors/viewCursors.js';\nimport { ViewZones } from '../viewParts/viewZones/viewZones.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { RenderingContext } from '../../common/view/renderingContext.js';\nimport { ViewContext } from '../../common/view/viewContext.js';\nimport { ViewEventDispatcher } from '../../common/view/viewEventDispatcher.js';\nimport * as viewEvents from '../../common/view/viewEvents.js';\nimport { ViewportData } from '../../common/viewLayout/viewLinesViewportData.js';\nimport { ViewEventHandler } from '../../common/viewModel/viewEventHandler.js';\nimport { getThemeTypeSelector } from '../../../platform/theme/common/themeService.js';\nimport { PointerHandlerLastRenderData } from '../controller/mouseTarget.js';\n\nvar View =\n/** @class */\nfunction (_super) {\n  __extends(View, _super);\n\n  function View(commandDelegate, configuration, themeService, model, cursor, outgoingEvents) {\n    var _this = _super.call(this) || this;\n\n    _this._cursor = cursor;\n    _this._renderAnimationFrame = null;\n    _this.outgoingEvents = outgoingEvents;\n    var viewController = new ViewController(configuration, model, _this.outgoingEvents, commandDelegate); // The event dispatcher will always go through _renderOnce before dispatching any events\n\n    _this.eventDispatcher = new ViewEventDispatcher(function (callback) {\n      return _this._renderOnce(callback);\n    }); // Ensure the view is the first event handler in order to update the layout\n\n    _this.eventDispatcher.addEventHandler(_this); // The view context is passed on to most classes (basically to reduce param. counts in ctors)\n\n\n    _this._context = new ViewContext(configuration, themeService.getTheme(), model, _this.eventDispatcher);\n\n    _this._register(themeService.onThemeChange(function (theme) {\n      _this._context.theme = theme;\n\n      _this.eventDispatcher.emit(new viewEvents.ViewThemeChangedEvent());\n\n      _this.render(true, false);\n    }));\n\n    _this.viewParts = []; // Keyboard handler\n\n    _this._textAreaHandler = new TextAreaHandler(_this._context, viewController, _this.createTextAreaHandlerHelper());\n\n    _this.viewParts.push(_this._textAreaHandler); // These two dom nodes must be constructed up front, since references are needed in the layout provider (scrolling & co.)\n\n\n    _this.linesContent = createFastDomNode(document.createElement('div'));\n\n    _this.linesContent.setClassName('lines-content' + ' monaco-editor-background');\n\n    _this.linesContent.setPosition('absolute');\n\n    _this.domNode = createFastDomNode(document.createElement('div'));\n\n    _this.domNode.setClassName(_this.getEditorClassName());\n\n    _this.overflowGuardContainer = createFastDomNode(document.createElement('div'));\n    PartFingerprints.write(_this.overflowGuardContainer, 3\n    /* OverflowGuard */\n    );\n\n    _this.overflowGuardContainer.setClassName('overflow-guard');\n\n    _this._scrollbar = new EditorScrollbar(_this._context, _this.linesContent, _this.domNode, _this.overflowGuardContainer);\n\n    _this.viewParts.push(_this._scrollbar); // View Lines\n\n\n    _this.viewLines = new ViewLines(_this._context, _this.linesContent); // View Zones\n\n    _this.viewZones = new ViewZones(_this._context);\n\n    _this.viewParts.push(_this.viewZones); // Decorations overview ruler\n\n\n    var decorationsOverviewRuler = new DecorationsOverviewRuler(_this._context);\n\n    _this.viewParts.push(decorationsOverviewRuler);\n\n    var scrollDecoration = new ScrollDecorationViewPart(_this._context);\n\n    _this.viewParts.push(scrollDecoration);\n\n    var contentViewOverlays = new ContentViewOverlays(_this._context);\n\n    _this.viewParts.push(contentViewOverlays);\n\n    contentViewOverlays.addDynamicOverlay(new CurrentLineHighlightOverlay(_this._context));\n    contentViewOverlays.addDynamicOverlay(new SelectionsOverlay(_this._context));\n    contentViewOverlays.addDynamicOverlay(new IndentGuidesOverlay(_this._context));\n    contentViewOverlays.addDynamicOverlay(new DecorationsOverlay(_this._context));\n    var marginViewOverlays = new MarginViewOverlays(_this._context);\n\n    _this.viewParts.push(marginViewOverlays);\n\n    marginViewOverlays.addDynamicOverlay(new CurrentLineMarginHighlightOverlay(_this._context));\n    marginViewOverlays.addDynamicOverlay(new GlyphMarginOverlay(_this._context));\n    marginViewOverlays.addDynamicOverlay(new MarginViewLineDecorationsOverlay(_this._context));\n    marginViewOverlays.addDynamicOverlay(new LinesDecorationsOverlay(_this._context));\n    marginViewOverlays.addDynamicOverlay(new LineNumbersOverlay(_this._context));\n    var margin = new Margin(_this._context);\n    margin.getDomNode().appendChild(_this.viewZones.marginDomNode);\n    margin.getDomNode().appendChild(marginViewOverlays.getDomNode());\n\n    _this.viewParts.push(margin); // Content widgets\n\n\n    _this.contentWidgets = new ViewContentWidgets(_this._context, _this.domNode);\n\n    _this.viewParts.push(_this.contentWidgets);\n\n    _this.viewCursors = new ViewCursors(_this._context);\n\n    _this.viewParts.push(_this.viewCursors); // Overlay widgets\n\n\n    _this.overlayWidgets = new ViewOverlayWidgets(_this._context);\n\n    _this.viewParts.push(_this.overlayWidgets);\n\n    var rulers = new Rulers(_this._context);\n\n    _this.viewParts.push(rulers);\n\n    var minimap = new Minimap(_this._context);\n\n    _this.viewParts.push(minimap); // -------------- Wire dom nodes up\n\n\n    if (decorationsOverviewRuler) {\n      var overviewRulerData = _this._scrollbar.getOverviewRulerLayoutInfo();\n\n      overviewRulerData.parent.insertBefore(decorationsOverviewRuler.getDomNode(), overviewRulerData.insertBefore);\n    }\n\n    _this.linesContent.appendChild(contentViewOverlays.getDomNode());\n\n    _this.linesContent.appendChild(rulers.domNode);\n\n    _this.linesContent.appendChild(_this.viewZones.domNode);\n\n    _this.linesContent.appendChild(_this.viewLines.getDomNode());\n\n    _this.linesContent.appendChild(_this.contentWidgets.domNode);\n\n    _this.linesContent.appendChild(_this.viewCursors.getDomNode());\n\n    _this.overflowGuardContainer.appendChild(margin.getDomNode());\n\n    _this.overflowGuardContainer.appendChild(_this._scrollbar.getDomNode());\n\n    _this.overflowGuardContainer.appendChild(scrollDecoration.getDomNode());\n\n    _this.overflowGuardContainer.appendChild(_this._textAreaHandler.textArea);\n\n    _this.overflowGuardContainer.appendChild(_this._textAreaHandler.textAreaCover);\n\n    _this.overflowGuardContainer.appendChild(_this.overlayWidgets.getDomNode());\n\n    _this.overflowGuardContainer.appendChild(minimap.getDomNode());\n\n    _this.domNode.appendChild(_this.overflowGuardContainer);\n\n    _this.domNode.appendChild(_this.contentWidgets.overflowingContentWidgetsDomNode);\n\n    _this._applyLayout(); // Pointer handler\n\n\n    _this.pointerHandler = _this._register(new PointerHandler(_this._context, viewController, _this.createPointerHandlerHelper()));\n\n    _this._register(model.addEventListener(function (events) {\n      _this.eventDispatcher.emitMany(events);\n    }));\n\n    _this._register(_this._cursor.addEventListener(function (events) {\n      _this.eventDispatcher.emitMany(events);\n    }));\n\n    return _this;\n  }\n\n  View.prototype._flushAccumulatedAndRenderNow = function () {\n    this._renderNow();\n  };\n\n  View.prototype.createPointerHandlerHelper = function () {\n    var _this = this;\n\n    return {\n      viewDomNode: this.domNode.domNode,\n      linesContentDomNode: this.linesContent.domNode,\n      focusTextArea: function () {\n        _this.focus();\n      },\n      getLastRenderData: function () {\n        var lastViewCursorsRenderData = _this.viewCursors.getLastRenderData() || [];\n\n        var lastTextareaPosition = _this._textAreaHandler.getLastRenderData();\n\n        return new PointerHandlerLastRenderData(lastViewCursorsRenderData, lastTextareaPosition);\n      },\n      shouldSuppressMouseDownOnViewZone: function (viewZoneId) {\n        return _this.viewZones.shouldSuppressMouseDownOnViewZone(viewZoneId);\n      },\n      shouldSuppressMouseDownOnWidget: function (widgetId) {\n        return _this.contentWidgets.shouldSuppressMouseDownOnWidget(widgetId);\n      },\n      getPositionFromDOMInfo: function (spanNode, offset) {\n        _this._flushAccumulatedAndRenderNow();\n\n        return _this.viewLines.getPositionFromDOMInfo(spanNode, offset);\n      },\n      visibleRangeForPosition: function (lineNumber, column) {\n        _this._flushAccumulatedAndRenderNow();\n\n        return _this.viewLines.visibleRangeForPosition(new Position(lineNumber, column));\n      },\n      getLineWidth: function (lineNumber) {\n        _this._flushAccumulatedAndRenderNow();\n\n        return _this.viewLines.getLineWidth(lineNumber);\n      }\n    };\n  };\n\n  View.prototype.createTextAreaHandlerHelper = function () {\n    var _this = this;\n\n    return {\n      visibleRangeForPositionRelativeToEditor: function (lineNumber, column) {\n        _this._flushAccumulatedAndRenderNow();\n\n        return _this.viewLines.visibleRangeForPosition(new Position(lineNumber, column));\n      }\n    };\n  };\n\n  View.prototype._applyLayout = function () {\n    var options = this._context.configuration.options;\n    var layoutInfo = options.get(107\n    /* layoutInfo */\n    );\n    this.domNode.setWidth(layoutInfo.width);\n    this.domNode.setHeight(layoutInfo.height);\n    this.overflowGuardContainer.setWidth(layoutInfo.width);\n    this.overflowGuardContainer.setHeight(layoutInfo.height);\n    this.linesContent.setWidth(1000000);\n    this.linesContent.setHeight(1000000);\n  };\n\n  View.prototype.getEditorClassName = function () {\n    var focused = this._textAreaHandler.isFocused() ? ' focused' : '';\n    return this._context.configuration.options.get(104\n    /* editorClassName */\n    ) + ' ' + getThemeTypeSelector(this._context.theme.type) + focused;\n  }; // --- begin event handlers\n\n\n  View.prototype.onConfigurationChanged = function (e) {\n    this.domNode.setClassName(this.getEditorClassName());\n\n    this._applyLayout();\n\n    return false;\n  };\n\n  View.prototype.onContentSizeChanged = function (e) {\n    this.outgoingEvents.emitContentSizeChange(e);\n    return false;\n  };\n\n  View.prototype.onFocusChanged = function (e) {\n    this.domNode.setClassName(this.getEditorClassName());\n\n    this._context.model.setHasFocus(e.isFocused);\n\n    if (e.isFocused) {\n      this.outgoingEvents.emitViewFocusGained();\n    } else {\n      this.outgoingEvents.emitViewFocusLost();\n    }\n\n    return false;\n  };\n\n  View.prototype.onScrollChanged = function (e) {\n    this.outgoingEvents.emitScrollChanged(e);\n    return false;\n  };\n\n  View.prototype.onThemeChanged = function (e) {\n    this.domNode.setClassName(this.getEditorClassName());\n    return false;\n  }; // --- end event handlers\n\n\n  View.prototype.dispose = function () {\n    if (this._renderAnimationFrame !== null) {\n      this._renderAnimationFrame.dispose();\n\n      this._renderAnimationFrame = null;\n    }\n\n    this.eventDispatcher.removeEventHandler(this);\n    this.outgoingEvents.dispose();\n    this.viewLines.dispose(); // Destroy view parts\n\n    for (var i = 0, len = this.viewParts.length; i < len; i++) {\n      this.viewParts[i].dispose();\n    }\n\n    this.viewParts = [];\n\n    _super.prototype.dispose.call(this);\n  };\n\n  View.prototype._renderOnce = function (callback) {\n    var r = safeInvokeNoArg(callback);\n\n    this._scheduleRender();\n\n    return r;\n  };\n\n  View.prototype._scheduleRender = function () {\n    if (this._renderAnimationFrame === null) {\n      this._renderAnimationFrame = dom.runAtThisOrScheduleAtNextAnimationFrame(this._onRenderScheduled.bind(this), 100);\n    }\n  };\n\n  View.prototype._onRenderScheduled = function () {\n    this._renderAnimationFrame = null;\n\n    this._flushAccumulatedAndRenderNow();\n  };\n\n  View.prototype._renderNow = function () {\n    var _this = this;\n\n    safeInvokeNoArg(function () {\n      return _this._actualRender();\n    });\n  };\n\n  View.prototype._getViewPartsToRender = function () {\n    var result = [],\n        resultLen = 0;\n\n    for (var i = 0, len = this.viewParts.length; i < len; i++) {\n      var viewPart = this.viewParts[i];\n\n      if (viewPart.shouldRender()) {\n        result[resultLen++] = viewPart;\n      }\n    }\n\n    return result;\n  };\n\n  View.prototype._actualRender = function () {\n    if (!dom.isInDOM(this.domNode.domNode)) {\n      return;\n    }\n\n    var viewPartsToRender = this._getViewPartsToRender();\n\n    if (!this.viewLines.shouldRender() && viewPartsToRender.length === 0) {\n      // Nothing to render\n      return;\n    }\n\n    var partialViewportData = this._context.viewLayout.getLinesViewportData();\n\n    this._context.model.setViewport(partialViewportData.startLineNumber, partialViewportData.endLineNumber, partialViewportData.centeredLineNumber);\n\n    var viewportData = new ViewportData(this._cursor.getViewSelections(), partialViewportData, this._context.viewLayout.getWhitespaceViewportData(), this._context.model);\n\n    if (this.contentWidgets.shouldRender()) {\n      // Give the content widgets a chance to set their max width before a possible synchronous layout\n      this.contentWidgets.onBeforeRender(viewportData);\n    }\n\n    if (this.viewLines.shouldRender()) {\n      this.viewLines.renderText(viewportData);\n      this.viewLines.onDidRender(); // Rendering of viewLines might cause scroll events to occur, so collect view parts to render again\n\n      viewPartsToRender = this._getViewPartsToRender();\n    }\n\n    var renderingContext = new RenderingContext(this._context.viewLayout, viewportData, this.viewLines); // Render the rest of the parts\n\n    for (var i = 0, len = viewPartsToRender.length; i < len; i++) {\n      var viewPart = viewPartsToRender[i];\n      viewPart.prepareRender(renderingContext);\n    }\n\n    for (var i = 0, len = viewPartsToRender.length; i < len; i++) {\n      var viewPart = viewPartsToRender[i];\n      viewPart.render(renderingContext);\n      viewPart.onDidRender();\n    }\n  }; // --- BEGIN CodeEditor helpers\n\n\n  View.prototype.delegateVerticalScrollbarMouseDown = function (browserEvent) {\n    this._scrollbar.delegateVerticalScrollbarMouseDown(browserEvent);\n  };\n\n  View.prototype.restoreState = function (scrollPosition) {\n    this._context.viewLayout.setScrollPositionNow({\n      scrollTop: scrollPosition.scrollTop\n    });\n\n    this._context.model.tokenizeViewport();\n\n    this._renderNow();\n\n    this.viewLines.updateLineWidths();\n\n    this._context.viewLayout.setScrollPositionNow({\n      scrollLeft: scrollPosition.scrollLeft\n    });\n  };\n\n  View.prototype.getOffsetForColumn = function (modelLineNumber, modelColumn) {\n    var modelPosition = this._context.model.validateModelPosition({\n      lineNumber: modelLineNumber,\n      column: modelColumn\n    });\n\n    var viewPosition = this._context.model.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n\n    this._flushAccumulatedAndRenderNow();\n\n    var visibleRange = this.viewLines.visibleRangeForPosition(new Position(viewPosition.lineNumber, viewPosition.column));\n\n    if (!visibleRange) {\n      return -1;\n    }\n\n    return visibleRange.left;\n  };\n\n  View.prototype.getTargetAtClientPoint = function (clientX, clientY) {\n    var mouseTarget = this.pointerHandler.getTargetAtClientPoint(clientX, clientY);\n\n    if (!mouseTarget) {\n      return null;\n    }\n\n    return ViewOutgoingEvents.convertViewToModelMouseTarget(mouseTarget, this._context.model.coordinatesConverter);\n  };\n\n  View.prototype.createOverviewRuler = function (cssClassName) {\n    return new OverviewRuler(this._context, cssClassName);\n  };\n\n  View.prototype.change = function (callback) {\n    var _this = this;\n\n    return this._renderOnce(function () {\n      var zonesHaveChanged = _this.viewZones.changeViewZones(callback);\n\n      if (zonesHaveChanged) {\n        _this._context.viewLayout.onHeightMaybeChanged();\n\n        _this._context.privateViewEventBus.emit(new viewEvents.ViewZonesChangedEvent());\n      }\n\n      return zonesHaveChanged;\n    });\n  };\n\n  View.prototype.render = function (now, everything) {\n    if (everything) {\n      // Force everything to render...\n      this.viewLines.forceShouldRender();\n\n      for (var i = 0, len = this.viewParts.length; i < len; i++) {\n        var viewPart = this.viewParts[i];\n        viewPart.forceShouldRender();\n      }\n    }\n\n    if (now) {\n      this._flushAccumulatedAndRenderNow();\n    } else {\n      this._scheduleRender();\n    }\n  };\n\n  View.prototype.focus = function () {\n    this._textAreaHandler.focusTextArea();\n  };\n\n  View.prototype.isFocused = function () {\n    return this._textAreaHandler.isFocused();\n  };\n\n  View.prototype.setAriaOptions = function (options) {\n    this._textAreaHandler.setAriaOptions(options);\n  };\n\n  View.prototype.addContentWidget = function (widgetData) {\n    this.contentWidgets.addWidget(widgetData.widget);\n    this.layoutContentWidget(widgetData);\n\n    this._scheduleRender();\n  };\n\n  View.prototype.layoutContentWidget = function (widgetData) {\n    var newRange = widgetData.position ? widgetData.position.range || null : null;\n\n    if (newRange === null) {\n      var newPosition = widgetData.position ? widgetData.position.position : null;\n\n      if (newPosition !== null) {\n        newRange = new Range(newPosition.lineNumber, newPosition.column, newPosition.lineNumber, newPosition.column);\n      }\n    }\n\n    var newPreference = widgetData.position ? widgetData.position.preference : null;\n    this.contentWidgets.setWidgetPosition(widgetData.widget, newRange, newPreference);\n\n    this._scheduleRender();\n  };\n\n  View.prototype.removeContentWidget = function (widgetData) {\n    this.contentWidgets.removeWidget(widgetData.widget);\n\n    this._scheduleRender();\n  };\n\n  View.prototype.addOverlayWidget = function (widgetData) {\n    this.overlayWidgets.addWidget(widgetData.widget);\n    this.layoutOverlayWidget(widgetData);\n\n    this._scheduleRender();\n  };\n\n  View.prototype.layoutOverlayWidget = function (widgetData) {\n    var newPreference = widgetData.position ? widgetData.position.preference : null;\n    var shouldRender = this.overlayWidgets.setWidgetPosition(widgetData.widget, newPreference);\n\n    if (shouldRender) {\n      this._scheduleRender();\n    }\n  };\n\n  View.prototype.removeOverlayWidget = function (widgetData) {\n    this.overlayWidgets.removeWidget(widgetData.widget);\n\n    this._scheduleRender();\n  };\n\n  return View;\n}(ViewEventHandler);\n\nexport { View };\n\nfunction safeInvokeNoArg(func) {\n  try {\n    return func();\n  } catch (e) {\n    onUnexpectedError(e);\n  }\n}","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/browser/view/viewImpl.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","dom","createFastDomNode","onUnexpectedError","PointerHandler","TextAreaHandler","ViewController","ViewOutgoingEvents","ContentViewOverlays","MarginViewOverlays","PartFingerprints","ViewContentWidgets","CurrentLineHighlightOverlay","CurrentLineMarginHighlightOverlay","DecorationsOverlay","EditorScrollbar","GlyphMarginOverlay","IndentGuidesOverlay","LineNumbersOverlay","ViewLines","LinesDecorationsOverlay","Margin","MarginViewLineDecorationsOverlay","Minimap","ViewOverlayWidgets","DecorationsOverviewRuler","OverviewRuler","Rulers","ScrollDecorationViewPart","SelectionsOverlay","ViewCursors","ViewZones","Position","Range","RenderingContext","ViewContext","ViewEventDispatcher","viewEvents","ViewportData","ViewEventHandler","getThemeTypeSelector","PointerHandlerLastRenderData","View","_super","commandDelegate","configuration","themeService","model","cursor","outgoingEvents","_this","call","_cursor","_renderAnimationFrame","viewController","eventDispatcher","callback","_renderOnce","addEventHandler","_context","getTheme","_register","onThemeChange","theme","emit","ViewThemeChangedEvent","render","viewParts","_textAreaHandler","createTextAreaHandlerHelper","push","linesContent","document","createElement","setClassName","setPosition","domNode","getEditorClassName","overflowGuardContainer","write","_scrollbar","viewLines","viewZones","decorationsOverviewRuler","scrollDecoration","contentViewOverlays","addDynamicOverlay","marginViewOverlays","margin","getDomNode","appendChild","marginDomNode","contentWidgets","viewCursors","overlayWidgets","rulers","minimap","overviewRulerData","getOverviewRulerLayoutInfo","parent","insertBefore","textArea","textAreaCover","overflowingContentWidgetsDomNode","_applyLayout","pointerHandler","createPointerHandlerHelper","addEventListener","events","emitMany","_flushAccumulatedAndRenderNow","_renderNow","viewDomNode","linesContentDomNode","focusTextArea","focus","getLastRenderData","lastViewCursorsRenderData","lastTextareaPosition","shouldSuppressMouseDownOnViewZone","viewZoneId","shouldSuppressMouseDownOnWidget","widgetId","getPositionFromDOMInfo","spanNode","offset","visibleRangeForPosition","lineNumber","column","getLineWidth","visibleRangeForPositionRelativeToEditor","options","layoutInfo","get","setWidth","width","setHeight","height","focused","isFocused","type","onConfigurationChanged","e","onContentSizeChanged","emitContentSizeChange","onFocusChanged","setHasFocus","emitViewFocusGained","emitViewFocusLost","onScrollChanged","emitScrollChanged","onThemeChanged","dispose","removeEventHandler","i","len","length","r","safeInvokeNoArg","_scheduleRender","runAtThisOrScheduleAtNextAnimationFrame","_onRenderScheduled","bind","_actualRender","_getViewPartsToRender","result","resultLen","viewPart","shouldRender","isInDOM","viewPartsToRender","partialViewportData","viewLayout","getLinesViewportData","setViewport","startLineNumber","endLineNumber","centeredLineNumber","viewportData","getViewSelections","getWhitespaceViewportData","onBeforeRender","renderText","onDidRender","renderingContext","prepareRender","delegateVerticalScrollbarMouseDown","browserEvent","restoreState","scrollPosition","setScrollPositionNow","scrollTop","tokenizeViewport","updateLineWidths","scrollLeft","getOffsetForColumn","modelLineNumber","modelColumn","modelPosition","validateModelPosition","viewPosition","coordinatesConverter","convertModelPositionToViewPosition","visibleRange","left","getTargetAtClientPoint","clientX","clientY","mouseTarget","convertViewToModelMouseTarget","createOverviewRuler","cssClassName","change","zonesHaveChanged","changeViewZones","onHeightMaybeChanged","privateViewEventBus","ViewZonesChangedEvent","now","everything","forceShouldRender","setAriaOptions","addContentWidget","widgetData","addWidget","widget","layoutContentWidget","newRange","position","range","newPosition","newPreference","preference","setWidgetPosition","removeContentWidget","removeWidget","addOverlayWidget","layoutOverlayWidget","removeOverlayWidget","func"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { PointerHandler } from '../controller/pointerHandler.js';\r\nimport { TextAreaHandler } from '../controller/textAreaHandler.js';\r\nimport { ViewController } from './viewController.js';\r\nimport { ViewOutgoingEvents } from './viewOutgoingEvents.js';\r\nimport { ContentViewOverlays, MarginViewOverlays } from './viewOverlays.js';\r\nimport { PartFingerprints } from './viewPart.js';\r\nimport { ViewContentWidgets } from '../viewParts/contentWidgets/contentWidgets.js';\r\nimport { CurrentLineHighlightOverlay, CurrentLineMarginHighlightOverlay } from '../viewParts/currentLineHighlight/currentLineHighlight.js';\r\nimport { DecorationsOverlay } from '../viewParts/decorations/decorations.js';\r\nimport { EditorScrollbar } from '../viewParts/editorScrollbar/editorScrollbar.js';\r\nimport { GlyphMarginOverlay } from '../viewParts/glyphMargin/glyphMargin.js';\r\nimport { IndentGuidesOverlay } from '../viewParts/indentGuides/indentGuides.js';\r\nimport { LineNumbersOverlay } from '../viewParts/lineNumbers/lineNumbers.js';\r\nimport { ViewLines } from '../viewParts/lines/viewLines.js';\r\nimport { LinesDecorationsOverlay } from '../viewParts/linesDecorations/linesDecorations.js';\r\nimport { Margin } from '../viewParts/margin/margin.js';\r\nimport { MarginViewLineDecorationsOverlay } from '../viewParts/marginDecorations/marginDecorations.js';\r\nimport { Minimap } from '../viewParts/minimap/minimap.js';\r\nimport { ViewOverlayWidgets } from '../viewParts/overlayWidgets/overlayWidgets.js';\r\nimport { DecorationsOverviewRuler } from '../viewParts/overviewRuler/decorationsOverviewRuler.js';\r\nimport { OverviewRuler } from '../viewParts/overviewRuler/overviewRuler.js';\r\nimport { Rulers } from '../viewParts/rulers/rulers.js';\r\nimport { ScrollDecorationViewPart } from '../viewParts/scrollDecoration/scrollDecoration.js';\r\nimport { SelectionsOverlay } from '../viewParts/selections/selections.js';\r\nimport { ViewCursors } from '../viewParts/viewCursors/viewCursors.js';\r\nimport { ViewZones } from '../viewParts/viewZones/viewZones.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { RenderingContext } from '../../common/view/renderingContext.js';\r\nimport { ViewContext } from '../../common/view/viewContext.js';\r\nimport { ViewEventDispatcher } from '../../common/view/viewEventDispatcher.js';\r\nimport * as viewEvents from '../../common/view/viewEvents.js';\r\nimport { ViewportData } from '../../common/viewLayout/viewLinesViewportData.js';\r\nimport { ViewEventHandler } from '../../common/viewModel/viewEventHandler.js';\r\nimport { getThemeTypeSelector } from '../../../platform/theme/common/themeService.js';\r\nimport { PointerHandlerLastRenderData } from '../controller/mouseTarget.js';\r\nvar View = /** @class */ (function (_super) {\r\n    __extends(View, _super);\r\n    function View(commandDelegate, configuration, themeService, model, cursor, outgoingEvents) {\r\n        var _this = _super.call(this) || this;\r\n        _this._cursor = cursor;\r\n        _this._renderAnimationFrame = null;\r\n        _this.outgoingEvents = outgoingEvents;\r\n        var viewController = new ViewController(configuration, model, _this.outgoingEvents, commandDelegate);\r\n        // The event dispatcher will always go through _renderOnce before dispatching any events\r\n        _this.eventDispatcher = new ViewEventDispatcher(function (callback) { return _this._renderOnce(callback); });\r\n        // Ensure the view is the first event handler in order to update the layout\r\n        _this.eventDispatcher.addEventHandler(_this);\r\n        // The view context is passed on to most classes (basically to reduce param. counts in ctors)\r\n        _this._context = new ViewContext(configuration, themeService.getTheme(), model, _this.eventDispatcher);\r\n        _this._register(themeService.onThemeChange(function (theme) {\r\n            _this._context.theme = theme;\r\n            _this.eventDispatcher.emit(new viewEvents.ViewThemeChangedEvent());\r\n            _this.render(true, false);\r\n        }));\r\n        _this.viewParts = [];\r\n        // Keyboard handler\r\n        _this._textAreaHandler = new TextAreaHandler(_this._context, viewController, _this.createTextAreaHandlerHelper());\r\n        _this.viewParts.push(_this._textAreaHandler);\r\n        // These two dom nodes must be constructed up front, since references are needed in the layout provider (scrolling & co.)\r\n        _this.linesContent = createFastDomNode(document.createElement('div'));\r\n        _this.linesContent.setClassName('lines-content' + ' monaco-editor-background');\r\n        _this.linesContent.setPosition('absolute');\r\n        _this.domNode = createFastDomNode(document.createElement('div'));\r\n        _this.domNode.setClassName(_this.getEditorClassName());\r\n        _this.overflowGuardContainer = createFastDomNode(document.createElement('div'));\r\n        PartFingerprints.write(_this.overflowGuardContainer, 3 /* OverflowGuard */);\r\n        _this.overflowGuardContainer.setClassName('overflow-guard');\r\n        _this._scrollbar = new EditorScrollbar(_this._context, _this.linesContent, _this.domNode, _this.overflowGuardContainer);\r\n        _this.viewParts.push(_this._scrollbar);\r\n        // View Lines\r\n        _this.viewLines = new ViewLines(_this._context, _this.linesContent);\r\n        // View Zones\r\n        _this.viewZones = new ViewZones(_this._context);\r\n        _this.viewParts.push(_this.viewZones);\r\n        // Decorations overview ruler\r\n        var decorationsOverviewRuler = new DecorationsOverviewRuler(_this._context);\r\n        _this.viewParts.push(decorationsOverviewRuler);\r\n        var scrollDecoration = new ScrollDecorationViewPart(_this._context);\r\n        _this.viewParts.push(scrollDecoration);\r\n        var contentViewOverlays = new ContentViewOverlays(_this._context);\r\n        _this.viewParts.push(contentViewOverlays);\r\n        contentViewOverlays.addDynamicOverlay(new CurrentLineHighlightOverlay(_this._context));\r\n        contentViewOverlays.addDynamicOverlay(new SelectionsOverlay(_this._context));\r\n        contentViewOverlays.addDynamicOverlay(new IndentGuidesOverlay(_this._context));\r\n        contentViewOverlays.addDynamicOverlay(new DecorationsOverlay(_this._context));\r\n        var marginViewOverlays = new MarginViewOverlays(_this._context);\r\n        _this.viewParts.push(marginViewOverlays);\r\n        marginViewOverlays.addDynamicOverlay(new CurrentLineMarginHighlightOverlay(_this._context));\r\n        marginViewOverlays.addDynamicOverlay(new GlyphMarginOverlay(_this._context));\r\n        marginViewOverlays.addDynamicOverlay(new MarginViewLineDecorationsOverlay(_this._context));\r\n        marginViewOverlays.addDynamicOverlay(new LinesDecorationsOverlay(_this._context));\r\n        marginViewOverlays.addDynamicOverlay(new LineNumbersOverlay(_this._context));\r\n        var margin = new Margin(_this._context);\r\n        margin.getDomNode().appendChild(_this.viewZones.marginDomNode);\r\n        margin.getDomNode().appendChild(marginViewOverlays.getDomNode());\r\n        _this.viewParts.push(margin);\r\n        // Content widgets\r\n        _this.contentWidgets = new ViewContentWidgets(_this._context, _this.domNode);\r\n        _this.viewParts.push(_this.contentWidgets);\r\n        _this.viewCursors = new ViewCursors(_this._context);\r\n        _this.viewParts.push(_this.viewCursors);\r\n        // Overlay widgets\r\n        _this.overlayWidgets = new ViewOverlayWidgets(_this._context);\r\n        _this.viewParts.push(_this.overlayWidgets);\r\n        var rulers = new Rulers(_this._context);\r\n        _this.viewParts.push(rulers);\r\n        var minimap = new Minimap(_this._context);\r\n        _this.viewParts.push(minimap);\r\n        // -------------- Wire dom nodes up\r\n        if (decorationsOverviewRuler) {\r\n            var overviewRulerData = _this._scrollbar.getOverviewRulerLayoutInfo();\r\n            overviewRulerData.parent.insertBefore(decorationsOverviewRuler.getDomNode(), overviewRulerData.insertBefore);\r\n        }\r\n        _this.linesContent.appendChild(contentViewOverlays.getDomNode());\r\n        _this.linesContent.appendChild(rulers.domNode);\r\n        _this.linesContent.appendChild(_this.viewZones.domNode);\r\n        _this.linesContent.appendChild(_this.viewLines.getDomNode());\r\n        _this.linesContent.appendChild(_this.contentWidgets.domNode);\r\n        _this.linesContent.appendChild(_this.viewCursors.getDomNode());\r\n        _this.overflowGuardContainer.appendChild(margin.getDomNode());\r\n        _this.overflowGuardContainer.appendChild(_this._scrollbar.getDomNode());\r\n        _this.overflowGuardContainer.appendChild(scrollDecoration.getDomNode());\r\n        _this.overflowGuardContainer.appendChild(_this._textAreaHandler.textArea);\r\n        _this.overflowGuardContainer.appendChild(_this._textAreaHandler.textAreaCover);\r\n        _this.overflowGuardContainer.appendChild(_this.overlayWidgets.getDomNode());\r\n        _this.overflowGuardContainer.appendChild(minimap.getDomNode());\r\n        _this.domNode.appendChild(_this.overflowGuardContainer);\r\n        _this.domNode.appendChild(_this.contentWidgets.overflowingContentWidgetsDomNode);\r\n        _this._applyLayout();\r\n        // Pointer handler\r\n        _this.pointerHandler = _this._register(new PointerHandler(_this._context, viewController, _this.createPointerHandlerHelper()));\r\n        _this._register(model.addEventListener(function (events) {\r\n            _this.eventDispatcher.emitMany(events);\r\n        }));\r\n        _this._register(_this._cursor.addEventListener(function (events) {\r\n            _this.eventDispatcher.emitMany(events);\r\n        }));\r\n        return _this;\r\n    }\r\n    View.prototype._flushAccumulatedAndRenderNow = function () {\r\n        this._renderNow();\r\n    };\r\n    View.prototype.createPointerHandlerHelper = function () {\r\n        var _this = this;\r\n        return {\r\n            viewDomNode: this.domNode.domNode,\r\n            linesContentDomNode: this.linesContent.domNode,\r\n            focusTextArea: function () {\r\n                _this.focus();\r\n            },\r\n            getLastRenderData: function () {\r\n                var lastViewCursorsRenderData = _this.viewCursors.getLastRenderData() || [];\r\n                var lastTextareaPosition = _this._textAreaHandler.getLastRenderData();\r\n                return new PointerHandlerLastRenderData(lastViewCursorsRenderData, lastTextareaPosition);\r\n            },\r\n            shouldSuppressMouseDownOnViewZone: function (viewZoneId) {\r\n                return _this.viewZones.shouldSuppressMouseDownOnViewZone(viewZoneId);\r\n            },\r\n            shouldSuppressMouseDownOnWidget: function (widgetId) {\r\n                return _this.contentWidgets.shouldSuppressMouseDownOnWidget(widgetId);\r\n            },\r\n            getPositionFromDOMInfo: function (spanNode, offset) {\r\n                _this._flushAccumulatedAndRenderNow();\r\n                return _this.viewLines.getPositionFromDOMInfo(spanNode, offset);\r\n            },\r\n            visibleRangeForPosition: function (lineNumber, column) {\r\n                _this._flushAccumulatedAndRenderNow();\r\n                return _this.viewLines.visibleRangeForPosition(new Position(lineNumber, column));\r\n            },\r\n            getLineWidth: function (lineNumber) {\r\n                _this._flushAccumulatedAndRenderNow();\r\n                return _this.viewLines.getLineWidth(lineNumber);\r\n            }\r\n        };\r\n    };\r\n    View.prototype.createTextAreaHandlerHelper = function () {\r\n        var _this = this;\r\n        return {\r\n            visibleRangeForPositionRelativeToEditor: function (lineNumber, column) {\r\n                _this._flushAccumulatedAndRenderNow();\r\n                return _this.viewLines.visibleRangeForPosition(new Position(lineNumber, column));\r\n            }\r\n        };\r\n    };\r\n    View.prototype._applyLayout = function () {\r\n        var options = this._context.configuration.options;\r\n        var layoutInfo = options.get(107 /* layoutInfo */);\r\n        this.domNode.setWidth(layoutInfo.width);\r\n        this.domNode.setHeight(layoutInfo.height);\r\n        this.overflowGuardContainer.setWidth(layoutInfo.width);\r\n        this.overflowGuardContainer.setHeight(layoutInfo.height);\r\n        this.linesContent.setWidth(1000000);\r\n        this.linesContent.setHeight(1000000);\r\n    };\r\n    View.prototype.getEditorClassName = function () {\r\n        var focused = this._textAreaHandler.isFocused() ? ' focused' : '';\r\n        return this._context.configuration.options.get(104 /* editorClassName */) + ' ' + getThemeTypeSelector(this._context.theme.type) + focused;\r\n    };\r\n    // --- begin event handlers\r\n    View.prototype.onConfigurationChanged = function (e) {\r\n        this.domNode.setClassName(this.getEditorClassName());\r\n        this._applyLayout();\r\n        return false;\r\n    };\r\n    View.prototype.onContentSizeChanged = function (e) {\r\n        this.outgoingEvents.emitContentSizeChange(e);\r\n        return false;\r\n    };\r\n    View.prototype.onFocusChanged = function (e) {\r\n        this.domNode.setClassName(this.getEditorClassName());\r\n        this._context.model.setHasFocus(e.isFocused);\r\n        if (e.isFocused) {\r\n            this.outgoingEvents.emitViewFocusGained();\r\n        }\r\n        else {\r\n            this.outgoingEvents.emitViewFocusLost();\r\n        }\r\n        return false;\r\n    };\r\n    View.prototype.onScrollChanged = function (e) {\r\n        this.outgoingEvents.emitScrollChanged(e);\r\n        return false;\r\n    };\r\n    View.prototype.onThemeChanged = function (e) {\r\n        this.domNode.setClassName(this.getEditorClassName());\r\n        return false;\r\n    };\r\n    // --- end event handlers\r\n    View.prototype.dispose = function () {\r\n        if (this._renderAnimationFrame !== null) {\r\n            this._renderAnimationFrame.dispose();\r\n            this._renderAnimationFrame = null;\r\n        }\r\n        this.eventDispatcher.removeEventHandler(this);\r\n        this.outgoingEvents.dispose();\r\n        this.viewLines.dispose();\r\n        // Destroy view parts\r\n        for (var i = 0, len = this.viewParts.length; i < len; i++) {\r\n            this.viewParts[i].dispose();\r\n        }\r\n        this.viewParts = [];\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    View.prototype._renderOnce = function (callback) {\r\n        var r = safeInvokeNoArg(callback);\r\n        this._scheduleRender();\r\n        return r;\r\n    };\r\n    View.prototype._scheduleRender = function () {\r\n        if (this._renderAnimationFrame === null) {\r\n            this._renderAnimationFrame = dom.runAtThisOrScheduleAtNextAnimationFrame(this._onRenderScheduled.bind(this), 100);\r\n        }\r\n    };\r\n    View.prototype._onRenderScheduled = function () {\r\n        this._renderAnimationFrame = null;\r\n        this._flushAccumulatedAndRenderNow();\r\n    };\r\n    View.prototype._renderNow = function () {\r\n        var _this = this;\r\n        safeInvokeNoArg(function () { return _this._actualRender(); });\r\n    };\r\n    View.prototype._getViewPartsToRender = function () {\r\n        var result = [], resultLen = 0;\r\n        for (var i = 0, len = this.viewParts.length; i < len; i++) {\r\n            var viewPart = this.viewParts[i];\r\n            if (viewPart.shouldRender()) {\r\n                result[resultLen++] = viewPart;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    View.prototype._actualRender = function () {\r\n        if (!dom.isInDOM(this.domNode.domNode)) {\r\n            return;\r\n        }\r\n        var viewPartsToRender = this._getViewPartsToRender();\r\n        if (!this.viewLines.shouldRender() && viewPartsToRender.length === 0) {\r\n            // Nothing to render\r\n            return;\r\n        }\r\n        var partialViewportData = this._context.viewLayout.getLinesViewportData();\r\n        this._context.model.setViewport(partialViewportData.startLineNumber, partialViewportData.endLineNumber, partialViewportData.centeredLineNumber);\r\n        var viewportData = new ViewportData(this._cursor.getViewSelections(), partialViewportData, this._context.viewLayout.getWhitespaceViewportData(), this._context.model);\r\n        if (this.contentWidgets.shouldRender()) {\r\n            // Give the content widgets a chance to set their max width before a possible synchronous layout\r\n            this.contentWidgets.onBeforeRender(viewportData);\r\n        }\r\n        if (this.viewLines.shouldRender()) {\r\n            this.viewLines.renderText(viewportData);\r\n            this.viewLines.onDidRender();\r\n            // Rendering of viewLines might cause scroll events to occur, so collect view parts to render again\r\n            viewPartsToRender = this._getViewPartsToRender();\r\n        }\r\n        var renderingContext = new RenderingContext(this._context.viewLayout, viewportData, this.viewLines);\r\n        // Render the rest of the parts\r\n        for (var i = 0, len = viewPartsToRender.length; i < len; i++) {\r\n            var viewPart = viewPartsToRender[i];\r\n            viewPart.prepareRender(renderingContext);\r\n        }\r\n        for (var i = 0, len = viewPartsToRender.length; i < len; i++) {\r\n            var viewPart = viewPartsToRender[i];\r\n            viewPart.render(renderingContext);\r\n            viewPart.onDidRender();\r\n        }\r\n    };\r\n    // --- BEGIN CodeEditor helpers\r\n    View.prototype.delegateVerticalScrollbarMouseDown = function (browserEvent) {\r\n        this._scrollbar.delegateVerticalScrollbarMouseDown(browserEvent);\r\n    };\r\n    View.prototype.restoreState = function (scrollPosition) {\r\n        this._context.viewLayout.setScrollPositionNow({ scrollTop: scrollPosition.scrollTop });\r\n        this._context.model.tokenizeViewport();\r\n        this._renderNow();\r\n        this.viewLines.updateLineWidths();\r\n        this._context.viewLayout.setScrollPositionNow({ scrollLeft: scrollPosition.scrollLeft });\r\n    };\r\n    View.prototype.getOffsetForColumn = function (modelLineNumber, modelColumn) {\r\n        var modelPosition = this._context.model.validateModelPosition({\r\n            lineNumber: modelLineNumber,\r\n            column: modelColumn\r\n        });\r\n        var viewPosition = this._context.model.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\r\n        this._flushAccumulatedAndRenderNow();\r\n        var visibleRange = this.viewLines.visibleRangeForPosition(new Position(viewPosition.lineNumber, viewPosition.column));\r\n        if (!visibleRange) {\r\n            return -1;\r\n        }\r\n        return visibleRange.left;\r\n    };\r\n    View.prototype.getTargetAtClientPoint = function (clientX, clientY) {\r\n        var mouseTarget = this.pointerHandler.getTargetAtClientPoint(clientX, clientY);\r\n        if (!mouseTarget) {\r\n            return null;\r\n        }\r\n        return ViewOutgoingEvents.convertViewToModelMouseTarget(mouseTarget, this._context.model.coordinatesConverter);\r\n    };\r\n    View.prototype.createOverviewRuler = function (cssClassName) {\r\n        return new OverviewRuler(this._context, cssClassName);\r\n    };\r\n    View.prototype.change = function (callback) {\r\n        var _this = this;\r\n        return this._renderOnce(function () {\r\n            var zonesHaveChanged = _this.viewZones.changeViewZones(callback);\r\n            if (zonesHaveChanged) {\r\n                _this._context.viewLayout.onHeightMaybeChanged();\r\n                _this._context.privateViewEventBus.emit(new viewEvents.ViewZonesChangedEvent());\r\n            }\r\n            return zonesHaveChanged;\r\n        });\r\n    };\r\n    View.prototype.render = function (now, everything) {\r\n        if (everything) {\r\n            // Force everything to render...\r\n            this.viewLines.forceShouldRender();\r\n            for (var i = 0, len = this.viewParts.length; i < len; i++) {\r\n                var viewPart = this.viewParts[i];\r\n                viewPart.forceShouldRender();\r\n            }\r\n        }\r\n        if (now) {\r\n            this._flushAccumulatedAndRenderNow();\r\n        }\r\n        else {\r\n            this._scheduleRender();\r\n        }\r\n    };\r\n    View.prototype.focus = function () {\r\n        this._textAreaHandler.focusTextArea();\r\n    };\r\n    View.prototype.isFocused = function () {\r\n        return this._textAreaHandler.isFocused();\r\n    };\r\n    View.prototype.setAriaOptions = function (options) {\r\n        this._textAreaHandler.setAriaOptions(options);\r\n    };\r\n    View.prototype.addContentWidget = function (widgetData) {\r\n        this.contentWidgets.addWidget(widgetData.widget);\r\n        this.layoutContentWidget(widgetData);\r\n        this._scheduleRender();\r\n    };\r\n    View.prototype.layoutContentWidget = function (widgetData) {\r\n        var newRange = widgetData.position ? widgetData.position.range || null : null;\r\n        if (newRange === null) {\r\n            var newPosition = widgetData.position ? widgetData.position.position : null;\r\n            if (newPosition !== null) {\r\n                newRange = new Range(newPosition.lineNumber, newPosition.column, newPosition.lineNumber, newPosition.column);\r\n            }\r\n        }\r\n        var newPreference = widgetData.position ? widgetData.position.preference : null;\r\n        this.contentWidgets.setWidgetPosition(widgetData.widget, newRange, newPreference);\r\n        this._scheduleRender();\r\n    };\r\n    View.prototype.removeContentWidget = function (widgetData) {\r\n        this.contentWidgets.removeWidget(widgetData.widget);\r\n        this._scheduleRender();\r\n    };\r\n    View.prototype.addOverlayWidget = function (widgetData) {\r\n        this.overlayWidgets.addWidget(widgetData.widget);\r\n        this.layoutOverlayWidget(widgetData);\r\n        this._scheduleRender();\r\n    };\r\n    View.prototype.layoutOverlayWidget = function (widgetData) {\r\n        var newPreference = widgetData.position ? widgetData.position.preference : null;\r\n        var shouldRender = this.overlayWidgets.setWidgetPosition(widgetData.widget, newPreference);\r\n        if (shouldRender) {\r\n            this._scheduleRender();\r\n        }\r\n    };\r\n    View.prototype.removeOverlayWidget = function (widgetData) {\r\n        this.overlayWidgets.removeWidget(widgetData.widget);\r\n        this._scheduleRender();\r\n    };\r\n    return View;\r\n}(ViewEventHandler));\r\nexport { View };\r\nfunction safeInvokeNoArg(func) {\r\n    try {\r\n        return func();\r\n    }\r\n    catch (e) {\r\n        onUnexpectedError(e);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}