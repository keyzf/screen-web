{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Emitter } from './event.js';\nimport { Disposable } from './lifecycle.js';\n\nvar ScrollState =\n/** @class */\nfunction () {\n  function ScrollState(width, scrollWidth, scrollLeft, height, scrollHeight, scrollTop) {\n    width = width | 0;\n    scrollWidth = scrollWidth | 0;\n    scrollLeft = scrollLeft | 0;\n    height = height | 0;\n    scrollHeight = scrollHeight | 0;\n    scrollTop = scrollTop | 0;\n\n    if (width < 0) {\n      width = 0;\n    }\n\n    if (scrollLeft + width > scrollWidth) {\n      scrollLeft = scrollWidth - width;\n    }\n\n    if (scrollLeft < 0) {\n      scrollLeft = 0;\n    }\n\n    if (height < 0) {\n      height = 0;\n    }\n\n    if (scrollTop + height > scrollHeight) {\n      scrollTop = scrollHeight - height;\n    }\n\n    if (scrollTop < 0) {\n      scrollTop = 0;\n    }\n\n    this.width = width;\n    this.scrollWidth = scrollWidth;\n    this.scrollLeft = scrollLeft;\n    this.height = height;\n    this.scrollHeight = scrollHeight;\n    this.scrollTop = scrollTop;\n  }\n\n  ScrollState.prototype.equals = function (other) {\n    return this.width === other.width && this.scrollWidth === other.scrollWidth && this.scrollLeft === other.scrollLeft && this.height === other.height && this.scrollHeight === other.scrollHeight && this.scrollTop === other.scrollTop;\n  };\n\n  ScrollState.prototype.withScrollDimensions = function (update) {\n    return new ScrollState(typeof update.width !== 'undefined' ? update.width : this.width, typeof update.scrollWidth !== 'undefined' ? update.scrollWidth : this.scrollWidth, this.scrollLeft, typeof update.height !== 'undefined' ? update.height : this.height, typeof update.scrollHeight !== 'undefined' ? update.scrollHeight : this.scrollHeight, this.scrollTop);\n  };\n\n  ScrollState.prototype.withScrollPosition = function (update) {\n    return new ScrollState(this.width, this.scrollWidth, typeof update.scrollLeft !== 'undefined' ? update.scrollLeft : this.scrollLeft, this.height, this.scrollHeight, typeof update.scrollTop !== 'undefined' ? update.scrollTop : this.scrollTop);\n  };\n\n  ScrollState.prototype.createScrollEvent = function (previous) {\n    var widthChanged = this.width !== previous.width;\n    var scrollWidthChanged = this.scrollWidth !== previous.scrollWidth;\n    var scrollLeftChanged = this.scrollLeft !== previous.scrollLeft;\n    var heightChanged = this.height !== previous.height;\n    var scrollHeightChanged = this.scrollHeight !== previous.scrollHeight;\n    var scrollTopChanged = this.scrollTop !== previous.scrollTop;\n    return {\n      width: this.width,\n      scrollWidth: this.scrollWidth,\n      scrollLeft: this.scrollLeft,\n      height: this.height,\n      scrollHeight: this.scrollHeight,\n      scrollTop: this.scrollTop,\n      widthChanged: widthChanged,\n      scrollWidthChanged: scrollWidthChanged,\n      scrollLeftChanged: scrollLeftChanged,\n      heightChanged: heightChanged,\n      scrollHeightChanged: scrollHeightChanged,\n      scrollTopChanged: scrollTopChanged\n    };\n  };\n\n  return ScrollState;\n}();\n\nexport { ScrollState };\n\nvar Scrollable =\n/** @class */\nfunction (_super) {\n  __extends(Scrollable, _super);\n\n  function Scrollable(smoothScrollDuration, scheduleAtNextAnimationFrame) {\n    var _this = _super.call(this) || this;\n\n    _this._onScroll = _this._register(new Emitter());\n    _this.onScroll = _this._onScroll.event;\n    _this._smoothScrollDuration = smoothScrollDuration;\n    _this._scheduleAtNextAnimationFrame = scheduleAtNextAnimationFrame;\n    _this._state = new ScrollState(0, 0, 0, 0, 0, 0);\n    _this._smoothScrolling = null;\n    return _this;\n  }\n\n  Scrollable.prototype.dispose = function () {\n    if (this._smoothScrolling) {\n      this._smoothScrolling.dispose();\n\n      this._smoothScrolling = null;\n    }\n\n    _super.prototype.dispose.call(this);\n  };\n\n  Scrollable.prototype.setSmoothScrollDuration = function (smoothScrollDuration) {\n    this._smoothScrollDuration = smoothScrollDuration;\n  };\n\n  Scrollable.prototype.validateScrollPosition = function (scrollPosition) {\n    return this._state.withScrollPosition(scrollPosition);\n  };\n\n  Scrollable.prototype.getScrollDimensions = function () {\n    return this._state;\n  };\n\n  Scrollable.prototype.setScrollDimensions = function (dimensions) {\n    var newState = this._state.withScrollDimensions(dimensions);\n\n    this._setState(newState); // Validate outstanding animated scroll position target\n\n\n    if (this._smoothScrolling) {\n      this._smoothScrolling.acceptScrollDimensions(this._state);\n    }\n  };\n  /**\r\n   * Returns the final scroll position that the instance will have once the smooth scroll animation concludes.\r\n   * If no scroll animation is occurring, it will return the current scroll position instead.\r\n   */\n\n\n  Scrollable.prototype.getFutureScrollPosition = function () {\n    if (this._smoothScrolling) {\n      return this._smoothScrolling.to;\n    }\n\n    return this._state;\n  };\n  /**\r\n   * Returns the current scroll position.\r\n   * Note: This result might be an intermediate scroll position, as there might be an ongoing smooth scroll animation.\r\n   */\n\n\n  Scrollable.prototype.getCurrentScrollPosition = function () {\n    return this._state;\n  };\n\n  Scrollable.prototype.setScrollPositionNow = function (update) {\n    // no smooth scrolling requested\n    var newState = this._state.withScrollPosition(update); // Terminate any outstanding smooth scrolling\n\n\n    if (this._smoothScrolling) {\n      this._smoothScrolling.dispose();\n\n      this._smoothScrolling = null;\n    }\n\n    this._setState(newState);\n  };\n\n  Scrollable.prototype.setScrollPositionSmooth = function (update) {\n    var _this = this;\n\n    if (this._smoothScrollDuration === 0) {\n      // Smooth scrolling not supported.\n      return this.setScrollPositionNow(update);\n    }\n\n    if (this._smoothScrolling) {\n      // Combine our pending scrollLeft/scrollTop with incoming scrollLeft/scrollTop\n      update = {\n        scrollLeft: typeof update.scrollLeft === 'undefined' ? this._smoothScrolling.to.scrollLeft : update.scrollLeft,\n        scrollTop: typeof update.scrollTop === 'undefined' ? this._smoothScrolling.to.scrollTop : update.scrollTop\n      }; // Validate `update`\n\n      var validTarget = this._state.withScrollPosition(update);\n\n      if (this._smoothScrolling.to.scrollLeft === validTarget.scrollLeft && this._smoothScrolling.to.scrollTop === validTarget.scrollTop) {\n        // No need to interrupt or extend the current animation since we're going to the same place\n        return;\n      }\n\n      var newSmoothScrolling = this._smoothScrolling.combine(this._state, validTarget, this._smoothScrollDuration);\n\n      this._smoothScrolling.dispose();\n\n      this._smoothScrolling = newSmoothScrolling;\n    } else {\n      // Validate `update`\n      var validTarget = this._state.withScrollPosition(update);\n\n      this._smoothScrolling = SmoothScrollingOperation.start(this._state, validTarget, this._smoothScrollDuration);\n    } // Begin smooth scrolling animation\n\n\n    this._smoothScrolling.animationFrameDisposable = this._scheduleAtNextAnimationFrame(function () {\n      if (!_this._smoothScrolling) {\n        return;\n      }\n\n      _this._smoothScrolling.animationFrameDisposable = null;\n\n      _this._performSmoothScrolling();\n    });\n  };\n\n  Scrollable.prototype._performSmoothScrolling = function () {\n    var _this = this;\n\n    if (!this._smoothScrolling) {\n      return;\n    }\n\n    var update = this._smoothScrolling.tick();\n\n    var newState = this._state.withScrollPosition(update);\n\n    this._setState(newState);\n\n    if (update.isDone) {\n      this._smoothScrolling.dispose();\n\n      this._smoothScrolling = null;\n      return;\n    } // Continue smooth scrolling animation\n\n\n    this._smoothScrolling.animationFrameDisposable = this._scheduleAtNextAnimationFrame(function () {\n      if (!_this._smoothScrolling) {\n        return;\n      }\n\n      _this._smoothScrolling.animationFrameDisposable = null;\n\n      _this._performSmoothScrolling();\n    });\n  };\n\n  Scrollable.prototype._setState = function (newState) {\n    var oldState = this._state;\n\n    if (oldState.equals(newState)) {\n      // no change\n      return;\n    }\n\n    this._state = newState;\n\n    this._onScroll.fire(this._state.createScrollEvent(oldState));\n  };\n\n  return Scrollable;\n}(Disposable);\n\nexport { Scrollable };\n\nvar SmoothScrollingUpdate =\n/** @class */\nfunction () {\n  function SmoothScrollingUpdate(scrollLeft, scrollTop, isDone) {\n    this.scrollLeft = scrollLeft;\n    this.scrollTop = scrollTop;\n    this.isDone = isDone;\n  }\n\n  return SmoothScrollingUpdate;\n}();\n\nexport { SmoothScrollingUpdate };\n\nfunction createEaseOutCubic(from, to) {\n  var delta = to - from;\n  return function (completion) {\n    return from + delta * easeOutCubic(completion);\n  };\n}\n\nfunction createComposed(a, b, cut) {\n  return function (completion) {\n    if (completion < cut) {\n      return a(completion / cut);\n    }\n\n    return b((completion - cut) / (1 - cut));\n  };\n}\n\nvar SmoothScrollingOperation =\n/** @class */\nfunction () {\n  function SmoothScrollingOperation(from, to, startTime, duration) {\n    this.from = from;\n    this.to = to;\n    this.duration = duration;\n    this._startTime = startTime;\n    this.animationFrameDisposable = null;\n\n    this._initAnimations();\n  }\n\n  SmoothScrollingOperation.prototype._initAnimations = function () {\n    this.scrollLeft = this._initAnimation(this.from.scrollLeft, this.to.scrollLeft, this.to.width);\n    this.scrollTop = this._initAnimation(this.from.scrollTop, this.to.scrollTop, this.to.height);\n  };\n\n  SmoothScrollingOperation.prototype._initAnimation = function (from, to, viewportSize) {\n    var delta = Math.abs(from - to);\n\n    if (delta > 2.5 * viewportSize) {\n      var stop1 = void 0,\n          stop2 = void 0;\n\n      if (from < to) {\n        // scroll to 75% of the viewportSize\n        stop1 = from + 0.75 * viewportSize;\n        stop2 = to - 0.75 * viewportSize;\n      } else {\n        stop1 = from - 0.75 * viewportSize;\n        stop2 = to + 0.75 * viewportSize;\n      }\n\n      return createComposed(createEaseOutCubic(from, stop1), createEaseOutCubic(stop2, to), 0.33);\n    }\n\n    return createEaseOutCubic(from, to);\n  };\n\n  SmoothScrollingOperation.prototype.dispose = function () {\n    if (this.animationFrameDisposable !== null) {\n      this.animationFrameDisposable.dispose();\n      this.animationFrameDisposable = null;\n    }\n  };\n\n  SmoothScrollingOperation.prototype.acceptScrollDimensions = function (state) {\n    this.to = state.withScrollPosition(this.to);\n\n    this._initAnimations();\n  };\n\n  SmoothScrollingOperation.prototype.tick = function () {\n    return this._tick(Date.now());\n  };\n\n  SmoothScrollingOperation.prototype._tick = function (now) {\n    var completion = (now - this._startTime) / this.duration;\n\n    if (completion < 1) {\n      var newScrollLeft = this.scrollLeft(completion);\n      var newScrollTop = this.scrollTop(completion);\n      return new SmoothScrollingUpdate(newScrollLeft, newScrollTop, false);\n    }\n\n    return new SmoothScrollingUpdate(this.to.scrollLeft, this.to.scrollTop, true);\n  };\n\n  SmoothScrollingOperation.prototype.combine = function (from, to, duration) {\n    return SmoothScrollingOperation.start(from, to, duration);\n  };\n\n  SmoothScrollingOperation.start = function (from, to, duration) {\n    // +10 / -10 : pretend the animation already started for a quicker response to a scroll request\n    duration = duration + 10;\n    var startTime = Date.now() - 10;\n    return new SmoothScrollingOperation(from, to, startTime, duration);\n  };\n\n  return SmoothScrollingOperation;\n}();\n\nexport { SmoothScrollingOperation };\n\nfunction easeInCubic(t) {\n  return Math.pow(t, 3);\n}\n\nfunction easeOutCubic(t) {\n  return 1 - easeInCubic(1 - t);\n}","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/base/common/scrollable.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Emitter","Disposable","ScrollState","width","scrollWidth","scrollLeft","height","scrollHeight","scrollTop","equals","other","withScrollDimensions","update","withScrollPosition","createScrollEvent","previous","widthChanged","scrollWidthChanged","scrollLeftChanged","heightChanged","scrollHeightChanged","scrollTopChanged","Scrollable","_super","smoothScrollDuration","scheduleAtNextAnimationFrame","_this","call","_onScroll","_register","onScroll","event","_smoothScrollDuration","_scheduleAtNextAnimationFrame","_state","_smoothScrolling","dispose","setSmoothScrollDuration","validateScrollPosition","scrollPosition","getScrollDimensions","setScrollDimensions","dimensions","newState","_setState","acceptScrollDimensions","getFutureScrollPosition","to","getCurrentScrollPosition","setScrollPositionNow","setScrollPositionSmooth","validTarget","newSmoothScrolling","combine","SmoothScrollingOperation","start","animationFrameDisposable","_performSmoothScrolling","tick","isDone","oldState","fire","SmoothScrollingUpdate","createEaseOutCubic","from","delta","completion","easeOutCubic","createComposed","a","cut","startTime","duration","_startTime","_initAnimations","_initAnimation","viewportSize","Math","abs","stop1","stop2","state","_tick","Date","now","newScrollLeft","newScrollTop","easeInCubic","t","pow"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Emitter } from './event.js';\r\nimport { Disposable } from './lifecycle.js';\r\nvar ScrollState = /** @class */ (function () {\r\n    function ScrollState(width, scrollWidth, scrollLeft, height, scrollHeight, scrollTop) {\r\n        width = width | 0;\r\n        scrollWidth = scrollWidth | 0;\r\n        scrollLeft = scrollLeft | 0;\r\n        height = height | 0;\r\n        scrollHeight = scrollHeight | 0;\r\n        scrollTop = scrollTop | 0;\r\n        if (width < 0) {\r\n            width = 0;\r\n        }\r\n        if (scrollLeft + width > scrollWidth) {\r\n            scrollLeft = scrollWidth - width;\r\n        }\r\n        if (scrollLeft < 0) {\r\n            scrollLeft = 0;\r\n        }\r\n        if (height < 0) {\r\n            height = 0;\r\n        }\r\n        if (scrollTop + height > scrollHeight) {\r\n            scrollTop = scrollHeight - height;\r\n        }\r\n        if (scrollTop < 0) {\r\n            scrollTop = 0;\r\n        }\r\n        this.width = width;\r\n        this.scrollWidth = scrollWidth;\r\n        this.scrollLeft = scrollLeft;\r\n        this.height = height;\r\n        this.scrollHeight = scrollHeight;\r\n        this.scrollTop = scrollTop;\r\n    }\r\n    ScrollState.prototype.equals = function (other) {\r\n        return (this.width === other.width\r\n            && this.scrollWidth === other.scrollWidth\r\n            && this.scrollLeft === other.scrollLeft\r\n            && this.height === other.height\r\n            && this.scrollHeight === other.scrollHeight\r\n            && this.scrollTop === other.scrollTop);\r\n    };\r\n    ScrollState.prototype.withScrollDimensions = function (update) {\r\n        return new ScrollState((typeof update.width !== 'undefined' ? update.width : this.width), (typeof update.scrollWidth !== 'undefined' ? update.scrollWidth : this.scrollWidth), this.scrollLeft, (typeof update.height !== 'undefined' ? update.height : this.height), (typeof update.scrollHeight !== 'undefined' ? update.scrollHeight : this.scrollHeight), this.scrollTop);\r\n    };\r\n    ScrollState.prototype.withScrollPosition = function (update) {\r\n        return new ScrollState(this.width, this.scrollWidth, (typeof update.scrollLeft !== 'undefined' ? update.scrollLeft : this.scrollLeft), this.height, this.scrollHeight, (typeof update.scrollTop !== 'undefined' ? update.scrollTop : this.scrollTop));\r\n    };\r\n    ScrollState.prototype.createScrollEvent = function (previous) {\r\n        var widthChanged = (this.width !== previous.width);\r\n        var scrollWidthChanged = (this.scrollWidth !== previous.scrollWidth);\r\n        var scrollLeftChanged = (this.scrollLeft !== previous.scrollLeft);\r\n        var heightChanged = (this.height !== previous.height);\r\n        var scrollHeightChanged = (this.scrollHeight !== previous.scrollHeight);\r\n        var scrollTopChanged = (this.scrollTop !== previous.scrollTop);\r\n        return {\r\n            width: this.width,\r\n            scrollWidth: this.scrollWidth,\r\n            scrollLeft: this.scrollLeft,\r\n            height: this.height,\r\n            scrollHeight: this.scrollHeight,\r\n            scrollTop: this.scrollTop,\r\n            widthChanged: widthChanged,\r\n            scrollWidthChanged: scrollWidthChanged,\r\n            scrollLeftChanged: scrollLeftChanged,\r\n            heightChanged: heightChanged,\r\n            scrollHeightChanged: scrollHeightChanged,\r\n            scrollTopChanged: scrollTopChanged,\r\n        };\r\n    };\r\n    return ScrollState;\r\n}());\r\nexport { ScrollState };\r\nvar Scrollable = /** @class */ (function (_super) {\r\n    __extends(Scrollable, _super);\r\n    function Scrollable(smoothScrollDuration, scheduleAtNextAnimationFrame) {\r\n        var _this = _super.call(this) || this;\r\n        _this._onScroll = _this._register(new Emitter());\r\n        _this.onScroll = _this._onScroll.event;\r\n        _this._smoothScrollDuration = smoothScrollDuration;\r\n        _this._scheduleAtNextAnimationFrame = scheduleAtNextAnimationFrame;\r\n        _this._state = new ScrollState(0, 0, 0, 0, 0, 0);\r\n        _this._smoothScrolling = null;\r\n        return _this;\r\n    }\r\n    Scrollable.prototype.dispose = function () {\r\n        if (this._smoothScrolling) {\r\n            this._smoothScrolling.dispose();\r\n            this._smoothScrolling = null;\r\n        }\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    Scrollable.prototype.setSmoothScrollDuration = function (smoothScrollDuration) {\r\n        this._smoothScrollDuration = smoothScrollDuration;\r\n    };\r\n    Scrollable.prototype.validateScrollPosition = function (scrollPosition) {\r\n        return this._state.withScrollPosition(scrollPosition);\r\n    };\r\n    Scrollable.prototype.getScrollDimensions = function () {\r\n        return this._state;\r\n    };\r\n    Scrollable.prototype.setScrollDimensions = function (dimensions) {\r\n        var newState = this._state.withScrollDimensions(dimensions);\r\n        this._setState(newState);\r\n        // Validate outstanding animated scroll position target\r\n        if (this._smoothScrolling) {\r\n            this._smoothScrolling.acceptScrollDimensions(this._state);\r\n        }\r\n    };\r\n    /**\r\n     * Returns the final scroll position that the instance will have once the smooth scroll animation concludes.\r\n     * If no scroll animation is occurring, it will return the current scroll position instead.\r\n     */\r\n    Scrollable.prototype.getFutureScrollPosition = function () {\r\n        if (this._smoothScrolling) {\r\n            return this._smoothScrolling.to;\r\n        }\r\n        return this._state;\r\n    };\r\n    /**\r\n     * Returns the current scroll position.\r\n     * Note: This result might be an intermediate scroll position, as there might be an ongoing smooth scroll animation.\r\n     */\r\n    Scrollable.prototype.getCurrentScrollPosition = function () {\r\n        return this._state;\r\n    };\r\n    Scrollable.prototype.setScrollPositionNow = function (update) {\r\n        // no smooth scrolling requested\r\n        var newState = this._state.withScrollPosition(update);\r\n        // Terminate any outstanding smooth scrolling\r\n        if (this._smoothScrolling) {\r\n            this._smoothScrolling.dispose();\r\n            this._smoothScrolling = null;\r\n        }\r\n        this._setState(newState);\r\n    };\r\n    Scrollable.prototype.setScrollPositionSmooth = function (update) {\r\n        var _this = this;\r\n        if (this._smoothScrollDuration === 0) {\r\n            // Smooth scrolling not supported.\r\n            return this.setScrollPositionNow(update);\r\n        }\r\n        if (this._smoothScrolling) {\r\n            // Combine our pending scrollLeft/scrollTop with incoming scrollLeft/scrollTop\r\n            update = {\r\n                scrollLeft: (typeof update.scrollLeft === 'undefined' ? this._smoothScrolling.to.scrollLeft : update.scrollLeft),\r\n                scrollTop: (typeof update.scrollTop === 'undefined' ? this._smoothScrolling.to.scrollTop : update.scrollTop)\r\n            };\r\n            // Validate `update`\r\n            var validTarget = this._state.withScrollPosition(update);\r\n            if (this._smoothScrolling.to.scrollLeft === validTarget.scrollLeft && this._smoothScrolling.to.scrollTop === validTarget.scrollTop) {\r\n                // No need to interrupt or extend the current animation since we're going to the same place\r\n                return;\r\n            }\r\n            var newSmoothScrolling = this._smoothScrolling.combine(this._state, validTarget, this._smoothScrollDuration);\r\n            this._smoothScrolling.dispose();\r\n            this._smoothScrolling = newSmoothScrolling;\r\n        }\r\n        else {\r\n            // Validate `update`\r\n            var validTarget = this._state.withScrollPosition(update);\r\n            this._smoothScrolling = SmoothScrollingOperation.start(this._state, validTarget, this._smoothScrollDuration);\r\n        }\r\n        // Begin smooth scrolling animation\r\n        this._smoothScrolling.animationFrameDisposable = this._scheduleAtNextAnimationFrame(function () {\r\n            if (!_this._smoothScrolling) {\r\n                return;\r\n            }\r\n            _this._smoothScrolling.animationFrameDisposable = null;\r\n            _this._performSmoothScrolling();\r\n        });\r\n    };\r\n    Scrollable.prototype._performSmoothScrolling = function () {\r\n        var _this = this;\r\n        if (!this._smoothScrolling) {\r\n            return;\r\n        }\r\n        var update = this._smoothScrolling.tick();\r\n        var newState = this._state.withScrollPosition(update);\r\n        this._setState(newState);\r\n        if (update.isDone) {\r\n            this._smoothScrolling.dispose();\r\n            this._smoothScrolling = null;\r\n            return;\r\n        }\r\n        // Continue smooth scrolling animation\r\n        this._smoothScrolling.animationFrameDisposable = this._scheduleAtNextAnimationFrame(function () {\r\n            if (!_this._smoothScrolling) {\r\n                return;\r\n            }\r\n            _this._smoothScrolling.animationFrameDisposable = null;\r\n            _this._performSmoothScrolling();\r\n        });\r\n    };\r\n    Scrollable.prototype._setState = function (newState) {\r\n        var oldState = this._state;\r\n        if (oldState.equals(newState)) {\r\n            // no change\r\n            return;\r\n        }\r\n        this._state = newState;\r\n        this._onScroll.fire(this._state.createScrollEvent(oldState));\r\n    };\r\n    return Scrollable;\r\n}(Disposable));\r\nexport { Scrollable };\r\nvar SmoothScrollingUpdate = /** @class */ (function () {\r\n    function SmoothScrollingUpdate(scrollLeft, scrollTop, isDone) {\r\n        this.scrollLeft = scrollLeft;\r\n        this.scrollTop = scrollTop;\r\n        this.isDone = isDone;\r\n    }\r\n    return SmoothScrollingUpdate;\r\n}());\r\nexport { SmoothScrollingUpdate };\r\nfunction createEaseOutCubic(from, to) {\r\n    var delta = to - from;\r\n    return function (completion) {\r\n        return from + delta * easeOutCubic(completion);\r\n    };\r\n}\r\nfunction createComposed(a, b, cut) {\r\n    return function (completion) {\r\n        if (completion < cut) {\r\n            return a(completion / cut);\r\n        }\r\n        return b((completion - cut) / (1 - cut));\r\n    };\r\n}\r\nvar SmoothScrollingOperation = /** @class */ (function () {\r\n    function SmoothScrollingOperation(from, to, startTime, duration) {\r\n        this.from = from;\r\n        this.to = to;\r\n        this.duration = duration;\r\n        this._startTime = startTime;\r\n        this.animationFrameDisposable = null;\r\n        this._initAnimations();\r\n    }\r\n    SmoothScrollingOperation.prototype._initAnimations = function () {\r\n        this.scrollLeft = this._initAnimation(this.from.scrollLeft, this.to.scrollLeft, this.to.width);\r\n        this.scrollTop = this._initAnimation(this.from.scrollTop, this.to.scrollTop, this.to.height);\r\n    };\r\n    SmoothScrollingOperation.prototype._initAnimation = function (from, to, viewportSize) {\r\n        var delta = Math.abs(from - to);\r\n        if (delta > 2.5 * viewportSize) {\r\n            var stop1 = void 0, stop2 = void 0;\r\n            if (from < to) {\r\n                // scroll to 75% of the viewportSize\r\n                stop1 = from + 0.75 * viewportSize;\r\n                stop2 = to - 0.75 * viewportSize;\r\n            }\r\n            else {\r\n                stop1 = from - 0.75 * viewportSize;\r\n                stop2 = to + 0.75 * viewportSize;\r\n            }\r\n            return createComposed(createEaseOutCubic(from, stop1), createEaseOutCubic(stop2, to), 0.33);\r\n        }\r\n        return createEaseOutCubic(from, to);\r\n    };\r\n    SmoothScrollingOperation.prototype.dispose = function () {\r\n        if (this.animationFrameDisposable !== null) {\r\n            this.animationFrameDisposable.dispose();\r\n            this.animationFrameDisposable = null;\r\n        }\r\n    };\r\n    SmoothScrollingOperation.prototype.acceptScrollDimensions = function (state) {\r\n        this.to = state.withScrollPosition(this.to);\r\n        this._initAnimations();\r\n    };\r\n    SmoothScrollingOperation.prototype.tick = function () {\r\n        return this._tick(Date.now());\r\n    };\r\n    SmoothScrollingOperation.prototype._tick = function (now) {\r\n        var completion = (now - this._startTime) / this.duration;\r\n        if (completion < 1) {\r\n            var newScrollLeft = this.scrollLeft(completion);\r\n            var newScrollTop = this.scrollTop(completion);\r\n            return new SmoothScrollingUpdate(newScrollLeft, newScrollTop, false);\r\n        }\r\n        return new SmoothScrollingUpdate(this.to.scrollLeft, this.to.scrollTop, true);\r\n    };\r\n    SmoothScrollingOperation.prototype.combine = function (from, to, duration) {\r\n        return SmoothScrollingOperation.start(from, to, duration);\r\n    };\r\n    SmoothScrollingOperation.start = function (from, to, duration) {\r\n        // +10 / -10 : pretend the animation already started for a quicker response to a scroll request\r\n        duration = duration + 10;\r\n        var startTime = Date.now() - 10;\r\n        return new SmoothScrollingOperation(from, to, startTime, duration);\r\n    };\r\n    return SmoothScrollingOperation;\r\n}());\r\nexport { SmoothScrollingOperation };\r\nfunction easeInCubic(t) {\r\n    return Math.pow(t, 3);\r\n}\r\nfunction easeOutCubic(t) {\r\n    return 1 - easeInCubic(1 - t);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}