{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport './media/peekViewWidget.css';\nimport * as dom from '../../../base/browser/dom.js';\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../base/common/actions.js';\nimport { Color } from '../../../base/common/color.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport * as objects from '../../../base/common/objects.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../browser/widget/embeddedCodeEditorWidget.js';\nimport { ZoneWidget } from '../zoneWidget/zoneWidget.js';\nimport * as nls from '../../../nls.js';\nimport { RawContextKey, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { registerColor, contrastBorder, activeContrastBorder } from '../../../platform/theme/common/colorRegistry.js';\nexport var IPeekViewService = createDecorator('IPeekViewService');\nregisterSingleton(IPeekViewService,\n/** @class */\nfunction () {\n  function class_1() {\n    this._widgets = new Map();\n  }\n\n  class_1.prototype.addExclusiveWidget = function (editor, widget) {\n    var _this = this;\n\n    var existing = this._widgets.get(editor);\n\n    if (existing) {\n      existing.listener.dispose();\n      existing.widget.dispose();\n    }\n\n    var remove = function () {\n      var data = _this._widgets.get(editor);\n\n      if (data && data.widget === widget) {\n        data.listener.dispose();\n\n        _this._widgets.delete(editor);\n      }\n    };\n\n    this._widgets.set(editor, {\n      widget: widget,\n      listener: widget.onDidClose(remove)\n    });\n  };\n\n  return class_1;\n}());\nexport var PeekContext;\n\n(function (PeekContext) {\n  PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true);\n  PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\n})(PeekContext || (PeekContext = {}));\n\nvar PeekContextController =\n/** @class */\nfunction () {\n  function PeekContextController(editor, contextKeyService) {\n    if (editor instanceof EmbeddedCodeEditorWidget) {\n      PeekContext.inPeekEditor.bindTo(contextKeyService);\n    }\n  }\n\n  PeekContextController.prototype.dispose = function () {};\n\n  PeekContextController.ID = 'editor.contrib.referenceController';\n  PeekContextController = __decorate([__param(1, IContextKeyService)], PeekContextController);\n  return PeekContextController;\n}();\n\nregisterEditorContribution(PeekContextController.ID, PeekContextController);\nexport function getOuterEditor(accessor) {\n  var editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n\n  if (editor instanceof EmbeddedCodeEditorWidget) {\n    return editor.getParentEditor();\n  }\n\n  return editor;\n}\nvar defaultOptions = {\n  headerBackgroundColor: Color.white,\n  primaryHeadingColor: Color.fromHex('#333333'),\n  secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\n};\n\nvar PeekViewWidget =\n/** @class */\nfunction (_super) {\n  __extends(PeekViewWidget, _super);\n\n  function PeekViewWidget(editor, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this, editor, options) || this;\n\n    _this._onDidClose = new Emitter();\n    _this.onDidClose = _this._onDidClose.event;\n    objects.mixin(_this.options, defaultOptions, false);\n    return _this;\n  }\n\n  PeekViewWidget.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this._onDidClose.fire(this);\n  };\n\n  PeekViewWidget.prototype.style = function (styles) {\n    var options = this.options;\n\n    if (styles.headerBackgroundColor) {\n      options.headerBackgroundColor = styles.headerBackgroundColor;\n    }\n\n    if (styles.primaryHeadingColor) {\n      options.primaryHeadingColor = styles.primaryHeadingColor;\n    }\n\n    if (styles.secondaryHeadingColor) {\n      options.secondaryHeadingColor = styles.secondaryHeadingColor;\n    }\n\n    _super.prototype.style.call(this, styles);\n  };\n\n  PeekViewWidget.prototype._applyStyles = function () {\n    _super.prototype._applyStyles.call(this);\n\n    var options = this.options;\n\n    if (this._headElement && options.headerBackgroundColor) {\n      this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\n    }\n\n    if (this._primaryHeading && options.primaryHeadingColor) {\n      this._primaryHeading.style.color = options.primaryHeadingColor.toString();\n    }\n\n    if (this._secondaryHeading && options.secondaryHeadingColor) {\n      this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\n    }\n\n    if (this._bodyElement && options.frameColor) {\n      this._bodyElement.style.borderColor = options.frameColor.toString();\n    }\n  };\n\n  PeekViewWidget.prototype._fillContainer = function (container) {\n    this.setCssClass('peekview-widget');\n    this._headElement = dom.$('.head');\n    this._bodyElement = dom.$('.body');\n\n    this._fillHead(this._headElement);\n\n    this._fillBody(this._bodyElement);\n\n    container.appendChild(this._headElement);\n    container.appendChild(this._bodyElement);\n  };\n\n  PeekViewWidget.prototype._fillHead = function (container) {\n    var _this = this;\n\n    var titleElement = dom.$('.peekview-title');\n    dom.append(this._headElement, titleElement);\n    dom.addStandardDisposableListener(titleElement, 'click', function (event) {\n      return _this._onTitleClick(event);\n    });\n\n    this._fillTitleIcon(titleElement);\n\n    this._primaryHeading = dom.$('span.filename');\n    this._secondaryHeading = dom.$('span.dirname');\n    this._metaHeading = dom.$('span.meta');\n    dom.append(titleElement, this._primaryHeading, this._secondaryHeading, this._metaHeading);\n    var actionsContainer = dom.$('.peekview-actions');\n    dom.append(this._headElement, actionsContainer);\n\n    var actionBarOptions = this._getActionBarOptions();\n\n    this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\n\n    this._disposables.add(this._actionbarWidget);\n\n    this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), 'codicon-close', true, function () {\n      _this.dispose();\n\n      return Promise.resolve();\n    }), {\n      label: false,\n      icon: true\n    });\n  };\n\n  PeekViewWidget.prototype._fillTitleIcon = function (container) {};\n\n  PeekViewWidget.prototype._getActionBarOptions = function () {\n    return {};\n  };\n\n  PeekViewWidget.prototype._onTitleClick = function (event) {// implement me\n  };\n\n  PeekViewWidget.prototype.setTitle = function (primaryHeading, secondaryHeading) {\n    if (this._primaryHeading && this._secondaryHeading) {\n      this._primaryHeading.innerHTML = strings.escape(primaryHeading);\n\n      this._primaryHeading.setAttribute('aria-label', primaryHeading);\n\n      if (secondaryHeading) {\n        this._secondaryHeading.innerHTML = strings.escape(secondaryHeading);\n      } else {\n        dom.clearNode(this._secondaryHeading);\n      }\n    }\n  };\n\n  PeekViewWidget.prototype.setMetaTitle = function (value) {\n    if (this._metaHeading) {\n      if (value) {\n        this._metaHeading.innerHTML = strings.escape(value);\n        dom.show(this._metaHeading);\n      } else {\n        dom.hide(this._metaHeading);\n      }\n    }\n  };\n\n  PeekViewWidget.prototype._doLayout = function (heightInPixel, widthInPixel) {\n    if (!this._isShowing && heightInPixel < 0) {\n      // Looks like the view zone got folded away!\n      this.dispose();\n      return;\n    }\n\n    var headHeight = Math.ceil(this.editor.getOption(49\n    /* lineHeight */\n    ) * 1.2);\n    var bodyHeight = Math.round(heightInPixel - (headHeight + 2\n    /* the border-top/bottom width*/\n    ));\n\n    this._doLayoutHead(headHeight, widthInPixel);\n\n    this._doLayoutBody(bodyHeight, widthInPixel);\n  };\n\n  PeekViewWidget.prototype._doLayoutHead = function (heightInPixel, widthInPixel) {\n    if (this._headElement) {\n      this._headElement.style.height = heightInPixel + \"px\";\n      this._headElement.style.lineHeight = this._headElement.style.height;\n    }\n  };\n\n  PeekViewWidget.prototype._doLayoutBody = function (heightInPixel, widthInPixel) {\n    if (this._bodyElement) {\n      this._bodyElement.style.height = heightInPixel + \"px\";\n    }\n  };\n\n  return PeekViewWidget;\n}(ZoneWidget);\n\nexport { PeekViewWidget };\nexport var peekViewTitleBackground = registerColor('peekViewTitle.background', {\n  dark: '#1E1E1E',\n  light: '#FFFFFF',\n  hc: '#0C141F'\n}, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\nexport var peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', {\n  dark: '#FFFFFF',\n  light: '#333333',\n  hc: '#FFFFFF'\n}, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\nexport var peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', {\n  dark: '#ccccccb3',\n  light: '#616161e6',\n  hc: '#FFFFFF99'\n}, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\nexport var peekViewBorder = registerColor('peekView.border', {\n  dark: '#007acc',\n  light: '#007acc',\n  hc: contrastBorder\n}, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\nexport var peekViewResultsBackground = registerColor('peekViewResult.background', {\n  dark: '#252526',\n  light: '#F3F3F3',\n  hc: Color.black\n}, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\nexport var peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', {\n  dark: '#bbbbbb',\n  light: '#646465',\n  hc: Color.white\n}, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\nexport var peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', {\n  dark: Color.white,\n  light: '#1E1E1E',\n  hc: Color.white\n}, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\nexport var peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', {\n  dark: '#3399ff33',\n  light: '#3399ff33',\n  hc: null\n}, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\nexport var peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', {\n  dark: Color.white,\n  light: '#6C6C6C',\n  hc: Color.white\n}, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\nexport var peekViewEditorBackground = registerColor('peekViewEditor.background', {\n  dark: '#001F33',\n  light: '#F2F8FC',\n  hc: Color.black\n}, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\nexport var peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', {\n  dark: peekViewEditorBackground,\n  light: peekViewEditorBackground,\n  hc: peekViewEditorBackground\n}, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\nexport var peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', {\n  dark: '#ea5c004d',\n  light: '#ea5c004d',\n  hc: null\n}, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\nexport var peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', {\n  dark: '#ff8f0099',\n  light: '#f5d802de',\n  hc: null\n}, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\nexport var peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', {\n  dark: null,\n  light: null,\n  hc: activeContrastBorder\n}, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/peekView/peekView.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","dom","ActionBar","Action","Color","Emitter","objects","strings","ICodeEditorService","EmbeddedCodeEditorWidget","ZoneWidget","nls","RawContextKey","IContextKeyService","createDecorator","registerSingleton","registerEditorContribution","registerColor","contrastBorder","activeContrastBorder","IPeekViewService","class_1","_widgets","Map","addExclusiveWidget","editor","widget","_this","existing","get","listener","dispose","remove","data","delete","set","onDidClose","PeekContext","inPeekEditor","notInPeekEditor","toNegated","PeekContextController","contextKeyService","bindTo","ID","getOuterEditor","accessor","getFocusedCodeEditor","getParentEditor","defaultOptions","headerBackgroundColor","white","primaryHeadingColor","fromHex","secondaryHeadingColor","PeekViewWidget","_super","options","call","_onDidClose","event","mixin","fire","style","styles","_applyStyles","_headElement","backgroundColor","toString","_primaryHeading","color","_secondaryHeading","_bodyElement","frameColor","borderColor","_fillContainer","container","setCssClass","$","_fillHead","_fillBody","appendChild","titleElement","append","addStandardDisposableListener","_onTitleClick","_fillTitleIcon","_metaHeading","actionsContainer","actionBarOptions","_getActionBarOptions","_actionbarWidget","_disposables","add","push","localize","Promise","resolve","label","icon","setTitle","primaryHeading","secondaryHeading","innerHTML","escape","setAttribute","clearNode","setMetaTitle","value","show","hide","_doLayout","heightInPixel","widthInPixel","_isShowing","headHeight","Math","ceil","getOption","bodyHeight","round","_doLayoutHead","_doLayoutBody","height","lineHeight","peekViewTitleBackground","dark","light","hc","peekViewTitleForeground","peekViewTitleInfoForeground","peekViewBorder","peekViewResultsBackground","black","peekViewResultsMatchForeground","peekViewResultsFileForeground","peekViewResultsSelectionBackground","peekViewResultsSelectionForeground","peekViewEditorBackground","peekViewEditorGutterBackground","peekViewResultsMatchHighlight","peekViewEditorMatchHighlight","peekViewEditorMatchHighlightBorder"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './media/peekViewWidget.css';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { Action } from '../../../base/common/actions.js';\r\nimport { Color } from '../../../base/common/color.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { EmbeddedCodeEditorWidget } from '../../browser/widget/embeddedCodeEditorWidget.js';\r\nimport { ZoneWidget } from '../zoneWidget/zoneWidget.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { RawContextKey, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\r\nimport { registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { registerColor, contrastBorder, activeContrastBorder } from '../../../platform/theme/common/colorRegistry.js';\r\nexport var IPeekViewService = createDecorator('IPeekViewService');\r\nregisterSingleton(IPeekViewService, /** @class */ (function () {\r\n    function class_1() {\r\n        this._widgets = new Map();\r\n    }\r\n    class_1.prototype.addExclusiveWidget = function (editor, widget) {\r\n        var _this = this;\r\n        var existing = this._widgets.get(editor);\r\n        if (existing) {\r\n            existing.listener.dispose();\r\n            existing.widget.dispose();\r\n        }\r\n        var remove = function () {\r\n            var data = _this._widgets.get(editor);\r\n            if (data && data.widget === widget) {\r\n                data.listener.dispose();\r\n                _this._widgets.delete(editor);\r\n            }\r\n        };\r\n        this._widgets.set(editor, { widget: widget, listener: widget.onDidClose(remove) });\r\n    };\r\n    return class_1;\r\n}()));\r\nexport var PeekContext;\r\n(function (PeekContext) {\r\n    PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true);\r\n    PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\r\n})(PeekContext || (PeekContext = {}));\r\nvar PeekContextController = /** @class */ (function () {\r\n    function PeekContextController(editor, contextKeyService) {\r\n        if (editor instanceof EmbeddedCodeEditorWidget) {\r\n            PeekContext.inPeekEditor.bindTo(contextKeyService);\r\n        }\r\n    }\r\n    PeekContextController.prototype.dispose = function () { };\r\n    PeekContextController.ID = 'editor.contrib.referenceController';\r\n    PeekContextController = __decorate([\r\n        __param(1, IContextKeyService)\r\n    ], PeekContextController);\r\n    return PeekContextController;\r\n}());\r\nregisterEditorContribution(PeekContextController.ID, PeekContextController);\r\nexport function getOuterEditor(accessor) {\r\n    var editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\r\n    if (editor instanceof EmbeddedCodeEditorWidget) {\r\n        return editor.getParentEditor();\r\n    }\r\n    return editor;\r\n}\r\nvar defaultOptions = {\r\n    headerBackgroundColor: Color.white,\r\n    primaryHeadingColor: Color.fromHex('#333333'),\r\n    secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\r\n};\r\nvar PeekViewWidget = /** @class */ (function (_super) {\r\n    __extends(PeekViewWidget, _super);\r\n    function PeekViewWidget(editor, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, editor, options) || this;\r\n        _this._onDidClose = new Emitter();\r\n        _this.onDidClose = _this._onDidClose.event;\r\n        objects.mixin(_this.options, defaultOptions, false);\r\n        return _this;\r\n    }\r\n    PeekViewWidget.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this._onDidClose.fire(this);\r\n    };\r\n    PeekViewWidget.prototype.style = function (styles) {\r\n        var options = this.options;\r\n        if (styles.headerBackgroundColor) {\r\n            options.headerBackgroundColor = styles.headerBackgroundColor;\r\n        }\r\n        if (styles.primaryHeadingColor) {\r\n            options.primaryHeadingColor = styles.primaryHeadingColor;\r\n        }\r\n        if (styles.secondaryHeadingColor) {\r\n            options.secondaryHeadingColor = styles.secondaryHeadingColor;\r\n        }\r\n        _super.prototype.style.call(this, styles);\r\n    };\r\n    PeekViewWidget.prototype._applyStyles = function () {\r\n        _super.prototype._applyStyles.call(this);\r\n        var options = this.options;\r\n        if (this._headElement && options.headerBackgroundColor) {\r\n            this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\r\n        }\r\n        if (this._primaryHeading && options.primaryHeadingColor) {\r\n            this._primaryHeading.style.color = options.primaryHeadingColor.toString();\r\n        }\r\n        if (this._secondaryHeading && options.secondaryHeadingColor) {\r\n            this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\r\n        }\r\n        if (this._bodyElement && options.frameColor) {\r\n            this._bodyElement.style.borderColor = options.frameColor.toString();\r\n        }\r\n    };\r\n    PeekViewWidget.prototype._fillContainer = function (container) {\r\n        this.setCssClass('peekview-widget');\r\n        this._headElement = dom.$('.head');\r\n        this._bodyElement = dom.$('.body');\r\n        this._fillHead(this._headElement);\r\n        this._fillBody(this._bodyElement);\r\n        container.appendChild(this._headElement);\r\n        container.appendChild(this._bodyElement);\r\n    };\r\n    PeekViewWidget.prototype._fillHead = function (container) {\r\n        var _this = this;\r\n        var titleElement = dom.$('.peekview-title');\r\n        dom.append(this._headElement, titleElement);\r\n        dom.addStandardDisposableListener(titleElement, 'click', function (event) { return _this._onTitleClick(event); });\r\n        this._fillTitleIcon(titleElement);\r\n        this._primaryHeading = dom.$('span.filename');\r\n        this._secondaryHeading = dom.$('span.dirname');\r\n        this._metaHeading = dom.$('span.meta');\r\n        dom.append(titleElement, this._primaryHeading, this._secondaryHeading, this._metaHeading);\r\n        var actionsContainer = dom.$('.peekview-actions');\r\n        dom.append(this._headElement, actionsContainer);\r\n        var actionBarOptions = this._getActionBarOptions();\r\n        this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\r\n        this._disposables.add(this._actionbarWidget);\r\n        this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), 'codicon-close', true, function () {\r\n            _this.dispose();\r\n            return Promise.resolve();\r\n        }), { label: false, icon: true });\r\n    };\r\n    PeekViewWidget.prototype._fillTitleIcon = function (container) {\r\n    };\r\n    PeekViewWidget.prototype._getActionBarOptions = function () {\r\n        return {};\r\n    };\r\n    PeekViewWidget.prototype._onTitleClick = function (event) {\r\n        // implement me\r\n    };\r\n    PeekViewWidget.prototype.setTitle = function (primaryHeading, secondaryHeading) {\r\n        if (this._primaryHeading && this._secondaryHeading) {\r\n            this._primaryHeading.innerHTML = strings.escape(primaryHeading);\r\n            this._primaryHeading.setAttribute('aria-label', primaryHeading);\r\n            if (secondaryHeading) {\r\n                this._secondaryHeading.innerHTML = strings.escape(secondaryHeading);\r\n            }\r\n            else {\r\n                dom.clearNode(this._secondaryHeading);\r\n            }\r\n        }\r\n    };\r\n    PeekViewWidget.prototype.setMetaTitle = function (value) {\r\n        if (this._metaHeading) {\r\n            if (value) {\r\n                this._metaHeading.innerHTML = strings.escape(value);\r\n                dom.show(this._metaHeading);\r\n            }\r\n            else {\r\n                dom.hide(this._metaHeading);\r\n            }\r\n        }\r\n    };\r\n    PeekViewWidget.prototype._doLayout = function (heightInPixel, widthInPixel) {\r\n        if (!this._isShowing && heightInPixel < 0) {\r\n            // Looks like the view zone got folded away!\r\n            this.dispose();\r\n            return;\r\n        }\r\n        var headHeight = Math.ceil(this.editor.getOption(49 /* lineHeight */) * 1.2);\r\n        var bodyHeight = Math.round(heightInPixel - (headHeight + 2 /* the border-top/bottom width*/));\r\n        this._doLayoutHead(headHeight, widthInPixel);\r\n        this._doLayoutBody(bodyHeight, widthInPixel);\r\n    };\r\n    PeekViewWidget.prototype._doLayoutHead = function (heightInPixel, widthInPixel) {\r\n        if (this._headElement) {\r\n            this._headElement.style.height = heightInPixel + \"px\";\r\n            this._headElement.style.lineHeight = this._headElement.style.height;\r\n        }\r\n    };\r\n    PeekViewWidget.prototype._doLayoutBody = function (heightInPixel, widthInPixel) {\r\n        if (this._bodyElement) {\r\n            this._bodyElement.style.height = heightInPixel + \"px\";\r\n        }\r\n    };\r\n    return PeekViewWidget;\r\n}(ZoneWidget));\r\nexport { PeekViewWidget };\r\nexport var peekViewTitleBackground = registerColor('peekViewTitle.background', { dark: '#1E1E1E', light: '#FFFFFF', hc: '#0C141F' }, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\r\nexport var peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', { dark: '#FFFFFF', light: '#333333', hc: '#FFFFFF' }, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\r\nexport var peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', { dark: '#ccccccb3', light: '#616161e6', hc: '#FFFFFF99' }, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\r\nexport var peekViewBorder = registerColor('peekView.border', { dark: '#007acc', light: '#007acc', hc: contrastBorder }, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\r\nexport var peekViewResultsBackground = registerColor('peekViewResult.background', { dark: '#252526', light: '#F3F3F3', hc: Color.black }, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\r\nexport var peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', { dark: '#bbbbbb', light: '#646465', hc: Color.white }, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\r\nexport var peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', { dark: Color.white, light: '#1E1E1E', hc: Color.white }, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\r\nexport var peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', { dark: '#3399ff33', light: '#3399ff33', hc: null }, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\r\nexport var peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', { dark: Color.white, light: '#6C6C6C', hc: Color.white }, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\r\nexport var peekViewEditorBackground = registerColor('peekViewEditor.background', { dark: '#001F33', light: '#F2F8FC', hc: Color.black }, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\r\nexport var peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hc: peekViewEditorBackground }, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\r\nexport var peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', { dark: '#ea5c004d', light: '#ea5c004d', hc: null }, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\r\nexport var peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', { dark: '#ff8f0099', light: '#f5d802de', hc: null }, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\r\nexport var peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', { dark: null, light: null, hc: activeContrastBorder }, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));\r\n"]},"metadata":{},"sourceType":"module"}