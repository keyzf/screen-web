{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { IMarkerService, MarkerSeverity } from '../../../platform/markers/common/markers.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { OverviewRulerLane, MinimapPosition } from '../model.js';\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\nimport { overviewRulerWarning, overviewRulerInfo, overviewRulerError } from '../view/editorColorRegistry.js';\nimport { IModelService } from './modelService.js';\nimport { Range } from '../core/range.js';\nimport { keys } from '../../../base/common/map.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { withUndefinedAsNull } from '../../../base/common/types.js';\nimport { minimapWarning, minimapError } from '../../../platform/theme/common/colorRegistry.js';\n\nfunction MODEL_ID(resource) {\n  return resource.toString();\n}\n\nvar MarkerDecorations =\n/** @class */\nfunction (_super) {\n  __extends(MarkerDecorations, _super);\n\n  function MarkerDecorations(model) {\n    var _this = _super.call(this) || this;\n\n    _this.model = model;\n    _this._markersData = new Map();\n\n    _this._register(toDisposable(function () {\n      _this.model.deltaDecorations(keys(_this._markersData), []);\n\n      _this._markersData.clear();\n    }));\n\n    return _this;\n  }\n\n  MarkerDecorations.prototype.update = function (markers, newDecorations) {\n    var oldIds = keys(this._markersData);\n\n    this._markersData.clear();\n\n    var ids = this.model.deltaDecorations(oldIds, newDecorations);\n\n    for (var index = 0; index < ids.length; index++) {\n      this._markersData.set(ids[index], markers[index]);\n    }\n  };\n\n  MarkerDecorations.prototype.getMarker = function (decoration) {\n    return this._markersData.get(decoration.id);\n  };\n\n  return MarkerDecorations;\n}(Disposable);\n\nvar MarkerDecorationsService =\n/** @class */\nfunction (_super) {\n  __extends(MarkerDecorationsService, _super);\n\n  function MarkerDecorationsService(modelService, _markerService) {\n    var _this = _super.call(this) || this;\n\n    _this._markerService = _markerService;\n    _this._onDidChangeMarker = _this._register(new Emitter());\n    _this._markerDecorations = new Map();\n    modelService.getModels().forEach(function (model) {\n      return _this._onModelAdded(model);\n    });\n\n    _this._register(modelService.onModelAdded(_this._onModelAdded, _this));\n\n    _this._register(modelService.onModelRemoved(_this._onModelRemoved, _this));\n\n    _this._register(_this._markerService.onMarkerChanged(_this._handleMarkerChange, _this));\n\n    return _this;\n  }\n\n  MarkerDecorationsService.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this._markerDecorations.forEach(function (value) {\n      return value.dispose();\n    });\n\n    this._markerDecorations.clear();\n  };\n\n  MarkerDecorationsService.prototype.getMarker = function (model, decoration) {\n    var markerDecorations = this._markerDecorations.get(MODEL_ID(model.uri));\n\n    return markerDecorations ? withUndefinedAsNull(markerDecorations.getMarker(decoration)) : null;\n  };\n\n  MarkerDecorationsService.prototype._handleMarkerChange = function (changedResources) {\n    var _this = this;\n\n    changedResources.forEach(function (resource) {\n      var markerDecorations = _this._markerDecorations.get(MODEL_ID(resource));\n\n      if (markerDecorations) {\n        _this._updateDecorations(markerDecorations);\n      }\n    });\n  };\n\n  MarkerDecorationsService.prototype._onModelAdded = function (model) {\n    var markerDecorations = new MarkerDecorations(model);\n\n    this._markerDecorations.set(MODEL_ID(model.uri), markerDecorations);\n\n    this._updateDecorations(markerDecorations);\n  };\n\n  MarkerDecorationsService.prototype._onModelRemoved = function (model) {\n    var _this = this;\n\n    var markerDecorations = this._markerDecorations.get(MODEL_ID(model.uri));\n\n    if (markerDecorations) {\n      markerDecorations.dispose();\n\n      this._markerDecorations.delete(MODEL_ID(model.uri));\n    } // clean up markers for internal, transient models\n\n\n    if (model.uri.scheme === Schemas.inMemory || model.uri.scheme === Schemas.internal || model.uri.scheme === Schemas.vscode) {\n      if (this._markerService) {\n        this._markerService.read({\n          resource: model.uri\n        }).map(function (marker) {\n          return marker.owner;\n        }).forEach(function (owner) {\n          return _this._markerService.remove(owner, [model.uri]);\n        });\n      }\n    }\n  };\n\n  MarkerDecorationsService.prototype._updateDecorations = function (markerDecorations) {\n    var _this = this; // Limit to the first 500 errors/warnings\n\n\n    var markers = this._markerService.read({\n      resource: markerDecorations.model.uri,\n      take: 500\n    });\n\n    var newModelDecorations = markers.map(function (marker) {\n      return {\n        range: _this._createDecorationRange(markerDecorations.model, marker),\n        options: _this._createDecorationOption(marker)\n      };\n    });\n    markerDecorations.update(markers, newModelDecorations);\n\n    this._onDidChangeMarker.fire(markerDecorations.model);\n  };\n\n  MarkerDecorationsService.prototype._createDecorationRange = function (model, rawMarker) {\n    var ret = Range.lift(rawMarker);\n\n    if (rawMarker.severity === MarkerSeverity.Hint && !this._hasMarkerTag(rawMarker, 1\n    /* Unnecessary */\n    ) && !this._hasMarkerTag(rawMarker, 2\n    /* Deprecated */\n    )) {\n      // * never render hints on multiple lines\n      // * make enough space for three dots\n      ret = ret.setEndPosition(ret.startLineNumber, ret.startColumn + 2);\n    }\n\n    ret = model.validateRange(ret);\n\n    if (ret.isEmpty()) {\n      var word = model.getWordAtPosition(ret.getStartPosition());\n\n      if (word) {\n        ret = new Range(ret.startLineNumber, word.startColumn, ret.endLineNumber, word.endColumn);\n      } else {\n        var maxColumn = model.getLineLastNonWhitespaceColumn(ret.startLineNumber) || model.getLineMaxColumn(ret.startLineNumber);\n\n        if (maxColumn === 1) {// empty line\n          // console.warn('marker on empty line:', marker);\n        } else if (ret.endColumn >= maxColumn) {\n          // behind eol\n          ret = new Range(ret.startLineNumber, maxColumn - 1, ret.endLineNumber, maxColumn);\n        } else {\n          // extend marker to width = 1\n          ret = new Range(ret.startLineNumber, ret.startColumn, ret.endLineNumber, ret.endColumn + 1);\n        }\n      }\n    } else if (rawMarker.endColumn === Number.MAX_VALUE && rawMarker.startColumn === 1 && ret.startLineNumber === ret.endLineNumber) {\n      var minColumn = model.getLineFirstNonWhitespaceColumn(rawMarker.startLineNumber);\n\n      if (minColumn < ret.endColumn) {\n        ret = new Range(ret.startLineNumber, minColumn, ret.endLineNumber, ret.endColumn);\n        rawMarker.startColumn = minColumn;\n      }\n    }\n\n    return ret;\n  };\n\n  MarkerDecorationsService.prototype._createDecorationOption = function (marker) {\n    var className;\n    var color = undefined;\n    var zIndex;\n    var inlineClassName = undefined;\n    var minimap;\n\n    switch (marker.severity) {\n      case MarkerSeverity.Hint:\n        if (this._hasMarkerTag(marker, 2\n        /* Deprecated */\n        )) {\n          className = undefined;\n        } else if (this._hasMarkerTag(marker, 1\n        /* Unnecessary */\n        )) {\n          className = \"squiggly-unnecessary\"\n          /* EditorUnnecessaryDecoration */\n          ;\n        } else {\n          className = \"squiggly-hint\"\n          /* EditorHintDecoration */\n          ;\n        }\n\n        zIndex = 0;\n        break;\n\n      case MarkerSeverity.Warning:\n        className = \"squiggly-warning\"\n        /* EditorWarningDecoration */\n        ;\n        color = themeColorFromId(overviewRulerWarning);\n        zIndex = 20;\n        minimap = {\n          color: themeColorFromId(minimapWarning),\n          position: MinimapPosition.Inline\n        };\n        break;\n\n      case MarkerSeverity.Info:\n        className = \"squiggly-info\"\n        /* EditorInfoDecoration */\n        ;\n        color = themeColorFromId(overviewRulerInfo);\n        zIndex = 10;\n        break;\n\n      case MarkerSeverity.Error:\n      default:\n        className = \"squiggly-error\"\n        /* EditorErrorDecoration */\n        ;\n        color = themeColorFromId(overviewRulerError);\n        zIndex = 30;\n        minimap = {\n          color: themeColorFromId(minimapError),\n          position: MinimapPosition.Inline\n        };\n        break;\n    }\n\n    if (marker.tags) {\n      if (marker.tags.indexOf(1\n      /* Unnecessary */\n      ) !== -1) {\n        inlineClassName = \"squiggly-inline-unnecessary\"\n        /* EditorUnnecessaryInlineDecoration */\n        ;\n      }\n\n      if (marker.tags.indexOf(2\n      /* Deprecated */\n      ) !== -1) {\n        inlineClassName = \"squiggly-inline-deprecated\"\n        /* EditorDeprecatedInlineDecoration */\n        ;\n      }\n    }\n\n    return {\n      stickiness: 1\n      /* NeverGrowsWhenTypingAtEdges */\n      ,\n      className: className,\n      showIfCollapsed: true,\n      overviewRuler: {\n        color: color,\n        position: OverviewRulerLane.Right\n      },\n      minimap: minimap,\n      zIndex: zIndex,\n      inlineClassName: inlineClassName\n    };\n  };\n\n  MarkerDecorationsService.prototype._hasMarkerTag = function (marker, tag) {\n    if (marker.tags) {\n      return marker.tags.indexOf(tag) >= 0;\n    }\n\n    return false;\n  };\n\n  MarkerDecorationsService = __decorate([__param(0, IModelService), __param(1, IMarkerService)], MarkerDecorationsService);\n  return MarkerDecorationsService;\n}(Disposable);\n\nexport { MarkerDecorationsService };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/common/services/markerDecorationsServiceImpl.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","IMarkerService","MarkerSeverity","Disposable","toDisposable","OverviewRulerLane","MinimapPosition","themeColorFromId","overviewRulerWarning","overviewRulerInfo","overviewRulerError","IModelService","Range","keys","Schemas","Emitter","withUndefinedAsNull","minimapWarning","minimapError","MODEL_ID","resource","toString","MarkerDecorations","_super","model","_this","call","_markersData","Map","_register","deltaDecorations","clear","update","markers","newDecorations","oldIds","ids","index","set","getMarker","decoration","get","id","MarkerDecorationsService","modelService","_markerService","_onDidChangeMarker","_markerDecorations","getModels","forEach","_onModelAdded","onModelAdded","onModelRemoved","_onModelRemoved","onMarkerChanged","_handleMarkerChange","dispose","value","markerDecorations","uri","changedResources","_updateDecorations","delete","scheme","inMemory","internal","vscode","read","map","marker","owner","remove","take","newModelDecorations","range","_createDecorationRange","options","_createDecorationOption","fire","rawMarker","ret","lift","severity","Hint","_hasMarkerTag","setEndPosition","startLineNumber","startColumn","validateRange","isEmpty","word","getWordAtPosition","getStartPosition","endLineNumber","endColumn","maxColumn","getLineLastNonWhitespaceColumn","getLineMaxColumn","Number","MAX_VALUE","minColumn","getLineFirstNonWhitespaceColumn","className","color","undefined","zIndex","inlineClassName","minimap","Warning","position","Inline","Info","Error","tags","indexOf","stickiness","showIfCollapsed","overviewRuler","Right","tag"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { IMarkerService, MarkerSeverity } from '../../../platform/markers/common/markers.js';\r\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\r\nimport { OverviewRulerLane, MinimapPosition } from '../model.js';\r\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\r\nimport { overviewRulerWarning, overviewRulerInfo, overviewRulerError } from '../view/editorColorRegistry.js';\r\nimport { IModelService } from './modelService.js';\r\nimport { Range } from '../core/range.js';\r\nimport { keys } from '../../../base/common/map.js';\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { withUndefinedAsNull } from '../../../base/common/types.js';\r\nimport { minimapWarning, minimapError } from '../../../platform/theme/common/colorRegistry.js';\r\nfunction MODEL_ID(resource) {\r\n    return resource.toString();\r\n}\r\nvar MarkerDecorations = /** @class */ (function (_super) {\r\n    __extends(MarkerDecorations, _super);\r\n    function MarkerDecorations(model) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = model;\r\n        _this._markersData = new Map();\r\n        _this._register(toDisposable(function () {\r\n            _this.model.deltaDecorations(keys(_this._markersData), []);\r\n            _this._markersData.clear();\r\n        }));\r\n        return _this;\r\n    }\r\n    MarkerDecorations.prototype.update = function (markers, newDecorations) {\r\n        var oldIds = keys(this._markersData);\r\n        this._markersData.clear();\r\n        var ids = this.model.deltaDecorations(oldIds, newDecorations);\r\n        for (var index = 0; index < ids.length; index++) {\r\n            this._markersData.set(ids[index], markers[index]);\r\n        }\r\n    };\r\n    MarkerDecorations.prototype.getMarker = function (decoration) {\r\n        return this._markersData.get(decoration.id);\r\n    };\r\n    return MarkerDecorations;\r\n}(Disposable));\r\nvar MarkerDecorationsService = /** @class */ (function (_super) {\r\n    __extends(MarkerDecorationsService, _super);\r\n    function MarkerDecorationsService(modelService, _markerService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._markerService = _markerService;\r\n        _this._onDidChangeMarker = _this._register(new Emitter());\r\n        _this._markerDecorations = new Map();\r\n        modelService.getModels().forEach(function (model) { return _this._onModelAdded(model); });\r\n        _this._register(modelService.onModelAdded(_this._onModelAdded, _this));\r\n        _this._register(modelService.onModelRemoved(_this._onModelRemoved, _this));\r\n        _this._register(_this._markerService.onMarkerChanged(_this._handleMarkerChange, _this));\r\n        return _this;\r\n    }\r\n    MarkerDecorationsService.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this._markerDecorations.forEach(function (value) { return value.dispose(); });\r\n        this._markerDecorations.clear();\r\n    };\r\n    MarkerDecorationsService.prototype.getMarker = function (model, decoration) {\r\n        var markerDecorations = this._markerDecorations.get(MODEL_ID(model.uri));\r\n        return markerDecorations ? withUndefinedAsNull(markerDecorations.getMarker(decoration)) : null;\r\n    };\r\n    MarkerDecorationsService.prototype._handleMarkerChange = function (changedResources) {\r\n        var _this = this;\r\n        changedResources.forEach(function (resource) {\r\n            var markerDecorations = _this._markerDecorations.get(MODEL_ID(resource));\r\n            if (markerDecorations) {\r\n                _this._updateDecorations(markerDecorations);\r\n            }\r\n        });\r\n    };\r\n    MarkerDecorationsService.prototype._onModelAdded = function (model) {\r\n        var markerDecorations = new MarkerDecorations(model);\r\n        this._markerDecorations.set(MODEL_ID(model.uri), markerDecorations);\r\n        this._updateDecorations(markerDecorations);\r\n    };\r\n    MarkerDecorationsService.prototype._onModelRemoved = function (model) {\r\n        var _this = this;\r\n        var markerDecorations = this._markerDecorations.get(MODEL_ID(model.uri));\r\n        if (markerDecorations) {\r\n            markerDecorations.dispose();\r\n            this._markerDecorations.delete(MODEL_ID(model.uri));\r\n        }\r\n        // clean up markers for internal, transient models\r\n        if (model.uri.scheme === Schemas.inMemory\r\n            || model.uri.scheme === Schemas.internal\r\n            || model.uri.scheme === Schemas.vscode) {\r\n            if (this._markerService) {\r\n                this._markerService.read({ resource: model.uri }).map(function (marker) { return marker.owner; }).forEach(function (owner) { return _this._markerService.remove(owner, [model.uri]); });\r\n            }\r\n        }\r\n    };\r\n    MarkerDecorationsService.prototype._updateDecorations = function (markerDecorations) {\r\n        var _this = this;\r\n        // Limit to the first 500 errors/warnings\r\n        var markers = this._markerService.read({ resource: markerDecorations.model.uri, take: 500 });\r\n        var newModelDecorations = markers.map(function (marker) {\r\n            return {\r\n                range: _this._createDecorationRange(markerDecorations.model, marker),\r\n                options: _this._createDecorationOption(marker)\r\n            };\r\n        });\r\n        markerDecorations.update(markers, newModelDecorations);\r\n        this._onDidChangeMarker.fire(markerDecorations.model);\r\n    };\r\n    MarkerDecorationsService.prototype._createDecorationRange = function (model, rawMarker) {\r\n        var ret = Range.lift(rawMarker);\r\n        if (rawMarker.severity === MarkerSeverity.Hint && !this._hasMarkerTag(rawMarker, 1 /* Unnecessary */) && !this._hasMarkerTag(rawMarker, 2 /* Deprecated */)) {\r\n            // * never render hints on multiple lines\r\n            // * make enough space for three dots\r\n            ret = ret.setEndPosition(ret.startLineNumber, ret.startColumn + 2);\r\n        }\r\n        ret = model.validateRange(ret);\r\n        if (ret.isEmpty()) {\r\n            var word = model.getWordAtPosition(ret.getStartPosition());\r\n            if (word) {\r\n                ret = new Range(ret.startLineNumber, word.startColumn, ret.endLineNumber, word.endColumn);\r\n            }\r\n            else {\r\n                var maxColumn = model.getLineLastNonWhitespaceColumn(ret.startLineNumber) ||\r\n                    model.getLineMaxColumn(ret.startLineNumber);\r\n                if (maxColumn === 1) {\r\n                    // empty line\r\n                    // console.warn('marker on empty line:', marker);\r\n                }\r\n                else if (ret.endColumn >= maxColumn) {\r\n                    // behind eol\r\n                    ret = new Range(ret.startLineNumber, maxColumn - 1, ret.endLineNumber, maxColumn);\r\n                }\r\n                else {\r\n                    // extend marker to width = 1\r\n                    ret = new Range(ret.startLineNumber, ret.startColumn, ret.endLineNumber, ret.endColumn + 1);\r\n                }\r\n            }\r\n        }\r\n        else if (rawMarker.endColumn === Number.MAX_VALUE && rawMarker.startColumn === 1 && ret.startLineNumber === ret.endLineNumber) {\r\n            var minColumn = model.getLineFirstNonWhitespaceColumn(rawMarker.startLineNumber);\r\n            if (minColumn < ret.endColumn) {\r\n                ret = new Range(ret.startLineNumber, minColumn, ret.endLineNumber, ret.endColumn);\r\n                rawMarker.startColumn = minColumn;\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n    MarkerDecorationsService.prototype._createDecorationOption = function (marker) {\r\n        var className;\r\n        var color = undefined;\r\n        var zIndex;\r\n        var inlineClassName = undefined;\r\n        var minimap;\r\n        switch (marker.severity) {\r\n            case MarkerSeverity.Hint:\r\n                if (this._hasMarkerTag(marker, 2 /* Deprecated */)) {\r\n                    className = undefined;\r\n                }\r\n                else if (this._hasMarkerTag(marker, 1 /* Unnecessary */)) {\r\n                    className = \"squiggly-unnecessary\" /* EditorUnnecessaryDecoration */;\r\n                }\r\n                else {\r\n                    className = \"squiggly-hint\" /* EditorHintDecoration */;\r\n                }\r\n                zIndex = 0;\r\n                break;\r\n            case MarkerSeverity.Warning:\r\n                className = \"squiggly-warning\" /* EditorWarningDecoration */;\r\n                color = themeColorFromId(overviewRulerWarning);\r\n                zIndex = 20;\r\n                minimap = {\r\n                    color: themeColorFromId(minimapWarning),\r\n                    position: MinimapPosition.Inline\r\n                };\r\n                break;\r\n            case MarkerSeverity.Info:\r\n                className = \"squiggly-info\" /* EditorInfoDecoration */;\r\n                color = themeColorFromId(overviewRulerInfo);\r\n                zIndex = 10;\r\n                break;\r\n            case MarkerSeverity.Error:\r\n            default:\r\n                className = \"squiggly-error\" /* EditorErrorDecoration */;\r\n                color = themeColorFromId(overviewRulerError);\r\n                zIndex = 30;\r\n                minimap = {\r\n                    color: themeColorFromId(minimapError),\r\n                    position: MinimapPosition.Inline\r\n                };\r\n                break;\r\n        }\r\n        if (marker.tags) {\r\n            if (marker.tags.indexOf(1 /* Unnecessary */) !== -1) {\r\n                inlineClassName = \"squiggly-inline-unnecessary\" /* EditorUnnecessaryInlineDecoration */;\r\n            }\r\n            if (marker.tags.indexOf(2 /* Deprecated */) !== -1) {\r\n                inlineClassName = \"squiggly-inline-deprecated\" /* EditorDeprecatedInlineDecoration */;\r\n            }\r\n        }\r\n        return {\r\n            stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n            className: className,\r\n            showIfCollapsed: true,\r\n            overviewRuler: {\r\n                color: color,\r\n                position: OverviewRulerLane.Right\r\n            },\r\n            minimap: minimap,\r\n            zIndex: zIndex,\r\n            inlineClassName: inlineClassName,\r\n        };\r\n    };\r\n    MarkerDecorationsService.prototype._hasMarkerTag = function (marker, tag) {\r\n        if (marker.tags) {\r\n            return marker.tags.indexOf(tag) >= 0;\r\n        }\r\n        return false;\r\n    };\r\n    MarkerDecorationsService = __decorate([\r\n        __param(0, IModelService),\r\n        __param(1, IMarkerService)\r\n    ], MarkerDecorationsService);\r\n    return MarkerDecorationsService;\r\n}(Disposable));\r\nexport { MarkerDecorationsService };\r\n"]},"metadata":{},"sourceType":"module"}