{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../common/core/range.js';\nimport { OverviewRulerLane, MinimapPosition } from '../../common/model.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { overviewRulerFindMatchForeground, minimapFindMatch } from '../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\n\nvar FindDecorations =\n/** @class */\nfunction () {\n  function FindDecorations(editor) {\n    this._editor = editor;\n    this._decorations = [];\n    this._overviewRulerApproximateDecorations = [];\n    this._findScopeDecorationId = null;\n    this._rangeHighlightDecorationId = null;\n    this._highlightedDecorationId = null;\n    this._startPosition = this._editor.getPosition();\n  }\n\n  FindDecorations.prototype.dispose = function () {\n    this._editor.deltaDecorations(this._allDecorations(), []);\n\n    this._decorations = [];\n    this._overviewRulerApproximateDecorations = [];\n    this._findScopeDecorationId = null;\n    this._rangeHighlightDecorationId = null;\n    this._highlightedDecorationId = null;\n  };\n\n  FindDecorations.prototype.reset = function () {\n    this._decorations = [];\n    this._overviewRulerApproximateDecorations = [];\n    this._findScopeDecorationId = null;\n    this._rangeHighlightDecorationId = null;\n    this._highlightedDecorationId = null;\n  };\n\n  FindDecorations.prototype.getCount = function () {\n    return this._decorations.length;\n  };\n\n  FindDecorations.prototype.getFindScope = function () {\n    if (this._findScopeDecorationId) {\n      return this._editor.getModel().getDecorationRange(this._findScopeDecorationId);\n    }\n\n    return null;\n  };\n\n  FindDecorations.prototype.getStartPosition = function () {\n    return this._startPosition;\n  };\n\n  FindDecorations.prototype.setStartPosition = function (newStartPosition) {\n    this._startPosition = newStartPosition;\n    this.setCurrentFindMatch(null);\n  };\n\n  FindDecorations.prototype._getDecorationIndex = function (decorationId) {\n    var index = this._decorations.indexOf(decorationId);\n\n    if (index >= 0) {\n      return index + 1;\n    }\n\n    return 1;\n  };\n\n  FindDecorations.prototype.getCurrentMatchesPosition = function (desiredRange) {\n    var candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\n\n    for (var _i = 0, candidates_1 = candidates; _i < candidates_1.length; _i++) {\n      var candidate = candidates_1[_i];\n      var candidateOpts = candidate.options;\n\n      if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\n        return this._getDecorationIndex(candidate.id);\n      }\n    }\n\n    return 1;\n  };\n\n  FindDecorations.prototype.setCurrentFindMatch = function (nextMatch) {\n    var _this = this;\n\n    var newCurrentDecorationId = null;\n    var matchPosition = 0;\n\n    if (nextMatch) {\n      for (var i = 0, len = this._decorations.length; i < len; i++) {\n        var range = this._editor.getModel().getDecorationRange(this._decorations[i]);\n\n        if (nextMatch.equalsRange(range)) {\n          newCurrentDecorationId = this._decorations[i];\n          matchPosition = i + 1;\n          break;\n        }\n      }\n    }\n\n    if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\n      this._editor.changeDecorations(function (changeAccessor) {\n        if (_this._highlightedDecorationId !== null) {\n          changeAccessor.changeDecorationOptions(_this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\n          _this._highlightedDecorationId = null;\n        }\n\n        if (newCurrentDecorationId !== null) {\n          _this._highlightedDecorationId = newCurrentDecorationId;\n          changeAccessor.changeDecorationOptions(_this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\n        }\n\n        if (_this._rangeHighlightDecorationId !== null) {\n          changeAccessor.removeDecoration(_this._rangeHighlightDecorationId);\n          _this._rangeHighlightDecorationId = null;\n        }\n\n        if (newCurrentDecorationId !== null) {\n          var rng = _this._editor.getModel().getDecorationRange(newCurrentDecorationId);\n\n          if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\n            var lineBeforeEnd = rng.endLineNumber - 1;\n\n            var lineBeforeEndMaxColumn = _this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\n\n            rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\n          }\n\n          _this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\n        }\n      });\n    }\n\n    return matchPosition;\n  };\n\n  FindDecorations.prototype.set = function (findMatches, findScope) {\n    var _this = this;\n\n    this._editor.changeDecorations(function (accessor) {\n      var findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\n      var newOverviewRulerApproximateDecorations = [];\n\n      if (findMatches.length > 1000) {\n        // we go into a mode where the overview ruler gets \"approximate\" decorations\n        // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\n        findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION; // approximate a distance in lines where matches should be merged\n\n        var lineCount = _this._editor.getModel().getLineCount();\n\n        var height = _this._editor.getLayoutInfo().height;\n\n        var approxPixelsPerLine = height / lineCount;\n        var mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine)); // merge decorations as much as possible\n\n        var prevStartLineNumber = findMatches[0].range.startLineNumber;\n        var prevEndLineNumber = findMatches[0].range.endLineNumber;\n\n        for (var i = 1, len = findMatches.length; i < len; i++) {\n          var range = findMatches[i].range;\n\n          if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\n            if (range.endLineNumber > prevEndLineNumber) {\n              prevEndLineNumber = range.endLineNumber;\n            }\n          } else {\n            newOverviewRulerApproximateDecorations.push({\n              range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n              options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n            });\n            prevStartLineNumber = range.startLineNumber;\n            prevEndLineNumber = range.endLineNumber;\n          }\n        }\n\n        newOverviewRulerApproximateDecorations.push({\n          range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n          options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n        });\n      } // Find matches\n\n\n      var newFindMatchesDecorations = new Array(findMatches.length);\n\n      for (var i = 0, len = findMatches.length; i < len; i++) {\n        newFindMatchesDecorations[i] = {\n          range: findMatches[i].range,\n          options: findMatchesOptions\n        };\n      }\n\n      _this._decorations = accessor.deltaDecorations(_this._decorations, newFindMatchesDecorations); // Overview ruler approximate decorations\n\n      _this._overviewRulerApproximateDecorations = accessor.deltaDecorations(_this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations); // Range highlight\n\n      if (_this._rangeHighlightDecorationId) {\n        accessor.removeDecoration(_this._rangeHighlightDecorationId);\n        _this._rangeHighlightDecorationId = null;\n      } // Find scope\n\n\n      if (_this._findScopeDecorationId) {\n        accessor.removeDecoration(_this._findScopeDecorationId);\n        _this._findScopeDecorationId = null;\n      }\n\n      if (findScope) {\n        _this._findScopeDecorationId = accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION);\n      }\n    });\n  };\n\n  FindDecorations.prototype.matchBeforePosition = function (position) {\n    if (this._decorations.length === 0) {\n      return null;\n    }\n\n    for (var i = this._decorations.length - 1; i >= 0; i--) {\n      var decorationId = this._decorations[i];\n\n      var r = this._editor.getModel().getDecorationRange(decorationId);\n\n      if (!r || r.endLineNumber > position.lineNumber) {\n        continue;\n      }\n\n      if (r.endLineNumber < position.lineNumber) {\n        return r;\n      }\n\n      if (r.endColumn > position.column) {\n        continue;\n      }\n\n      return r;\n    }\n\n    return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\n  };\n\n  FindDecorations.prototype.matchAfterPosition = function (position) {\n    if (this._decorations.length === 0) {\n      return null;\n    }\n\n    for (var i = 0, len = this._decorations.length; i < len; i++) {\n      var decorationId = this._decorations[i];\n\n      var r = this._editor.getModel().getDecorationRange(decorationId);\n\n      if (!r || r.startLineNumber < position.lineNumber) {\n        continue;\n      }\n\n      if (r.startLineNumber > position.lineNumber) {\n        return r;\n      }\n\n      if (r.startColumn < position.column) {\n        continue;\n      }\n\n      return r;\n    }\n\n    return this._editor.getModel().getDecorationRange(this._decorations[0]);\n  };\n\n  FindDecorations.prototype._allDecorations = function () {\n    var result = [];\n    result = result.concat(this._decorations);\n    result = result.concat(this._overviewRulerApproximateDecorations);\n\n    if (this._findScopeDecorationId) {\n      result.push(this._findScopeDecorationId);\n    }\n\n    if (this._rangeHighlightDecorationId) {\n      result.push(this._rangeHighlightDecorationId);\n    }\n\n    return result;\n  };\n\n  FindDecorations._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    zIndex: 13,\n    className: 'currentFindMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerFindMatchForeground),\n      position: OverviewRulerLane.Center\n    },\n    minimap: {\n      color: themeColorFromId(minimapFindMatch),\n      position: MinimapPosition.Inline\n    }\n  });\n  FindDecorations._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'findMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerFindMatchForeground),\n      position: OverviewRulerLane.Center\n    },\n    minimap: {\n      color: themeColorFromId(minimapFindMatch),\n      position: MinimapPosition.Inline\n    }\n  });\n  FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'findMatch',\n    showIfCollapsed: true\n  });\n  FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    overviewRuler: {\n      color: themeColorFromId(overviewRulerFindMatchForeground),\n      position: OverviewRulerLane.Center\n    }\n  });\n  FindDecorations._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\n    stickiness: 1\n    /* NeverGrowsWhenTypingAtEdges */\n    ,\n    className: 'rangeHighlight',\n    isWholeLine: true\n  });\n  FindDecorations._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\n    className: 'findScope',\n    isWholeLine: true\n  });\n  return FindDecorations;\n}();\n\nexport { FindDecorations };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/find/findDecorations.js"],"names":["Range","OverviewRulerLane","MinimapPosition","ModelDecorationOptions","overviewRulerFindMatchForeground","minimapFindMatch","themeColorFromId","FindDecorations","editor","_editor","_decorations","_overviewRulerApproximateDecorations","_findScopeDecorationId","_rangeHighlightDecorationId","_highlightedDecorationId","_startPosition","getPosition","prototype","dispose","deltaDecorations","_allDecorations","reset","getCount","length","getFindScope","getModel","getDecorationRange","getStartPosition","setStartPosition","newStartPosition","setCurrentFindMatch","_getDecorationIndex","decorationId","index","indexOf","getCurrentMatchesPosition","desiredRange","candidates","getDecorationsInRange","_i","candidates_1","candidate","candidateOpts","options","_FIND_MATCH_DECORATION","_CURRENT_FIND_MATCH_DECORATION","id","nextMatch","_this","newCurrentDecorationId","matchPosition","i","len","range","equalsRange","changeDecorations","changeAccessor","changeDecorationOptions","removeDecoration","rng","startLineNumber","endLineNumber","endColumn","lineBeforeEnd","lineBeforeEndMaxColumn","getLineMaxColumn","startColumn","addDecoration","_RANGE_HIGHLIGHT_DECORATION","set","findMatches","findScope","accessor","findMatchesOptions","newOverviewRulerApproximateDecorations","_FIND_MATCH_NO_OVERVIEW_DECORATION","lineCount","getLineCount","height","getLayoutInfo","approxPixelsPerLine","mergeLinesDelta","Math","max","ceil","prevStartLineNumber","prevEndLineNumber","push","_FIND_MATCH_ONLY_OVERVIEW_DECORATION","newFindMatchesDecorations","Array","_FIND_SCOPE_DECORATION","matchBeforePosition","position","r","lineNumber","column","matchAfterPosition","result","concat","register","stickiness","zIndex","className","showIfCollapsed","overviewRuler","color","Center","minimap","Inline","isWholeLine"],"mappings":"AAAA;;;;AAIA,SAASA,KAAT,QAAsB,4BAAtB;AACA,SAASC,iBAAT,EAA4BC,eAA5B,QAAmD,uBAAnD;AACA,SAASC,sBAAT,QAAuC,iCAAvC;AACA,SAASC,gCAAT,EAA2CC,gBAA3C,QAAmE,iDAAnE;AACA,SAASC,gBAAT,QAAiC,gDAAjC;;AACA,IAAIC,eAAe;AAAG;AAAe,YAAY;AAC7C,WAASA,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,SAAKC,OAAL,GAAeD,MAAf;AACA,SAAKE,YAAL,GAAoB,EAApB;AACA,SAAKC,oCAAL,GAA4C,EAA5C;AACA,SAAKC,sBAAL,GAA8B,IAA9B;AACA,SAAKC,2BAAL,GAAmC,IAAnC;AACA,SAAKC,wBAAL,GAAgC,IAAhC;AACA,SAAKC,cAAL,GAAsB,KAAKN,OAAL,CAAaO,WAAb,EAAtB;AACH;;AACDT,EAAAA,eAAe,CAACU,SAAhB,CAA0BC,OAA1B,GAAoC,YAAY;AAC5C,SAAKT,OAAL,CAAaU,gBAAb,CAA8B,KAAKC,eAAL,EAA9B,EAAsD,EAAtD;;AACA,SAAKV,YAAL,GAAoB,EAApB;AACA,SAAKC,oCAAL,GAA4C,EAA5C;AACA,SAAKC,sBAAL,GAA8B,IAA9B;AACA,SAAKC,2BAAL,GAAmC,IAAnC;AACA,SAAKC,wBAAL,GAAgC,IAAhC;AACH,GAPD;;AAQAP,EAAAA,eAAe,CAACU,SAAhB,CAA0BI,KAA1B,GAAkC,YAAY;AAC1C,SAAKX,YAAL,GAAoB,EAApB;AACA,SAAKC,oCAAL,GAA4C,EAA5C;AACA,SAAKC,sBAAL,GAA8B,IAA9B;AACA,SAAKC,2BAAL,GAAmC,IAAnC;AACA,SAAKC,wBAAL,GAAgC,IAAhC;AACH,GAND;;AAOAP,EAAAA,eAAe,CAACU,SAAhB,CAA0BK,QAA1B,GAAqC,YAAY;AAC7C,WAAO,KAAKZ,YAAL,CAAkBa,MAAzB;AACH,GAFD;;AAGAhB,EAAAA,eAAe,CAACU,SAAhB,CAA0BO,YAA1B,GAAyC,YAAY;AACjD,QAAI,KAAKZ,sBAAT,EAAiC;AAC7B,aAAO,KAAKH,OAAL,CAAagB,QAAb,GAAwBC,kBAAxB,CAA2C,KAAKd,sBAAhD,CAAP;AACH;;AACD,WAAO,IAAP;AACH,GALD;;AAMAL,EAAAA,eAAe,CAACU,SAAhB,CAA0BU,gBAA1B,GAA6C,YAAY;AACrD,WAAO,KAAKZ,cAAZ;AACH,GAFD;;AAGAR,EAAAA,eAAe,CAACU,SAAhB,CAA0BW,gBAA1B,GAA6C,UAAUC,gBAAV,EAA4B;AACrE,SAAKd,cAAL,GAAsBc,gBAAtB;AACA,SAAKC,mBAAL,CAAyB,IAAzB;AACH,GAHD;;AAIAvB,EAAAA,eAAe,CAACU,SAAhB,CAA0Bc,mBAA1B,GAAgD,UAAUC,YAAV,EAAwB;AACpE,QAAIC,KAAK,GAAG,KAAKvB,YAAL,CAAkBwB,OAAlB,CAA0BF,YAA1B,CAAZ;;AACA,QAAIC,KAAK,IAAI,CAAb,EAAgB;AACZ,aAAOA,KAAK,GAAG,CAAf;AACH;;AACD,WAAO,CAAP;AACH,GAND;;AAOA1B,EAAAA,eAAe,CAACU,SAAhB,CAA0BkB,yBAA1B,GAAsD,UAAUC,YAAV,EAAwB;AAC1E,QAAIC,UAAU,GAAG,KAAK5B,OAAL,CAAagB,QAAb,GAAwBa,qBAAxB,CAA8CF,YAA9C,CAAjB;;AACA,SAAK,IAAIG,EAAE,GAAG,CAAT,EAAYC,YAAY,GAAGH,UAAhC,EAA4CE,EAAE,GAAGC,YAAY,CAACjB,MAA9D,EAAsEgB,EAAE,EAAxE,EAA4E;AACxE,UAAIE,SAAS,GAAGD,YAAY,CAACD,EAAD,CAA5B;AACA,UAAIG,aAAa,GAAGD,SAAS,CAACE,OAA9B;;AACA,UAAID,aAAa,KAAKnC,eAAe,CAACqC,sBAAlC,IAA4DF,aAAa,KAAKnC,eAAe,CAACsC,8BAAlG,EAAkI;AAC9H,eAAO,KAAKd,mBAAL,CAAyBU,SAAS,CAACK,EAAnC,CAAP;AACH;AACJ;;AACD,WAAO,CAAP;AACH,GAVD;;AAWAvC,EAAAA,eAAe,CAACU,SAAhB,CAA0Ba,mBAA1B,GAAgD,UAAUiB,SAAV,EAAqB;AACjE,QAAIC,KAAK,GAAG,IAAZ;;AACA,QAAIC,sBAAsB,GAAG,IAA7B;AACA,QAAIC,aAAa,GAAG,CAApB;;AACA,QAAIH,SAAJ,EAAe;AACX,WAAK,IAAII,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAG,KAAK1C,YAAL,CAAkBa,MAAxC,EAAgD4B,CAAC,GAAGC,GAApD,EAAyDD,CAAC,EAA1D,EAA8D;AAC1D,YAAIE,KAAK,GAAG,KAAK5C,OAAL,CAAagB,QAAb,GAAwBC,kBAAxB,CAA2C,KAAKhB,YAAL,CAAkByC,CAAlB,CAA3C,CAAZ;;AACA,YAAIJ,SAAS,CAACO,WAAV,CAAsBD,KAAtB,CAAJ,EAAkC;AAC9BJ,UAAAA,sBAAsB,GAAG,KAAKvC,YAAL,CAAkByC,CAAlB,CAAzB;AACAD,UAAAA,aAAa,GAAIC,CAAC,GAAG,CAArB;AACA;AACH;AACJ;AACJ;;AACD,QAAI,KAAKrC,wBAAL,KAAkC,IAAlC,IAA0CmC,sBAAsB,KAAK,IAAzE,EAA+E;AAC3E,WAAKxC,OAAL,CAAa8C,iBAAb,CAA+B,UAAUC,cAAV,EAA0B;AACrD,YAAIR,KAAK,CAAClC,wBAAN,KAAmC,IAAvC,EAA6C;AACzC0C,UAAAA,cAAc,CAACC,uBAAf,CAAuCT,KAAK,CAAClC,wBAA7C,EAAuEP,eAAe,CAACqC,sBAAvF;AACAI,UAAAA,KAAK,CAAClC,wBAAN,GAAiC,IAAjC;AACH;;AACD,YAAImC,sBAAsB,KAAK,IAA/B,EAAqC;AACjCD,UAAAA,KAAK,CAAClC,wBAAN,GAAiCmC,sBAAjC;AACAO,UAAAA,cAAc,CAACC,uBAAf,CAAuCT,KAAK,CAAClC,wBAA7C,EAAuEP,eAAe,CAACsC,8BAAvF;AACH;;AACD,YAAIG,KAAK,CAACnC,2BAAN,KAAsC,IAA1C,EAAgD;AAC5C2C,UAAAA,cAAc,CAACE,gBAAf,CAAgCV,KAAK,CAACnC,2BAAtC;AACAmC,UAAAA,KAAK,CAACnC,2BAAN,GAAoC,IAApC;AACH;;AACD,YAAIoC,sBAAsB,KAAK,IAA/B,EAAqC;AACjC,cAAIU,GAAG,GAAGX,KAAK,CAACvC,OAAN,CAAcgB,QAAd,GAAyBC,kBAAzB,CAA4CuB,sBAA5C,CAAV;;AACA,cAAIU,GAAG,CAACC,eAAJ,KAAwBD,GAAG,CAACE,aAA5B,IAA6CF,GAAG,CAACG,SAAJ,KAAkB,CAAnE,EAAsE;AAClE,gBAAIC,aAAa,GAAGJ,GAAG,CAACE,aAAJ,GAAoB,CAAxC;;AACA,gBAAIG,sBAAsB,GAAGhB,KAAK,CAACvC,OAAN,CAAcgB,QAAd,GAAyBwC,gBAAzB,CAA0CF,aAA1C,CAA7B;;AACAJ,YAAAA,GAAG,GAAG,IAAI3D,KAAJ,CAAU2D,GAAG,CAACC,eAAd,EAA+BD,GAAG,CAACO,WAAnC,EAAgDH,aAAhD,EAA+DC,sBAA/D,CAAN;AACH;;AACDhB,UAAAA,KAAK,CAACnC,2BAAN,GAAoC2C,cAAc,CAACW,aAAf,CAA6BR,GAA7B,EAAkCpD,eAAe,CAAC6D,2BAAlD,CAApC;AACH;AACJ,OAtBD;AAuBH;;AACD,WAAOlB,aAAP;AACH,GAxCD;;AAyCA3C,EAAAA,eAAe,CAACU,SAAhB,CAA0BoD,GAA1B,GAAgC,UAAUC,WAAV,EAAuBC,SAAvB,EAAkC;AAC9D,QAAIvB,KAAK,GAAG,IAAZ;;AACA,SAAKvC,OAAL,CAAa8C,iBAAb,CAA+B,UAAUiB,QAAV,EAAoB;AAC/C,UAAIC,kBAAkB,GAAGlE,eAAe,CAACqC,sBAAzC;AACA,UAAI8B,sCAAsC,GAAG,EAA7C;;AACA,UAAIJ,WAAW,CAAC/C,MAAZ,GAAqB,IAAzB,EAA+B;AAC3B;AACA;AACAkD,QAAAA,kBAAkB,GAAGlE,eAAe,CAACoE,kCAArC,CAH2B,CAI3B;;AACA,YAAIC,SAAS,GAAG5B,KAAK,CAACvC,OAAN,CAAcgB,QAAd,GAAyBoD,YAAzB,EAAhB;;AACA,YAAIC,MAAM,GAAG9B,KAAK,CAACvC,OAAN,CAAcsE,aAAd,GAA8BD,MAA3C;;AACA,YAAIE,mBAAmB,GAAGF,MAAM,GAAGF,SAAnC;AACA,YAAIK,eAAe,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACE,IAAL,CAAU,IAAIJ,mBAAd,CAAZ,CAAtB,CAR2B,CAS3B;;AACA,YAAIK,mBAAmB,GAAGf,WAAW,CAAC,CAAD,CAAX,CAAejB,KAAf,CAAqBO,eAA/C;AACA,YAAI0B,iBAAiB,GAAGhB,WAAW,CAAC,CAAD,CAAX,CAAejB,KAAf,CAAqBQ,aAA7C;;AACA,aAAK,IAAIV,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGkB,WAAW,CAAC/C,MAAlC,EAA0C4B,CAAC,GAAGC,GAA9C,EAAmDD,CAAC,EAApD,EAAwD;AACpD,cAAIE,KAAK,GAAGiB,WAAW,CAACnB,CAAD,CAAX,CAAeE,KAA3B;;AACA,cAAIiC,iBAAiB,GAAGL,eAApB,IAAuC5B,KAAK,CAACO,eAAjD,EAAkE;AAC9D,gBAAIP,KAAK,CAACQ,aAAN,GAAsByB,iBAA1B,EAA6C;AACzCA,cAAAA,iBAAiB,GAAGjC,KAAK,CAACQ,aAA1B;AACH;AACJ,WAJD,MAKK;AACDa,YAAAA,sCAAsC,CAACa,IAAvC,CAA4C;AACxClC,cAAAA,KAAK,EAAE,IAAIrD,KAAJ,CAAUqF,mBAAV,EAA+B,CAA/B,EAAkCC,iBAAlC,EAAqD,CAArD,CADiC;AAExC3C,cAAAA,OAAO,EAAEpC,eAAe,CAACiF;AAFe,aAA5C;AAIAH,YAAAA,mBAAmB,GAAGhC,KAAK,CAACO,eAA5B;AACA0B,YAAAA,iBAAiB,GAAGjC,KAAK,CAACQ,aAA1B;AACH;AACJ;;AACDa,QAAAA,sCAAsC,CAACa,IAAvC,CAA4C;AACxClC,UAAAA,KAAK,EAAE,IAAIrD,KAAJ,CAAUqF,mBAAV,EAA+B,CAA/B,EAAkCC,iBAAlC,EAAqD,CAArD,CADiC;AAExC3C,UAAAA,OAAO,EAAEpC,eAAe,CAACiF;AAFe,SAA5C;AAIH,OAnC8C,CAoC/C;;;AACA,UAAIC,yBAAyB,GAAG,IAAIC,KAAJ,CAAUpB,WAAW,CAAC/C,MAAtB,CAAhC;;AACA,WAAK,IAAI4B,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAGkB,WAAW,CAAC/C,MAAlC,EAA0C4B,CAAC,GAAGC,GAA9C,EAAmDD,CAAC,EAApD,EAAwD;AACpDsC,QAAAA,yBAAyB,CAACtC,CAAD,CAAzB,GAA+B;AAC3BE,UAAAA,KAAK,EAAEiB,WAAW,CAACnB,CAAD,CAAX,CAAeE,KADK;AAE3BV,UAAAA,OAAO,EAAE8B;AAFkB,SAA/B;AAIH;;AACDzB,MAAAA,KAAK,CAACtC,YAAN,GAAqB8D,QAAQ,CAACrD,gBAAT,CAA0B6B,KAAK,CAACtC,YAAhC,EAA8C+E,yBAA9C,CAArB,CA5C+C,CA6C/C;;AACAzC,MAAAA,KAAK,CAACrC,oCAAN,GAA6C6D,QAAQ,CAACrD,gBAAT,CAA0B6B,KAAK,CAACrC,oCAAhC,EAAsE+D,sCAAtE,CAA7C,CA9C+C,CA+C/C;;AACA,UAAI1B,KAAK,CAACnC,2BAAV,EAAuC;AACnC2D,QAAAA,QAAQ,CAACd,gBAAT,CAA0BV,KAAK,CAACnC,2BAAhC;AACAmC,QAAAA,KAAK,CAACnC,2BAAN,GAAoC,IAApC;AACH,OAnD8C,CAoD/C;;;AACA,UAAImC,KAAK,CAACpC,sBAAV,EAAkC;AAC9B4D,QAAAA,QAAQ,CAACd,gBAAT,CAA0BV,KAAK,CAACpC,sBAAhC;AACAoC,QAAAA,KAAK,CAACpC,sBAAN,GAA+B,IAA/B;AACH;;AACD,UAAI2D,SAAJ,EAAe;AACXvB,QAAAA,KAAK,CAACpC,sBAAN,GAA+B4D,QAAQ,CAACL,aAAT,CAAuBI,SAAvB,EAAkChE,eAAe,CAACoF,sBAAlD,CAA/B;AACH;AACJ,KA5DD;AA6DH,GA/DD;;AAgEApF,EAAAA,eAAe,CAACU,SAAhB,CAA0B2E,mBAA1B,GAAgD,UAAUC,QAAV,EAAoB;AAChE,QAAI,KAAKnF,YAAL,CAAkBa,MAAlB,KAA6B,CAAjC,EAAoC;AAChC,aAAO,IAAP;AACH;;AACD,SAAK,IAAI4B,CAAC,GAAG,KAAKzC,YAAL,CAAkBa,MAAlB,GAA2B,CAAxC,EAA2C4B,CAAC,IAAI,CAAhD,EAAmDA,CAAC,EAApD,EAAwD;AACpD,UAAInB,YAAY,GAAG,KAAKtB,YAAL,CAAkByC,CAAlB,CAAnB;;AACA,UAAI2C,CAAC,GAAG,KAAKrF,OAAL,CAAagB,QAAb,GAAwBC,kBAAxB,CAA2CM,YAA3C,CAAR;;AACA,UAAI,CAAC8D,CAAD,IAAMA,CAAC,CAACjC,aAAF,GAAkBgC,QAAQ,CAACE,UAArC,EAAiD;AAC7C;AACH;;AACD,UAAID,CAAC,CAACjC,aAAF,GAAkBgC,QAAQ,CAACE,UAA/B,EAA2C;AACvC,eAAOD,CAAP;AACH;;AACD,UAAIA,CAAC,CAAChC,SAAF,GAAc+B,QAAQ,CAACG,MAA3B,EAAmC;AAC/B;AACH;;AACD,aAAOF,CAAP;AACH;;AACD,WAAO,KAAKrF,OAAL,CAAagB,QAAb,GAAwBC,kBAAxB,CAA2C,KAAKhB,YAAL,CAAkB,KAAKA,YAAL,CAAkBa,MAAlB,GAA2B,CAA7C,CAA3C,CAAP;AACH,GAnBD;;AAoBAhB,EAAAA,eAAe,CAACU,SAAhB,CAA0BgF,kBAA1B,GAA+C,UAAUJ,QAAV,EAAoB;AAC/D,QAAI,KAAKnF,YAAL,CAAkBa,MAAlB,KAA6B,CAAjC,EAAoC;AAChC,aAAO,IAAP;AACH;;AACD,SAAK,IAAI4B,CAAC,GAAG,CAAR,EAAWC,GAAG,GAAG,KAAK1C,YAAL,CAAkBa,MAAxC,EAAgD4B,CAAC,GAAGC,GAApD,EAAyDD,CAAC,EAA1D,EAA8D;AAC1D,UAAInB,YAAY,GAAG,KAAKtB,YAAL,CAAkByC,CAAlB,CAAnB;;AACA,UAAI2C,CAAC,GAAG,KAAKrF,OAAL,CAAagB,QAAb,GAAwBC,kBAAxB,CAA2CM,YAA3C,CAAR;;AACA,UAAI,CAAC8D,CAAD,IAAMA,CAAC,CAAClC,eAAF,GAAoBiC,QAAQ,CAACE,UAAvC,EAAmD;AAC/C;AACH;;AACD,UAAID,CAAC,CAAClC,eAAF,GAAoBiC,QAAQ,CAACE,UAAjC,EAA6C;AACzC,eAAOD,CAAP;AACH;;AACD,UAAIA,CAAC,CAAC5B,WAAF,GAAgB2B,QAAQ,CAACG,MAA7B,EAAqC;AACjC;AACH;;AACD,aAAOF,CAAP;AACH;;AACD,WAAO,KAAKrF,OAAL,CAAagB,QAAb,GAAwBC,kBAAxB,CAA2C,KAAKhB,YAAL,CAAkB,CAAlB,CAA3C,CAAP;AACH,GAnBD;;AAoBAH,EAAAA,eAAe,CAACU,SAAhB,CAA0BG,eAA1B,GAA4C,YAAY;AACpD,QAAI8E,MAAM,GAAG,EAAb;AACAA,IAAAA,MAAM,GAAGA,MAAM,CAACC,MAAP,CAAc,KAAKzF,YAAnB,CAAT;AACAwF,IAAAA,MAAM,GAAGA,MAAM,CAACC,MAAP,CAAc,KAAKxF,oCAAnB,CAAT;;AACA,QAAI,KAAKC,sBAAT,EAAiC;AAC7BsF,MAAAA,MAAM,CAACX,IAAP,CAAY,KAAK3E,sBAAjB;AACH;;AACD,QAAI,KAAKC,2BAAT,EAAsC;AAClCqF,MAAAA,MAAM,CAACX,IAAP,CAAY,KAAK1E,2BAAjB;AACH;;AACD,WAAOqF,MAAP;AACH,GAXD;;AAYA3F,EAAAA,eAAe,CAACsC,8BAAhB,GAAiD1C,sBAAsB,CAACiG,QAAvB,CAAgC;AAC7EC,IAAAA,UAAU,EAAE;AAAE;AAD+D;AAE7EC,IAAAA,MAAM,EAAE,EAFqE;AAG7EC,IAAAA,SAAS,EAAE,kBAHkE;AAI7EC,IAAAA,eAAe,EAAE,IAJ4D;AAK7EC,IAAAA,aAAa,EAAE;AACXC,MAAAA,KAAK,EAAEpG,gBAAgB,CAACF,gCAAD,CADZ;AAEXyF,MAAAA,QAAQ,EAAE5F,iBAAiB,CAAC0G;AAFjB,KAL8D;AAS7EC,IAAAA,OAAO,EAAE;AACLF,MAAAA,KAAK,EAAEpG,gBAAgB,CAACD,gBAAD,CADlB;AAELwF,MAAAA,QAAQ,EAAE3F,eAAe,CAAC2G;AAFrB;AAToE,GAAhC,CAAjD;AAcAtG,EAAAA,eAAe,CAACqC,sBAAhB,GAAyCzC,sBAAsB,CAACiG,QAAvB,CAAgC;AACrEC,IAAAA,UAAU,EAAE;AAAE;AADuD;AAErEE,IAAAA,SAAS,EAAE,WAF0D;AAGrEC,IAAAA,eAAe,EAAE,IAHoD;AAIrEC,IAAAA,aAAa,EAAE;AACXC,MAAAA,KAAK,EAAEpG,gBAAgB,CAACF,gCAAD,CADZ;AAEXyF,MAAAA,QAAQ,EAAE5F,iBAAiB,CAAC0G;AAFjB,KAJsD;AAQrEC,IAAAA,OAAO,EAAE;AACLF,MAAAA,KAAK,EAAEpG,gBAAgB,CAACD,gBAAD,CADlB;AAELwF,MAAAA,QAAQ,EAAE3F,eAAe,CAAC2G;AAFrB;AAR4D,GAAhC,CAAzC;AAaAtG,EAAAA,eAAe,CAACoE,kCAAhB,GAAqDxE,sBAAsB,CAACiG,QAAvB,CAAgC;AACjFC,IAAAA,UAAU,EAAE;AAAE;AADmE;AAEjFE,IAAAA,SAAS,EAAE,WAFsE;AAGjFC,IAAAA,eAAe,EAAE;AAHgE,GAAhC,CAArD;AAKAjG,EAAAA,eAAe,CAACiF,oCAAhB,GAAuDrF,sBAAsB,CAACiG,QAAvB,CAAgC;AACnFC,IAAAA,UAAU,EAAE;AAAE;AADqE;AAEnFI,IAAAA,aAAa,EAAE;AACXC,MAAAA,KAAK,EAAEpG,gBAAgB,CAACF,gCAAD,CADZ;AAEXyF,MAAAA,QAAQ,EAAE5F,iBAAiB,CAAC0G;AAFjB;AAFoE,GAAhC,CAAvD;AAOApG,EAAAA,eAAe,CAAC6D,2BAAhB,GAA8CjE,sBAAsB,CAACiG,QAAvB,CAAgC;AAC1EC,IAAAA,UAAU,EAAE;AAAE;AAD4D;AAE1EE,IAAAA,SAAS,EAAE,gBAF+D;AAG1EO,IAAAA,WAAW,EAAE;AAH6D,GAAhC,CAA9C;AAKAvG,EAAAA,eAAe,CAACoF,sBAAhB,GAAyCxF,sBAAsB,CAACiG,QAAvB,CAAgC;AACrEG,IAAAA,SAAS,EAAE,WAD0D;AAErEO,IAAAA,WAAW,EAAE;AAFwD,GAAhC,CAAzC;AAIA,SAAOvG,eAAP;AACH,CAzQoC,EAArC;;AA0QA,SAASA,eAAT","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../common/core/range.js';\r\nimport { OverviewRulerLane, MinimapPosition } from '../../common/model.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { overviewRulerFindMatchForeground, minimapFindMatch } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\r\nvar FindDecorations = /** @class */ (function () {\r\n    function FindDecorations(editor) {\r\n        this._editor = editor;\r\n        this._decorations = [];\r\n        this._overviewRulerApproximateDecorations = [];\r\n        this._findScopeDecorationId = null;\r\n        this._rangeHighlightDecorationId = null;\r\n        this._highlightedDecorationId = null;\r\n        this._startPosition = this._editor.getPosition();\r\n    }\r\n    FindDecorations.prototype.dispose = function () {\r\n        this._editor.deltaDecorations(this._allDecorations(), []);\r\n        this._decorations = [];\r\n        this._overviewRulerApproximateDecorations = [];\r\n        this._findScopeDecorationId = null;\r\n        this._rangeHighlightDecorationId = null;\r\n        this._highlightedDecorationId = null;\r\n    };\r\n    FindDecorations.prototype.reset = function () {\r\n        this._decorations = [];\r\n        this._overviewRulerApproximateDecorations = [];\r\n        this._findScopeDecorationId = null;\r\n        this._rangeHighlightDecorationId = null;\r\n        this._highlightedDecorationId = null;\r\n    };\r\n    FindDecorations.prototype.getCount = function () {\r\n        return this._decorations.length;\r\n    };\r\n    FindDecorations.prototype.getFindScope = function () {\r\n        if (this._findScopeDecorationId) {\r\n            return this._editor.getModel().getDecorationRange(this._findScopeDecorationId);\r\n        }\r\n        return null;\r\n    };\r\n    FindDecorations.prototype.getStartPosition = function () {\r\n        return this._startPosition;\r\n    };\r\n    FindDecorations.prototype.setStartPosition = function (newStartPosition) {\r\n        this._startPosition = newStartPosition;\r\n        this.setCurrentFindMatch(null);\r\n    };\r\n    FindDecorations.prototype._getDecorationIndex = function (decorationId) {\r\n        var index = this._decorations.indexOf(decorationId);\r\n        if (index >= 0) {\r\n            return index + 1;\r\n        }\r\n        return 1;\r\n    };\r\n    FindDecorations.prototype.getCurrentMatchesPosition = function (desiredRange) {\r\n        var candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\r\n        for (var _i = 0, candidates_1 = candidates; _i < candidates_1.length; _i++) {\r\n            var candidate = candidates_1[_i];\r\n            var candidateOpts = candidate.options;\r\n            if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\r\n                return this._getDecorationIndex(candidate.id);\r\n            }\r\n        }\r\n        return 1;\r\n    };\r\n    FindDecorations.prototype.setCurrentFindMatch = function (nextMatch) {\r\n        var _this = this;\r\n        var newCurrentDecorationId = null;\r\n        var matchPosition = 0;\r\n        if (nextMatch) {\r\n            for (var i = 0, len = this._decorations.length; i < len; i++) {\r\n                var range = this._editor.getModel().getDecorationRange(this._decorations[i]);\r\n                if (nextMatch.equalsRange(range)) {\r\n                    newCurrentDecorationId = this._decorations[i];\r\n                    matchPosition = (i + 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\r\n            this._editor.changeDecorations(function (changeAccessor) {\r\n                if (_this._highlightedDecorationId !== null) {\r\n                    changeAccessor.changeDecorationOptions(_this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\r\n                    _this._highlightedDecorationId = null;\r\n                }\r\n                if (newCurrentDecorationId !== null) {\r\n                    _this._highlightedDecorationId = newCurrentDecorationId;\r\n                    changeAccessor.changeDecorationOptions(_this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\r\n                }\r\n                if (_this._rangeHighlightDecorationId !== null) {\r\n                    changeAccessor.removeDecoration(_this._rangeHighlightDecorationId);\r\n                    _this._rangeHighlightDecorationId = null;\r\n                }\r\n                if (newCurrentDecorationId !== null) {\r\n                    var rng = _this._editor.getModel().getDecorationRange(newCurrentDecorationId);\r\n                    if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\r\n                        var lineBeforeEnd = rng.endLineNumber - 1;\r\n                        var lineBeforeEndMaxColumn = _this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\r\n                        rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\r\n                    }\r\n                    _this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\r\n                }\r\n            });\r\n        }\r\n        return matchPosition;\r\n    };\r\n    FindDecorations.prototype.set = function (findMatches, findScope) {\r\n        var _this = this;\r\n        this._editor.changeDecorations(function (accessor) {\r\n            var findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\r\n            var newOverviewRulerApproximateDecorations = [];\r\n            if (findMatches.length > 1000) {\r\n                // we go into a mode where the overview ruler gets \"approximate\" decorations\r\n                // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\r\n                findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;\r\n                // approximate a distance in lines where matches should be merged\r\n                var lineCount = _this._editor.getModel().getLineCount();\r\n                var height = _this._editor.getLayoutInfo().height;\r\n                var approxPixelsPerLine = height / lineCount;\r\n                var mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine));\r\n                // merge decorations as much as possible\r\n                var prevStartLineNumber = findMatches[0].range.startLineNumber;\r\n                var prevEndLineNumber = findMatches[0].range.endLineNumber;\r\n                for (var i = 1, len = findMatches.length; i < len; i++) {\r\n                    var range = findMatches[i].range;\r\n                    if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\r\n                        if (range.endLineNumber > prevEndLineNumber) {\r\n                            prevEndLineNumber = range.endLineNumber;\r\n                        }\r\n                    }\r\n                    else {\r\n                        newOverviewRulerApproximateDecorations.push({\r\n                            range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\r\n                            options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\r\n                        });\r\n                        prevStartLineNumber = range.startLineNumber;\r\n                        prevEndLineNumber = range.endLineNumber;\r\n                    }\r\n                }\r\n                newOverviewRulerApproximateDecorations.push({\r\n                    range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\r\n                    options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\r\n                });\r\n            }\r\n            // Find matches\r\n            var newFindMatchesDecorations = new Array(findMatches.length);\r\n            for (var i = 0, len = findMatches.length; i < len; i++) {\r\n                newFindMatchesDecorations[i] = {\r\n                    range: findMatches[i].range,\r\n                    options: findMatchesOptions\r\n                };\r\n            }\r\n            _this._decorations = accessor.deltaDecorations(_this._decorations, newFindMatchesDecorations);\r\n            // Overview ruler approximate decorations\r\n            _this._overviewRulerApproximateDecorations = accessor.deltaDecorations(_this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations);\r\n            // Range highlight\r\n            if (_this._rangeHighlightDecorationId) {\r\n                accessor.removeDecoration(_this._rangeHighlightDecorationId);\r\n                _this._rangeHighlightDecorationId = null;\r\n            }\r\n            // Find scope\r\n            if (_this._findScopeDecorationId) {\r\n                accessor.removeDecoration(_this._findScopeDecorationId);\r\n                _this._findScopeDecorationId = null;\r\n            }\r\n            if (findScope) {\r\n                _this._findScopeDecorationId = accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION);\r\n            }\r\n        });\r\n    };\r\n    FindDecorations.prototype.matchBeforePosition = function (position) {\r\n        if (this._decorations.length === 0) {\r\n            return null;\r\n        }\r\n        for (var i = this._decorations.length - 1; i >= 0; i--) {\r\n            var decorationId = this._decorations[i];\r\n            var r = this._editor.getModel().getDecorationRange(decorationId);\r\n            if (!r || r.endLineNumber > position.lineNumber) {\r\n                continue;\r\n            }\r\n            if (r.endLineNumber < position.lineNumber) {\r\n                return r;\r\n            }\r\n            if (r.endColumn > position.column) {\r\n                continue;\r\n            }\r\n            return r;\r\n        }\r\n        return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\r\n    };\r\n    FindDecorations.prototype.matchAfterPosition = function (position) {\r\n        if (this._decorations.length === 0) {\r\n            return null;\r\n        }\r\n        for (var i = 0, len = this._decorations.length; i < len; i++) {\r\n            var decorationId = this._decorations[i];\r\n            var r = this._editor.getModel().getDecorationRange(decorationId);\r\n            if (!r || r.startLineNumber < position.lineNumber) {\r\n                continue;\r\n            }\r\n            if (r.startLineNumber > position.lineNumber) {\r\n                return r;\r\n            }\r\n            if (r.startColumn < position.column) {\r\n                continue;\r\n            }\r\n            return r;\r\n        }\r\n        return this._editor.getModel().getDecorationRange(this._decorations[0]);\r\n    };\r\n    FindDecorations.prototype._allDecorations = function () {\r\n        var result = [];\r\n        result = result.concat(this._decorations);\r\n        result = result.concat(this._overviewRulerApproximateDecorations);\r\n        if (this._findScopeDecorationId) {\r\n            result.push(this._findScopeDecorationId);\r\n        }\r\n        if (this._rangeHighlightDecorationId) {\r\n            result.push(this._rangeHighlightDecorationId);\r\n        }\r\n        return result;\r\n    };\r\n    FindDecorations._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        zIndex: 13,\r\n        className: 'currentFindMatch',\r\n        showIfCollapsed: true,\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerFindMatchForeground),\r\n            position: OverviewRulerLane.Center\r\n        },\r\n        minimap: {\r\n            color: themeColorFromId(minimapFindMatch),\r\n            position: MinimapPosition.Inline\r\n        }\r\n    });\r\n    FindDecorations._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'findMatch',\r\n        showIfCollapsed: true,\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerFindMatchForeground),\r\n            position: OverviewRulerLane.Center\r\n        },\r\n        minimap: {\r\n            color: themeColorFromId(minimapFindMatch),\r\n            position: MinimapPosition.Inline\r\n        }\r\n    });\r\n    FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'findMatch',\r\n        showIfCollapsed: true\r\n    });\r\n    FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerFindMatchForeground),\r\n            position: OverviewRulerLane.Center\r\n        }\r\n    });\r\n    FindDecorations._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'rangeHighlight',\r\n        isWholeLine: true\r\n    });\r\n    FindDecorations._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\r\n        className: 'findScope',\r\n        isWholeLine: true\r\n    });\r\n    return FindDecorations;\r\n}());\r\nexport { FindDecorations };\r\n"]},"metadata":{},"sourceType":"module"}