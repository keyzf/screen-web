{"ast":null,"code":"import { sort_modules, change_item, change_item_arr, set_screen_data } from '../actions/screen-actions';\nimport { fromJS } from 'immutable';\nconst initialState = fromJS({\n  id: 1,\n  name: \"大屏数据\",\n  screen: {\n    //大屏背景数据\n    width: 1920,\n    height: 1080,\n    color: \"rgba(0,0,0,1)\",\n    backgroundImg: {\n      url: 'bg.png',\n      size: [\"80%\", \"auto\"],\n      position: [\"300\", \"40%\"]\n    },\n    poster: \"poster.png\"\n  },\n  modules: []\n});\nexport default ((state = initialState, action) => {\n  switch (action.type) {\n    case set_screen_data:\n      return fromJS(action.data);\n\n    case sort_modules:\n      return state.set(\"modules\", fromJS(action.data));\n\n    case change_item:\n      let newMudules = state.get(\"modules\").map(item => {\n        if (item.get(\"id\") === action.data.id) {\n          return item.mergeDeep(fromJS(action.data.data));\n        } else {\n          return item;\n        }\n      });\n      return state.set(\"modules\", newMudules);\n\n    case change_item_arr:\n      let newMudules2 = state.get(\"modules\").map(item => {\n        if (item.get(\"id\") === action.data.id) {\n          console.log(action.data);\n          return item.setIn(action.data.path, fromJS(action.data.data));\n        } else {\n          return item;\n        }\n      });\n      return state.set(\"modules\", newMudules2);\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/src/store/reducers/screen-reducer.js"],"names":["sort_modules","change_item","change_item_arr","set_screen_data","fromJS","initialState","id","name","screen","width","height","color","backgroundImg","url","size","position","poster","modules","state","action","type","data","set","newMudules","get","map","item","mergeDeep","newMudules2","console","log","setIn","path"],"mappings":"AAAA,SACIA,YADJ,EAEIC,WAFJ,EAGIC,eAHJ,EAIIC,eAJJ,QAKO,2BALP;AAMA,SAASC,MAAT,QAAuB,WAAvB;AAEA,MAAMC,YAAY,GAAGD,MAAM,CAAC;AACxBE,EAAAA,EAAE,EAAC,CADqB;AAExBC,EAAAA,IAAI,EAAC,MAFmB;AAGxBC,EAAAA,MAAM,EAAC;AAAC;AACJC,IAAAA,KAAK,EAAC,IADH;AAEHC,IAAAA,MAAM,EAAC,IAFJ;AAGHC,IAAAA,KAAK,EAAC,eAHH;AAIHC,IAAAA,aAAa,EAAC;AACVC,MAAAA,GAAG,EAAC,QADM;AAEVC,MAAAA,IAAI,EAAC,CAAC,KAAD,EAAO,MAAP,CAFK;AAGVC,MAAAA,QAAQ,EAAC,CAAC,KAAD,EAAO,KAAP;AAHC,KAJX;AASHC,IAAAA,MAAM,EAAC;AATJ,GAHiB;AAcxBC,EAAAA,OAAO,EAAC;AAdgB,CAAD,CAA3B;AAiBA,gBAAe,CAACC,KAAK,GAACb,YAAP,EAAoBc,MAApB,KAA6B;AACxC,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKjB,eAAL;AACI,aAAOC,MAAM,CAACe,MAAM,CAACE,IAAR,CAAb;;AACJ,SAAKrB,YAAL;AACI,aAAOkB,KAAK,CAACI,GAAN,CAAU,SAAV,EAAoBlB,MAAM,CAACe,MAAM,CAACE,IAAR,CAA1B,CAAP;;AACJ,SAAKpB,WAAL;AACI,UAAIsB,UAAU,GAAGL,KAAK,CAACM,GAAN,CAAU,SAAV,EAAqBC,GAArB,CAAyBC,IAAI,IAAE;AAC5C,YAAGA,IAAI,CAACF,GAAL,CAAS,IAAT,MAAmBL,MAAM,CAACE,IAAP,CAAYf,EAAlC,EAAqC;AACjC,iBAAOoB,IAAI,CAACC,SAAL,CAAevB,MAAM,CAACe,MAAM,CAACE,IAAP,CAAYA,IAAb,CAArB,CAAP;AACH,SAFD,MAEK;AACD,iBAAOK,IAAP;AACH;AACJ,OANgB,CAAjB;AAOA,aAAOR,KAAK,CAACI,GAAN,CAAU,SAAV,EAAoBC,UAApB,CAAP;;AACJ,SAAKrB,eAAL;AACI,UAAI0B,WAAW,GAAGV,KAAK,CAACM,GAAN,CAAU,SAAV,EAAqBC,GAArB,CAAyBC,IAAI,IAAE;AAC7C,YAAGA,IAAI,CAACF,GAAL,CAAS,IAAT,MAAmBL,MAAM,CAACE,IAAP,CAAYf,EAAlC,EAAqC;AACjCuB,UAAAA,OAAO,CAACC,GAAR,CAAYX,MAAM,CAACE,IAAnB;AACA,iBAAOK,IAAI,CAACK,KAAL,CAAWZ,MAAM,CAACE,IAAP,CAAYW,IAAvB,EAA4B5B,MAAM,CAACe,MAAM,CAACE,IAAP,CAAYA,IAAb,CAAlC,CAAP;AACH,SAHD,MAGK;AACD,iBAAOK,IAAP;AACH;AACJ,OAPiB,CAAlB;AAQA,aAAOR,KAAK,CAACI,GAAN,CAAU,SAAV,EAAoBM,WAApB,CAAP;;AACJ;AACI,aAAOV,KAAP;AAzBR;AA2BH,CA5BD","sourcesContent":["import { \n    sort_modules,\n    change_item,\n    change_item_arr,\n    set_screen_data\n} from '../actions/screen-actions'\nimport { fromJS } from 'immutable';\n\nconst initialState = fromJS({\n    id:1,\n    name:\"大屏数据\",\n    screen:{//大屏背景数据\n        width:1920,\n        height:1080,\n        color:\"rgba(0,0,0,1)\",\n        backgroundImg:{\n            url:'bg.png',\n            size:[\"80%\",\"auto\"],\n            position:[\"300\",\"40%\"]\n        },\n        poster:\"poster.png\"\n    },\n    modules:[]\n})\n\nexport default (state=initialState,action)=>{\n    switch (action.type){\n        case set_screen_data:\n            return fromJS(action.data)\n        case sort_modules:\n            return state.set(\"modules\",fromJS(action.data))\n        case change_item:\n            let newMudules = state.get(\"modules\").map(item=>{\n                if(item.get(\"id\") === action.data.id){\n                    return item.mergeDeep(fromJS(action.data.data))\n                }else{\n                    return item\n                }\n            })\n            return state.set(\"modules\",newMudules)\n        case change_item_arr:\n            let newMudules2 = state.get(\"modules\").map(item=>{\n                if(item.get(\"id\") === action.data.id){\n                    console.log(action.data)\n                    return item.setIn(action.data.path,fromJS(action.data.data))\n                }else{\n                    return item\n                }\n            })\n            return state.set(\"modules\",newMudules2)\n        default:\n            return state\n    }\n}"]},"metadata":{},"sourceType":"module"}