{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport * as nls from '../../../nls.js';\nimport { Delayer } from '../../../base/common/async.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, FIND_IDS, FindModelBoundToEditorModel, ToggleCaseSensitiveKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding, CONTEXT_REPLACE_INPUT_FOCUSED } from './findModel.js';\nimport { FindOptionsWidget } from './findOptionsWidget.js';\nimport { FindReplaceState } from './findState.js';\nimport { FindWidget } from './findWidget.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { IContextKeyService, ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService } from '../../../platform/contextview/browser/contextView.js';\nimport { optional } from '../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nvar SEARCH_STRING_MAX_LENGTH = 524288;\nexport function getSelectionSearchString(editor) {\n  if (!editor.hasModel()) {\n    return null;\n  }\n\n  var selection = editor.getSelection(); // if selection spans multiple lines, default search string to empty\n\n  if (selection.startLineNumber === selection.endLineNumber) {\n    if (selection.isEmpty()) {\n      var wordAtPosition = editor.getModel().getWordAtPosition(selection.getStartPosition());\n\n      if (wordAtPosition) {\n        return wordAtPosition.word;\n      }\n    } else {\n      if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\n        return editor.getModel().getValueInRange(selection);\n      }\n    }\n  }\n\n  return null;\n}\n\nvar CommonFindController =\n/** @class */\nfunction (_super) {\n  __extends(CommonFindController, _super);\n\n  function CommonFindController(editor, contextKeyService, storageService, clipboardService) {\n    var _this = _super.call(this) || this;\n\n    _this._editor = editor;\n    _this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\n    _this._contextKeyService = contextKeyService;\n    _this._storageService = storageService;\n    _this._clipboardService = clipboardService;\n    _this._updateHistoryDelayer = new Delayer(500);\n    _this._state = _this._register(new FindReplaceState());\n\n    _this.loadQueryState();\n\n    _this._register(_this._state.onFindReplaceStateChange(function (e) {\n      return _this._onStateChanged(e);\n    }));\n\n    _this._model = null;\n\n    _this._register(_this._editor.onDidChangeModel(function () {\n      var shouldRestartFind = _this._editor.getModel() && _this._state.isRevealed;\n\n      _this.disposeModel();\n\n      _this._state.change({\n        searchScope: null,\n        matchCase: _this._storageService.getBoolean('editor.matchCase', 1\n        /* WORKSPACE */\n        , false),\n        wholeWord: _this._storageService.getBoolean('editor.wholeWord', 1\n        /* WORKSPACE */\n        , false),\n        isRegex: _this._storageService.getBoolean('editor.isRegex', 1\n        /* WORKSPACE */\n        , false),\n        preserveCase: _this._storageService.getBoolean('editor.preserveCase', 1\n        /* WORKSPACE */\n        , false)\n      }, false);\n\n      if (shouldRestartFind) {\n        _this._start({\n          forceRevealReplace: false,\n          seedSearchStringFromSelection: false && _this._editor.getOption(28\n          /* find */\n          ).seedSearchStringFromSelection,\n          seedSearchStringFromGlobalClipboard: false,\n          shouldFocus: 0\n          /* NoFocusChange */\n          ,\n          shouldAnimate: false,\n          updateSearchScope: false\n        });\n      }\n    }));\n\n    return _this;\n  }\n\n  CommonFindController.get = function (editor) {\n    return editor.getContribution(CommonFindController.ID);\n  };\n\n  CommonFindController.prototype.dispose = function () {\n    this.disposeModel();\n\n    _super.prototype.dispose.call(this);\n  };\n\n  CommonFindController.prototype.disposeModel = function () {\n    if (this._model) {\n      this._model.dispose();\n\n      this._model = null;\n    }\n  };\n\n  CommonFindController.prototype._onStateChanged = function (e) {\n    this.saveQueryState(e);\n\n    if (e.isRevealed) {\n      if (this._state.isRevealed) {\n        this._findWidgetVisible.set(true);\n      } else {\n        this._findWidgetVisible.reset();\n\n        this.disposeModel();\n      }\n    }\n\n    if (e.searchString) {\n      this.setGlobalBufferTerm(this._state.searchString);\n    }\n  };\n\n  CommonFindController.prototype.saveQueryState = function (e) {\n    if (e.isRegex) {\n      this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1\n      /* WORKSPACE */\n      );\n    }\n\n    if (e.wholeWord) {\n      this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1\n      /* WORKSPACE */\n      );\n    }\n\n    if (e.matchCase) {\n      this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1\n      /* WORKSPACE */\n      );\n    }\n\n    if (e.preserveCase) {\n      this._storageService.store('editor.preserveCase', this._state.actualPreserveCase, 1\n      /* WORKSPACE */\n      );\n    }\n  };\n\n  CommonFindController.prototype.loadQueryState = function () {\n    this._state.change({\n      matchCase: this._storageService.getBoolean('editor.matchCase', 1\n      /* WORKSPACE */\n      , this._state.matchCase),\n      wholeWord: this._storageService.getBoolean('editor.wholeWord', 1\n      /* WORKSPACE */\n      , this._state.wholeWord),\n      isRegex: this._storageService.getBoolean('editor.isRegex', 1\n      /* WORKSPACE */\n      , this._state.isRegex),\n      preserveCase: this._storageService.getBoolean('editor.preserveCase', 1\n      /* WORKSPACE */\n      , this._state.preserveCase)\n    }, false);\n  };\n\n  CommonFindController.prototype.isFindInputFocused = function () {\n    return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\n  };\n\n  CommonFindController.prototype.getState = function () {\n    return this._state;\n  };\n\n  CommonFindController.prototype.closeFindWidget = function () {\n    this._state.change({\n      isRevealed: false,\n      searchScope: null\n    }, false);\n\n    this._editor.focus();\n  };\n\n  CommonFindController.prototype.toggleCaseSensitive = function () {\n    this._state.change({\n      matchCase: !this._state.matchCase\n    }, false);\n\n    if (!this._state.isRevealed) {\n      this.highlightFindOptions();\n    }\n  };\n\n  CommonFindController.prototype.toggleWholeWords = function () {\n    this._state.change({\n      wholeWord: !this._state.wholeWord\n    }, false);\n\n    if (!this._state.isRevealed) {\n      this.highlightFindOptions();\n    }\n  };\n\n  CommonFindController.prototype.toggleRegex = function () {\n    this._state.change({\n      isRegex: !this._state.isRegex\n    }, false);\n\n    if (!this._state.isRevealed) {\n      this.highlightFindOptions();\n    }\n  };\n\n  CommonFindController.prototype.toggleSearchScope = function () {\n    if (this._state.searchScope) {\n      this._state.change({\n        searchScope: null\n      }, true);\n    } else {\n      if (this._editor.hasModel()) {\n        var selection = this._editor.getSelection();\n\n        if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n          selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n        }\n\n        if (!selection.isEmpty()) {\n          this._state.change({\n            searchScope: selection\n          }, true);\n        }\n      }\n    }\n  };\n\n  CommonFindController.prototype.setSearchString = function (searchString) {\n    if (this._state.isRegex) {\n      searchString = strings.escapeRegExpCharacters(searchString);\n    }\n\n    this._state.change({\n      searchString: searchString\n    }, false);\n  };\n\n  CommonFindController.prototype.highlightFindOptions = function () {// overwritten in subclass\n  };\n\n  CommonFindController.prototype._start = function (opts) {\n    this.disposeModel();\n\n    if (!this._editor.hasModel()) {\n      // cannot do anything with an editor that doesn't have a model...\n      return;\n    }\n\n    var stateChanges = {\n      isRevealed: true\n    };\n\n    if (opts.seedSearchStringFromSelection) {\n      var selectionSearchString = getSelectionSearchString(this._editor);\n\n      if (selectionSearchString) {\n        if (this._state.isRegex) {\n          stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\n        } else {\n          stateChanges.searchString = selectionSearchString;\n        }\n      }\n    }\n\n    if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\n      var selectionSearchString = this.getGlobalBufferTerm();\n\n      if (selectionSearchString) {\n        stateChanges.searchString = selectionSearchString;\n      }\n    } // Overwrite isReplaceRevealed\n\n\n    if (opts.forceRevealReplace) {\n      stateChanges.isReplaceRevealed = true;\n    } else if (!this._findWidgetVisible.get()) {\n      stateChanges.isReplaceRevealed = false;\n    }\n\n    if (opts.updateSearchScope) {\n      var currentSelection = this._editor.getSelection();\n\n      if (!currentSelection.isEmpty()) {\n        stateChanges.searchScope = currentSelection;\n      }\n    }\n\n    this._state.change(stateChanges, false);\n\n    if (!this._model) {\n      this._model = new FindModelBoundToEditorModel(this._editor, this._state);\n    }\n  };\n\n  CommonFindController.prototype.start = function (opts) {\n    this._start(opts);\n  };\n\n  CommonFindController.prototype.moveToNextMatch = function () {\n    if (this._model) {\n      this._model.moveToNextMatch();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  CommonFindController.prototype.moveToPrevMatch = function () {\n    if (this._model) {\n      this._model.moveToPrevMatch();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  CommonFindController.prototype.replace = function () {\n    if (this._model) {\n      this._model.replace();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  CommonFindController.prototype.replaceAll = function () {\n    if (this._model) {\n      this._model.replaceAll();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  CommonFindController.prototype.selectAllMatches = function () {\n    if (this._model) {\n      this._model.selectAllMatches();\n\n      this._editor.focus();\n\n      return true;\n    }\n\n    return false;\n  };\n\n  CommonFindController.prototype.getGlobalBufferTerm = function () {\n    if (this._editor.getOption(28\n    /* find */\n    ).globalFindClipboard && this._clipboardService && this._editor.hasModel() && !this._editor.getModel().isTooLargeForSyncing()) {\n      return this._clipboardService.readFindText();\n    }\n\n    return '';\n  };\n\n  CommonFindController.prototype.setGlobalBufferTerm = function (text) {\n    if (this._editor.getOption(28\n    /* find */\n    ).globalFindClipboard && this._clipboardService && this._editor.hasModel() && !this._editor.getModel().isTooLargeForSyncing()) {\n      this._clipboardService.writeFindText(text);\n    }\n  };\n\n  CommonFindController.ID = 'editor.contrib.findController';\n  CommonFindController = __decorate([__param(1, IContextKeyService), __param(2, IStorageService), __param(3, IClipboardService)], CommonFindController);\n  return CommonFindController;\n}(Disposable);\n\nexport { CommonFindController };\n\nvar FindController =\n/** @class */\nfunction (_super) {\n  __extends(FindController, _super);\n\n  function FindController(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, _notificationService, _storageService, clipboardService) {\n    var _this = _super.call(this, editor, _contextKeyService, _storageService, clipboardService) || this;\n\n    _this._contextViewService = _contextViewService;\n    _this._keybindingService = _keybindingService;\n    _this._themeService = _themeService;\n    _this._notificationService = _notificationService;\n    _this._widget = null;\n    _this._findOptionsWidget = null;\n    return _this;\n  }\n\n  FindController.prototype._start = function (opts) {\n    if (!this._widget) {\n      this._createFindWidget();\n    }\n\n    var selection = this._editor.getSelection();\n\n    var updateSearchScope = false;\n\n    switch (this._editor.getOption(28\n    /* find */\n    ).autoFindInSelection) {\n      case 'always':\n        updateSearchScope = true;\n        break;\n\n      case 'never':\n        updateSearchScope = false;\n        break;\n\n      case 'multiline':\n        var isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n        updateSearchScope = isSelectionMultipleLine;\n        break;\n\n      default:\n        break;\n    }\n\n    opts.updateSearchScope = updateSearchScope;\n\n    _super.prototype._start.call(this, opts);\n\n    if (opts.shouldFocus === 2\n    /* FocusReplaceInput */\n    ) {\n        this._widget.focusReplaceInput();\n      } else if (opts.shouldFocus === 1\n    /* FocusFindInput */\n    ) {\n        this._widget.focusFindInput();\n      }\n  };\n\n  FindController.prototype.highlightFindOptions = function () {\n    if (!this._widget) {\n      this._createFindWidget();\n    }\n\n    if (this._state.isRevealed) {\n      this._widget.highlightFindOptions();\n    } else {\n      this._findOptionsWidget.highlightFindOptions();\n    }\n  };\n\n  FindController.prototype._createFindWidget = function () {\n    this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService));\n    this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService, this._themeService));\n  };\n\n  FindController = __decorate([__param(1, IContextViewService), __param(2, IContextKeyService), __param(3, IKeybindingService), __param(4, IThemeService), __param(5, INotificationService), __param(6, IStorageService), __param(7, optional(IClipboardService))], FindController);\n  return FindController;\n}(CommonFindController);\n\nexport { FindController };\n\nvar StartFindAction =\n/** @class */\nfunction (_super) {\n  __extends(StartFindAction, _super);\n\n  function StartFindAction() {\n    return _super.call(this, {\n      id: FIND_IDS.StartFindAction,\n      label: nls.localize('startFindAction', \"Find\"),\n      alias: 'Find',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: null,\n        primary: 2048\n        /* CtrlCmd */\n        | 36\n        /* KEY_F */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        menuId: 17\n        /* MenubarEditMenu */\n        ,\n        group: '3_find',\n        title: nls.localize({\n          key: 'miFind',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Find\"),\n        order: 1\n      }\n    }) || this;\n  }\n\n  StartFindAction.prototype.run = function (accessor, editor) {\n    var controller = CommonFindController.get(editor);\n\n    if (controller) {\n      controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: editor.getOption(28\n        /* find */\n        ).seedSearchStringFromSelection,\n        seedSearchStringFromGlobalClipboard: editor.getOption(28\n        /* find */\n        ).globalFindClipboard,\n        shouldFocus: 1\n        /* FocusFindInput */\n        ,\n        shouldAnimate: true,\n        updateSearchScope: false\n      });\n    }\n  };\n\n  return StartFindAction;\n}(EditorAction);\n\nexport { StartFindAction };\n\nvar StartFindWithSelectionAction =\n/** @class */\nfunction (_super) {\n  __extends(StartFindWithSelectionAction, _super);\n\n  function StartFindWithSelectionAction() {\n    return _super.call(this, {\n      id: FIND_IDS.StartFindWithSelection,\n      label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\n      alias: 'Find With Selection',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: null,\n        primary: 0,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 35\n          /* KEY_E */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  StartFindWithSelectionAction.prototype.run = function (accessor, editor) {\n    var controller = CommonFindController.get(editor);\n\n    if (controller) {\n      controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: true,\n        seedSearchStringFromGlobalClipboard: false,\n        shouldFocus: 0\n        /* NoFocusChange */\n        ,\n        shouldAnimate: true,\n        updateSearchScope: false\n      });\n      controller.setGlobalBufferTerm(controller.getState().searchString);\n    }\n  };\n\n  return StartFindWithSelectionAction;\n}(EditorAction);\n\nexport { StartFindWithSelectionAction };\n\nvar MatchFindAction =\n/** @class */\nfunction (_super) {\n  __extends(MatchFindAction, _super);\n\n  function MatchFindAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MatchFindAction.prototype.run = function (accessor, editor) {\n    var controller = CommonFindController.get(editor);\n\n    if (controller && !this._run(controller)) {\n      controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: controller.getState().searchString.length === 0 && editor.getOption(28\n        /* find */\n        ).seedSearchStringFromSelection,\n        seedSearchStringFromGlobalClipboard: true,\n        shouldFocus: 0\n        /* NoFocusChange */\n        ,\n        shouldAnimate: true,\n        updateSearchScope: false\n      });\n\n      this._run(controller);\n    }\n  };\n\n  return MatchFindAction;\n}(EditorAction);\n\nexport { MatchFindAction };\n\nvar NextMatchFindAction =\n/** @class */\nfunction (_super) {\n  __extends(NextMatchFindAction, _super);\n\n  function NextMatchFindAction() {\n    return _super.call(this, {\n      id: FIND_IDS.NextMatchFindAction,\n      label: nls.localize('findNextMatchAction', \"Find Next\"),\n      alias: 'Find Next',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 61\n        /* F3 */\n        ,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 37\n          /* KEY_G */\n          ,\n          secondary: [61\n          /* F3 */\n          ]\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  NextMatchFindAction.prototype._run = function (controller) {\n    return controller.moveToNextMatch();\n  };\n\n  return NextMatchFindAction;\n}(MatchFindAction);\n\nexport { NextMatchFindAction };\n\nvar NextMatchFindAction2 =\n/** @class */\nfunction (_super) {\n  __extends(NextMatchFindAction2, _super);\n\n  function NextMatchFindAction2() {\n    return _super.call(this, {\n      id: FIND_IDS.NextMatchFindAction,\n      label: nls.localize('findNextMatchAction', \"Find Next\"),\n      alias: 'Find Next',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n        primary: 3\n        /* Enter */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  NextMatchFindAction2.prototype._run = function (controller) {\n    return controller.moveToNextMatch();\n  };\n\n  return NextMatchFindAction2;\n}(MatchFindAction);\n\nexport { NextMatchFindAction2 };\n\nvar PreviousMatchFindAction =\n/** @class */\nfunction (_super) {\n  __extends(PreviousMatchFindAction, _super);\n\n  function PreviousMatchFindAction() {\n    return _super.call(this, {\n      id: FIND_IDS.PreviousMatchFindAction,\n      label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\n      alias: 'Find Previous',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024\n        /* Shift */\n        | 61\n        /* F3 */\n        ,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 1024\n          /* Shift */\n          | 37\n          /* KEY_G */\n          ,\n          secondary: [1024\n          /* Shift */\n          | 61\n          /* F3 */\n          ]\n        },\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  PreviousMatchFindAction.prototype._run = function (controller) {\n    return controller.moveToPrevMatch();\n  };\n\n  return PreviousMatchFindAction;\n}(MatchFindAction);\n\nexport { PreviousMatchFindAction };\n\nvar PreviousMatchFindAction2 =\n/** @class */\nfunction (_super) {\n  __extends(PreviousMatchFindAction2, _super);\n\n  function PreviousMatchFindAction2() {\n    return _super.call(this, {\n      id: FIND_IDS.PreviousMatchFindAction,\n      label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\n      alias: 'Find Previous',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n        primary: 1024\n        /* Shift */\n        | 3\n        /* Enter */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  PreviousMatchFindAction2.prototype._run = function (controller) {\n    return controller.moveToPrevMatch();\n  };\n\n  return PreviousMatchFindAction2;\n}(MatchFindAction);\n\nexport { PreviousMatchFindAction2 };\n\nvar SelectionMatchFindAction =\n/** @class */\nfunction (_super) {\n  __extends(SelectionMatchFindAction, _super);\n\n  function SelectionMatchFindAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SelectionMatchFindAction.prototype.run = function (accessor, editor) {\n    var controller = CommonFindController.get(editor);\n\n    if (!controller) {\n      return;\n    }\n\n    var selectionSearchString = getSelectionSearchString(editor);\n\n    if (selectionSearchString) {\n      controller.setSearchString(selectionSearchString);\n    }\n\n    if (!this._run(controller)) {\n      controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: editor.getOption(28\n        /* find */\n        ).seedSearchStringFromSelection,\n        seedSearchStringFromGlobalClipboard: false,\n        shouldFocus: 0\n        /* NoFocusChange */\n        ,\n        shouldAnimate: true,\n        updateSearchScope: false\n      });\n\n      this._run(controller);\n    }\n  };\n\n  return SelectionMatchFindAction;\n}(EditorAction);\n\nexport { SelectionMatchFindAction };\n\nvar NextSelectionMatchFindAction =\n/** @class */\nfunction (_super) {\n  __extends(NextSelectionMatchFindAction, _super);\n\n  function NextSelectionMatchFindAction() {\n    return _super.call(this, {\n      id: FIND_IDS.NextSelectionMatchFindAction,\n      label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\n      alias: 'Find Next Selection',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048\n        /* CtrlCmd */\n        | 61\n        /* F3 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  NextSelectionMatchFindAction.prototype._run = function (controller) {\n    return controller.moveToNextMatch();\n  };\n\n  return NextSelectionMatchFindAction;\n}(SelectionMatchFindAction);\n\nexport { NextSelectionMatchFindAction };\n\nvar PreviousSelectionMatchFindAction =\n/** @class */\nfunction (_super) {\n  __extends(PreviousSelectionMatchFindAction, _super);\n\n  function PreviousSelectionMatchFindAction() {\n    return _super.call(this, {\n      id: FIND_IDS.PreviousSelectionMatchFindAction,\n      label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\n      alias: 'Find Previous Selection',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048\n        /* CtrlCmd */\n        | 1024\n        /* Shift */\n        | 61\n        /* F3 */\n        ,\n        weight: 100\n        /* EditorContrib */\n\n      }\n    }) || this;\n  }\n\n  PreviousSelectionMatchFindAction.prototype._run = function (controller) {\n    return controller.moveToPrevMatch();\n  };\n\n  return PreviousSelectionMatchFindAction;\n}(SelectionMatchFindAction);\n\nexport { PreviousSelectionMatchFindAction };\n\nvar StartFindReplaceAction =\n/** @class */\nfunction (_super) {\n  __extends(StartFindReplaceAction, _super);\n\n  function StartFindReplaceAction() {\n    return _super.call(this, {\n      id: FIND_IDS.StartFindReplaceAction,\n      label: nls.localize('startReplace', \"Replace\"),\n      alias: 'Replace',\n      precondition: undefined,\n      kbOpts: {\n        kbExpr: null,\n        primary: 2048\n        /* CtrlCmd */\n        | 38\n        /* KEY_H */\n        ,\n        mac: {\n          primary: 2048\n          /* CtrlCmd */\n          | 512\n          /* Alt */\n          | 36\n          /* KEY_F */\n\n        },\n        weight: 100\n        /* EditorContrib */\n\n      },\n      menuOpts: {\n        menuId: 17\n        /* MenubarEditMenu */\n        ,\n        group: '3_find',\n        title: nls.localize({\n          key: 'miReplace',\n          comment: ['&& denotes a mnemonic']\n        }, \"&&Replace\"),\n        order: 2\n      }\n    }) || this;\n  }\n\n  StartFindReplaceAction.prototype.run = function (accessor, editor) {\n    if (!editor.hasModel() || editor.getOption(68\n    /* readOnly */\n    )) {\n      return;\n    }\n\n    var controller = CommonFindController.get(editor);\n    var currentSelection = editor.getSelection();\n    var findInputFocused = controller.isFindInputFocused(); // we only seed search string from selection when the current selection is single line and not empty,\n    // + the find input is not focused\n\n    var seedSearchStringFromSelection = !currentSelection.isEmpty() && currentSelection.startLineNumber === currentSelection.endLineNumber && editor.getOption(28\n    /* find */\n    ).seedSearchStringFromSelection && !findInputFocused;\n    /*\r\n     * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\r\n       * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\r\n     * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\r\n     * findInputFocused false seedSearchStringFromSelection false FocusFindInput\r\n     */\n\n    var shouldFocus = findInputFocused || seedSearchStringFromSelection ? 2\n    /* FocusReplaceInput */\n    : 1\n    /* FocusFindInput */\n    ;\n\n    if (controller) {\n      controller.start({\n        forceRevealReplace: true,\n        seedSearchStringFromSelection: seedSearchStringFromSelection,\n        seedSearchStringFromGlobalClipboard: editor.getOption(28\n        /* find */\n        ).seedSearchStringFromSelection,\n        shouldFocus: shouldFocus,\n        shouldAnimate: true,\n        updateSearchScope: false\n      });\n    }\n  };\n\n  return StartFindReplaceAction;\n}(EditorAction);\n\nexport { StartFindReplaceAction };\nregisterEditorContribution(CommonFindController.ID, FindController);\nregisterEditorAction(StartFindAction);\nregisterEditorAction(StartFindWithSelectionAction);\nregisterEditorAction(NextMatchFindAction);\nregisterEditorAction(NextMatchFindAction2);\nregisterEditorAction(PreviousMatchFindAction);\nregisterEditorAction(PreviousMatchFindAction2);\nregisterEditorAction(NextSelectionMatchFindAction);\nregisterEditorAction(PreviousSelectionMatchFindAction);\nregisterEditorAction(StartFindReplaceAction);\nvar FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.CloseFindWidgetCommand,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: function (x) {\n    return x.closeFindWidget();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: 9\n    /* Escape */\n    ,\n    secondary: [1024\n    /* Shift */\n    | 9\n    /* Escape */\n    ]\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ToggleCaseSensitiveCommand,\n  precondition: undefined,\n  handler: function (x) {\n    return x.toggleCaseSensitive();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: ToggleCaseSensitiveKeybinding.primary,\n    mac: ToggleCaseSensitiveKeybinding.mac,\n    win: ToggleCaseSensitiveKeybinding.win,\n    linux: ToggleCaseSensitiveKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ToggleWholeWordCommand,\n  precondition: undefined,\n  handler: function (x) {\n    return x.toggleWholeWords();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: ToggleWholeWordKeybinding.primary,\n    mac: ToggleWholeWordKeybinding.mac,\n    win: ToggleWholeWordKeybinding.win,\n    linux: ToggleWholeWordKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ToggleRegexCommand,\n  precondition: undefined,\n  handler: function (x) {\n    return x.toggleRegex();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: ToggleRegexKeybinding.primary,\n    mac: ToggleRegexKeybinding.mac,\n    win: ToggleRegexKeybinding.win,\n    linux: ToggleRegexKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ToggleSearchScopeCommand,\n  precondition: undefined,\n  handler: function (x) {\n    return x.toggleSearchScope();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: ToggleSearchScopeKeybinding.primary,\n    mac: ToggleSearchScopeKeybinding.mac,\n    win: ToggleSearchScopeKeybinding.win,\n    linux: ToggleSearchScopeKeybinding.linux\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ReplaceOneAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: function (x) {\n    return x.replace();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: 2048\n    /* CtrlCmd */\n    | 1024\n    /* Shift */\n    | 22\n    /* KEY_1 */\n\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ReplaceOneAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: function (x) {\n    return x.replace();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n    primary: 3\n    /* Enter */\n\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ReplaceAllAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: function (x) {\n    return x.replaceAll();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: 2048\n    /* CtrlCmd */\n    | 512\n    /* Alt */\n    | 3\n    /* Enter */\n\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.ReplaceAllAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: function (x) {\n    return x.replaceAll();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n    primary: undefined,\n    mac: {\n      primary: 2048\n      /* CtrlCmd */\n      | 3\n      /* Enter */\n\n    }\n  }\n}));\nregisterEditorCommand(new FindCommand({\n  id: FIND_IDS.SelectAllMatchesAction,\n  precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n  handler: function (x) {\n    return x.selectAllMatches();\n  },\n  kbOpts: {\n    weight: 100\n    /* EditorContrib */\n    + 5,\n    kbExpr: EditorContextKeys.focus,\n    primary: 512\n    /* Alt */\n    | 3\n    /* Enter */\n\n  }\n}));","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/find/findController.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","nls","Delayer","Disposable","strings","EditorAction","EditorCommand","registerEditorAction","registerEditorCommand","registerEditorContribution","EditorContextKeys","CONTEXT_FIND_INPUT_FOCUSED","CONTEXT_FIND_WIDGET_VISIBLE","FIND_IDS","FindModelBoundToEditorModel","ToggleCaseSensitiveKeybinding","ToggleRegexKeybinding","ToggleSearchScopeKeybinding","ToggleWholeWordKeybinding","CONTEXT_REPLACE_INPUT_FOCUSED","FindOptionsWidget","FindReplaceState","FindWidget","IClipboardService","IContextKeyService","ContextKeyExpr","IContextViewService","optional","IKeybindingService","IStorageService","IThemeService","INotificationService","SEARCH_STRING_MAX_LENGTH","getSelectionSearchString","editor","hasModel","selection","getSelection","startLineNumber","endLineNumber","isEmpty","wordAtPosition","getModel","getWordAtPosition","getStartPosition","word","getValueLengthInRange","getValueInRange","CommonFindController","_super","contextKeyService","storageService","clipboardService","_this","call","_editor","_findWidgetVisible","bindTo","_contextKeyService","_storageService","_clipboardService","_updateHistoryDelayer","_state","_register","loadQueryState","onFindReplaceStateChange","e","_onStateChanged","_model","onDidChangeModel","shouldRestartFind","isRevealed","disposeModel","change","searchScope","matchCase","getBoolean","wholeWord","isRegex","preserveCase","_start","forceRevealReplace","seedSearchStringFromSelection","getOption","seedSearchStringFromGlobalClipboard","shouldFocus","shouldAnimate","updateSearchScope","get","getContribution","ID","dispose","saveQueryState","set","reset","searchString","setGlobalBufferTerm","store","actualIsRegex","actualWholeWord","actualMatchCase","actualPreserveCase","isFindInputFocused","getValue","getState","closeFindWidget","focus","toggleCaseSensitive","highlightFindOptions","toggleWholeWords","toggleRegex","toggleSearchScope","endColumn","setEndPosition","getLineMaxColumn","setSearchString","escapeRegExpCharacters","opts","stateChanges","selectionSearchString","getGlobalBufferTerm","isReplaceRevealed","currentSelection","start","moveToNextMatch","moveToPrevMatch","replace","replaceAll","selectAllMatches","globalFindClipboard","isTooLargeForSyncing","readFindText","text","writeFindText","FindController","_contextViewService","_keybindingService","_themeService","_notificationService","_widget","_findOptionsWidget","_createFindWidget","autoFindInSelection","isSelectionMultipleLine","focusReplaceInput","focusFindInput","StartFindAction","id","label","localize","alias","precondition","undefined","kbOpts","kbExpr","primary","weight","menuOpts","menuId","group","title","comment","order","run","accessor","controller","StartFindWithSelectionAction","StartFindWithSelection","mac","MatchFindAction","apply","_run","NextMatchFindAction","secondary","NextMatchFindAction2","and","PreviousMatchFindAction","PreviousMatchFindAction2","SelectionMatchFindAction","NextSelectionMatchFindAction","PreviousSelectionMatchFindAction","StartFindReplaceAction","findInputFocused","FindCommand","bindToContribution","CloseFindWidgetCommand","handler","x","ToggleCaseSensitiveCommand","win","linux","ToggleWholeWordCommand","ToggleRegexCommand","ToggleSearchScopeCommand","ReplaceOneAction","ReplaceAllAction","SelectAllMatchesAction"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport { Delayer } from '../../../base/common/async.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, FIND_IDS, FindModelBoundToEditorModel, ToggleCaseSensitiveKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding, CONTEXT_REPLACE_INPUT_FOCUSED } from './findModel.js';\r\nimport { FindOptionsWidget } from './findOptionsWidget.js';\r\nimport { FindReplaceState } from './findState.js';\r\nimport { FindWidget } from './findWidget.js';\r\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\r\nimport { IContextKeyService, ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextViewService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { optional } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nvar SEARCH_STRING_MAX_LENGTH = 524288;\r\nexport function getSelectionSearchString(editor) {\r\n    if (!editor.hasModel()) {\r\n        return null;\r\n    }\r\n    var selection = editor.getSelection();\r\n    // if selection spans multiple lines, default search string to empty\r\n    if (selection.startLineNumber === selection.endLineNumber) {\r\n        if (selection.isEmpty()) {\r\n            var wordAtPosition = editor.getModel().getWordAtPosition(selection.getStartPosition());\r\n            if (wordAtPosition) {\r\n                return wordAtPosition.word;\r\n            }\r\n        }\r\n        else {\r\n            if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\r\n                return editor.getModel().getValueInRange(selection);\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\nvar CommonFindController = /** @class */ (function (_super) {\r\n    __extends(CommonFindController, _super);\r\n    function CommonFindController(editor, contextKeyService, storageService, clipboardService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = editor;\r\n        _this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\r\n        _this._contextKeyService = contextKeyService;\r\n        _this._storageService = storageService;\r\n        _this._clipboardService = clipboardService;\r\n        _this._updateHistoryDelayer = new Delayer(500);\r\n        _this._state = _this._register(new FindReplaceState());\r\n        _this.loadQueryState();\r\n        _this._register(_this._state.onFindReplaceStateChange(function (e) { return _this._onStateChanged(e); }));\r\n        _this._model = null;\r\n        _this._register(_this._editor.onDidChangeModel(function () {\r\n            var shouldRestartFind = (_this._editor.getModel() && _this._state.isRevealed);\r\n            _this.disposeModel();\r\n            _this._state.change({\r\n                searchScope: null,\r\n                matchCase: _this._storageService.getBoolean('editor.matchCase', 1 /* WORKSPACE */, false),\r\n                wholeWord: _this._storageService.getBoolean('editor.wholeWord', 1 /* WORKSPACE */, false),\r\n                isRegex: _this._storageService.getBoolean('editor.isRegex', 1 /* WORKSPACE */, false),\r\n                preserveCase: _this._storageService.getBoolean('editor.preserveCase', 1 /* WORKSPACE */, false)\r\n            }, false);\r\n            if (shouldRestartFind) {\r\n                _this._start({\r\n                    forceRevealReplace: false,\r\n                    seedSearchStringFromSelection: false && _this._editor.getOption(28 /* find */).seedSearchStringFromSelection,\r\n                    seedSearchStringFromGlobalClipboard: false,\r\n                    shouldFocus: 0 /* NoFocusChange */,\r\n                    shouldAnimate: false,\r\n                    updateSearchScope: false\r\n                });\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    CommonFindController.get = function (editor) {\r\n        return editor.getContribution(CommonFindController.ID);\r\n    };\r\n    CommonFindController.prototype.dispose = function () {\r\n        this.disposeModel();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    CommonFindController.prototype.disposeModel = function () {\r\n        if (this._model) {\r\n            this._model.dispose();\r\n            this._model = null;\r\n        }\r\n    };\r\n    CommonFindController.prototype._onStateChanged = function (e) {\r\n        this.saveQueryState(e);\r\n        if (e.isRevealed) {\r\n            if (this._state.isRevealed) {\r\n                this._findWidgetVisible.set(true);\r\n            }\r\n            else {\r\n                this._findWidgetVisible.reset();\r\n                this.disposeModel();\r\n            }\r\n        }\r\n        if (e.searchString) {\r\n            this.setGlobalBufferTerm(this._state.searchString);\r\n        }\r\n    };\r\n    CommonFindController.prototype.saveQueryState = function (e) {\r\n        if (e.isRegex) {\r\n            this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1 /* WORKSPACE */);\r\n        }\r\n        if (e.wholeWord) {\r\n            this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1 /* WORKSPACE */);\r\n        }\r\n        if (e.matchCase) {\r\n            this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1 /* WORKSPACE */);\r\n        }\r\n        if (e.preserveCase) {\r\n            this._storageService.store('editor.preserveCase', this._state.actualPreserveCase, 1 /* WORKSPACE */);\r\n        }\r\n    };\r\n    CommonFindController.prototype.loadQueryState = function () {\r\n        this._state.change({\r\n            matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* WORKSPACE */, this._state.matchCase),\r\n            wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* WORKSPACE */, this._state.wholeWord),\r\n            isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* WORKSPACE */, this._state.isRegex),\r\n            preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* WORKSPACE */, this._state.preserveCase)\r\n        }, false);\r\n    };\r\n    CommonFindController.prototype.isFindInputFocused = function () {\r\n        return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\r\n    };\r\n    CommonFindController.prototype.getState = function () {\r\n        return this._state;\r\n    };\r\n    CommonFindController.prototype.closeFindWidget = function () {\r\n        this._state.change({\r\n            isRevealed: false,\r\n            searchScope: null\r\n        }, false);\r\n        this._editor.focus();\r\n    };\r\n    CommonFindController.prototype.toggleCaseSensitive = function () {\r\n        this._state.change({ matchCase: !this._state.matchCase }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    };\r\n    CommonFindController.prototype.toggleWholeWords = function () {\r\n        this._state.change({ wholeWord: !this._state.wholeWord }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    };\r\n    CommonFindController.prototype.toggleRegex = function () {\r\n        this._state.change({ isRegex: !this._state.isRegex }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    };\r\n    CommonFindController.prototype.toggleSearchScope = function () {\r\n        if (this._state.searchScope) {\r\n            this._state.change({ searchScope: null }, true);\r\n        }\r\n        else {\r\n            if (this._editor.hasModel()) {\r\n                var selection = this._editor.getSelection();\r\n                if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\r\n                    selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\r\n                }\r\n                if (!selection.isEmpty()) {\r\n                    this._state.change({ searchScope: selection }, true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    CommonFindController.prototype.setSearchString = function (searchString) {\r\n        if (this._state.isRegex) {\r\n            searchString = strings.escapeRegExpCharacters(searchString);\r\n        }\r\n        this._state.change({ searchString: searchString }, false);\r\n    };\r\n    CommonFindController.prototype.highlightFindOptions = function () {\r\n        // overwritten in subclass\r\n    };\r\n    CommonFindController.prototype._start = function (opts) {\r\n        this.disposeModel();\r\n        if (!this._editor.hasModel()) {\r\n            // cannot do anything with an editor that doesn't have a model...\r\n            return;\r\n        }\r\n        var stateChanges = {\r\n            isRevealed: true\r\n        };\r\n        if (opts.seedSearchStringFromSelection) {\r\n            var selectionSearchString = getSelectionSearchString(this._editor);\r\n            if (selectionSearchString) {\r\n                if (this._state.isRegex) {\r\n                    stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\r\n                }\r\n                else {\r\n                    stateChanges.searchString = selectionSearchString;\r\n                }\r\n            }\r\n        }\r\n        if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\r\n            var selectionSearchString = this.getGlobalBufferTerm();\r\n            if (selectionSearchString) {\r\n                stateChanges.searchString = selectionSearchString;\r\n            }\r\n        }\r\n        // Overwrite isReplaceRevealed\r\n        if (opts.forceRevealReplace) {\r\n            stateChanges.isReplaceRevealed = true;\r\n        }\r\n        else if (!this._findWidgetVisible.get()) {\r\n            stateChanges.isReplaceRevealed = false;\r\n        }\r\n        if (opts.updateSearchScope) {\r\n            var currentSelection = this._editor.getSelection();\r\n            if (!currentSelection.isEmpty()) {\r\n                stateChanges.searchScope = currentSelection;\r\n            }\r\n        }\r\n        this._state.change(stateChanges, false);\r\n        if (!this._model) {\r\n            this._model = new FindModelBoundToEditorModel(this._editor, this._state);\r\n        }\r\n    };\r\n    CommonFindController.prototype.start = function (opts) {\r\n        this._start(opts);\r\n    };\r\n    CommonFindController.prototype.moveToNextMatch = function () {\r\n        if (this._model) {\r\n            this._model.moveToNextMatch();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.moveToPrevMatch = function () {\r\n        if (this._model) {\r\n            this._model.moveToPrevMatch();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.replace = function () {\r\n        if (this._model) {\r\n            this._model.replace();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.replaceAll = function () {\r\n        if (this._model) {\r\n            this._model.replaceAll();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.selectAllMatches = function () {\r\n        if (this._model) {\r\n            this._model.selectAllMatches();\r\n            this._editor.focus();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.getGlobalBufferTerm = function () {\r\n        if (this._editor.getOption(28 /* find */).globalFindClipboard\r\n            && this._clipboardService\r\n            && this._editor.hasModel()\r\n            && !this._editor.getModel().isTooLargeForSyncing()) {\r\n            return this._clipboardService.readFindText();\r\n        }\r\n        return '';\r\n    };\r\n    CommonFindController.prototype.setGlobalBufferTerm = function (text) {\r\n        if (this._editor.getOption(28 /* find */).globalFindClipboard\r\n            && this._clipboardService\r\n            && this._editor.hasModel()\r\n            && !this._editor.getModel().isTooLargeForSyncing()) {\r\n            this._clipboardService.writeFindText(text);\r\n        }\r\n    };\r\n    CommonFindController.ID = 'editor.contrib.findController';\r\n    CommonFindController = __decorate([\r\n        __param(1, IContextKeyService),\r\n        __param(2, IStorageService),\r\n        __param(3, IClipboardService)\r\n    ], CommonFindController);\r\n    return CommonFindController;\r\n}(Disposable));\r\nexport { CommonFindController };\r\nvar FindController = /** @class */ (function (_super) {\r\n    __extends(FindController, _super);\r\n    function FindController(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, _notificationService, _storageService, clipboardService) {\r\n        var _this = _super.call(this, editor, _contextKeyService, _storageService, clipboardService) || this;\r\n        _this._contextViewService = _contextViewService;\r\n        _this._keybindingService = _keybindingService;\r\n        _this._themeService = _themeService;\r\n        _this._notificationService = _notificationService;\r\n        _this._widget = null;\r\n        _this._findOptionsWidget = null;\r\n        return _this;\r\n    }\r\n    FindController.prototype._start = function (opts) {\r\n        if (!this._widget) {\r\n            this._createFindWidget();\r\n        }\r\n        var selection = this._editor.getSelection();\r\n        var updateSearchScope = false;\r\n        switch (this._editor.getOption(28 /* find */).autoFindInSelection) {\r\n            case 'always':\r\n                updateSearchScope = true;\r\n                break;\r\n            case 'never':\r\n                updateSearchScope = false;\r\n                break;\r\n            case 'multiline':\r\n                var isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\r\n                updateSearchScope = isSelectionMultipleLine;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        opts.updateSearchScope = updateSearchScope;\r\n        _super.prototype._start.call(this, opts);\r\n        if (opts.shouldFocus === 2 /* FocusReplaceInput */) {\r\n            this._widget.focusReplaceInput();\r\n        }\r\n        else if (opts.shouldFocus === 1 /* FocusFindInput */) {\r\n            this._widget.focusFindInput();\r\n        }\r\n    };\r\n    FindController.prototype.highlightFindOptions = function () {\r\n        if (!this._widget) {\r\n            this._createFindWidget();\r\n        }\r\n        if (this._state.isRevealed) {\r\n            this._widget.highlightFindOptions();\r\n        }\r\n        else {\r\n            this._findOptionsWidget.highlightFindOptions();\r\n        }\r\n    };\r\n    FindController.prototype._createFindWidget = function () {\r\n        this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService));\r\n        this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService, this._themeService));\r\n    };\r\n    FindController = __decorate([\r\n        __param(1, IContextViewService),\r\n        __param(2, IContextKeyService),\r\n        __param(3, IKeybindingService),\r\n        __param(4, IThemeService),\r\n        __param(5, INotificationService),\r\n        __param(6, IStorageService),\r\n        __param(7, optional(IClipboardService))\r\n    ], FindController);\r\n    return FindController;\r\n}(CommonFindController));\r\nexport { FindController };\r\nvar StartFindAction = /** @class */ (function (_super) {\r\n    __extends(StartFindAction, _super);\r\n    function StartFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.StartFindAction,\r\n            label: nls.localize('startFindAction', \"Find\"),\r\n            alias: 'Find',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 2048 /* CtrlCmd */ | 36 /* KEY_F */,\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 17 /* MenubarEditMenu */,\r\n                group: '3_find',\r\n                title: nls.localize({ key: 'miFind', comment: ['&& denotes a mnemonic'] }, \"&&Find\"),\r\n                order: 1\r\n            }\r\n        }) || this;\r\n    }\r\n    StartFindAction.prototype.run = function (accessor, editor) {\r\n        var controller = CommonFindController.get(editor);\r\n        if (controller) {\r\n            controller.start({\r\n                forceRevealReplace: false,\r\n                seedSearchStringFromSelection: editor.getOption(28 /* find */).seedSearchStringFromSelection,\r\n                seedSearchStringFromGlobalClipboard: editor.getOption(28 /* find */).globalFindClipboard,\r\n                shouldFocus: 1 /* FocusFindInput */,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n        }\r\n    };\r\n    return StartFindAction;\r\n}(EditorAction));\r\nexport { StartFindAction };\r\nvar StartFindWithSelectionAction = /** @class */ (function (_super) {\r\n    __extends(StartFindWithSelectionAction, _super);\r\n    function StartFindWithSelectionAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.StartFindWithSelection,\r\n            label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\r\n            alias: 'Find With Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 0,\r\n                mac: {\r\n                    primary: 2048 /* CtrlCmd */ | 35 /* KEY_E */,\r\n                },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    StartFindWithSelectionAction.prototype.run = function (accessor, editor) {\r\n        var controller = CommonFindController.get(editor);\r\n        if (controller) {\r\n            controller.start({\r\n                forceRevealReplace: false,\r\n                seedSearchStringFromSelection: true,\r\n                seedSearchStringFromGlobalClipboard: false,\r\n                shouldFocus: 0 /* NoFocusChange */,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n            controller.setGlobalBufferTerm(controller.getState().searchString);\r\n        }\r\n    };\r\n    return StartFindWithSelectionAction;\r\n}(EditorAction));\r\nexport { StartFindWithSelectionAction };\r\nvar MatchFindAction = /** @class */ (function (_super) {\r\n    __extends(MatchFindAction, _super);\r\n    function MatchFindAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    MatchFindAction.prototype.run = function (accessor, editor) {\r\n        var controller = CommonFindController.get(editor);\r\n        if (controller && !this._run(controller)) {\r\n            controller.start({\r\n                forceRevealReplace: false,\r\n                seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(28 /* find */).seedSearchStringFromSelection,\r\n                seedSearchStringFromGlobalClipboard: true,\r\n                shouldFocus: 0 /* NoFocusChange */,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n            this._run(controller);\r\n        }\r\n    };\r\n    return MatchFindAction;\r\n}(EditorAction));\r\nexport { MatchFindAction };\r\nvar NextMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(NextMatchFindAction, _super);\r\n    function NextMatchFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.NextMatchFindAction,\r\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\r\n            alias: 'Find Next',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 61 /* F3 */,\r\n                mac: { primary: 2048 /* CtrlCmd */ | 37 /* KEY_G */, secondary: [61 /* F3 */] },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    NextMatchFindAction.prototype._run = function (controller) {\r\n        return controller.moveToNextMatch();\r\n    };\r\n    return NextMatchFindAction;\r\n}(MatchFindAction));\r\nexport { NextMatchFindAction };\r\nvar NextMatchFindAction2 = /** @class */ (function (_super) {\r\n    __extends(NextMatchFindAction2, _super);\r\n    function NextMatchFindAction2() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.NextMatchFindAction,\r\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\r\n            alias: 'Find Next',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\r\n                primary: 3 /* Enter */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    NextMatchFindAction2.prototype._run = function (controller) {\r\n        return controller.moveToNextMatch();\r\n    };\r\n    return NextMatchFindAction2;\r\n}(MatchFindAction));\r\nexport { NextMatchFindAction2 };\r\nvar PreviousMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(PreviousMatchFindAction, _super);\r\n    function PreviousMatchFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.PreviousMatchFindAction,\r\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\r\n            alias: 'Find Previous',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 1024 /* Shift */ | 61 /* F3 */,\r\n                mac: { primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 37 /* KEY_G */, secondary: [1024 /* Shift */ | 61 /* F3 */] },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    PreviousMatchFindAction.prototype._run = function (controller) {\r\n        return controller.moveToPrevMatch();\r\n    };\r\n    return PreviousMatchFindAction;\r\n}(MatchFindAction));\r\nexport { PreviousMatchFindAction };\r\nvar PreviousMatchFindAction2 = /** @class */ (function (_super) {\r\n    __extends(PreviousMatchFindAction2, _super);\r\n    function PreviousMatchFindAction2() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.PreviousMatchFindAction,\r\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\r\n            alias: 'Find Previous',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\r\n                primary: 1024 /* Shift */ | 3 /* Enter */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    PreviousMatchFindAction2.prototype._run = function (controller) {\r\n        return controller.moveToPrevMatch();\r\n    };\r\n    return PreviousMatchFindAction2;\r\n}(MatchFindAction));\r\nexport { PreviousMatchFindAction2 };\r\nvar SelectionMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(SelectionMatchFindAction, _super);\r\n    function SelectionMatchFindAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    SelectionMatchFindAction.prototype.run = function (accessor, editor) {\r\n        var controller = CommonFindController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        var selectionSearchString = getSelectionSearchString(editor);\r\n        if (selectionSearchString) {\r\n            controller.setSearchString(selectionSearchString);\r\n        }\r\n        if (!this._run(controller)) {\r\n            controller.start({\r\n                forceRevealReplace: false,\r\n                seedSearchStringFromSelection: editor.getOption(28 /* find */).seedSearchStringFromSelection,\r\n                seedSearchStringFromGlobalClipboard: false,\r\n                shouldFocus: 0 /* NoFocusChange */,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n            this._run(controller);\r\n        }\r\n    };\r\n    return SelectionMatchFindAction;\r\n}(EditorAction));\r\nexport { SelectionMatchFindAction };\r\nvar NextSelectionMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(NextSelectionMatchFindAction, _super);\r\n    function NextSelectionMatchFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.NextSelectionMatchFindAction,\r\n            label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\r\n            alias: 'Find Next Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* CtrlCmd */ | 61 /* F3 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    NextSelectionMatchFindAction.prototype._run = function (controller) {\r\n        return controller.moveToNextMatch();\r\n    };\r\n    return NextSelectionMatchFindAction;\r\n}(SelectionMatchFindAction));\r\nexport { NextSelectionMatchFindAction };\r\nvar PreviousSelectionMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(PreviousSelectionMatchFindAction, _super);\r\n    function PreviousSelectionMatchFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.PreviousSelectionMatchFindAction,\r\n            label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\r\n            alias: 'Find Previous Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 61 /* F3 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    PreviousSelectionMatchFindAction.prototype._run = function (controller) {\r\n        return controller.moveToPrevMatch();\r\n    };\r\n    return PreviousSelectionMatchFindAction;\r\n}(SelectionMatchFindAction));\r\nexport { PreviousSelectionMatchFindAction };\r\nvar StartFindReplaceAction = /** @class */ (function (_super) {\r\n    __extends(StartFindReplaceAction, _super);\r\n    function StartFindReplaceAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.StartFindReplaceAction,\r\n            label: nls.localize('startReplace', \"Replace\"),\r\n            alias: 'Replace',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 2048 /* CtrlCmd */ | 38 /* KEY_H */,\r\n                mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 36 /* KEY_F */ },\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 17 /* MenubarEditMenu */,\r\n                group: '3_find',\r\n                title: nls.localize({ key: 'miReplace', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\r\n                order: 2\r\n            }\r\n        }) || this;\r\n    }\r\n    StartFindReplaceAction.prototype.run = function (accessor, editor) {\r\n        if (!editor.hasModel() || editor.getOption(68 /* readOnly */)) {\r\n            return;\r\n        }\r\n        var controller = CommonFindController.get(editor);\r\n        var currentSelection = editor.getSelection();\r\n        var findInputFocused = controller.isFindInputFocused();\r\n        // we only seed search string from selection when the current selection is single line and not empty,\r\n        // + the find input is not focused\r\n        var seedSearchStringFromSelection = !currentSelection.isEmpty()\r\n            && currentSelection.startLineNumber === currentSelection.endLineNumber && editor.getOption(28 /* find */).seedSearchStringFromSelection\r\n            && !findInputFocused;\r\n        /*\r\n         * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\r\n\r\n         * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\r\n         * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\r\n         * findInputFocused false seedSearchStringFromSelection false FocusFindInput\r\n         */\r\n        var shouldFocus = (findInputFocused || seedSearchStringFromSelection) ?\r\n            2 /* FocusReplaceInput */ : 1 /* FocusFindInput */;\r\n        if (controller) {\r\n            controller.start({\r\n                forceRevealReplace: true,\r\n                seedSearchStringFromSelection: seedSearchStringFromSelection,\r\n                seedSearchStringFromGlobalClipboard: editor.getOption(28 /* find */).seedSearchStringFromSelection,\r\n                shouldFocus: shouldFocus,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n        }\r\n    };\r\n    return StartFindReplaceAction;\r\n}(EditorAction));\r\nexport { StartFindReplaceAction };\r\nregisterEditorContribution(CommonFindController.ID, FindController);\r\nregisterEditorAction(StartFindAction);\r\nregisterEditorAction(StartFindWithSelectionAction);\r\nregisterEditorAction(NextMatchFindAction);\r\nregisterEditorAction(NextMatchFindAction2);\r\nregisterEditorAction(PreviousMatchFindAction);\r\nregisterEditorAction(PreviousMatchFindAction2);\r\nregisterEditorAction(NextSelectionMatchFindAction);\r\nregisterEditorAction(PreviousSelectionMatchFindAction);\r\nregisterEditorAction(StartFindReplaceAction);\r\nvar FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.CloseFindWidgetCommand,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.closeFindWidget(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 9 /* Escape */,\r\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleCaseSensitiveCommand,\r\n    precondition: undefined,\r\n    handler: function (x) { return x.toggleCaseSensitive(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleCaseSensitiveKeybinding.primary,\r\n        mac: ToggleCaseSensitiveKeybinding.mac,\r\n        win: ToggleCaseSensitiveKeybinding.win,\r\n        linux: ToggleCaseSensitiveKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleWholeWordCommand,\r\n    precondition: undefined,\r\n    handler: function (x) { return x.toggleWholeWords(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleWholeWordKeybinding.primary,\r\n        mac: ToggleWholeWordKeybinding.mac,\r\n        win: ToggleWholeWordKeybinding.win,\r\n        linux: ToggleWholeWordKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleRegexCommand,\r\n    precondition: undefined,\r\n    handler: function (x) { return x.toggleRegex(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleRegexKeybinding.primary,\r\n        mac: ToggleRegexKeybinding.mac,\r\n        win: ToggleRegexKeybinding.win,\r\n        linux: ToggleRegexKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleSearchScopeCommand,\r\n    precondition: undefined,\r\n    handler: function (x) { return x.toggleSearchScope(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleSearchScopeKeybinding.primary,\r\n        mac: ToggleSearchScopeKeybinding.mac,\r\n        win: ToggleSearchScopeKeybinding.win,\r\n        linux: ToggleSearchScopeKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceOneAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.replace(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 22 /* KEY_1 */\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceOneAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.replace(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\r\n        primary: 3 /* Enter */\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceAllAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.replaceAll(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 3 /* Enter */\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceAllAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.replaceAll(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\r\n        primary: undefined,\r\n        mac: {\r\n            primary: 2048 /* CtrlCmd */ | 3 /* Enter */,\r\n        }\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.SelectAllMatchesAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.selectAllMatches(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 512 /* Alt */ | 3 /* Enter */\r\n    }\r\n}));\r\n"]},"metadata":{},"sourceType":"module"}