{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport { toggleClass } from '../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Widget } from '../../../base/browser/ui/widget.js';\n\nvar ContentHoverWidget =\n/** @class */\nfunction (_super) {\n  __extends(ContentHoverWidget, _super);\n\n  function ContentHoverWidget(id, editor) {\n    var _this = _super.call(this) || this; // Editor.IContentWidget.allowEditorOverflow\n\n\n    _this.allowEditorOverflow = true;\n    _this._id = id;\n    _this._editor = editor;\n    _this._isVisible = false;\n    _this._stoleFocus = false;\n    _this._containerDomNode = document.createElement('div');\n    _this._containerDomNode.className = 'monaco-editor-hover hidden';\n    _this._containerDomNode.tabIndex = 0;\n    _this._domNode = document.createElement('div');\n    _this._domNode.className = 'monaco-editor-hover-content';\n    _this.scrollbar = new DomScrollableElement(_this._domNode, {});\n\n    _this._register(_this.scrollbar);\n\n    _this._containerDomNode.appendChild(_this.scrollbar.getDomNode());\n\n    _this.onkeydown(_this._containerDomNode, function (e) {\n      if (e.equals(9\n      /* Escape */\n      )) {\n        _this.hide();\n      }\n    });\n\n    _this._register(_this._editor.onDidChangeConfiguration(function (e) {\n      if (e.hasChanged(34\n      /* fontInfo */\n      )) {\n        _this.updateFont();\n      }\n    }));\n\n    _this._editor.onDidLayoutChange(function (e) {\n      return _this.layout();\n    });\n\n    _this.layout();\n\n    _this._editor.addContentWidget(_this);\n\n    _this._showAtPosition = null;\n    _this._showAtRange = null;\n    _this._stoleFocus = false;\n    return _this;\n  }\n\n  Object.defineProperty(ContentHoverWidget.prototype, \"isVisible\", {\n    get: function () {\n      return this._isVisible;\n    },\n    set: function (value) {\n      this._isVisible = value;\n      toggleClass(this._containerDomNode, 'hidden', !this._isVisible);\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ContentHoverWidget.prototype.getId = function () {\n    return this._id;\n  };\n\n  ContentHoverWidget.prototype.getDomNode = function () {\n    return this._containerDomNode;\n  };\n\n  ContentHoverWidget.prototype.showAt = function (position, range, focus) {\n    // Position has changed\n    this._showAtPosition = position;\n    this._showAtRange = range;\n    this.isVisible = true;\n\n    this._editor.layoutContentWidget(this); // Simply force a synchronous render on the editor\n    // such that the widget does not really render with left = '0px'\n\n\n    this._editor.render();\n\n    this._stoleFocus = focus;\n\n    if (focus) {\n      this._containerDomNode.focus();\n    }\n  };\n\n  ContentHoverWidget.prototype.hide = function () {\n    if (!this.isVisible) {\n      return;\n    }\n\n    this.isVisible = false;\n\n    this._editor.layoutContentWidget(this);\n\n    if (this._stoleFocus) {\n      this._editor.focus();\n    }\n  };\n\n  ContentHoverWidget.prototype.getPosition = function () {\n    if (this.isVisible) {\n      return {\n        position: this._showAtPosition,\n        range: this._showAtRange,\n        preference: [1\n        /* ABOVE */\n        , 2\n        /* BELOW */\n        ]\n      };\n    }\n\n    return null;\n  };\n\n  ContentHoverWidget.prototype.dispose = function () {\n    this._editor.removeContentWidget(this);\n\n    _super.prototype.dispose.call(this);\n  };\n\n  ContentHoverWidget.prototype.updateFont = function () {\n    var _this = this;\n\n    var codeClasses = Array.prototype.slice.call(this._domNode.getElementsByClassName('code'));\n    codeClasses.forEach(function (node) {\n      return _this._editor.applyFontInfo(node);\n    });\n  };\n\n  ContentHoverWidget.prototype.updateContents = function (node) {\n    this._domNode.textContent = '';\n\n    this._domNode.appendChild(node);\n\n    this.updateFont();\n\n    this._editor.layoutContentWidget(this);\n\n    this.onContentsChange();\n  };\n\n  ContentHoverWidget.prototype.onContentsChange = function () {\n    this.scrollbar.scanDomNode();\n  };\n\n  ContentHoverWidget.prototype.layout = function () {\n    var height = Math.max(this._editor.getLayoutInfo().height / 4, 250);\n\n    var _a = this._editor.getOption(34\n    /* fontInfo */\n    ),\n        fontSize = _a.fontSize,\n        lineHeight = _a.lineHeight;\n\n    this._domNode.style.fontSize = fontSize + \"px\";\n    this._domNode.style.lineHeight = lineHeight + \"px\";\n    this._domNode.style.maxHeight = height + \"px\";\n    this._domNode.style.maxWidth = Math.max(this._editor.getLayoutInfo().width * 0.66, 500) + \"px\";\n  };\n\n  return ContentHoverWidget;\n}(Widget);\n\nexport { ContentHoverWidget };\n\nvar GlyphHoverWidget =\n/** @class */\nfunction (_super) {\n  __extends(GlyphHoverWidget, _super);\n\n  function GlyphHoverWidget(id, editor) {\n    var _this = _super.call(this) || this;\n\n    _this._id = id;\n    _this._editor = editor;\n    _this._isVisible = false;\n    _this._domNode = document.createElement('div');\n    _this._domNode.className = 'monaco-editor-hover hidden';\n\n    _this._domNode.setAttribute('aria-hidden', 'true');\n\n    _this._domNode.setAttribute('role', 'presentation');\n\n    _this._showAtLineNumber = -1;\n\n    _this._register(_this._editor.onDidChangeConfiguration(function (e) {\n      if (e.hasChanged(34\n      /* fontInfo */\n      )) {\n        _this.updateFont();\n      }\n    }));\n\n    _this._editor.addOverlayWidget(_this);\n\n    return _this;\n  }\n\n  Object.defineProperty(GlyphHoverWidget.prototype, \"isVisible\", {\n    get: function () {\n      return this._isVisible;\n    },\n    set: function (value) {\n      this._isVisible = value;\n      toggleClass(this._domNode, 'hidden', !this._isVisible);\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  GlyphHoverWidget.prototype.getId = function () {\n    return this._id;\n  };\n\n  GlyphHoverWidget.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n\n  GlyphHoverWidget.prototype.showAt = function (lineNumber) {\n    this._showAtLineNumber = lineNumber;\n\n    if (!this.isVisible) {\n      this.isVisible = true;\n    }\n\n    var editorLayout = this._editor.getLayoutInfo();\n\n    var topForLineNumber = this._editor.getTopForLineNumber(this._showAtLineNumber);\n\n    var editorScrollTop = this._editor.getScrollTop();\n\n    var lineHeight = this._editor.getOption(49\n    /* lineHeight */\n    );\n\n    var nodeHeight = this._domNode.clientHeight;\n    var top = topForLineNumber - editorScrollTop - (nodeHeight - lineHeight) / 2;\n    this._domNode.style.left = editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth + \"px\";\n    this._domNode.style.top = Math.max(Math.round(top), 0) + \"px\";\n  };\n\n  GlyphHoverWidget.prototype.hide = function () {\n    if (!this.isVisible) {\n      return;\n    }\n\n    this.isVisible = false;\n  };\n\n  GlyphHoverWidget.prototype.getPosition = function () {\n    return null;\n  };\n\n  GlyphHoverWidget.prototype.dispose = function () {\n    this._editor.removeOverlayWidget(this);\n\n    _super.prototype.dispose.call(this);\n  };\n\n  GlyphHoverWidget.prototype.updateFont = function () {\n    var _this = this;\n\n    var codeTags = Array.prototype.slice.call(this._domNode.getElementsByTagName('code'));\n    var codeClasses = Array.prototype.slice.call(this._domNode.getElementsByClassName('code'));\n\n    __spreadArrays(codeTags, codeClasses).forEach(function (node) {\n      return _this._editor.applyFontInfo(node);\n    });\n  };\n\n  GlyphHoverWidget.prototype.updateContents = function (node) {\n    this._domNode.textContent = '';\n\n    this._domNode.appendChild(node);\n\n    this.updateFont();\n  };\n\n  return GlyphHoverWidget;\n}(Widget);\n\nexport { GlyphHoverWidget };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/hover/hoverWidgets.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__spreadArrays","s","i","il","arguments","length","r","k","a","j","jl","toggleClass","DomScrollableElement","Widget","ContentHoverWidget","_super","id","editor","_this","call","allowEditorOverflow","_id","_editor","_isVisible","_stoleFocus","_containerDomNode","document","createElement","className","tabIndex","_domNode","scrollbar","_register","appendChild","getDomNode","onkeydown","e","equals","hide","onDidChangeConfiguration","hasChanged","updateFont","onDidLayoutChange","layout","addContentWidget","_showAtPosition","_showAtRange","defineProperty","get","set","value","enumerable","configurable","getId","showAt","position","range","focus","isVisible","layoutContentWidget","render","getPosition","preference","dispose","removeContentWidget","codeClasses","slice","getElementsByClassName","forEach","node","applyFontInfo","updateContents","textContent","onContentsChange","scanDomNode","height","Math","max","getLayoutInfo","_a","getOption","fontSize","lineHeight","style","maxHeight","maxWidth","width","GlyphHoverWidget","setAttribute","_showAtLineNumber","addOverlayWidget","lineNumber","editorLayout","topForLineNumber","getTopForLineNumber","editorScrollTop","getScrollTop","nodeHeight","clientHeight","top","left","glyphMarginLeft","glyphMarginWidth","round","removeOverlayWidget","codeTags","getElementsByTagName"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { toggleClass } from '../../../base/browser/dom.js';\r\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { Widget } from '../../../base/browser/ui/widget.js';\r\nvar ContentHoverWidget = /** @class */ (function (_super) {\r\n    __extends(ContentHoverWidget, _super);\r\n    function ContentHoverWidget(id, editor) {\r\n        var _this = _super.call(this) || this;\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        _this.allowEditorOverflow = true;\r\n        _this._id = id;\r\n        _this._editor = editor;\r\n        _this._isVisible = false;\r\n        _this._stoleFocus = false;\r\n        _this._containerDomNode = document.createElement('div');\r\n        _this._containerDomNode.className = 'monaco-editor-hover hidden';\r\n        _this._containerDomNode.tabIndex = 0;\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.className = 'monaco-editor-hover-content';\r\n        _this.scrollbar = new DomScrollableElement(_this._domNode, {});\r\n        _this._register(_this.scrollbar);\r\n        _this._containerDomNode.appendChild(_this.scrollbar.getDomNode());\r\n        _this.onkeydown(_this._containerDomNode, function (e) {\r\n            if (e.equals(9 /* Escape */)) {\r\n                _this.hide();\r\n            }\r\n        });\r\n        _this._register(_this._editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(34 /* fontInfo */)) {\r\n                _this.updateFont();\r\n            }\r\n        }));\r\n        _this._editor.onDidLayoutChange(function (e) { return _this.layout(); });\r\n        _this.layout();\r\n        _this._editor.addContentWidget(_this);\r\n        _this._showAtPosition = null;\r\n        _this._showAtRange = null;\r\n        _this._stoleFocus = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ContentHoverWidget.prototype, \"isVisible\", {\r\n        get: function () {\r\n            return this._isVisible;\r\n        },\r\n        set: function (value) {\r\n            this._isVisible = value;\r\n            toggleClass(this._containerDomNode, 'hidden', !this._isVisible);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ContentHoverWidget.prototype.getId = function () {\r\n        return this._id;\r\n    };\r\n    ContentHoverWidget.prototype.getDomNode = function () {\r\n        return this._containerDomNode;\r\n    };\r\n    ContentHoverWidget.prototype.showAt = function (position, range, focus) {\r\n        // Position has changed\r\n        this._showAtPosition = position;\r\n        this._showAtRange = range;\r\n        this.isVisible = true;\r\n        this._editor.layoutContentWidget(this);\r\n        // Simply force a synchronous render on the editor\r\n        // such that the widget does not really render with left = '0px'\r\n        this._editor.render();\r\n        this._stoleFocus = focus;\r\n        if (focus) {\r\n            this._containerDomNode.focus();\r\n        }\r\n    };\r\n    ContentHoverWidget.prototype.hide = function () {\r\n        if (!this.isVisible) {\r\n            return;\r\n        }\r\n        this.isVisible = false;\r\n        this._editor.layoutContentWidget(this);\r\n        if (this._stoleFocus) {\r\n            this._editor.focus();\r\n        }\r\n    };\r\n    ContentHoverWidget.prototype.getPosition = function () {\r\n        if (this.isVisible) {\r\n            return {\r\n                position: this._showAtPosition,\r\n                range: this._showAtRange,\r\n                preference: [\r\n                    1 /* ABOVE */,\r\n                    2 /* BELOW */\r\n                ]\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    ContentHoverWidget.prototype.dispose = function () {\r\n        this._editor.removeContentWidget(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ContentHoverWidget.prototype.updateFont = function () {\r\n        var _this = this;\r\n        var codeClasses = Array.prototype.slice.call(this._domNode.getElementsByClassName('code'));\r\n        codeClasses.forEach(function (node) { return _this._editor.applyFontInfo(node); });\r\n    };\r\n    ContentHoverWidget.prototype.updateContents = function (node) {\r\n        this._domNode.textContent = '';\r\n        this._domNode.appendChild(node);\r\n        this.updateFont();\r\n        this._editor.layoutContentWidget(this);\r\n        this.onContentsChange();\r\n    };\r\n    ContentHoverWidget.prototype.onContentsChange = function () {\r\n        this.scrollbar.scanDomNode();\r\n    };\r\n    ContentHoverWidget.prototype.layout = function () {\r\n        var height = Math.max(this._editor.getLayoutInfo().height / 4, 250);\r\n        var _a = this._editor.getOption(34 /* fontInfo */), fontSize = _a.fontSize, lineHeight = _a.lineHeight;\r\n        this._domNode.style.fontSize = fontSize + \"px\";\r\n        this._domNode.style.lineHeight = lineHeight + \"px\";\r\n        this._domNode.style.maxHeight = height + \"px\";\r\n        this._domNode.style.maxWidth = Math.max(this._editor.getLayoutInfo().width * 0.66, 500) + \"px\";\r\n    };\r\n    return ContentHoverWidget;\r\n}(Widget));\r\nexport { ContentHoverWidget };\r\nvar GlyphHoverWidget = /** @class */ (function (_super) {\r\n    __extends(GlyphHoverWidget, _super);\r\n    function GlyphHoverWidget(id, editor) {\r\n        var _this = _super.call(this) || this;\r\n        _this._id = id;\r\n        _this._editor = editor;\r\n        _this._isVisible = false;\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.className = 'monaco-editor-hover hidden';\r\n        _this._domNode.setAttribute('aria-hidden', 'true');\r\n        _this._domNode.setAttribute('role', 'presentation');\r\n        _this._showAtLineNumber = -1;\r\n        _this._register(_this._editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(34 /* fontInfo */)) {\r\n                _this.updateFont();\r\n            }\r\n        }));\r\n        _this._editor.addOverlayWidget(_this);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(GlyphHoverWidget.prototype, \"isVisible\", {\r\n        get: function () {\r\n            return this._isVisible;\r\n        },\r\n        set: function (value) {\r\n            this._isVisible = value;\r\n            toggleClass(this._domNode, 'hidden', !this._isVisible);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    GlyphHoverWidget.prototype.getId = function () {\r\n        return this._id;\r\n    };\r\n    GlyphHoverWidget.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    GlyphHoverWidget.prototype.showAt = function (lineNumber) {\r\n        this._showAtLineNumber = lineNumber;\r\n        if (!this.isVisible) {\r\n            this.isVisible = true;\r\n        }\r\n        var editorLayout = this._editor.getLayoutInfo();\r\n        var topForLineNumber = this._editor.getTopForLineNumber(this._showAtLineNumber);\r\n        var editorScrollTop = this._editor.getScrollTop();\r\n        var lineHeight = this._editor.getOption(49 /* lineHeight */);\r\n        var nodeHeight = this._domNode.clientHeight;\r\n        var top = topForLineNumber - editorScrollTop - ((nodeHeight - lineHeight) / 2);\r\n        this._domNode.style.left = editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth + \"px\";\r\n        this._domNode.style.top = Math.max(Math.round(top), 0) + \"px\";\r\n    };\r\n    GlyphHoverWidget.prototype.hide = function () {\r\n        if (!this.isVisible) {\r\n            return;\r\n        }\r\n        this.isVisible = false;\r\n    };\r\n    GlyphHoverWidget.prototype.getPosition = function () {\r\n        return null;\r\n    };\r\n    GlyphHoverWidget.prototype.dispose = function () {\r\n        this._editor.removeOverlayWidget(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    GlyphHoverWidget.prototype.updateFont = function () {\r\n        var _this = this;\r\n        var codeTags = Array.prototype.slice.call(this._domNode.getElementsByTagName('code'));\r\n        var codeClasses = Array.prototype.slice.call(this._domNode.getElementsByClassName('code'));\r\n        __spreadArrays(codeTags, codeClasses).forEach(function (node) { return _this._editor.applyFontInfo(node); });\r\n    };\r\n    GlyphHoverWidget.prototype.updateContents = function (node) {\r\n        this._domNode.textContent = '';\r\n        this._domNode.appendChild(node);\r\n        this.updateFont();\r\n    };\r\n    return GlyphHoverWidget;\r\n}(Widget));\r\nexport { GlyphHoverWidget };\r\n"]},"metadata":{},"sourceType":"module"}