{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { OverviewZoneManager } from '../../../common/view/overviewZoneManager.js';\nimport { ViewEventHandler } from '../../../common/viewModel/viewEventHandler.js';\n\nvar OverviewRuler =\n/** @class */\nfunction (_super) {\n  __extends(OverviewRuler, _super);\n\n  function OverviewRuler(context, cssClassName) {\n    var _this = _super.call(this) || this;\n\n    _this._context = context;\n    var options = _this._context.configuration.options;\n    _this._domNode = createFastDomNode(document.createElement('canvas'));\n\n    _this._domNode.setClassName(cssClassName);\n\n    _this._domNode.setPosition('absolute');\n\n    _this._domNode.setLayerHinting(true);\n\n    _this._domNode.setContain('strict');\n\n    _this._zoneManager = new OverviewZoneManager(function (lineNumber) {\n      return _this._context.viewLayout.getVerticalOffsetForLineNumber(lineNumber);\n    });\n\n    _this._zoneManager.setDOMWidth(0);\n\n    _this._zoneManager.setDOMHeight(0);\n\n    _this._zoneManager.setOuterHeight(_this._context.viewLayout.getScrollHeight());\n\n    _this._zoneManager.setLineHeight(options.get(49\n    /* lineHeight */\n    ));\n\n    _this._zoneManager.setPixelRatio(options.get(105\n    /* pixelRatio */\n    ));\n\n    _this._context.addEventHandler(_this);\n\n    return _this;\n  }\n\n  OverviewRuler.prototype.dispose = function () {\n    this._context.removeEventHandler(this);\n\n    _super.prototype.dispose.call(this);\n  }; // ---- begin view event handlers\n\n\n  OverviewRuler.prototype.onConfigurationChanged = function (e) {\n    var options = this._context.configuration.options;\n\n    if (e.hasChanged(49\n    /* lineHeight */\n    )) {\n      this._zoneManager.setLineHeight(options.get(49\n      /* lineHeight */\n      ));\n\n      this._render();\n    }\n\n    if (e.hasChanged(105\n    /* pixelRatio */\n    )) {\n      this._zoneManager.setPixelRatio(options.get(105\n      /* pixelRatio */\n      ));\n\n      this._domNode.setWidth(this._zoneManager.getDOMWidth());\n\n      this._domNode.setHeight(this._zoneManager.getDOMHeight());\n\n      this._domNode.domNode.width = this._zoneManager.getCanvasWidth();\n      this._domNode.domNode.height = this._zoneManager.getCanvasHeight();\n\n      this._render();\n    }\n\n    return true;\n  };\n\n  OverviewRuler.prototype.onFlushed = function (e) {\n    this._render();\n\n    return true;\n  };\n\n  OverviewRuler.prototype.onScrollChanged = function (e) {\n    if (e.scrollHeightChanged) {\n      this._zoneManager.setOuterHeight(e.scrollHeight);\n\n      this._render();\n    }\n\n    return true;\n  };\n\n  OverviewRuler.prototype.onZonesChanged = function (e) {\n    this._render();\n\n    return true;\n  }; // ---- end view event handlers\n\n\n  OverviewRuler.prototype.getDomNode = function () {\n    return this._domNode.domNode;\n  };\n\n  OverviewRuler.prototype.setLayout = function (position) {\n    this._domNode.setTop(position.top);\n\n    this._domNode.setRight(position.right);\n\n    var hasChanged = false;\n    hasChanged = this._zoneManager.setDOMWidth(position.width) || hasChanged;\n    hasChanged = this._zoneManager.setDOMHeight(position.height) || hasChanged;\n\n    if (hasChanged) {\n      this._domNode.setWidth(this._zoneManager.getDOMWidth());\n\n      this._domNode.setHeight(this._zoneManager.getDOMHeight());\n\n      this._domNode.domNode.width = this._zoneManager.getCanvasWidth();\n      this._domNode.domNode.height = this._zoneManager.getCanvasHeight();\n\n      this._render();\n    }\n  };\n\n  OverviewRuler.prototype.setZones = function (zones) {\n    this._zoneManager.setZones(zones);\n\n    this._render();\n  };\n\n  OverviewRuler.prototype._render = function () {\n    if (this._zoneManager.getOuterHeight() === 0) {\n      return false;\n    }\n\n    var width = this._zoneManager.getCanvasWidth();\n\n    var height = this._zoneManager.getCanvasHeight();\n\n    var colorZones = this._zoneManager.resolveColorZones();\n\n    var id2Color = this._zoneManager.getId2Color();\n\n    var ctx = this._domNode.domNode.getContext('2d');\n\n    ctx.clearRect(0, 0, width, height);\n\n    if (colorZones.length > 0) {\n      this._renderOneLane(ctx, colorZones, id2Color, width);\n    }\n\n    return true;\n  };\n\n  OverviewRuler.prototype._renderOneLane = function (ctx, colorZones, id2Color, width) {\n    var currentColorId = 0;\n    var currentFrom = 0;\n    var currentTo = 0;\n\n    for (var _i = 0, colorZones_1 = colorZones; _i < colorZones_1.length; _i++) {\n      var zone = colorZones_1[_i];\n      var zoneColorId = zone.colorId;\n      var zoneFrom = zone.from;\n      var zoneTo = zone.to;\n\n      if (zoneColorId !== currentColorId) {\n        ctx.fillRect(0, currentFrom, width, currentTo - currentFrom);\n        currentColorId = zoneColorId;\n        ctx.fillStyle = id2Color[currentColorId];\n        currentFrom = zoneFrom;\n        currentTo = zoneTo;\n      } else {\n        if (currentTo >= zoneFrom) {\n          currentTo = Math.max(currentTo, zoneTo);\n        } else {\n          ctx.fillRect(0, currentFrom, width, currentTo - currentFrom);\n          currentFrom = zoneFrom;\n          currentTo = zoneTo;\n        }\n      }\n    }\n\n    ctx.fillRect(0, currentFrom, width, currentTo - currentFrom);\n  };\n\n  return OverviewRuler;\n}(ViewEventHandler);\n\nexport { OverviewRuler };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/overviewRuler/overviewRuler.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","createFastDomNode","OverviewZoneManager","ViewEventHandler","OverviewRuler","_super","context","cssClassName","_this","call","_context","options","configuration","_domNode","document","createElement","setClassName","setPosition","setLayerHinting","setContain","_zoneManager","lineNumber","viewLayout","getVerticalOffsetForLineNumber","setDOMWidth","setDOMHeight","setOuterHeight","getScrollHeight","setLineHeight","get","setPixelRatio","addEventHandler","dispose","removeEventHandler","onConfigurationChanged","e","hasChanged","_render","setWidth","getDOMWidth","setHeight","getDOMHeight","domNode","width","getCanvasWidth","height","getCanvasHeight","onFlushed","onScrollChanged","scrollHeightChanged","scrollHeight","onZonesChanged","getDomNode","setLayout","position","setTop","top","setRight","right","setZones","zones","getOuterHeight","colorZones","resolveColorZones","id2Color","getId2Color","ctx","getContext","clearRect","length","_renderOneLane","currentColorId","currentFrom","currentTo","_i","colorZones_1","zone","zoneColorId","colorId","zoneFrom","from","zoneTo","to","fillRect","fillStyle","Math","max"],"mappings":"AAAA;;;;AAIA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAF9E;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C;;AAaA,SAASI,iBAAT,QAAkC,yCAAlC;AACA,SAASC,mBAAT,QAAoC,6CAApC;AACA,SAASC,gBAAT,QAAiC,+CAAjC;;AACA,IAAIC,aAAa;AAAG;AAAe,UAAUC,MAAV,EAAkB;AACjDlB,EAAAA,SAAS,CAACiB,aAAD,EAAgBC,MAAhB,CAAT;;AACA,WAASD,aAAT,CAAuBE,OAAvB,EAAgCC,YAAhC,EAA8C;AAC1C,QAAIC,KAAK,GAAGH,MAAM,CAACI,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAD,IAAAA,KAAK,CAACE,QAAN,GAAiBJ,OAAjB;AACA,QAAIK,OAAO,GAAGH,KAAK,CAACE,QAAN,CAAeE,aAAf,CAA6BD,OAA3C;AACAH,IAAAA,KAAK,CAACK,QAAN,GAAiBZ,iBAAiB,CAACa,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAD,CAAlC;;AACAP,IAAAA,KAAK,CAACK,QAAN,CAAeG,YAAf,CAA4BT,YAA5B;;AACAC,IAAAA,KAAK,CAACK,QAAN,CAAeI,WAAf,CAA2B,UAA3B;;AACAT,IAAAA,KAAK,CAACK,QAAN,CAAeK,eAAf,CAA+B,IAA/B;;AACAV,IAAAA,KAAK,CAACK,QAAN,CAAeM,UAAf,CAA0B,QAA1B;;AACAX,IAAAA,KAAK,CAACY,YAAN,GAAqB,IAAIlB,mBAAJ,CAAwB,UAAUmB,UAAV,EAAsB;AAAE,aAAOb,KAAK,CAACE,QAAN,CAAeY,UAAf,CAA0BC,8BAA1B,CAAyDF,UAAzD,CAAP;AAA8E,KAA9H,CAArB;;AACAb,IAAAA,KAAK,CAACY,YAAN,CAAmBI,WAAnB,CAA+B,CAA/B;;AACAhB,IAAAA,KAAK,CAACY,YAAN,CAAmBK,YAAnB,CAAgC,CAAhC;;AACAjB,IAAAA,KAAK,CAACY,YAAN,CAAmBM,cAAnB,CAAkClB,KAAK,CAACE,QAAN,CAAeY,UAAf,CAA0BK,eAA1B,EAAlC;;AACAnB,IAAAA,KAAK,CAACY,YAAN,CAAmBQ,aAAnB,CAAiCjB,OAAO,CAACkB,GAAR,CAAY;AAAG;AAAf,KAAjC;;AACArB,IAAAA,KAAK,CAACY,YAAN,CAAmBU,aAAnB,CAAiCnB,OAAO,CAACkB,GAAR,CAAY;AAAI;AAAhB,KAAjC;;AACArB,IAAAA,KAAK,CAACE,QAAN,CAAeqB,eAAf,CAA+BvB,KAA/B;;AACA,WAAOA,KAAP;AACH;;AACDJ,EAAAA,aAAa,CAACL,SAAd,CAAwBiC,OAAxB,GAAkC,YAAY;AAC1C,SAAKtB,QAAL,CAAcuB,kBAAd,CAAiC,IAAjC;;AACA5B,IAAAA,MAAM,CAACN,SAAP,CAAiBiC,OAAjB,CAAyBvB,IAAzB,CAA8B,IAA9B;AACH,GAHD,CApBiD,CAwBjD;;;AACAL,EAAAA,aAAa,CAACL,SAAd,CAAwBmC,sBAAxB,GAAiD,UAAUC,CAAV,EAAa;AAC1D,QAAIxB,OAAO,GAAG,KAAKD,QAAL,CAAcE,aAAd,CAA4BD,OAA1C;;AACA,QAAIwB,CAAC,CAACC,UAAF,CAAa;AAAG;AAAhB,KAAJ,EAAuC;AACnC,WAAKhB,YAAL,CAAkBQ,aAAlB,CAAgCjB,OAAO,CAACkB,GAAR,CAAY;AAAG;AAAf,OAAhC;;AACA,WAAKQ,OAAL;AACH;;AACD,QAAIF,CAAC,CAACC,UAAF,CAAa;AAAI;AAAjB,KAAJ,EAAwC;AACpC,WAAKhB,YAAL,CAAkBU,aAAlB,CAAgCnB,OAAO,CAACkB,GAAR,CAAY;AAAI;AAAhB,OAAhC;;AACA,WAAKhB,QAAL,CAAcyB,QAAd,CAAuB,KAAKlB,YAAL,CAAkBmB,WAAlB,EAAvB;;AACA,WAAK1B,QAAL,CAAc2B,SAAd,CAAwB,KAAKpB,YAAL,CAAkBqB,YAAlB,EAAxB;;AACA,WAAK5B,QAAL,CAAc6B,OAAd,CAAsBC,KAAtB,GAA8B,KAAKvB,YAAL,CAAkBwB,cAAlB,EAA9B;AACA,WAAK/B,QAAL,CAAc6B,OAAd,CAAsBG,MAAtB,GAA+B,KAAKzB,YAAL,CAAkB0B,eAAlB,EAA/B;;AACA,WAAKT,OAAL;AACH;;AACD,WAAO,IAAP;AACH,GAfD;;AAgBAjC,EAAAA,aAAa,CAACL,SAAd,CAAwBgD,SAAxB,GAAoC,UAAUZ,CAAV,EAAa;AAC7C,SAAKE,OAAL;;AACA,WAAO,IAAP;AACH,GAHD;;AAIAjC,EAAAA,aAAa,CAACL,SAAd,CAAwBiD,eAAxB,GAA0C,UAAUb,CAAV,EAAa;AACnD,QAAIA,CAAC,CAACc,mBAAN,EAA2B;AACvB,WAAK7B,YAAL,CAAkBM,cAAlB,CAAiCS,CAAC,CAACe,YAAnC;;AACA,WAAKb,OAAL;AACH;;AACD,WAAO,IAAP;AACH,GAND;;AAOAjC,EAAAA,aAAa,CAACL,SAAd,CAAwBoD,cAAxB,GAAyC,UAAUhB,CAAV,EAAa;AAClD,SAAKE,OAAL;;AACA,WAAO,IAAP;AACH,GAHD,CApDiD,CAwDjD;;;AACAjC,EAAAA,aAAa,CAACL,SAAd,CAAwBqD,UAAxB,GAAqC,YAAY;AAC7C,WAAO,KAAKvC,QAAL,CAAc6B,OAArB;AACH,GAFD;;AAGAtC,EAAAA,aAAa,CAACL,SAAd,CAAwBsD,SAAxB,GAAoC,UAAUC,QAAV,EAAoB;AACpD,SAAKzC,QAAL,CAAc0C,MAAd,CAAqBD,QAAQ,CAACE,GAA9B;;AACA,SAAK3C,QAAL,CAAc4C,QAAd,CAAuBH,QAAQ,CAACI,KAAhC;;AACA,QAAItB,UAAU,GAAG,KAAjB;AACAA,IAAAA,UAAU,GAAG,KAAKhB,YAAL,CAAkBI,WAAlB,CAA8B8B,QAAQ,CAACX,KAAvC,KAAiDP,UAA9D;AACAA,IAAAA,UAAU,GAAG,KAAKhB,YAAL,CAAkBK,YAAlB,CAA+B6B,QAAQ,CAACT,MAAxC,KAAmDT,UAAhE;;AACA,QAAIA,UAAJ,EAAgB;AACZ,WAAKvB,QAAL,CAAcyB,QAAd,CAAuB,KAAKlB,YAAL,CAAkBmB,WAAlB,EAAvB;;AACA,WAAK1B,QAAL,CAAc2B,SAAd,CAAwB,KAAKpB,YAAL,CAAkBqB,YAAlB,EAAxB;;AACA,WAAK5B,QAAL,CAAc6B,OAAd,CAAsBC,KAAtB,GAA8B,KAAKvB,YAAL,CAAkBwB,cAAlB,EAA9B;AACA,WAAK/B,QAAL,CAAc6B,OAAd,CAAsBG,MAAtB,GAA+B,KAAKzB,YAAL,CAAkB0B,eAAlB,EAA/B;;AACA,WAAKT,OAAL;AACH;AACJ,GAbD;;AAcAjC,EAAAA,aAAa,CAACL,SAAd,CAAwB4D,QAAxB,GAAmC,UAAUC,KAAV,EAAiB;AAChD,SAAKxC,YAAL,CAAkBuC,QAAlB,CAA2BC,KAA3B;;AACA,SAAKvB,OAAL;AACH,GAHD;;AAIAjC,EAAAA,aAAa,CAACL,SAAd,CAAwBsC,OAAxB,GAAkC,YAAY;AAC1C,QAAI,KAAKjB,YAAL,CAAkByC,cAAlB,OAAuC,CAA3C,EAA8C;AAC1C,aAAO,KAAP;AACH;;AACD,QAAIlB,KAAK,GAAG,KAAKvB,YAAL,CAAkBwB,cAAlB,EAAZ;;AACA,QAAIC,MAAM,GAAG,KAAKzB,YAAL,CAAkB0B,eAAlB,EAAb;;AACA,QAAIgB,UAAU,GAAG,KAAK1C,YAAL,CAAkB2C,iBAAlB,EAAjB;;AACA,QAAIC,QAAQ,GAAG,KAAK5C,YAAL,CAAkB6C,WAAlB,EAAf;;AACA,QAAIC,GAAG,GAAG,KAAKrD,QAAL,CAAc6B,OAAd,CAAsByB,UAAtB,CAAiC,IAAjC,CAAV;;AACAD,IAAAA,GAAG,CAACE,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBzB,KAApB,EAA2BE,MAA3B;;AACA,QAAIiB,UAAU,CAACO,MAAX,GAAoB,CAAxB,EAA2B;AACvB,WAAKC,cAAL,CAAoBJ,GAApB,EAAyBJ,UAAzB,EAAqCE,QAArC,EAA+CrB,KAA/C;AACH;;AACD,WAAO,IAAP;AACH,GAdD;;AAeAvC,EAAAA,aAAa,CAACL,SAAd,CAAwBuE,cAAxB,GAAyC,UAAUJ,GAAV,EAAeJ,UAAf,EAA2BE,QAA3B,EAAqCrB,KAArC,EAA4C;AACjF,QAAI4B,cAAc,GAAG,CAArB;AACA,QAAIC,WAAW,GAAG,CAAlB;AACA,QAAIC,SAAS,GAAG,CAAhB;;AACA,SAAK,IAAIC,EAAE,GAAG,CAAT,EAAYC,YAAY,GAAGb,UAAhC,EAA4CY,EAAE,GAAGC,YAAY,CAACN,MAA9D,EAAsEK,EAAE,EAAxE,EAA4E;AACxE,UAAIE,IAAI,GAAGD,YAAY,CAACD,EAAD,CAAvB;AACA,UAAIG,WAAW,GAAGD,IAAI,CAACE,OAAvB;AACA,UAAIC,QAAQ,GAAGH,IAAI,CAACI,IAApB;AACA,UAAIC,MAAM,GAAGL,IAAI,CAACM,EAAlB;;AACA,UAAIL,WAAW,KAAKN,cAApB,EAAoC;AAChCL,QAAAA,GAAG,CAACiB,QAAJ,CAAa,CAAb,EAAgBX,WAAhB,EAA6B7B,KAA7B,EAAoC8B,SAAS,GAAGD,WAAhD;AACAD,QAAAA,cAAc,GAAGM,WAAjB;AACAX,QAAAA,GAAG,CAACkB,SAAJ,GAAgBpB,QAAQ,CAACO,cAAD,CAAxB;AACAC,QAAAA,WAAW,GAAGO,QAAd;AACAN,QAAAA,SAAS,GAAGQ,MAAZ;AACH,OAND,MAOK;AACD,YAAIR,SAAS,IAAIM,QAAjB,EAA2B;AACvBN,UAAAA,SAAS,GAAGY,IAAI,CAACC,GAAL,CAASb,SAAT,EAAoBQ,MAApB,CAAZ;AACH,SAFD,MAGK;AACDf,UAAAA,GAAG,CAACiB,QAAJ,CAAa,CAAb,EAAgBX,WAAhB,EAA6B7B,KAA7B,EAAoC8B,SAAS,GAAGD,WAAhD;AACAA,UAAAA,WAAW,GAAGO,QAAd;AACAN,UAAAA,SAAS,GAAGQ,MAAZ;AACH;AACJ;AACJ;;AACDf,IAAAA,GAAG,CAACiB,QAAJ,CAAa,CAAb,EAAgBX,WAAhB,EAA6B7B,KAA7B,EAAoC8B,SAAS,GAAGD,WAAhD;AACH,GA5BD;;AA6BA,SAAOpE,aAAP;AACH,CA3HkC,CA2HjCD,gBA3HiC,CAAnC;;AA4HA,SAASC,aAAT","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\r\nimport { OverviewZoneManager } from '../../../common/view/overviewZoneManager.js';\r\nimport { ViewEventHandler } from '../../../common/viewModel/viewEventHandler.js';\r\nvar OverviewRuler = /** @class */ (function (_super) {\r\n    __extends(OverviewRuler, _super);\r\n    function OverviewRuler(context, cssClassName) {\r\n        var _this = _super.call(this) || this;\r\n        _this._context = context;\r\n        var options = _this._context.configuration.options;\r\n        _this._domNode = createFastDomNode(document.createElement('canvas'));\r\n        _this._domNode.setClassName(cssClassName);\r\n        _this._domNode.setPosition('absolute');\r\n        _this._domNode.setLayerHinting(true);\r\n        _this._domNode.setContain('strict');\r\n        _this._zoneManager = new OverviewZoneManager(function (lineNumber) { return _this._context.viewLayout.getVerticalOffsetForLineNumber(lineNumber); });\r\n        _this._zoneManager.setDOMWidth(0);\r\n        _this._zoneManager.setDOMHeight(0);\r\n        _this._zoneManager.setOuterHeight(_this._context.viewLayout.getScrollHeight());\r\n        _this._zoneManager.setLineHeight(options.get(49 /* lineHeight */));\r\n        _this._zoneManager.setPixelRatio(options.get(105 /* pixelRatio */));\r\n        _this._context.addEventHandler(_this);\r\n        return _this;\r\n    }\r\n    OverviewRuler.prototype.dispose = function () {\r\n        this._context.removeEventHandler(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    // ---- begin view event handlers\r\n    OverviewRuler.prototype.onConfigurationChanged = function (e) {\r\n        var options = this._context.configuration.options;\r\n        if (e.hasChanged(49 /* lineHeight */)) {\r\n            this._zoneManager.setLineHeight(options.get(49 /* lineHeight */));\r\n            this._render();\r\n        }\r\n        if (e.hasChanged(105 /* pixelRatio */)) {\r\n            this._zoneManager.setPixelRatio(options.get(105 /* pixelRatio */));\r\n            this._domNode.setWidth(this._zoneManager.getDOMWidth());\r\n            this._domNode.setHeight(this._zoneManager.getDOMHeight());\r\n            this._domNode.domNode.width = this._zoneManager.getCanvasWidth();\r\n            this._domNode.domNode.height = this._zoneManager.getCanvasHeight();\r\n            this._render();\r\n        }\r\n        return true;\r\n    };\r\n    OverviewRuler.prototype.onFlushed = function (e) {\r\n        this._render();\r\n        return true;\r\n    };\r\n    OverviewRuler.prototype.onScrollChanged = function (e) {\r\n        if (e.scrollHeightChanged) {\r\n            this._zoneManager.setOuterHeight(e.scrollHeight);\r\n            this._render();\r\n        }\r\n        return true;\r\n    };\r\n    OverviewRuler.prototype.onZonesChanged = function (e) {\r\n        this._render();\r\n        return true;\r\n    };\r\n    // ---- end view event handlers\r\n    OverviewRuler.prototype.getDomNode = function () {\r\n        return this._domNode.domNode;\r\n    };\r\n    OverviewRuler.prototype.setLayout = function (position) {\r\n        this._domNode.setTop(position.top);\r\n        this._domNode.setRight(position.right);\r\n        var hasChanged = false;\r\n        hasChanged = this._zoneManager.setDOMWidth(position.width) || hasChanged;\r\n        hasChanged = this._zoneManager.setDOMHeight(position.height) || hasChanged;\r\n        if (hasChanged) {\r\n            this._domNode.setWidth(this._zoneManager.getDOMWidth());\r\n            this._domNode.setHeight(this._zoneManager.getDOMHeight());\r\n            this._domNode.domNode.width = this._zoneManager.getCanvasWidth();\r\n            this._domNode.domNode.height = this._zoneManager.getCanvasHeight();\r\n            this._render();\r\n        }\r\n    };\r\n    OverviewRuler.prototype.setZones = function (zones) {\r\n        this._zoneManager.setZones(zones);\r\n        this._render();\r\n    };\r\n    OverviewRuler.prototype._render = function () {\r\n        if (this._zoneManager.getOuterHeight() === 0) {\r\n            return false;\r\n        }\r\n        var width = this._zoneManager.getCanvasWidth();\r\n        var height = this._zoneManager.getCanvasHeight();\r\n        var colorZones = this._zoneManager.resolveColorZones();\r\n        var id2Color = this._zoneManager.getId2Color();\r\n        var ctx = this._domNode.domNode.getContext('2d');\r\n        ctx.clearRect(0, 0, width, height);\r\n        if (colorZones.length > 0) {\r\n            this._renderOneLane(ctx, colorZones, id2Color, width);\r\n        }\r\n        return true;\r\n    };\r\n    OverviewRuler.prototype._renderOneLane = function (ctx, colorZones, id2Color, width) {\r\n        var currentColorId = 0;\r\n        var currentFrom = 0;\r\n        var currentTo = 0;\r\n        for (var _i = 0, colorZones_1 = colorZones; _i < colorZones_1.length; _i++) {\r\n            var zone = colorZones_1[_i];\r\n            var zoneColorId = zone.colorId;\r\n            var zoneFrom = zone.from;\r\n            var zoneTo = zone.to;\r\n            if (zoneColorId !== currentColorId) {\r\n                ctx.fillRect(0, currentFrom, width, currentTo - currentFrom);\r\n                currentColorId = zoneColorId;\r\n                ctx.fillStyle = id2Color[currentColorId];\r\n                currentFrom = zoneFrom;\r\n                currentTo = zoneTo;\r\n            }\r\n            else {\r\n                if (currentTo >= zoneFrom) {\r\n                    currentTo = Math.max(currentTo, zoneTo);\r\n                }\r\n                else {\r\n                    ctx.fillRect(0, currentFrom, width, currentTo - currentFrom);\r\n                    currentFrom = zoneFrom;\r\n                    currentTo = zoneTo;\r\n                }\r\n            }\r\n        }\r\n        ctx.fillRect(0, currentFrom, width, currentTo - currentFrom);\r\n    };\r\n    return OverviewRuler;\r\n}(ViewEventHandler));\r\nexport { OverviewRuler };\r\n"]},"metadata":{},"sourceType":"module"}