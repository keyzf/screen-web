{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport { match as matchGlobPattern } from '../../../base/common/glob.js';\nexport function score(selector, candidateUri, candidateLanguage, candidateIsSynchronized) {\n  if (Array.isArray(selector)) {\n    // array -> take max individual value\n    var ret = 0;\n\n    for (var _i = 0, selector_1 = selector; _i < selector_1.length; _i++) {\n      var filter = selector_1[_i];\n      var value = score(filter, candidateUri, candidateLanguage, candidateIsSynchronized);\n\n      if (value === 10) {\n        return value; // already at the highest\n      }\n\n      if (value > ret) {\n        ret = value;\n      }\n    }\n\n    return ret;\n  } else if (typeof selector === 'string') {\n    if (!candidateIsSynchronized) {\n      return 0;\n    } // short-hand notion, desugars to\n    // 'fooLang' -> { language: 'fooLang'}\n    // '*' -> { language: '*' }\n\n\n    if (selector === '*') {\n      return 5;\n    } else if (selector === candidateLanguage) {\n      return 10;\n    } else {\n      return 0;\n    }\n  } else if (selector) {\n    // filter -> select accordingly, use defaults for scheme\n    var language = selector.language,\n        pattern = selector.pattern,\n        scheme = selector.scheme,\n        hasAccessToAllModels = selector.hasAccessToAllModels;\n\n    if (!candidateIsSynchronized && !hasAccessToAllModels) {\n      return 0;\n    }\n\n    var ret = 0;\n\n    if (scheme) {\n      if (scheme === candidateUri.scheme) {\n        ret = 10;\n      } else if (scheme === '*') {\n        ret = 5;\n      } else {\n        return 0;\n      }\n    }\n\n    if (language) {\n      if (language === candidateLanguage) {\n        ret = 10;\n      } else if (language === '*') {\n        ret = Math.max(ret, 5);\n      } else {\n        return 0;\n      }\n    }\n\n    if (pattern) {\n      if (pattern === candidateUri.fsPath || matchGlobPattern(pattern, candidateUri.fsPath)) {\n        ret = 10;\n      } else {\n        return 0;\n      }\n    }\n\n    return ret;\n  } else {\n    return 0;\n  }\n}","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/common/modes/languageSelector.js"],"names":["match","matchGlobPattern","score","selector","candidateUri","candidateLanguage","candidateIsSynchronized","Array","isArray","ret","_i","selector_1","length","filter","value","language","pattern","scheme","hasAccessToAllModels","Math","max","fsPath"],"mappings":"AAAA;;;;AAIA,SAASA,KAAK,IAAIC,gBAAlB,QAA0C,8BAA1C;AACA,OAAO,SAASC,KAAT,CAAeC,QAAf,EAAyBC,YAAzB,EAAuCC,iBAAvC,EAA0DC,uBAA1D,EAAmF;AACtF,MAAIC,KAAK,CAACC,OAAN,CAAcL,QAAd,CAAJ,EAA6B;AACzB;AACA,QAAIM,GAAG,GAAG,CAAV;;AACA,SAAK,IAAIC,EAAE,GAAG,CAAT,EAAYC,UAAU,GAAGR,QAA9B,EAAwCO,EAAE,GAAGC,UAAU,CAACC,MAAxD,EAAgEF,EAAE,EAAlE,EAAsE;AAClE,UAAIG,MAAM,GAAGF,UAAU,CAACD,EAAD,CAAvB;AACA,UAAII,KAAK,GAAGZ,KAAK,CAACW,MAAD,EAAST,YAAT,EAAuBC,iBAAvB,EAA0CC,uBAA1C,CAAjB;;AACA,UAAIQ,KAAK,KAAK,EAAd,EAAkB;AACd,eAAOA,KAAP,CADc,CACA;AACjB;;AACD,UAAIA,KAAK,GAAGL,GAAZ,EAAiB;AACbA,QAAAA,GAAG,GAAGK,KAAN;AACH;AACJ;;AACD,WAAOL,GAAP;AACH,GAdD,MAeK,IAAI,OAAON,QAAP,KAAoB,QAAxB,EAAkC;AACnC,QAAI,CAACG,uBAAL,EAA8B;AAC1B,aAAO,CAAP;AACH,KAHkC,CAInC;AACA;AACA;;;AACA,QAAIH,QAAQ,KAAK,GAAjB,EAAsB;AAClB,aAAO,CAAP;AACH,KAFD,MAGK,IAAIA,QAAQ,KAAKE,iBAAjB,EAAoC;AACrC,aAAO,EAAP;AACH,KAFI,MAGA;AACD,aAAO,CAAP;AACH;AACJ,GAhBI,MAiBA,IAAIF,QAAJ,EAAc;AACf;AACA,QAAIY,QAAQ,GAAGZ,QAAQ,CAACY,QAAxB;AAAA,QAAkCC,OAAO,GAAGb,QAAQ,CAACa,OAArD;AAAA,QAA8DC,MAAM,GAAGd,QAAQ,CAACc,MAAhF;AAAA,QAAwFC,oBAAoB,GAAGf,QAAQ,CAACe,oBAAxH;;AACA,QAAI,CAACZ,uBAAD,IAA4B,CAACY,oBAAjC,EAAuD;AACnD,aAAO,CAAP;AACH;;AACD,QAAIT,GAAG,GAAG,CAAV;;AACA,QAAIQ,MAAJ,EAAY;AACR,UAAIA,MAAM,KAAKb,YAAY,CAACa,MAA5B,EAAoC;AAChCR,QAAAA,GAAG,GAAG,EAAN;AACH,OAFD,MAGK,IAAIQ,MAAM,KAAK,GAAf,EAAoB;AACrBR,QAAAA,GAAG,GAAG,CAAN;AACH,OAFI,MAGA;AACD,eAAO,CAAP;AACH;AACJ;;AACD,QAAIM,QAAJ,EAAc;AACV,UAAIA,QAAQ,KAAKV,iBAAjB,EAAoC;AAChCI,QAAAA,GAAG,GAAG,EAAN;AACH,OAFD,MAGK,IAAIM,QAAQ,KAAK,GAAjB,EAAsB;AACvBN,QAAAA,GAAG,GAAGU,IAAI,CAACC,GAAL,CAASX,GAAT,EAAc,CAAd,CAAN;AACH,OAFI,MAGA;AACD,eAAO,CAAP;AACH;AACJ;;AACD,QAAIO,OAAJ,EAAa;AACT,UAAIA,OAAO,KAAKZ,YAAY,CAACiB,MAAzB,IAAmCpB,gBAAgB,CAACe,OAAD,EAAUZ,YAAY,CAACiB,MAAvB,CAAvD,EAAuF;AACnFZ,QAAAA,GAAG,GAAG,EAAN;AACH,OAFD,MAGK;AACD,eAAO,CAAP;AACH;AACJ;;AACD,WAAOA,GAAP;AACH,GAtCI,MAuCA;AACD,WAAO,CAAP;AACH;AACJ","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { match as matchGlobPattern } from '../../../base/common/glob.js';\r\nexport function score(selector, candidateUri, candidateLanguage, candidateIsSynchronized) {\r\n    if (Array.isArray(selector)) {\r\n        // array -> take max individual value\r\n        var ret = 0;\r\n        for (var _i = 0, selector_1 = selector; _i < selector_1.length; _i++) {\r\n            var filter = selector_1[_i];\r\n            var value = score(filter, candidateUri, candidateLanguage, candidateIsSynchronized);\r\n            if (value === 10) {\r\n                return value; // already at the highest\r\n            }\r\n            if (value > ret) {\r\n                ret = value;\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    else if (typeof selector === 'string') {\r\n        if (!candidateIsSynchronized) {\r\n            return 0;\r\n        }\r\n        // short-hand notion, desugars to\r\n        // 'fooLang' -> { language: 'fooLang'}\r\n        // '*' -> { language: '*' }\r\n        if (selector === '*') {\r\n            return 5;\r\n        }\r\n        else if (selector === candidateLanguage) {\r\n            return 10;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n    else if (selector) {\r\n        // filter -> select accordingly, use defaults for scheme\r\n        var language = selector.language, pattern = selector.pattern, scheme = selector.scheme, hasAccessToAllModels = selector.hasAccessToAllModels;\r\n        if (!candidateIsSynchronized && !hasAccessToAllModels) {\r\n            return 0;\r\n        }\r\n        var ret = 0;\r\n        if (scheme) {\r\n            if (scheme === candidateUri.scheme) {\r\n                ret = 10;\r\n            }\r\n            else if (scheme === '*') {\r\n                ret = 5;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n        if (language) {\r\n            if (language === candidateLanguage) {\r\n                ret = 10;\r\n            }\r\n            else if (language === '*') {\r\n                ret = Math.max(ret, 5);\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n        if (pattern) {\r\n            if (pattern === candidateUri.fsPath || matchGlobPattern(pattern, candidateUri.fsPath)) {\r\n                ret = 10;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}