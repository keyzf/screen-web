{"ast":null,"code":"import * as platform from '../../../common/platform.js';\nimport * as errors from '../../../common/errors.js';\nimport * as dom from '../../../browser/dom.js';\nimport { createKeybinding } from '../../../common/keyCodes.js';\n\nvar KeybindingDispatcher =\n/** @class */\nfunction () {\n  function KeybindingDispatcher() {\n    this._arr = [];\n  }\n\n  KeybindingDispatcher.prototype.set = function (keybinding, callback) {\n    this._arr.push({\n      keybinding: createKeybinding(keybinding, platform.OS),\n      callback: callback\n    });\n  };\n\n  KeybindingDispatcher.prototype.dispatch = function (keybinding) {\n    // Loop from the last to the first to handle overwrites\n    for (var i = this._arr.length - 1; i >= 0; i--) {\n      var item = this._arr[i];\n\n      if (keybinding.toChord().equals(item.keybinding)) {\n        return item.callback;\n      }\n    }\n\n    return null;\n  };\n\n  return KeybindingDispatcher;\n}();\n\nexport { KeybindingDispatcher };\n\nvar DefaultController =\n/** @class */\nfunction () {\n  function DefaultController(options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {\n        clickBehavior: 0\n        /* ON_MOUSE_DOWN */\n        ,\n        keyboardSupport: true,\n        openMode: 0\n        /* SINGLE_CLICK */\n\n      };\n    }\n\n    this.options = options;\n    this.downKeyBindingDispatcher = new KeybindingDispatcher();\n    this.upKeyBindingDispatcher = new KeybindingDispatcher();\n\n    if (typeof options.keyboardSupport !== 'boolean' || options.keyboardSupport) {\n      this.downKeyBindingDispatcher.set(16\n      /* UpArrow */\n      , function (t, e) {\n        return _this.onUp(t, e);\n      });\n      this.downKeyBindingDispatcher.set(18\n      /* DownArrow */\n      , function (t, e) {\n        return _this.onDown(t, e);\n      });\n      this.downKeyBindingDispatcher.set(15\n      /* LeftArrow */\n      , function (t, e) {\n        return _this.onLeft(t, e);\n      });\n      this.downKeyBindingDispatcher.set(17\n      /* RightArrow */\n      , function (t, e) {\n        return _this.onRight(t, e);\n      });\n\n      if (platform.isMacintosh) {\n        this.downKeyBindingDispatcher.set(2048\n        /* CtrlCmd */\n        | 16\n        /* UpArrow */\n        , function (t, e) {\n          return _this.onLeft(t, e);\n        });\n        this.downKeyBindingDispatcher.set(256\n        /* WinCtrl */\n        | 44\n        /* KEY_N */\n        , function (t, e) {\n          return _this.onDown(t, e);\n        });\n        this.downKeyBindingDispatcher.set(256\n        /* WinCtrl */\n        | 46\n        /* KEY_P */\n        , function (t, e) {\n          return _this.onUp(t, e);\n        });\n      }\n\n      this.downKeyBindingDispatcher.set(11\n      /* PageUp */\n      , function (t, e) {\n        return _this.onPageUp(t, e);\n      });\n      this.downKeyBindingDispatcher.set(12\n      /* PageDown */\n      , function (t, e) {\n        return _this.onPageDown(t, e);\n      });\n      this.downKeyBindingDispatcher.set(14\n      /* Home */\n      , function (t, e) {\n        return _this.onHome(t, e);\n      });\n      this.downKeyBindingDispatcher.set(13\n      /* End */\n      , function (t, e) {\n        return _this.onEnd(t, e);\n      });\n      this.downKeyBindingDispatcher.set(10\n      /* Space */\n      , function (t, e) {\n        return _this.onSpace(t, e);\n      });\n      this.downKeyBindingDispatcher.set(9\n      /* Escape */\n      , function (t, e) {\n        return _this.onEscape(t, e);\n      });\n      this.upKeyBindingDispatcher.set(3\n      /* Enter */\n      , this.onEnter.bind(this));\n      this.upKeyBindingDispatcher.set(2048\n      /* CtrlCmd */\n      | 3\n      /* Enter */\n      , this.onEnter.bind(this));\n    }\n  }\n\n  DefaultController.prototype.onMouseDown = function (tree, element, event, origin) {\n    if (origin === void 0) {\n      origin = 'mouse';\n    }\n\n    if (this.options.clickBehavior === 0\n    /* ON_MOUSE_DOWN */\n    && (event.leftButton || event.middleButton)) {\n      if (event.target) {\n        if (event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\n          return false; // Ignore event if target is a form input field (avoids browser specific issues)\n        }\n\n        if (dom.findParentWithClass(event.target, 'scrollbar', 'monaco-tree')) {\n          return false;\n        }\n\n        if (dom.findParentWithClass(event.target, 'monaco-action-bar', 'row')) {\n          // TODO@Joao not very nice way of checking for the action bar (implicit knowledge)\n          return false; // Ignore event if target is over an action bar of the row\n        }\n      } // Propagate to onLeftClick now\n\n\n      return this.onLeftClick(tree, element, event, origin);\n    }\n\n    return false;\n  };\n\n  DefaultController.prototype.onClick = function (tree, element, event) {\n    var isMac = platform.isMacintosh; // A Ctrl click on the Mac is a context menu event\n\n    if (isMac && event.ctrlKey) {\n      event.preventDefault();\n      event.stopPropagation();\n      return false;\n    }\n\n    if (event.target && event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\n      return false; // Ignore event if target is a form input field (avoids browser specific issues)\n    }\n\n    if (this.options.clickBehavior === 0\n    /* ON_MOUSE_DOWN */\n    && (event.leftButton || event.middleButton)) {\n      return false; // Already handled by onMouseDown\n    }\n\n    return this.onLeftClick(tree, element, event);\n  };\n\n  DefaultController.prototype.onLeftClick = function (tree, element, eventish, origin) {\n    if (origin === void 0) {\n      origin = 'mouse';\n    }\n\n    var event = eventish;\n    var payload = {\n      origin: origin,\n      originalEvent: eventish,\n      didClickOnTwistie: this.isClickOnTwistie(event)\n    };\n\n    if (tree.getInput() === element) {\n      tree.clearFocus(payload);\n      tree.clearSelection(payload);\n    } else {\n      var isSingleMouseDown = eventish && event.browserEvent && event.browserEvent.type === 'mousedown' && event.browserEvent.detail === 1;\n\n      if (!isSingleMouseDown) {\n        eventish.preventDefault(); // we cannot preventDefault onMouseDown with single click because this would break DND otherwise\n      }\n\n      eventish.stopPropagation();\n      tree.domFocus();\n      tree.setSelection([element], payload);\n      tree.setFocus(element, payload);\n\n      if (this.shouldToggleExpansion(element, event, origin)) {\n        if (tree.isExpanded(element)) {\n          tree.collapse(element).then(undefined, errors.onUnexpectedError);\n        } else {\n          tree.expand(element).then(undefined, errors.onUnexpectedError);\n        }\n      }\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.shouldToggleExpansion = function (element, event, origin) {\n    var isDoubleClick = origin === 'mouse' && event.detail === 2;\n    return this.openOnSingleClick || isDoubleClick || this.isClickOnTwistie(event);\n  };\n\n  Object.defineProperty(DefaultController.prototype, \"openOnSingleClick\", {\n    get: function () {\n      return this.options.openMode === 0\n      /* SINGLE_CLICK */\n      ;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  DefaultController.prototype.isClickOnTwistie = function (event) {\n    var element = event.target;\n\n    if (!dom.hasClass(element, 'content')) {\n      return false;\n    }\n\n    var twistieStyle = window.getComputedStyle(element, ':before');\n\n    if (twistieStyle.backgroundImage === 'none' || twistieStyle.display === 'none') {\n      return false;\n    }\n\n    var twistieWidth = parseInt(twistieStyle.width) + parseInt(twistieStyle.paddingRight);\n    return event.browserEvent.offsetX <= twistieWidth;\n  };\n\n  DefaultController.prototype.onContextMenu = function (tree, element, event) {\n    if (event.target && event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\n      return false; // allow context menu on input fields\n    } // Prevent native context menu from showing up\n\n\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    return false;\n  };\n\n  DefaultController.prototype.onTap = function (tree, element, event) {\n    var target = event.initialTarget;\n\n    if (target && target.tagName && target.tagName.toLowerCase() === 'input') {\n      return false; // Ignore event if target is a form input field (avoids browser specific issues)\n    }\n\n    return this.onLeftClick(tree, element, event, 'touch');\n  };\n\n  DefaultController.prototype.onKeyDown = function (tree, event) {\n    return this.onKey(this.downKeyBindingDispatcher, tree, event);\n  };\n\n  DefaultController.prototype.onKeyUp = function (tree, event) {\n    return this.onKey(this.upKeyBindingDispatcher, tree, event);\n  };\n\n  DefaultController.prototype.onKey = function (bindings, tree, event) {\n    var handler = bindings.dispatch(event.toKeybinding());\n\n    if (handler) {\n      // TODO: TS 3.1 upgrade. Why are we checking against void?\n      if (handler(tree, event)) {\n        event.preventDefault();\n        event.stopPropagation();\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  DefaultController.prototype.onUp = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      tree.focusPrevious(1, payload);\n      tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onPageUp = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      tree.focusPreviousPage(payload);\n      tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onDown = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      tree.focusNext(1, payload);\n      tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onPageDown = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      tree.focusNextPage(payload);\n      tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onHome = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      tree.focusFirst(payload);\n      tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onEnd = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      tree.focusLast(payload);\n      tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onLeft = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      var focus_1 = tree.getFocus();\n      tree.collapse(focus_1).then(function (didCollapse) {\n        if (focus_1 && !didCollapse) {\n          tree.focusParent(payload);\n          return tree.reveal(tree.getFocus());\n        }\n\n        return undefined;\n      }).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onRight = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n    } else {\n      var focus_2 = tree.getFocus();\n      tree.expand(focus_2).then(function (didExpand) {\n        if (focus_2 && !didExpand) {\n          tree.focusFirstChild(payload);\n          return tree.reveal(tree.getFocus());\n        }\n\n        return undefined;\n      }).then(undefined, errors.onUnexpectedError);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onEnter = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      return false;\n    }\n\n    var focus = tree.getFocus();\n\n    if (focus) {\n      tree.setSelection([focus], payload);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onSpace = function (tree, event) {\n    if (tree.getHighlight()) {\n      return false;\n    }\n\n    var focus = tree.getFocus();\n\n    if (focus) {\n      tree.toggleExpansion(focus);\n    }\n\n    return true;\n  };\n\n  DefaultController.prototype.onEscape = function (tree, event) {\n    var payload = {\n      origin: 'keyboard',\n      originalEvent: event\n    };\n\n    if (tree.getHighlight()) {\n      tree.clearHighlight(payload);\n      return true;\n    }\n\n    if (tree.getSelection().length) {\n      tree.clearSelection(payload);\n      return true;\n    }\n\n    if (tree.getFocus()) {\n      tree.clearFocus(payload);\n      return true;\n    }\n\n    return false;\n  };\n\n  return DefaultController;\n}();\n\nexport { DefaultController };\n\nvar DefaultDragAndDrop =\n/** @class */\nfunction () {\n  function DefaultDragAndDrop() {}\n\n  DefaultDragAndDrop.prototype.getDragURI = function (tree, element) {\n    return null;\n  };\n\n  DefaultDragAndDrop.prototype.onDragStart = function (tree, data, originalEvent) {\n    return;\n  };\n\n  DefaultDragAndDrop.prototype.onDragOver = function (tree, data, targetElement, originalEvent) {\n    return null;\n  };\n\n  DefaultDragAndDrop.prototype.drop = function (tree, data, targetElement, originalEvent) {\n    return;\n  };\n\n  return DefaultDragAndDrop;\n}();\n\nexport { DefaultDragAndDrop };\n\nvar DefaultFilter =\n/** @class */\nfunction () {\n  function DefaultFilter() {}\n\n  DefaultFilter.prototype.isVisible = function (tree, element) {\n    return true;\n  };\n\n  return DefaultFilter;\n}();\n\nexport { DefaultFilter };\n\nvar DefaultAccessibilityProvider =\n/** @class */\nfunction () {\n  function DefaultAccessibilityProvider() {}\n\n  DefaultAccessibilityProvider.prototype.getAriaLabel = function (tree, element) {\n    return null;\n  };\n\n  return DefaultAccessibilityProvider;\n}();\n\nexport { DefaultAccessibilityProvider };\n\nvar DefaultTreestyler =\n/** @class */\nfunction () {\n  function DefaultTreestyler(styleElement, selectorSuffix) {\n    this.styleElement = styleElement;\n    this.selectorSuffix = selectorSuffix;\n  }\n\n  DefaultTreestyler.prototype.style = function (styles) {\n    var suffix = this.selectorSuffix ? \".\" + this.selectorSuffix : '';\n    var content = [];\n\n    if (styles.listFocusBackground) {\n      content.push(\".monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) { background-color: \" + styles.listFocusBackground + \"; }\");\n    }\n\n    if (styles.listFocusForeground) {\n      content.push(\".monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) { color: \" + styles.listFocusForeground + \"; }\");\n    }\n\n    if (styles.listActiveSelectionBackground) {\n      content.push(\".monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { background-color: \" + styles.listActiveSelectionBackground + \"; }\");\n    }\n\n    if (styles.listActiveSelectionForeground) {\n      content.push(\".monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { color: \" + styles.listActiveSelectionForeground + \"; }\");\n    }\n\n    if (styles.listFocusAndSelectionBackground) {\n      content.push(\"\\n\\t\\t\\t\\t.monaco-tree-drag-image,\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused.selected:not(.highlighted) { background-color: \" + styles.listFocusAndSelectionBackground + \"; }\\n\\t\\t\\t\");\n    }\n\n    if (styles.listFocusAndSelectionForeground) {\n      content.push(\"\\n\\t\\t\\t\\t.monaco-tree-drag-image,\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused.selected:not(.highlighted) { color: \" + styles.listFocusAndSelectionForeground + \"; }\\n\\t\\t\\t\");\n    }\n\n    if (styles.listInactiveSelectionBackground) {\n      content.push(\".monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { background-color: \" + styles.listInactiveSelectionBackground + \"; }\");\n    }\n\n    if (styles.listInactiveSelectionForeground) {\n      content.push(\".monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { color: \" + styles.listInactiveSelectionForeground + \"; }\");\n    }\n\n    if (styles.listHoverBackground) {\n      content.push(\".monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused) { background-color: \" + styles.listHoverBackground + \"; }\");\n    }\n\n    if (styles.listHoverForeground) {\n      content.push(\".monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused) { color: \" + styles.listHoverForeground + \"; }\");\n    }\n\n    if (styles.listDropBackground) {\n      content.push(\"\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-wrapper.drop-target,\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.drop-target { background-color: \" + styles.listDropBackground + \" !important; color: inherit !important; }\\n\\t\\t\\t\");\n    }\n\n    if (styles.listFocusOutline) {\n      content.push(\"\\n\\t\\t\\t\\t.monaco-tree-drag-image\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{ border: 1px solid \" + styles.listFocusOutline + \"; background: #000; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{ border: 1px solid transparent; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) \\t\\t\\t\\t\\t\\t{ border: 1px dotted \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) \\t\\t\\t\\t\\t\\t{ border: 1px solid \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted)  \\t\\t\\t\\t\\t\\t\\t{ border: 1px solid \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused)  \\t{ border: 1px dashed \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-wrapper.drop-target,\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.drop-target\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{ border: 1px dashed \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\");\n    }\n\n    var newStyles = content.join('\\n');\n\n    if (newStyles !== this.styleElement.innerHTML) {\n      this.styleElement.innerHTML = newStyles;\n    }\n  };\n\n  return DefaultTreestyler;\n}();\n\nexport { DefaultTreestyler };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/base/parts/tree/browser/treeDefaults.js"],"names":["platform","errors","dom","createKeybinding","KeybindingDispatcher","_arr","prototype","set","keybinding","callback","push","OS","dispatch","i","length","item","toChord","equals","DefaultController","options","_this","clickBehavior","keyboardSupport","openMode","downKeyBindingDispatcher","upKeyBindingDispatcher","t","e","onUp","onDown","onLeft","onRight","isMacintosh","onPageUp","onPageDown","onHome","onEnd","onSpace","onEscape","onEnter","bind","onMouseDown","tree","element","event","origin","leftButton","middleButton","target","tagName","toLowerCase","findParentWithClass","onLeftClick","onClick","isMac","ctrlKey","preventDefault","stopPropagation","eventish","payload","originalEvent","didClickOnTwistie","isClickOnTwistie","getInput","clearFocus","clearSelection","isSingleMouseDown","browserEvent","type","detail","domFocus","setSelection","setFocus","shouldToggleExpansion","isExpanded","collapse","then","undefined","onUnexpectedError","expand","isDoubleClick","openOnSingleClick","Object","defineProperty","get","enumerable","configurable","hasClass","twistieStyle","window","getComputedStyle","backgroundImage","display","twistieWidth","parseInt","width","paddingRight","offsetX","onContextMenu","onTap","initialTarget","onKeyDown","onKey","onKeyUp","bindings","handler","toKeybinding","getHighlight","clearHighlight","focusPrevious","reveal","getFocus","focusPreviousPage","focusNext","focusNextPage","focusFirst","focusLast","focus_1","didCollapse","focusParent","focus_2","didExpand","focusFirstChild","focus","toggleExpansion","getSelection","DefaultDragAndDrop","getDragURI","onDragStart","data","onDragOver","targetElement","drop","DefaultFilter","isVisible","DefaultAccessibilityProvider","getAriaLabel","DefaultTreestyler","styleElement","selectorSuffix","style","styles","suffix","content","listFocusBackground","listFocusForeground","listActiveSelectionBackground","listActiveSelectionForeground","listFocusAndSelectionBackground","listFocusAndSelectionForeground","listInactiveSelectionBackground","listInactiveSelectionForeground","listHoverBackground","listHoverForeground","listDropBackground","listFocusOutline","newStyles","join","innerHTML"],"mappings":"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","sourcesContent":["import * as platform from '../../../common/platform.js';\r\nimport * as errors from '../../../common/errors.js';\r\nimport * as dom from '../../../browser/dom.js';\r\nimport { createKeybinding } from '../../../common/keyCodes.js';\r\nvar KeybindingDispatcher = /** @class */ (function () {\r\n    function KeybindingDispatcher() {\r\n        this._arr = [];\r\n    }\r\n    KeybindingDispatcher.prototype.set = function (keybinding, callback) {\r\n        this._arr.push({\r\n            keybinding: createKeybinding(keybinding, platform.OS),\r\n            callback: callback\r\n        });\r\n    };\r\n    KeybindingDispatcher.prototype.dispatch = function (keybinding) {\r\n        // Loop from the last to the first to handle overwrites\r\n        for (var i = this._arr.length - 1; i >= 0; i--) {\r\n            var item = this._arr[i];\r\n            if (keybinding.toChord().equals(item.keybinding)) {\r\n                return item.callback;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    return KeybindingDispatcher;\r\n}());\r\nexport { KeybindingDispatcher };\r\nvar DefaultController = /** @class */ (function () {\r\n    function DefaultController(options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = { clickBehavior: 0 /* ON_MOUSE_DOWN */, keyboardSupport: true, openMode: 0 /* SINGLE_CLICK */ }; }\r\n        this.options = options;\r\n        this.downKeyBindingDispatcher = new KeybindingDispatcher();\r\n        this.upKeyBindingDispatcher = new KeybindingDispatcher();\r\n        if (typeof options.keyboardSupport !== 'boolean' || options.keyboardSupport) {\r\n            this.downKeyBindingDispatcher.set(16 /* UpArrow */, function (t, e) { return _this.onUp(t, e); });\r\n            this.downKeyBindingDispatcher.set(18 /* DownArrow */, function (t, e) { return _this.onDown(t, e); });\r\n            this.downKeyBindingDispatcher.set(15 /* LeftArrow */, function (t, e) { return _this.onLeft(t, e); });\r\n            this.downKeyBindingDispatcher.set(17 /* RightArrow */, function (t, e) { return _this.onRight(t, e); });\r\n            if (platform.isMacintosh) {\r\n                this.downKeyBindingDispatcher.set(2048 /* CtrlCmd */ | 16 /* UpArrow */, function (t, e) { return _this.onLeft(t, e); });\r\n                this.downKeyBindingDispatcher.set(256 /* WinCtrl */ | 44 /* KEY_N */, function (t, e) { return _this.onDown(t, e); });\r\n                this.downKeyBindingDispatcher.set(256 /* WinCtrl */ | 46 /* KEY_P */, function (t, e) { return _this.onUp(t, e); });\r\n            }\r\n            this.downKeyBindingDispatcher.set(11 /* PageUp */, function (t, e) { return _this.onPageUp(t, e); });\r\n            this.downKeyBindingDispatcher.set(12 /* PageDown */, function (t, e) { return _this.onPageDown(t, e); });\r\n            this.downKeyBindingDispatcher.set(14 /* Home */, function (t, e) { return _this.onHome(t, e); });\r\n            this.downKeyBindingDispatcher.set(13 /* End */, function (t, e) { return _this.onEnd(t, e); });\r\n            this.downKeyBindingDispatcher.set(10 /* Space */, function (t, e) { return _this.onSpace(t, e); });\r\n            this.downKeyBindingDispatcher.set(9 /* Escape */, function (t, e) { return _this.onEscape(t, e); });\r\n            this.upKeyBindingDispatcher.set(3 /* Enter */, this.onEnter.bind(this));\r\n            this.upKeyBindingDispatcher.set(2048 /* CtrlCmd */ | 3 /* Enter */, this.onEnter.bind(this));\r\n        }\r\n    }\r\n    DefaultController.prototype.onMouseDown = function (tree, element, event, origin) {\r\n        if (origin === void 0) { origin = 'mouse'; }\r\n        if (this.options.clickBehavior === 0 /* ON_MOUSE_DOWN */ && (event.leftButton || event.middleButton)) {\r\n            if (event.target) {\r\n                if (event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\r\n                    return false; // Ignore event if target is a form input field (avoids browser specific issues)\r\n                }\r\n                if (dom.findParentWithClass(event.target, 'scrollbar', 'monaco-tree')) {\r\n                    return false;\r\n                }\r\n                if (dom.findParentWithClass(event.target, 'monaco-action-bar', 'row')) { // TODO@Joao not very nice way of checking for the action bar (implicit knowledge)\r\n                    return false; // Ignore event if target is over an action bar of the row\r\n                }\r\n            }\r\n            // Propagate to onLeftClick now\r\n            return this.onLeftClick(tree, element, event, origin);\r\n        }\r\n        return false;\r\n    };\r\n    DefaultController.prototype.onClick = function (tree, element, event) {\r\n        var isMac = platform.isMacintosh;\r\n        // A Ctrl click on the Mac is a context menu event\r\n        if (isMac && event.ctrlKey) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            return false;\r\n        }\r\n        if (event.target && event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\r\n            return false; // Ignore event if target is a form input field (avoids browser specific issues)\r\n        }\r\n        if (this.options.clickBehavior === 0 /* ON_MOUSE_DOWN */ && (event.leftButton || event.middleButton)) {\r\n            return false; // Already handled by onMouseDown\r\n        }\r\n        return this.onLeftClick(tree, element, event);\r\n    };\r\n    DefaultController.prototype.onLeftClick = function (tree, element, eventish, origin) {\r\n        if (origin === void 0) { origin = 'mouse'; }\r\n        var event = eventish;\r\n        var payload = { origin: origin, originalEvent: eventish, didClickOnTwistie: this.isClickOnTwistie(event) };\r\n        if (tree.getInput() === element) {\r\n            tree.clearFocus(payload);\r\n            tree.clearSelection(payload);\r\n        }\r\n        else {\r\n            var isSingleMouseDown = eventish && event.browserEvent && event.browserEvent.type === 'mousedown' && event.browserEvent.detail === 1;\r\n            if (!isSingleMouseDown) {\r\n                eventish.preventDefault(); // we cannot preventDefault onMouseDown with single click because this would break DND otherwise\r\n            }\r\n            eventish.stopPropagation();\r\n            tree.domFocus();\r\n            tree.setSelection([element], payload);\r\n            tree.setFocus(element, payload);\r\n            if (this.shouldToggleExpansion(element, event, origin)) {\r\n                if (tree.isExpanded(element)) {\r\n                    tree.collapse(element).then(undefined, errors.onUnexpectedError);\r\n                }\r\n                else {\r\n                    tree.expand(element).then(undefined, errors.onUnexpectedError);\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    DefaultController.prototype.shouldToggleExpansion = function (element, event, origin) {\r\n        var isDoubleClick = (origin === 'mouse' && event.detail === 2);\r\n        return this.openOnSingleClick || isDoubleClick || this.isClickOnTwistie(event);\r\n    };\r\n    Object.defineProperty(DefaultController.prototype, \"openOnSingleClick\", {\r\n        get: function () {\r\n            return this.options.openMode === 0 /* SINGLE_CLICK */;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    DefaultController.prototype.isClickOnTwistie = function (event) {\r\n        var element = event.target;\r\n        if (!dom.hasClass(element, 'content')) {\r\n            return false;\r\n        }\r\n        var twistieStyle = window.getComputedStyle(element, ':before');\r\n        if (twistieStyle.backgroundImage === 'none' || twistieStyle.display === 'none') {\r\n            return false;\r\n        }\r\n        var twistieWidth = parseInt(twistieStyle.width) + parseInt(twistieStyle.paddingRight);\r\n        return event.browserEvent.offsetX <= twistieWidth;\r\n    };\r\n    DefaultController.prototype.onContextMenu = function (tree, element, event) {\r\n        if (event.target && event.target.tagName && event.target.tagName.toLowerCase() === 'input') {\r\n            return false; // allow context menu on input fields\r\n        }\r\n        // Prevent native context menu from showing up\r\n        if (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        }\r\n        return false;\r\n    };\r\n    DefaultController.prototype.onTap = function (tree, element, event) {\r\n        var target = event.initialTarget;\r\n        if (target && target.tagName && target.tagName.toLowerCase() === 'input') {\r\n            return false; // Ignore event if target is a form input field (avoids browser specific issues)\r\n        }\r\n        return this.onLeftClick(tree, element, event, 'touch');\r\n    };\r\n    DefaultController.prototype.onKeyDown = function (tree, event) {\r\n        return this.onKey(this.downKeyBindingDispatcher, tree, event);\r\n    };\r\n    DefaultController.prototype.onKeyUp = function (tree, event) {\r\n        return this.onKey(this.upKeyBindingDispatcher, tree, event);\r\n    };\r\n    DefaultController.prototype.onKey = function (bindings, tree, event) {\r\n        var handler = bindings.dispatch(event.toKeybinding());\r\n        if (handler) {\r\n            // TODO: TS 3.1 upgrade. Why are we checking against void?\r\n            if (handler(tree, event)) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    DefaultController.prototype.onUp = function (tree, event) {\r\n        var payload = { origin: 'keyboard', originalEvent: event };\r\n        if (tree.getHighlight()) {\r\n            tree.clearHighlight(payload);\r\n        }\r\n        else {\r\n            tree.focusPrevious(1, payload);\r\n            tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\r\n        }\r\n        return true;\r\n    };\r\n    DefaultController.prototype.onPageUp = function (tree, event) {\r\n        var payload = { origin: 'keyboard', originalEvent: event };\r\n        if (tree.getHighlight()) {\r\n            tree.clearHighlight(payload);\r\n        }\r\n        else {\r\n            tree.focusPreviousPage(payload);\r\n            tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\r\n        }\r\n        return true;\r\n    };\r\n    DefaultController.prototype.onDown = function (tree, event) {\r\n        var payload = { origin: 'keyboard', originalEvent: event };\r\n        if (tree.getHighlight()) {\r\n            tree.clearHighlight(payload);\r\n        }\r\n        else {\r\n            tree.focusNext(1, payload);\r\n            tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\r\n        }\r\n        return true;\r\n    };\r\n    DefaultController.prototype.onPageDown = function (tree, event) {\r\n        var payload = { origin: 'keyboard', originalEvent: event };\r\n        if (tree.getHighlight()) {\r\n            tree.clearHighlight(payload);\r\n        }\r\n        else {\r\n            tree.focusNextPage(payload);\r\n            tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\r\n        }\r\n        return true;\r\n    };\r\n    DefaultController.prototype.onHome = function (tree, event) {\r\n        var payload = { origin: 'keyboard', originalEvent: event };\r\n        if (tree.getHighlight()) {\r\n            tree.clearHighlight(payload);\r\n        }\r\n        else {\r\n            tree.focusFirst(payload);\r\n            tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\r\n        }\r\n        return true;\r\n    };\r\n    DefaultController.prototype.onEnd = function (tree, event) {\r\n        var payload = { origin: 'keyboard', originalEvent: event };\r\n        if (tree.getHighlight()) {\r\n            tree.clearHighlight(payload);\r\n        }\r\n        else {\r\n            tree.focusLast(payload);\r\n            tree.reveal(tree.getFocus()).then(undefined, errors.onUnexpectedError);\r\n        }\r\n        return true;\r\n    };\r\n    DefaultController.prototype.onLeft = function (tree, event) {\r\n        var payload = { origin: 'keyboard', originalEvent: event };\r\n        if (tree.getHighlight()) {\r\n            tree.clearHighlight(payload);\r\n        }\r\n        else {\r\n            var focus_1 = tree.getFocus();\r\n            tree.collapse(focus_1).then(function (didCollapse) {\r\n                if (focus_1 && !didCollapse) {\r\n                    tree.focusParent(payload);\r\n                    return tree.reveal(tree.getFocus());\r\n                }\r\n                return undefined;\r\n            }).then(undefined, errors.onUnexpectedError);\r\n        }\r\n        return true;\r\n    };\r\n    DefaultController.prototype.onRight = function (tree, event) {\r\n        var payload = { origin: 'keyboard', originalEvent: event };\r\n        if (tree.getHighlight()) {\r\n            tree.clearHighlight(payload);\r\n        }\r\n        else {\r\n            var focus_2 = tree.getFocus();\r\n            tree.expand(focus_2).then(function (didExpand) {\r\n                if (focus_2 && !didExpand) {\r\n                    tree.focusFirstChild(payload);\r\n                    return tree.reveal(tree.getFocus());\r\n                }\r\n                return undefined;\r\n            }).then(undefined, errors.onUnexpectedError);\r\n        }\r\n        return true;\r\n    };\r\n    DefaultController.prototype.onEnter = function (tree, event) {\r\n        var payload = { origin: 'keyboard', originalEvent: event };\r\n        if (tree.getHighlight()) {\r\n            return false;\r\n        }\r\n        var focus = tree.getFocus();\r\n        if (focus) {\r\n            tree.setSelection([focus], payload);\r\n        }\r\n        return true;\r\n    };\r\n    DefaultController.prototype.onSpace = function (tree, event) {\r\n        if (tree.getHighlight()) {\r\n            return false;\r\n        }\r\n        var focus = tree.getFocus();\r\n        if (focus) {\r\n            tree.toggleExpansion(focus);\r\n        }\r\n        return true;\r\n    };\r\n    DefaultController.prototype.onEscape = function (tree, event) {\r\n        var payload = { origin: 'keyboard', originalEvent: event };\r\n        if (tree.getHighlight()) {\r\n            tree.clearHighlight(payload);\r\n            return true;\r\n        }\r\n        if (tree.getSelection().length) {\r\n            tree.clearSelection(payload);\r\n            return true;\r\n        }\r\n        if (tree.getFocus()) {\r\n            tree.clearFocus(payload);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return DefaultController;\r\n}());\r\nexport { DefaultController };\r\nvar DefaultDragAndDrop = /** @class */ (function () {\r\n    function DefaultDragAndDrop() {\r\n    }\r\n    DefaultDragAndDrop.prototype.getDragURI = function (tree, element) {\r\n        return null;\r\n    };\r\n    DefaultDragAndDrop.prototype.onDragStart = function (tree, data, originalEvent) {\r\n        return;\r\n    };\r\n    DefaultDragAndDrop.prototype.onDragOver = function (tree, data, targetElement, originalEvent) {\r\n        return null;\r\n    };\r\n    DefaultDragAndDrop.prototype.drop = function (tree, data, targetElement, originalEvent) {\r\n        return;\r\n    };\r\n    return DefaultDragAndDrop;\r\n}());\r\nexport { DefaultDragAndDrop };\r\nvar DefaultFilter = /** @class */ (function () {\r\n    function DefaultFilter() {\r\n    }\r\n    DefaultFilter.prototype.isVisible = function (tree, element) {\r\n        return true;\r\n    };\r\n    return DefaultFilter;\r\n}());\r\nexport { DefaultFilter };\r\nvar DefaultAccessibilityProvider = /** @class */ (function () {\r\n    function DefaultAccessibilityProvider() {\r\n    }\r\n    DefaultAccessibilityProvider.prototype.getAriaLabel = function (tree, element) {\r\n        return null;\r\n    };\r\n    return DefaultAccessibilityProvider;\r\n}());\r\nexport { DefaultAccessibilityProvider };\r\nvar DefaultTreestyler = /** @class */ (function () {\r\n    function DefaultTreestyler(styleElement, selectorSuffix) {\r\n        this.styleElement = styleElement;\r\n        this.selectorSuffix = selectorSuffix;\r\n    }\r\n    DefaultTreestyler.prototype.style = function (styles) {\r\n        var suffix = this.selectorSuffix ? \".\" + this.selectorSuffix : '';\r\n        var content = [];\r\n        if (styles.listFocusBackground) {\r\n            content.push(\".monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) { background-color: \" + styles.listFocusBackground + \"; }\");\r\n        }\r\n        if (styles.listFocusForeground) {\r\n            content.push(\".monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) { color: \" + styles.listFocusForeground + \"; }\");\r\n        }\r\n        if (styles.listActiveSelectionBackground) {\r\n            content.push(\".monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { background-color: \" + styles.listActiveSelectionBackground + \"; }\");\r\n        }\r\n        if (styles.listActiveSelectionForeground) {\r\n            content.push(\".monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { color: \" + styles.listActiveSelectionForeground + \"; }\");\r\n        }\r\n        if (styles.listFocusAndSelectionBackground) {\r\n            content.push(\"\\n\\t\\t\\t\\t.monaco-tree-drag-image,\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused.selected:not(.highlighted) { background-color: \" + styles.listFocusAndSelectionBackground + \"; }\\n\\t\\t\\t\");\r\n        }\r\n        if (styles.listFocusAndSelectionForeground) {\r\n            content.push(\"\\n\\t\\t\\t\\t.monaco-tree-drag-image,\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused.selected:not(.highlighted) { color: \" + styles.listFocusAndSelectionForeground + \"; }\\n\\t\\t\\t\");\r\n        }\r\n        if (styles.listInactiveSelectionBackground) {\r\n            content.push(\".monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { background-color: \" + styles.listInactiveSelectionBackground + \"; }\");\r\n        }\r\n        if (styles.listInactiveSelectionForeground) {\r\n            content.push(\".monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { color: \" + styles.listInactiveSelectionForeground + \"; }\");\r\n        }\r\n        if (styles.listHoverBackground) {\r\n            content.push(\".monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused) { background-color: \" + styles.listHoverBackground + \"; }\");\r\n        }\r\n        if (styles.listHoverForeground) {\r\n            content.push(\".monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused) { color: \" + styles.listHoverForeground + \"; }\");\r\n        }\r\n        if (styles.listDropBackground) {\r\n            content.push(\"\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-wrapper.drop-target,\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.drop-target { background-color: \" + styles.listDropBackground + \" !important; color: inherit !important; }\\n\\t\\t\\t\");\r\n        }\r\n        if (styles.listFocusOutline) {\r\n            content.push(\"\\n\\t\\t\\t\\t.monaco-tree-drag-image\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{ border: 1px solid \" + styles.listFocusOutline + \"; background: #000; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{ border: 1px solid transparent; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.focused:not(.highlighted) \\t\\t\\t\\t\\t\\t{ border: 1px dotted \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \".focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) \\t\\t\\t\\t\\t\\t{ border: 1px solid \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted)  \\t\\t\\t\\t\\t\\t\\t{ border: 1px solid \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row:hover:not(.highlighted):not(.selected):not(.focused)  \\t{ border: 1px dashed \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-wrapper.drop-target,\\n\\t\\t\\t\\t.monaco-tree\" + suffix + \" .monaco-tree-rows > .monaco-tree-row.drop-target\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{ border: 1px dashed \" + styles.listFocusOutline + \"; }\\n\\t\\t\\t\");\r\n        }\r\n        var newStyles = content.join('\\n');\r\n        if (newStyles !== this.styleElement.innerHTML) {\r\n            this.styleElement.innerHTML = newStyles;\r\n        }\r\n    };\r\n    return DefaultTreestyler;\r\n}());\r\nexport { DefaultTreestyler };\r\n"]},"metadata":{},"sourceType":"module"}