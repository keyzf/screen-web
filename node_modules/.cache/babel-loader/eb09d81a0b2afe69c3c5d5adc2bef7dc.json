{"ast":null,"code":"var _jsxFileName = \"/Users/ifudata/eclipse-workspace/screen-web/src/components/Home/Header.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Util from '../../util';\nimport { Form, Input, message, Modal } from \"antd\";\nconst layout = {\n  //弹窗表单布局\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 12\n  }\n};\n\nclass Header extends Component {\n  constructor(props) {\n    super(props);\n\n    this.logout = () => {\n      Util.logOut();\n    };\n\n    this.state = {\n      modalVisible: false,\n      loading: false\n    };\n\n    this.addItem = () => {\n      this.setState({\n        modalVisible: true,\n        modalTitle: \"修改密码\"\n      });\n    };\n\n    this.addItemOk = () => {\n      let value = this.addItemForm.current.getFieldsValue();\n      Util.ajax({\n        url: '/user/updatePassword/',\n        data: {\n          'password': value.oldPs,\n          'newPassword': value.newPs,\n          'confirmPassword': value.confirmPs\n        }\n      }).then(res => {\n        if (res.code === 200) {\n          message.success(res.message);\n        } else {\n          message.error(res.message);\n        }\n      });\n    };\n\n    this.addItemCancel = () => {\n      this.setState({\n        modalVisible: false\n      });\n    };\n\n    this.addItemForm = React.createRef();\n  }\n\n  render() {\n    const {\n      realName\n    } = this.props;\n    return React.createElement(\"div\", {\n      className: \"phead\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"head_con\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"\\u5317\\u4EAC\\u8D44\\u91C7DPWEB\")), React.createElement(\"div\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"\\u60A8\\u597D\\uFF01\", realName)), React.createElement(\"span\", {\n      onClick: this.addItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"\\u4FEE\\u6539\\u5BC6\\u7801\")), React.createElement(\"span\", {\n      className: \"exit\",\n      onClick: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"small\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"\\u9000\\u51FA\")))), React.createElement(Modal, {\n      title: \"\\u4FEE\\u6539\\u5BC6\\u7801\",\n      maskClosable: false,\n      visible: this.state.modalVisible,\n      onOk: this.addItemOk,\n      onCancel: this.addItemCancel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(Form, Object.assign({}, layout, {\n      ref: this.addItemForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(Form.Item, {\n      name: \"userId\",\n      rules: [],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(Input, {\n      type: \"hidden\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      label: \"\\u539F\\u5BC6\\u7801\",\n      name: \"oldPs\",\n      rules: [{\n        required: true,\n        message: '原密码不能为空！'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u539F\\u5BC6\\u7801\",\n      type: \"password\",\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      label: \"\\u65B0\\u5BC6\\u7801\",\n      name: \"newPs\",\n      rules: [{\n        required: true,\n        message: '新密码不能为空！'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u65B0\\u5BC6\\u7801\",\n      type: \"password\",\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    })), React.createElement(Form.Item, {\n      label: \"\\u786E\\u8BA4\\u65B0\\u5BC6\\u7801\",\n      name: \"confirmPs\",\n      rules: [{\n        required: true,\n        pattern: /^\\w{6,20}$/,\n        message: '确认新密码不能为空！'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(Input, {\n      placeholder: \"\\u8BF7\\u8F93\\u5165\\u786E\\u8BA4\\u65B0\\u5BC6\\u7801\",\n      type: \"password\",\n      disabled: this.props.disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  const {\n    loginState\n  } = state;\n  return {\n    realName: loginState.getIn([\"userInfo\", \"realName\"])\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/src/components/Home/Header.js"],"names":["React","Component","connect","Util","Form","Input","message","Modal","layout","labelCol","span","wrapperCol","Header","constructor","props","logout","logOut","state","modalVisible","loading","addItem","setState","modalTitle","addItemOk","value","addItemForm","current","getFieldsValue","ajax","url","data","oldPs","newPs","confirmPs","then","res","code","success","error","addItemCancel","createRef","render","realName","required","disabled","pattern","mapStateToProps","ownProps","loginState","getIn","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React,{ Component } from 'react'\nimport { connect } from 'react-redux'\nimport Util from '../../util'\nimport {Form, Input, message, Modal} from \"antd\";\nconst layout = {//弹窗表单布局\n    labelCol: { span: 8 },\n    wrapperCol: { span: 12 },\n};\nclass Header extends Component{\n\n    constructor(props){\n        super(props);\n        this.addItemForm = React.createRef();\n    }\n\n    logout = ()=>{\n        Util.logOut()\n    };\n\n    state = {\n        modalVisible:false,\n        loading:false,\n    };\n\n    addItem = ()=>{\n        this.setState({\n            modalVisible:true,\n            modalTitle:\"修改密码\"\n        })\n    };\n\n    addItemOk = ()=>{\n        let value = this.addItemForm.current.getFieldsValue();\n        Util.ajax({\n            url:'/user/updatePassword/',\n            data:{'password':value.oldPs,'newPassword':value.newPs,'confirmPassword':value.confirmPs}\n        }).then((res)=>{\n            if(res.code === 200){\n                message.success(res.message);\n            }else{\n                message.error(res.message);\n            }\n        })\n    };\n\n    addItemCancel = ()=>{\n        this.setState({\n            modalVisible:false\n        })\n    };\n    render(){\n        const {realName} = this.props;\n        return (\n            <div className=\"phead\">\n                <div className=\"head_con\">\n                    <div className=\"left\">\n                        <b>北京资采DPWEB</b>\n                    </div>\n                    <div className=\"right\">\n                        <span className=\"user\"><small>您好！{realName}</small></span>\n                        <span onClick={this.addItem}><small>修改密码</small></span>\n                        <span className=\"exit\"\n                            onClick={this.logout}\n                        ><small>退出</small></span>\n                    </div>\n                </div>\n                <Modal\n                    title='修改密码'\n                    maskClosable={false}\n                    visible={this.state.modalVisible}\n                    onOk={this.addItemOk}\n                    onCancel={this.addItemCancel}\n                >\n                    <Form\n                        {...layout}\n                        ref={this.addItemForm}\n                    >\n                        <Form.Item\n                            name=\"userId\"\n                            rules={[]}\n                        >\n                            <Input type=\"hidden\"/>\n                        </Form.Item>\n                        <Form.Item\n                            label=\"原密码\"\n                            name=\"oldPs\"\n                            rules={[{\n                                required: true,\n                                message: '原密码不能为空！',\n                            }]}\n                        >\n                            <Input\n                                placeholder=\"请输入原密码\"\n                                type=\"password\"\n                                disabled={this.props.disabled}\n                            />\n                        </Form.Item>\n                        <Form.Item\n                            label=\"新密码\"\n                            name=\"newPs\"\n                            rules={[{\n                                required: true,\n                                message: '新密码不能为空！',\n                            }]}\n                        >\n                            <Input\n                                placeholder=\"请输入新密码\"\n                                type=\"password\"\n                                disabled={this.props.disabled}\n                            />\n                        </Form.Item>\n                        <Form.Item\n                            label=\"确认新密码\"\n                            name=\"confirmPs\"\n                            rules={[{\n                                required: true,\n                                pattern: /^\\w{6,20}$/,\n                                message: '确认新密码不能为空！',\n                            }]}\n                        >\n                            <Input\n                                placeholder=\"请输入确认新密码\"\n                                type=\"password\"\n                                disabled={this.props.disabled}\n                            />\n                        </Form.Item>\n                    </Form>\n                </Modal>\n            </div>\n        )\n    }\n}\nconst mapStateToProps = (state,ownProps)=>{\n    const { loginState } = state\n    return {\n        realName: loginState.getIn([\"userInfo\",\"realName\"])\n    }\n}\nconst mapDispatchToProps = dispatch=>{\n    return {\n\n    }\n}\nexport default connect(mapStateToProps,mapDispatchToProps)(Header)"]},"metadata":{},"sourceType":"module"}