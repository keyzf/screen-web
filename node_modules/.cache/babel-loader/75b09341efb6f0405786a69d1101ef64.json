{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar Uri = monaco.Uri;\nvar Range = monaco.Range; //#region utils copied from typescript to prevent loading the entire typescriptServices ---\n\nvar IndentStyle;\n\n(function (IndentStyle) {\n  IndentStyle[IndentStyle[\"None\"] = 0] = \"None\";\n  IndentStyle[IndentStyle[\"Block\"] = 1] = \"Block\";\n  IndentStyle[IndentStyle[\"Smart\"] = 2] = \"Smart\";\n})(IndentStyle || (IndentStyle = {}));\n\nexport function flattenDiagnosticMessageText(diag, newLine, indent) {\n  if (indent === void 0) {\n    indent = 0;\n  }\n\n  if (typeof diag === \"string\") {\n    return diag;\n  } else if (diag === undefined) {\n    return \"\";\n  }\n\n  var result = \"\";\n\n  if (indent) {\n    result += newLine;\n\n    for (var i = 0; i < indent; i++) {\n      result += \"  \";\n    }\n  }\n\n  result += diag.messageText;\n  indent++;\n\n  if (diag.next) {\n    for (var _i = 0, _a = diag.next; _i < _a.length; _i++) {\n      var kid = _a[_i];\n      result += flattenDiagnosticMessageText(kid, newLine, indent);\n    }\n  }\n\n  return result;\n}\n\nfunction displayPartsToString(displayParts) {\n  if (displayParts) {\n    return displayParts.map(function (displayPart) {\n      return displayPart.text;\n    }).join(\"\");\n  }\n\n  return \"\";\n} //#endregion\n\n\nvar Adapter =\n/** @class */\nfunction () {\n  function Adapter(_worker) {\n    this._worker = _worker;\n  } // protected _positionToOffset(model: monaco.editor.ITextModel, position: monaco.IPosition): number {\n  // \treturn model.getOffsetAt(position);\n  // }\n  // protected _offsetToPosition(model: monaco.editor.ITextModel, offset: number): monaco.IPosition {\n  // \treturn model.getPositionAt(offset);\n  // }\n\n\n  Adapter.prototype._textSpanToRange = function (model, span) {\n    var p1 = model.getPositionAt(span.start);\n    var p2 = model.getPositionAt(span.start + span.length);\n    var startLineNumber = p1.lineNumber,\n        startColumn = p1.column;\n    var endLineNumber = p2.lineNumber,\n        endColumn = p2.column;\n    return {\n      startLineNumber: startLineNumber,\n      startColumn: startColumn,\n      endLineNumber: endLineNumber,\n      endColumn: endColumn\n    };\n  };\n\n  return Adapter;\n}();\n\nexport { Adapter }; // --- diagnostics --- ---\n\nvar DiagnosticCategory;\n\n(function (DiagnosticCategory) {\n  DiagnosticCategory[DiagnosticCategory[\"Warning\"] = 0] = \"Warning\";\n  DiagnosticCategory[DiagnosticCategory[\"Error\"] = 1] = \"Error\";\n  DiagnosticCategory[DiagnosticCategory[\"Suggestion\"] = 2] = \"Suggestion\";\n  DiagnosticCategory[DiagnosticCategory[\"Message\"] = 3] = \"Message\";\n})(DiagnosticCategory || (DiagnosticCategory = {}));\n\nvar DiagnosticsAdapter =\n/** @class */\nfunction (_super) {\n  __extends(DiagnosticsAdapter, _super);\n\n  function DiagnosticsAdapter(_defaults, _selector, worker) {\n    var _this = _super.call(this, worker) || this;\n\n    _this._defaults = _defaults;\n    _this._selector = _selector;\n    _this._disposables = [];\n    _this._listener = Object.create(null);\n\n    var onModelAdd = function (model) {\n      if (model.getModeId() !== _selector) {\n        return;\n      }\n\n      var handle;\n      var changeSubscription = model.onDidChangeContent(function () {\n        clearTimeout(handle);\n        handle = setTimeout(function () {\n          return _this._doValidate(model);\n        }, 500);\n      });\n      _this._listener[model.uri.toString()] = {\n        dispose: function () {\n          changeSubscription.dispose();\n          clearTimeout(handle);\n        }\n      };\n\n      _this._doValidate(model);\n    };\n\n    var onModelRemoved = function (model) {\n      monaco.editor.setModelMarkers(model, _this._selector, []);\n      var key = model.uri.toString();\n\n      if (_this._listener[key]) {\n        _this._listener[key].dispose();\n\n        delete _this._listener[key];\n      }\n    };\n\n    _this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\n\n    _this._disposables.push(monaco.editor.onWillDisposeModel(onModelRemoved));\n\n    _this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\n      onModelRemoved(event.model);\n      onModelAdd(event.model);\n    }));\n\n    _this._disposables.push({\n      dispose: function () {\n        for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\n          var model = _a[_i];\n          onModelRemoved(model);\n        }\n      }\n    });\n\n    var recomputeDiagostics = function () {\n      // redo diagnostics when options change\n      for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\n        var model = _a[_i];\n        onModelRemoved(model);\n        onModelAdd(model);\n      }\n    };\n\n    _this._disposables.push(_this._defaults.onDidChange(recomputeDiagostics));\n\n    _this._disposables.push(_this._defaults.onDidExtraLibsChange(recomputeDiagostics));\n\n    monaco.editor.getModels().forEach(onModelAdd);\n    return _this;\n  }\n\n  DiagnosticsAdapter.prototype.dispose = function () {\n    this._disposables.forEach(function (d) {\n      return d && d.dispose();\n    });\n\n    this._disposables = [];\n  };\n\n  DiagnosticsAdapter.prototype._doValidate = function (model) {\n    return __awaiter(this, void 0, void 0, function () {\n      var worker, promises, _a, noSyntaxValidation, noSemanticValidation, noSuggestionDiagnostics, diagnostics, markers;\n\n      var _this = this;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this._worker(model.uri)];\n\n          case 1:\n            worker = _b.sent();\n\n            if (model.isDisposed()) {\n              // model was disposed in the meantime\n              return [2\n              /*return*/\n              ];\n            }\n\n            promises = [];\n            _a = this._defaults.getDiagnosticsOptions(), noSyntaxValidation = _a.noSyntaxValidation, noSemanticValidation = _a.noSemanticValidation, noSuggestionDiagnostics = _a.noSuggestionDiagnostics;\n\n            if (!noSyntaxValidation) {\n              promises.push(worker.getSyntacticDiagnostics(model.uri.toString()));\n            }\n\n            if (!noSemanticValidation) {\n              promises.push(worker.getSemanticDiagnostics(model.uri.toString()));\n            }\n\n            if (!noSuggestionDiagnostics) {\n              promises.push(worker.getSuggestionDiagnostics(model.uri.toString()));\n            }\n\n            return [4\n            /*yield*/\n            , Promise.all(promises)];\n\n          case 2:\n            diagnostics = _b.sent();\n\n            if (!diagnostics || model.isDisposed()) {\n              // model was disposed in the meantime\n              return [2\n              /*return*/\n              ];\n            }\n\n            markers = diagnostics.reduce(function (p, c) {\n              return c.concat(p);\n            }, []).filter(function (d) {\n              return (_this._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore || []).indexOf(d.code) === -1;\n            }).map(function (d) {\n              return _this._convertDiagnostics(model, d);\n            });\n            monaco.editor.setModelMarkers(model, this._selector, markers);\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  DiagnosticsAdapter.prototype._convertDiagnostics = function (model, diag) {\n    var diagStart = diag.start || 0;\n    var diagLength = diag.length || 1;\n\n    var _a = model.getPositionAt(diagStart),\n        startLineNumber = _a.lineNumber,\n        startColumn = _a.column;\n\n    var _b = model.getPositionAt(diagStart + diagLength),\n        endLineNumber = _b.lineNumber,\n        endColumn = _b.column;\n\n    return {\n      severity: this._tsDiagnosticCategoryToMarkerSeverity(diag.category),\n      startLineNumber: startLineNumber,\n      startColumn: startColumn,\n      endLineNumber: endLineNumber,\n      endColumn: endColumn,\n      message: flattenDiagnosticMessageText(diag.messageText, '\\n'),\n      code: diag.code.toString(),\n      tags: diag.reportsUnnecessary ? [monaco.MarkerTag.Unnecessary] : [],\n      relatedInformation: this._convertRelatedInformation(model, diag.relatedInformation)\n    };\n  };\n\n  DiagnosticsAdapter.prototype._convertRelatedInformation = function (model, relatedInformation) {\n    if (!relatedInformation) {\n      return;\n    }\n\n    var result = [];\n    relatedInformation.forEach(function (info) {\n      var relatedResource = model;\n\n      if (info.file) {\n        var relatedResourceUri = monaco.Uri.parse(info.file.fileName);\n        relatedResource = monaco.editor.getModel(relatedResourceUri);\n      }\n\n      if (!relatedResource) {\n        return;\n      }\n\n      var infoStart = info.start || 0;\n      var infoLength = info.length || 1;\n\n      var _a = relatedResource.getPositionAt(infoStart),\n          startLineNumber = _a.lineNumber,\n          startColumn = _a.column;\n\n      var _b = relatedResource.getPositionAt(infoStart + infoLength),\n          endLineNumber = _b.lineNumber,\n          endColumn = _b.column;\n\n      result.push({\n        resource: relatedResource.uri,\n        startLineNumber: startLineNumber,\n        startColumn: startColumn,\n        endLineNumber: endLineNumber,\n        endColumn: endColumn,\n        message: flattenDiagnosticMessageText(info.messageText, '\\n')\n      });\n    });\n    return result;\n  };\n\n  DiagnosticsAdapter.prototype._tsDiagnosticCategoryToMarkerSeverity = function (category) {\n    switch (category) {\n      case DiagnosticCategory.Error:\n        return monaco.MarkerSeverity.Error;\n\n      case DiagnosticCategory.Message:\n        return monaco.MarkerSeverity.Info;\n\n      case DiagnosticCategory.Warning:\n        return monaco.MarkerSeverity.Warning;\n\n      case DiagnosticCategory.Suggestion:\n        return monaco.MarkerSeverity.Hint;\n    }\n\n    return monaco.MarkerSeverity.Info;\n  };\n\n  return DiagnosticsAdapter;\n}(Adapter);\n\nexport { DiagnosticsAdapter };\n\nvar SuggestAdapter =\n/** @class */\nfunction (_super) {\n  __extends(SuggestAdapter, _super);\n\n  function SuggestAdapter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(SuggestAdapter.prototype, \"triggerCharacters\", {\n    get: function () {\n      return ['.'];\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  SuggestAdapter.prototype.provideCompletionItems = function (model, position, _context, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var wordInfo, wordRange, resource, offset, worker, info, suggestions;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            wordInfo = model.getWordUntilPosition(position);\n            wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\n            resource = model.uri;\n            offset = model.getOffsetAt(position);\n            return [4\n            /*yield*/\n            , this._worker(resource)];\n\n          case 1:\n            worker = _a.sent();\n            return [4\n            /*yield*/\n            , worker.getCompletionsAtPosition(resource.toString(), offset)];\n\n          case 2:\n            info = _a.sent();\n\n            if (!info || model.isDisposed()) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            suggestions = info.entries.map(function (entry) {\n              var range = wordRange;\n\n              if (entry.replacementSpan) {\n                var p1 = model.getPositionAt(entry.replacementSpan.start);\n                var p2 = model.getPositionAt(entry.replacementSpan.start + entry.replacementSpan.length);\n                range = new Range(p1.lineNumber, p1.column, p2.lineNumber, p2.column);\n              }\n\n              return {\n                uri: resource,\n                position: position,\n                range: range,\n                label: entry.name,\n                insertText: entry.name,\n                sortText: entry.sortText,\n                kind: SuggestAdapter.convertKind(entry.kind)\n              };\n            });\n            return [2\n            /*return*/\n            , {\n              suggestions: suggestions\n            }];\n        }\n      });\n    });\n  };\n\n  SuggestAdapter.prototype.resolveCompletionItem = function (model, _position, item, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var myItem, resource, position, offset, worker, details;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            myItem = item;\n            resource = myItem.uri;\n            position = myItem.position;\n            offset = model.getOffsetAt(position);\n            return [4\n            /*yield*/\n            , this._worker(resource)];\n\n          case 1:\n            worker = _a.sent();\n            return [4\n            /*yield*/\n            , worker.getCompletionEntryDetails(resource.toString(), offset, myItem.label)];\n\n          case 2:\n            details = _a.sent();\n\n            if (!details || model.isDisposed()) {\n              return [2\n              /*return*/\n              , myItem];\n            }\n\n            return [2\n            /*return*/\n            , {\n              uri: resource,\n              position: position,\n              label: details.name,\n              kind: SuggestAdapter.convertKind(details.kind),\n              detail: displayPartsToString(details.displayParts),\n              documentation: {\n                value: displayPartsToString(details.documentation)\n              }\n            }];\n        }\n      });\n    });\n  };\n\n  SuggestAdapter.convertKind = function (kind) {\n    switch (kind) {\n      case Kind.primitiveType:\n      case Kind.keyword:\n        return monaco.languages.CompletionItemKind.Keyword;\n\n      case Kind.variable:\n      case Kind.localVariable:\n        return monaco.languages.CompletionItemKind.Variable;\n\n      case Kind.memberVariable:\n      case Kind.memberGetAccessor:\n      case Kind.memberSetAccessor:\n        return monaco.languages.CompletionItemKind.Field;\n\n      case Kind.function:\n      case Kind.memberFunction:\n      case Kind.constructSignature:\n      case Kind.callSignature:\n      case Kind.indexSignature:\n        return monaco.languages.CompletionItemKind.Function;\n\n      case Kind.enum:\n        return monaco.languages.CompletionItemKind.Enum;\n\n      case Kind.module:\n        return monaco.languages.CompletionItemKind.Module;\n\n      case Kind.class:\n        return monaco.languages.CompletionItemKind.Class;\n\n      case Kind.interface:\n        return monaco.languages.CompletionItemKind.Interface;\n\n      case Kind.warning:\n        return monaco.languages.CompletionItemKind.File;\n    }\n\n    return monaco.languages.CompletionItemKind.Property;\n  };\n\n  return SuggestAdapter;\n}(Adapter);\n\nexport { SuggestAdapter };\n\nvar SignatureHelpAdapter =\n/** @class */\nfunction (_super) {\n  __extends(SignatureHelpAdapter, _super);\n\n  function SignatureHelpAdapter() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.signatureHelpTriggerCharacters = ['(', ','];\n    return _this;\n  }\n\n  SignatureHelpAdapter.prototype.provideSignatureHelp = function (model, position, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var resource, offset, worker, info, ret;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            resource = model.uri;\n            offset = model.getOffsetAt(position);\n            return [4\n            /*yield*/\n            , this._worker(resource)];\n\n          case 1:\n            worker = _a.sent();\n            return [4\n            /*yield*/\n            , worker.getSignatureHelpItems(resource.toString(), offset)];\n\n          case 2:\n            info = _a.sent();\n\n            if (!info || model.isDisposed()) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            ret = {\n              activeSignature: info.selectedItemIndex,\n              activeParameter: info.argumentIndex,\n              signatures: []\n            };\n            info.items.forEach(function (item) {\n              var signature = {\n                label: '',\n                parameters: []\n              };\n              signature.documentation = displayPartsToString(item.documentation);\n              signature.label += displayPartsToString(item.prefixDisplayParts);\n              item.parameters.forEach(function (p, i, a) {\n                var label = displayPartsToString(p.displayParts);\n                var parameter = {\n                  label: label,\n                  documentation: displayPartsToString(p.documentation)\n                };\n                signature.label += label;\n                signature.parameters.push(parameter);\n\n                if (i < a.length - 1) {\n                  signature.label += displayPartsToString(item.separatorDisplayParts);\n                }\n              });\n              signature.label += displayPartsToString(item.suffixDisplayParts);\n              ret.signatures.push(signature);\n            });\n            return [2\n            /*return*/\n            , {\n              value: ret,\n              dispose: function () {}\n            }];\n        }\n      });\n    });\n  };\n\n  return SignatureHelpAdapter;\n}(Adapter);\n\nexport { SignatureHelpAdapter }; // --- hover ------\n\nvar QuickInfoAdapter =\n/** @class */\nfunction (_super) {\n  __extends(QuickInfoAdapter, _super);\n\n  function QuickInfoAdapter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  QuickInfoAdapter.prototype.provideHover = function (model, position, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var resource, offset, worker, info, documentation, tags, contents;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            resource = model.uri;\n            offset = model.getOffsetAt(position);\n            return [4\n            /*yield*/\n            , this._worker(resource)];\n\n          case 1:\n            worker = _a.sent();\n            return [4\n            /*yield*/\n            , worker.getQuickInfoAtPosition(resource.toString(), offset)];\n\n          case 2:\n            info = _a.sent();\n\n            if (!info || model.isDisposed()) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            documentation = displayPartsToString(info.documentation);\n            tags = info.tags ? info.tags.map(function (tag) {\n              var label = \"*@\" + tag.name + \"*\";\n\n              if (!tag.text) {\n                return label;\n              }\n\n              return label + (tag.text.match(/\\r\\n|\\n/g) ? ' \\n' + tag.text : \" - \" + tag.text);\n            }).join('  \\n\\n') : '';\n            contents = displayPartsToString(info.displayParts);\n            return [2\n            /*return*/\n            , {\n              range: this._textSpanToRange(model, info.textSpan),\n              contents: [{\n                value: '```js\\n' + contents + '\\n```\\n'\n              }, {\n                value: documentation + (tags ? '\\n\\n' + tags : '')\n              }]\n            }];\n        }\n      });\n    });\n  };\n\n  return QuickInfoAdapter;\n}(Adapter);\n\nexport { QuickInfoAdapter }; // --- occurrences ------\n\nvar OccurrencesAdapter =\n/** @class */\nfunction (_super) {\n  __extends(OccurrencesAdapter, _super);\n\n  function OccurrencesAdapter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  OccurrencesAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var resource, offset, worker, entries;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            resource = model.uri;\n            offset = model.getOffsetAt(position);\n            return [4\n            /*yield*/\n            , this._worker(resource)];\n\n          case 1:\n            worker = _a.sent();\n            return [4\n            /*yield*/\n            , worker.getOccurrencesAtPosition(resource.toString(), offset)];\n\n          case 2:\n            entries = _a.sent();\n\n            if (!entries || model.isDisposed()) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            return [2\n            /*return*/\n            , entries.map(function (entry) {\n              return {\n                range: _this._textSpanToRange(model, entry.textSpan),\n                kind: entry.isWriteAccess ? monaco.languages.DocumentHighlightKind.Write : monaco.languages.DocumentHighlightKind.Text\n              };\n            })];\n        }\n      });\n    });\n  };\n\n  return OccurrencesAdapter;\n}(Adapter);\n\nexport { OccurrencesAdapter }; // --- definition ------\n\nvar DefinitionAdapter =\n/** @class */\nfunction (_super) {\n  __extends(DefinitionAdapter, _super);\n\n  function DefinitionAdapter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DefinitionAdapter.prototype.provideDefinition = function (model, position, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var resource, offset, worker, entries, result, _i, entries_1, entry, uri, refModel;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            resource = model.uri;\n            offset = model.getOffsetAt(position);\n            return [4\n            /*yield*/\n            , this._worker(resource)];\n\n          case 1:\n            worker = _a.sent();\n            return [4\n            /*yield*/\n            , worker.getDefinitionAtPosition(resource.toString(), offset)];\n\n          case 2:\n            entries = _a.sent();\n\n            if (!entries || model.isDisposed()) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            result = [];\n\n            for (_i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n              entry = entries_1[_i];\n              uri = Uri.parse(entry.fileName);\n              refModel = monaco.editor.getModel(uri);\n\n              if (refModel) {\n                result.push({\n                  uri: uri,\n                  range: this._textSpanToRange(refModel, entry.textSpan)\n                });\n              }\n            }\n\n            return [2\n            /*return*/\n            , result];\n        }\n      });\n    });\n  };\n\n  return DefinitionAdapter;\n}(Adapter);\n\nexport { DefinitionAdapter }; // --- references ------\n\nvar ReferenceAdapter =\n/** @class */\nfunction (_super) {\n  __extends(ReferenceAdapter, _super);\n\n  function ReferenceAdapter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ReferenceAdapter.prototype.provideReferences = function (model, position, context, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var resource, offset, worker, entries, result, _i, entries_2, entry, uri, refModel;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            resource = model.uri;\n            offset = model.getOffsetAt(position);\n            return [4\n            /*yield*/\n            , this._worker(resource)];\n\n          case 1:\n            worker = _a.sent();\n            return [4\n            /*yield*/\n            , worker.getReferencesAtPosition(resource.toString(), offset)];\n\n          case 2:\n            entries = _a.sent();\n\n            if (!entries || model.isDisposed()) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            result = [];\n\n            for (_i = 0, entries_2 = entries; _i < entries_2.length; _i++) {\n              entry = entries_2[_i];\n              uri = Uri.parse(entry.fileName);\n              refModel = monaco.editor.getModel(uri);\n\n              if (refModel) {\n                result.push({\n                  uri: uri,\n                  range: this._textSpanToRange(refModel, entry.textSpan)\n                });\n              }\n            }\n\n            return [2\n            /*return*/\n            , result];\n        }\n      });\n    });\n  };\n\n  return ReferenceAdapter;\n}(Adapter);\n\nexport { ReferenceAdapter }; // --- outline ------\n\nvar OutlineAdapter =\n/** @class */\nfunction (_super) {\n  __extends(OutlineAdapter, _super);\n\n  function OutlineAdapter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  OutlineAdapter.prototype.provideDocumentSymbols = function (model, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var resource, worker, items, convert, result;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            resource = model.uri;\n            return [4\n            /*yield*/\n            , this._worker(resource)];\n\n          case 1:\n            worker = _a.sent();\n            return [4\n            /*yield*/\n            , worker.getNavigationBarItems(resource.toString())];\n\n          case 2:\n            items = _a.sent();\n\n            if (!items || model.isDisposed()) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            convert = function (bucket, item, containerLabel) {\n              var result = {\n                name: item.text,\n                detail: '',\n                kind: outlineTypeTable[item.kind] || monaco.languages.SymbolKind.Variable,\n                range: _this._textSpanToRange(model, item.spans[0]),\n                selectionRange: _this._textSpanToRange(model, item.spans[0]),\n                tags: [],\n                containerName: containerLabel\n              };\n\n              if (item.childItems && item.childItems.length > 0) {\n                for (var _i = 0, _a = item.childItems; _i < _a.length; _i++) {\n                  var child = _a[_i];\n                  convert(bucket, child, result.name);\n                }\n              }\n\n              bucket.push(result);\n            };\n\n            result = [];\n            items.forEach(function (item) {\n              return convert(result, item);\n            });\n            return [2\n            /*return*/\n            , result];\n        }\n      });\n    });\n  };\n\n  return OutlineAdapter;\n}(Adapter);\n\nexport { OutlineAdapter };\n\nvar Kind =\n/** @class */\nfunction () {\n  function Kind() {}\n\n  Kind.unknown = '';\n  Kind.keyword = 'keyword';\n  Kind.script = 'script';\n  Kind.module = 'module';\n  Kind.class = 'class';\n  Kind.interface = 'interface';\n  Kind.type = 'type';\n  Kind.enum = 'enum';\n  Kind.variable = 'var';\n  Kind.localVariable = 'local var';\n  Kind.function = 'function';\n  Kind.localFunction = 'local function';\n  Kind.memberFunction = 'method';\n  Kind.memberGetAccessor = 'getter';\n  Kind.memberSetAccessor = 'setter';\n  Kind.memberVariable = 'property';\n  Kind.constructorImplementation = 'constructor';\n  Kind.callSignature = 'call';\n  Kind.indexSignature = 'index';\n  Kind.constructSignature = 'construct';\n  Kind.parameter = 'parameter';\n  Kind.typeParameter = 'type parameter';\n  Kind.primitiveType = 'primitive type';\n  Kind.label = 'label';\n  Kind.alias = 'alias';\n  Kind.const = 'const';\n  Kind.let = 'let';\n  Kind.warning = 'warning';\n  return Kind;\n}();\n\nexport { Kind };\nvar outlineTypeTable = Object.create(null);\noutlineTypeTable[Kind.module] = monaco.languages.SymbolKind.Module;\noutlineTypeTable[Kind.class] = monaco.languages.SymbolKind.Class;\noutlineTypeTable[Kind.enum] = monaco.languages.SymbolKind.Enum;\noutlineTypeTable[Kind.interface] = monaco.languages.SymbolKind.Interface;\noutlineTypeTable[Kind.memberFunction] = monaco.languages.SymbolKind.Method;\noutlineTypeTable[Kind.memberVariable] = monaco.languages.SymbolKind.Property;\noutlineTypeTable[Kind.memberGetAccessor] = monaco.languages.SymbolKind.Property;\noutlineTypeTable[Kind.memberSetAccessor] = monaco.languages.SymbolKind.Property;\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\noutlineTypeTable[Kind.const] = monaco.languages.SymbolKind.Variable;\noutlineTypeTable[Kind.localVariable] = monaco.languages.SymbolKind.Variable;\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\noutlineTypeTable[Kind.function] = monaco.languages.SymbolKind.Function;\noutlineTypeTable[Kind.localFunction] = monaco.languages.SymbolKind.Function; // --- formatting ----\n\nvar FormatHelper =\n/** @class */\nfunction (_super) {\n  __extends(FormatHelper, _super);\n\n  function FormatHelper() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FormatHelper._convertOptions = function (options) {\n    return {\n      ConvertTabsToSpaces: options.insertSpaces,\n      TabSize: options.tabSize,\n      IndentSize: options.tabSize,\n      IndentStyle: IndentStyle.Smart,\n      NewLineCharacter: '\\n',\n      InsertSpaceAfterCommaDelimiter: true,\n      InsertSpaceAfterSemicolonInForStatements: true,\n      InsertSpaceBeforeAndAfterBinaryOperators: true,\n      InsertSpaceAfterKeywordsInControlFlowStatements: true,\n      InsertSpaceAfterFunctionKeywordForAnonymousFunctions: true,\n      InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis: false,\n      InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets: false,\n      InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces: false,\n      PlaceOpenBraceOnNewLineForControlBlocks: false,\n      PlaceOpenBraceOnNewLineForFunctions: false\n    };\n  };\n\n  FormatHelper.prototype._convertTextChanges = function (model, change) {\n    return {\n      text: change.newText,\n      range: this._textSpanToRange(model, change.span)\n    };\n  };\n\n  return FormatHelper;\n}(Adapter);\n\nexport { FormatHelper };\n\nvar FormatAdapter =\n/** @class */\nfunction (_super) {\n  __extends(FormatAdapter, _super);\n\n  function FormatAdapter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FormatAdapter.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var resource, startOffset, endOffset, worker, edits;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            resource = model.uri;\n            startOffset = model.getOffsetAt({\n              lineNumber: range.startLineNumber,\n              column: range.startColumn\n            });\n            endOffset = model.getOffsetAt({\n              lineNumber: range.endLineNumber,\n              column: range.endColumn\n            });\n            return [4\n            /*yield*/\n            , this._worker(resource)];\n\n          case 1:\n            worker = _a.sent();\n            return [4\n            /*yield*/\n            , worker.getFormattingEditsForRange(resource.toString(), startOffset, endOffset, FormatHelper._convertOptions(options))];\n\n          case 2:\n            edits = _a.sent();\n\n            if (!edits || model.isDisposed()) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            return [2\n            /*return*/\n            , edits.map(function (edit) {\n              return _this._convertTextChanges(model, edit);\n            })];\n        }\n      });\n    });\n  };\n\n  return FormatAdapter;\n}(FormatHelper);\n\nexport { FormatAdapter };\n\nvar FormatOnTypeAdapter =\n/** @class */\nfunction (_super) {\n  __extends(FormatOnTypeAdapter, _super);\n\n  function FormatOnTypeAdapter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Object.defineProperty(FormatOnTypeAdapter.prototype, \"autoFormatTriggerCharacters\", {\n    get: function () {\n      return [';', '}', '\\n'];\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  FormatOnTypeAdapter.prototype.provideOnTypeFormattingEdits = function (model, position, ch, options, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var resource, offset, worker, edits;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            resource = model.uri;\n            offset = model.getOffsetAt(position);\n            return [4\n            /*yield*/\n            , this._worker(resource)];\n\n          case 1:\n            worker = _a.sent();\n            return [4\n            /*yield*/\n            , worker.getFormattingEditsAfterKeystroke(resource.toString(), offset, ch, FormatHelper._convertOptions(options))];\n\n          case 2:\n            edits = _a.sent();\n\n            if (!edits || model.isDisposed()) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            return [2\n            /*return*/\n            , edits.map(function (edit) {\n              return _this._convertTextChanges(model, edit);\n            })];\n        }\n      });\n    });\n  };\n\n  return FormatOnTypeAdapter;\n}(FormatHelper);\n\nexport { FormatOnTypeAdapter }; // --- code actions ------\n\nvar CodeActionAdaptor =\n/** @class */\nfunction (_super) {\n  __extends(CodeActionAdaptor, _super);\n\n  function CodeActionAdaptor() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  CodeActionAdaptor.prototype.provideCodeActions = function (model, range, context, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var resource, start, end, formatOptions, errorCodes, worker, codeFixes, actions;\n\n      var _this = this;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            resource = model.uri;\n            start = model.getOffsetAt({\n              lineNumber: range.startLineNumber,\n              column: range.startColumn\n            });\n            end = model.getOffsetAt({\n              lineNumber: range.endLineNumber,\n              column: range.endColumn\n            });\n            formatOptions = FormatHelper._convertOptions(model.getOptions());\n            errorCodes = context.markers.filter(function (m) {\n              return m.code;\n            }).map(function (m) {\n              return m.code;\n            }).map(Number);\n            return [4\n            /*yield*/\n            , this._worker(resource)];\n\n          case 1:\n            worker = _a.sent();\n            return [4\n            /*yield*/\n            , worker.getCodeFixesAtPosition(resource.toString(), start, end, errorCodes, formatOptions)];\n\n          case 2:\n            codeFixes = _a.sent();\n\n            if (!codeFixes || model.isDisposed()) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            actions = codeFixes.filter(function (fix) {\n              // Removes any 'make a new file'-type code fix\n              return fix.changes.filter(function (change) {\n                return change.isNewFile;\n              }).length === 0;\n            }).map(function (fix) {\n              return _this._tsCodeFixActionToMonacoCodeAction(model, context, fix);\n            });\n            return [2\n            /*return*/\n            , {\n              actions: actions,\n              dispose: function () {}\n            }];\n        }\n      });\n    });\n  };\n\n  CodeActionAdaptor.prototype._tsCodeFixActionToMonacoCodeAction = function (model, context, codeFix) {\n    var edits = [];\n\n    for (var _i = 0, _a = codeFix.changes; _i < _a.length; _i++) {\n      var change = _a[_i];\n\n      for (var _b = 0, _c = change.textChanges; _b < _c.length; _b++) {\n        var textChange = _c[_b];\n        edits.push({\n          resource: model.uri,\n          edit: {\n            range: this._textSpanToRange(model, textChange.span),\n            text: textChange.newText\n          }\n        });\n      }\n    }\n\n    var action = {\n      title: codeFix.description,\n      edit: {\n        edits: edits\n      },\n      diagnostics: context.markers,\n      kind: \"quickfix\"\n    };\n    return action;\n  };\n\n  return CodeActionAdaptor;\n}(FormatHelper);\n\nexport { CodeActionAdaptor }; // --- rename ----\n\nvar RenameAdapter =\n/** @class */\nfunction (_super) {\n  __extends(RenameAdapter, _super);\n\n  function RenameAdapter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RenameAdapter.prototype.provideRenameEdits = function (model, position, newName, token) {\n    return __awaiter(this, void 0, void 0, function () {\n      var resource, fileName, offset, worker, renameInfo, renameLocations, edits, _i, renameLocations_1, renameLocation;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            resource = model.uri;\n            fileName = resource.toString();\n            offset = model.getOffsetAt(position);\n            return [4\n            /*yield*/\n            , this._worker(resource)];\n\n          case 1:\n            worker = _a.sent();\n            return [4\n            /*yield*/\n            , worker.getRenameInfo(fileName, offset, {\n              allowRenameOfImportPath: false\n            })];\n\n          case 2:\n            renameInfo = _a.sent();\n\n            if (renameInfo.canRename === false) {\n              // use explicit comparison so that the discriminated union gets resolved properly\n              return [2\n              /*return*/\n              , {\n                edits: [],\n                rejectReason: renameInfo.localizedErrorMessage\n              }];\n            }\n\n            if (renameInfo.fileToRename !== undefined) {\n              throw new Error(\"Renaming files is not supported.\");\n            }\n\n            return [4\n            /*yield*/\n            , worker.findRenameLocations(fileName, offset,\n            /*strings*/\n            false,\n            /*comments*/\n            false,\n            /*prefixAndSuffix*/\n            false)];\n\n          case 3:\n            renameLocations = _a.sent();\n\n            if (!renameLocations || model.isDisposed()) {\n              return [2\n              /*return*/\n              ];\n            }\n\n            edits = [];\n\n            for (_i = 0, renameLocations_1 = renameLocations; _i < renameLocations_1.length; _i++) {\n              renameLocation = renameLocations_1[_i];\n              edits.push({\n                resource: monaco.Uri.parse(renameLocation.fileName),\n                edit: {\n                  range: this._textSpanToRange(model, renameLocation.textSpan),\n                  text: newName\n                }\n              });\n            }\n\n            return [2\n            /*return*/\n            , {\n              edits: edits\n            }];\n        }\n      });\n    });\n  };\n\n  return RenameAdapter;\n}(Adapter);\n\nexport { RenameAdapter };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/language/typescript/languageFeatures.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Uri","monaco","Range","IndentStyle","flattenDiagnosticMessageText","diag","newLine","indent","undefined","i","messageText","_i","_a","kid","displayPartsToString","displayParts","map","displayPart","text","join","Adapter","_worker","_textSpanToRange","model","span","p1","getPositionAt","start","p2","startLineNumber","lineNumber","startColumn","column","endLineNumber","endColumn","DiagnosticCategory","DiagnosticsAdapter","_super","_defaults","_selector","worker","_this","_disposables","_listener","onModelAdd","getModeId","handle","changeSubscription","onDidChangeContent","clearTimeout","setTimeout","_doValidate","uri","toString","dispose","onModelRemoved","editor","setModelMarkers","key","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","event","getModels","recomputeDiagostics","onDidChange","onDidExtraLibsChange","forEach","promises","noSyntaxValidation","noSemanticValidation","noSuggestionDiagnostics","diagnostics","markers","_b","isDisposed","getDiagnosticsOptions","getSyntacticDiagnostics","getSemanticDiagnostics","getSuggestionDiagnostics","all","reduce","c","concat","filter","diagnosticCodesToIgnore","indexOf","code","_convertDiagnostics","diagStart","diagLength","severity","_tsDiagnosticCategoryToMarkerSeverity","category","message","tags","reportsUnnecessary","MarkerTag","Unnecessary","relatedInformation","_convertRelatedInformation","info","relatedResource","file","relatedResourceUri","parse","fileName","getModel","infoStart","infoLength","resource","Error","MarkerSeverity","Message","Info","Warning","Suggestion","Hint","SuggestAdapter","arguments","defineProperty","get","enumerable","configurable","provideCompletionItems","position","_context","token","wordInfo","wordRange","offset","suggestions","getWordUntilPosition","getOffsetAt","getCompletionsAtPosition","entries","entry","range","replacementSpan","name","insertText","sortText","kind","convertKind","resolveCompletionItem","_position","item","myItem","details","getCompletionEntryDetails","detail","documentation","Kind","primitiveType","keyword","languages","CompletionItemKind","Keyword","variable","localVariable","Variable","memberVariable","memberGetAccessor","memberSetAccessor","Field","function","memberFunction","constructSignature","callSignature","indexSignature","Function","enum","Enum","module","Module","class","Class","interface","Interface","warning","File","Property","SignatureHelpAdapter","signatureHelpTriggerCharacters","provideSignatureHelp","ret","getSignatureHelpItems","activeSignature","selectedItemIndex","activeParameter","argumentIndex","signatures","items","signature","parameters","prefixDisplayParts","a","parameter","separatorDisplayParts","suffixDisplayParts","QuickInfoAdapter","provideHover","contents","getQuickInfoAtPosition","tag","match","textSpan","OccurrencesAdapter","provideDocumentHighlights","getOccurrencesAtPosition","isWriteAccess","DocumentHighlightKind","Write","Text","DefinitionAdapter","provideDefinition","entries_1","refModel","getDefinitionAtPosition","ReferenceAdapter","provideReferences","context","entries_2","getReferencesAtPosition","OutlineAdapter","provideDocumentSymbols","convert","getNavigationBarItems","bucket","containerLabel","outlineTypeTable","SymbolKind","spans","selectionRange","containerName","childItems","child","unknown","script","type","localFunction","constructorImplementation","typeParameter","alias","const","let","Method","FormatHelper","_convertOptions","options","ConvertTabsToSpaces","insertSpaces","TabSize","tabSize","IndentSize","Smart","NewLineCharacter","InsertSpaceAfterCommaDelimiter","InsertSpaceAfterSemicolonInForStatements","InsertSpaceBeforeAndAfterBinaryOperators","InsertSpaceAfterKeywordsInControlFlowStatements","InsertSpaceAfterFunctionKeywordForAnonymousFunctions","InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis","InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets","InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces","PlaceOpenBraceOnNewLineForControlBlocks","PlaceOpenBraceOnNewLineForFunctions","_convertTextChanges","change","newText","FormatAdapter","provideDocumentRangeFormattingEdits","startOffset","endOffset","edits","getFormattingEditsForRange","edit","FormatOnTypeAdapter","provideOnTypeFormattingEdits","ch","getFormattingEditsAfterKeystroke","CodeActionAdaptor","provideCodeActions","end","formatOptions","errorCodes","codeFixes","actions","getOptions","m","Number","getCodeFixesAtPosition","fix","changes","isNewFile","_tsCodeFixActionToMonacoCodeAction","codeFix","_c","textChanges","textChange","action","title","description","RenameAdapter","provideRenameEdits","newName","renameInfo","renameLocations","renameLocations_1","renameLocation","getRenameInfo","allowRenameOfImportPath","canRename","rejectReason","localizedErrorMessage","fileToRename","findRenameLocations"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar Uri = monaco.Uri;\r\nvar Range = monaco.Range;\r\n//#region utils copied from typescript to prevent loading the entire typescriptServices ---\r\nvar IndentStyle;\r\n(function (IndentStyle) {\r\n    IndentStyle[IndentStyle[\"None\"] = 0] = \"None\";\r\n    IndentStyle[IndentStyle[\"Block\"] = 1] = \"Block\";\r\n    IndentStyle[IndentStyle[\"Smart\"] = 2] = \"Smart\";\r\n})(IndentStyle || (IndentStyle = {}));\r\nexport function flattenDiagnosticMessageText(diag, newLine, indent) {\r\n    if (indent === void 0) { indent = 0; }\r\n    if (typeof diag === \"string\") {\r\n        return diag;\r\n    }\r\n    else if (diag === undefined) {\r\n        return \"\";\r\n    }\r\n    var result = \"\";\r\n    if (indent) {\r\n        result += newLine;\r\n        for (var i = 0; i < indent; i++) {\r\n            result += \"  \";\r\n        }\r\n    }\r\n    result += diag.messageText;\r\n    indent++;\r\n    if (diag.next) {\r\n        for (var _i = 0, _a = diag.next; _i < _a.length; _i++) {\r\n            var kid = _a[_i];\r\n            result += flattenDiagnosticMessageText(kid, newLine, indent);\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction displayPartsToString(displayParts) {\r\n    if (displayParts) {\r\n        return displayParts.map(function (displayPart) { return displayPart.text; }).join(\"\");\r\n    }\r\n    return \"\";\r\n}\r\n//#endregion\r\nvar Adapter = /** @class */ (function () {\r\n    function Adapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    // protected _positionToOffset(model: monaco.editor.ITextModel, position: monaco.IPosition): number {\r\n    // \treturn model.getOffsetAt(position);\r\n    // }\r\n    // protected _offsetToPosition(model: monaco.editor.ITextModel, offset: number): monaco.IPosition {\r\n    // \treturn model.getPositionAt(offset);\r\n    // }\r\n    Adapter.prototype._textSpanToRange = function (model, span) {\r\n        var p1 = model.getPositionAt(span.start);\r\n        var p2 = model.getPositionAt(span.start + span.length);\r\n        var startLineNumber = p1.lineNumber, startColumn = p1.column;\r\n        var endLineNumber = p2.lineNumber, endColumn = p2.column;\r\n        return { startLineNumber: startLineNumber, startColumn: startColumn, endLineNumber: endLineNumber, endColumn: endColumn };\r\n    };\r\n    return Adapter;\r\n}());\r\nexport { Adapter };\r\n// --- diagnostics --- ---\r\nvar DiagnosticCategory;\r\n(function (DiagnosticCategory) {\r\n    DiagnosticCategory[DiagnosticCategory[\"Warning\"] = 0] = \"Warning\";\r\n    DiagnosticCategory[DiagnosticCategory[\"Error\"] = 1] = \"Error\";\r\n    DiagnosticCategory[DiagnosticCategory[\"Suggestion\"] = 2] = \"Suggestion\";\r\n    DiagnosticCategory[DiagnosticCategory[\"Message\"] = 3] = \"Message\";\r\n})(DiagnosticCategory || (DiagnosticCategory = {}));\r\nvar DiagnosticsAdapter = /** @class */ (function (_super) {\r\n    __extends(DiagnosticsAdapter, _super);\r\n    function DiagnosticsAdapter(_defaults, _selector, worker) {\r\n        var _this = _super.call(this, worker) || this;\r\n        _this._defaults = _defaults;\r\n        _this._selector = _selector;\r\n        _this._disposables = [];\r\n        _this._listener = Object.create(null);\r\n        var onModelAdd = function (model) {\r\n            if (model.getModeId() !== _selector) {\r\n                return;\r\n            }\r\n            var handle;\r\n            var changeSubscription = model.onDidChangeContent(function () {\r\n                clearTimeout(handle);\r\n                handle = setTimeout(function () { return _this._doValidate(model); }, 500);\r\n            });\r\n            _this._listener[model.uri.toString()] = {\r\n                dispose: function () {\r\n                    changeSubscription.dispose();\r\n                    clearTimeout(handle);\r\n                }\r\n            };\r\n            _this._doValidate(model);\r\n        };\r\n        var onModelRemoved = function (model) {\r\n            monaco.editor.setModelMarkers(model, _this._selector, []);\r\n            var key = model.uri.toString();\r\n            if (_this._listener[key]) {\r\n                _this._listener[key].dispose();\r\n                delete _this._listener[key];\r\n            }\r\n        };\r\n        _this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\r\n        _this._disposables.push(monaco.editor.onWillDisposeModel(onModelRemoved));\r\n        _this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\r\n            onModelRemoved(event.model);\r\n            onModelAdd(event.model);\r\n        }));\r\n        _this._disposables.push({\r\n            dispose: function () {\r\n                for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\r\n                    var model = _a[_i];\r\n                    onModelRemoved(model);\r\n                }\r\n            }\r\n        });\r\n        var recomputeDiagostics = function () {\r\n            // redo diagnostics when options change\r\n            for (var _i = 0, _a = monaco.editor.getModels(); _i < _a.length; _i++) {\r\n                var model = _a[_i];\r\n                onModelRemoved(model);\r\n                onModelAdd(model);\r\n            }\r\n        };\r\n        _this._disposables.push(_this._defaults.onDidChange(recomputeDiagostics));\r\n        _this._disposables.push(_this._defaults.onDidExtraLibsChange(recomputeDiagostics));\r\n        monaco.editor.getModels().forEach(onModelAdd);\r\n        return _this;\r\n    }\r\n    DiagnosticsAdapter.prototype.dispose = function () {\r\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\r\n        this._disposables = [];\r\n    };\r\n    DiagnosticsAdapter.prototype._doValidate = function (model) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var worker, promises, _a, noSyntaxValidation, noSemanticValidation, noSuggestionDiagnostics, diagnostics, markers;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this._worker(model.uri)];\r\n                    case 1:\r\n                        worker = _b.sent();\r\n                        if (model.isDisposed()) {\r\n                            // model was disposed in the meantime\r\n                            return [2 /*return*/];\r\n                        }\r\n                        promises = [];\r\n                        _a = this._defaults.getDiagnosticsOptions(), noSyntaxValidation = _a.noSyntaxValidation, noSemanticValidation = _a.noSemanticValidation, noSuggestionDiagnostics = _a.noSuggestionDiagnostics;\r\n                        if (!noSyntaxValidation) {\r\n                            promises.push(worker.getSyntacticDiagnostics(model.uri.toString()));\r\n                        }\r\n                        if (!noSemanticValidation) {\r\n                            promises.push(worker.getSemanticDiagnostics(model.uri.toString()));\r\n                        }\r\n                        if (!noSuggestionDiagnostics) {\r\n                            promises.push(worker.getSuggestionDiagnostics(model.uri.toString()));\r\n                        }\r\n                        return [4 /*yield*/, Promise.all(promises)];\r\n                    case 2:\r\n                        diagnostics = _b.sent();\r\n                        if (!diagnostics || model.isDisposed()) {\r\n                            // model was disposed in the meantime\r\n                            return [2 /*return*/];\r\n                        }\r\n                        markers = diagnostics\r\n                            .reduce(function (p, c) { return c.concat(p); }, [])\r\n                            .filter(function (d) { return (_this._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore || []).indexOf(d.code) === -1; })\r\n                            .map(function (d) { return _this._convertDiagnostics(model, d); });\r\n                        monaco.editor.setModelMarkers(model, this._selector, markers);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DiagnosticsAdapter.prototype._convertDiagnostics = function (model, diag) {\r\n        var diagStart = diag.start || 0;\r\n        var diagLength = diag.length || 1;\r\n        var _a = model.getPositionAt(diagStart), startLineNumber = _a.lineNumber, startColumn = _a.column;\r\n        var _b = model.getPositionAt(diagStart + diagLength), endLineNumber = _b.lineNumber, endColumn = _b.column;\r\n        return {\r\n            severity: this._tsDiagnosticCategoryToMarkerSeverity(diag.category),\r\n            startLineNumber: startLineNumber,\r\n            startColumn: startColumn,\r\n            endLineNumber: endLineNumber,\r\n            endColumn: endColumn,\r\n            message: flattenDiagnosticMessageText(diag.messageText, '\\n'),\r\n            code: diag.code.toString(),\r\n            tags: diag.reportsUnnecessary ? [monaco.MarkerTag.Unnecessary] : [],\r\n            relatedInformation: this._convertRelatedInformation(model, diag.relatedInformation),\r\n        };\r\n    };\r\n    DiagnosticsAdapter.prototype._convertRelatedInformation = function (model, relatedInformation) {\r\n        if (!relatedInformation) {\r\n            return;\r\n        }\r\n        var result = [];\r\n        relatedInformation.forEach(function (info) {\r\n            var relatedResource = model;\r\n            if (info.file) {\r\n                var relatedResourceUri = monaco.Uri.parse(info.file.fileName);\r\n                relatedResource = monaco.editor.getModel(relatedResourceUri);\r\n            }\r\n            if (!relatedResource) {\r\n                return;\r\n            }\r\n            var infoStart = info.start || 0;\r\n            var infoLength = info.length || 1;\r\n            var _a = relatedResource.getPositionAt(infoStart), startLineNumber = _a.lineNumber, startColumn = _a.column;\r\n            var _b = relatedResource.getPositionAt(infoStart + infoLength), endLineNumber = _b.lineNumber, endColumn = _b.column;\r\n            result.push({\r\n                resource: relatedResource.uri,\r\n                startLineNumber: startLineNumber,\r\n                startColumn: startColumn,\r\n                endLineNumber: endLineNumber,\r\n                endColumn: endColumn,\r\n                message: flattenDiagnosticMessageText(info.messageText, '\\n')\r\n            });\r\n        });\r\n        return result;\r\n    };\r\n    DiagnosticsAdapter.prototype._tsDiagnosticCategoryToMarkerSeverity = function (category) {\r\n        switch (category) {\r\n            case DiagnosticCategory.Error: return monaco.MarkerSeverity.Error;\r\n            case DiagnosticCategory.Message: return monaco.MarkerSeverity.Info;\r\n            case DiagnosticCategory.Warning: return monaco.MarkerSeverity.Warning;\r\n            case DiagnosticCategory.Suggestion: return monaco.MarkerSeverity.Hint;\r\n        }\r\n        return monaco.MarkerSeverity.Info;\r\n    };\r\n    return DiagnosticsAdapter;\r\n}(Adapter));\r\nexport { DiagnosticsAdapter };\r\nvar SuggestAdapter = /** @class */ (function (_super) {\r\n    __extends(SuggestAdapter, _super);\r\n    function SuggestAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(SuggestAdapter.prototype, \"triggerCharacters\", {\r\n        get: function () {\r\n            return ['.'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SuggestAdapter.prototype.provideCompletionItems = function (model, position, _context, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var wordInfo, wordRange, resource, offset, worker, info, suggestions;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        wordInfo = model.getWordUntilPosition(position);\r\n                        wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getCompletionsAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        info = _a.sent();\r\n                        if (!info || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        suggestions = info.entries.map(function (entry) {\r\n                            var range = wordRange;\r\n                            if (entry.replacementSpan) {\r\n                                var p1 = model.getPositionAt(entry.replacementSpan.start);\r\n                                var p2 = model.getPositionAt(entry.replacementSpan.start + entry.replacementSpan.length);\r\n                                range = new Range(p1.lineNumber, p1.column, p2.lineNumber, p2.column);\r\n                            }\r\n                            return {\r\n                                uri: resource,\r\n                                position: position,\r\n                                range: range,\r\n                                label: entry.name,\r\n                                insertText: entry.name,\r\n                                sortText: entry.sortText,\r\n                                kind: SuggestAdapter.convertKind(entry.kind)\r\n                            };\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                suggestions: suggestions\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SuggestAdapter.prototype.resolveCompletionItem = function (model, _position, item, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var myItem, resource, position, offset, worker, details;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        myItem = item;\r\n                        resource = myItem.uri;\r\n                        position = myItem.position;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getCompletionEntryDetails(resource.toString(), offset, myItem.label)];\r\n                    case 2:\r\n                        details = _a.sent();\r\n                        if (!details || model.isDisposed()) {\r\n                            return [2 /*return*/, myItem];\r\n                        }\r\n                        return [2 /*return*/, {\r\n                                uri: resource,\r\n                                position: position,\r\n                                label: details.name,\r\n                                kind: SuggestAdapter.convertKind(details.kind),\r\n                                detail: displayPartsToString(details.displayParts),\r\n                                documentation: {\r\n                                    value: displayPartsToString(details.documentation)\r\n                                }\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SuggestAdapter.convertKind = function (kind) {\r\n        switch (kind) {\r\n            case Kind.primitiveType:\r\n            case Kind.keyword:\r\n                return monaco.languages.CompletionItemKind.Keyword;\r\n            case Kind.variable:\r\n            case Kind.localVariable:\r\n                return monaco.languages.CompletionItemKind.Variable;\r\n            case Kind.memberVariable:\r\n            case Kind.memberGetAccessor:\r\n            case Kind.memberSetAccessor:\r\n                return monaco.languages.CompletionItemKind.Field;\r\n            case Kind.function:\r\n            case Kind.memberFunction:\r\n            case Kind.constructSignature:\r\n            case Kind.callSignature:\r\n            case Kind.indexSignature:\r\n                return monaco.languages.CompletionItemKind.Function;\r\n            case Kind.enum:\r\n                return monaco.languages.CompletionItemKind.Enum;\r\n            case Kind.module:\r\n                return monaco.languages.CompletionItemKind.Module;\r\n            case Kind.class:\r\n                return monaco.languages.CompletionItemKind.Class;\r\n            case Kind.interface:\r\n                return monaco.languages.CompletionItemKind.Interface;\r\n            case Kind.warning:\r\n                return monaco.languages.CompletionItemKind.File;\r\n        }\r\n        return monaco.languages.CompletionItemKind.Property;\r\n    };\r\n    return SuggestAdapter;\r\n}(Adapter));\r\nexport { SuggestAdapter };\r\nvar SignatureHelpAdapter = /** @class */ (function (_super) {\r\n    __extends(SignatureHelpAdapter, _super);\r\n    function SignatureHelpAdapter() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.signatureHelpTriggerCharacters = ['(', ','];\r\n        return _this;\r\n    }\r\n    SignatureHelpAdapter.prototype.provideSignatureHelp = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, info, ret;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getSignatureHelpItems(resource.toString(), offset)];\r\n                    case 2:\r\n                        info = _a.sent();\r\n                        if (!info || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        ret = {\r\n                            activeSignature: info.selectedItemIndex,\r\n                            activeParameter: info.argumentIndex,\r\n                            signatures: []\r\n                        };\r\n                        info.items.forEach(function (item) {\r\n                            var signature = {\r\n                                label: '',\r\n                                parameters: []\r\n                            };\r\n                            signature.documentation = displayPartsToString(item.documentation);\r\n                            signature.label += displayPartsToString(item.prefixDisplayParts);\r\n                            item.parameters.forEach(function (p, i, a) {\r\n                                var label = displayPartsToString(p.displayParts);\r\n                                var parameter = {\r\n                                    label: label,\r\n                                    documentation: displayPartsToString(p.documentation)\r\n                                };\r\n                                signature.label += label;\r\n                                signature.parameters.push(parameter);\r\n                                if (i < a.length - 1) {\r\n                                    signature.label += displayPartsToString(item.separatorDisplayParts);\r\n                                }\r\n                            });\r\n                            signature.label += displayPartsToString(item.suffixDisplayParts);\r\n                            ret.signatures.push(signature);\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                value: ret,\r\n                                dispose: function () { }\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return SignatureHelpAdapter;\r\n}(Adapter));\r\nexport { SignatureHelpAdapter };\r\n// --- hover ------\r\nvar QuickInfoAdapter = /** @class */ (function (_super) {\r\n    __extends(QuickInfoAdapter, _super);\r\n    function QuickInfoAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    QuickInfoAdapter.prototype.provideHover = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, info, documentation, tags, contents;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getQuickInfoAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        info = _a.sent();\r\n                        if (!info || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        documentation = displayPartsToString(info.documentation);\r\n                        tags = info.tags ? info.tags.map(function (tag) {\r\n                            var label = \"*@\" + tag.name + \"*\";\r\n                            if (!tag.text) {\r\n                                return label;\r\n                            }\r\n                            return label + (tag.text.match(/\\r\\n|\\n/g) ? ' \\n' + tag.text : \" - \" + tag.text);\r\n                        }).join('  \\n\\n') : '';\r\n                        contents = displayPartsToString(info.displayParts);\r\n                        return [2 /*return*/, {\r\n                                range: this._textSpanToRange(model, info.textSpan),\r\n                                contents: [{\r\n                                        value: '```js\\n' + contents + '\\n```\\n'\r\n                                    }, {\r\n                                        value: documentation + (tags ? '\\n\\n' + tags : '')\r\n                                    }]\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return QuickInfoAdapter;\r\n}(Adapter));\r\nexport { QuickInfoAdapter };\r\n// --- occurrences ------\r\nvar OccurrencesAdapter = /** @class */ (function (_super) {\r\n    __extends(OccurrencesAdapter, _super);\r\n    function OccurrencesAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OccurrencesAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, entries;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getOccurrencesAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (!entries || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [2 /*return*/, entries.map(function (entry) {\r\n                                return {\r\n                                    range: _this._textSpanToRange(model, entry.textSpan),\r\n                                    kind: entry.isWriteAccess ? monaco.languages.DocumentHighlightKind.Write : monaco.languages.DocumentHighlightKind.Text\r\n                                };\r\n                            })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OccurrencesAdapter;\r\n}(Adapter));\r\nexport { OccurrencesAdapter };\r\n// --- definition ------\r\nvar DefinitionAdapter = /** @class */ (function (_super) {\r\n    __extends(DefinitionAdapter, _super);\r\n    function DefinitionAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DefinitionAdapter.prototype.provideDefinition = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, entries, result, _i, entries_1, entry, uri, refModel;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getDefinitionAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (!entries || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        result = [];\r\n                        for (_i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\r\n                            entry = entries_1[_i];\r\n                            uri = Uri.parse(entry.fileName);\r\n                            refModel = monaco.editor.getModel(uri);\r\n                            if (refModel) {\r\n                                result.push({\r\n                                    uri: uri,\r\n                                    range: this._textSpanToRange(refModel, entry.textSpan)\r\n                                });\r\n                            }\r\n                        }\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return DefinitionAdapter;\r\n}(Adapter));\r\nexport { DefinitionAdapter };\r\n// --- references ------\r\nvar ReferenceAdapter = /** @class */ (function (_super) {\r\n    __extends(ReferenceAdapter, _super);\r\n    function ReferenceAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ReferenceAdapter.prototype.provideReferences = function (model, position, context, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, entries, result, _i, entries_2, entry, uri, refModel;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getReferencesAtPosition(resource.toString(), offset)];\r\n                    case 2:\r\n                        entries = _a.sent();\r\n                        if (!entries || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        result = [];\r\n                        for (_i = 0, entries_2 = entries; _i < entries_2.length; _i++) {\r\n                            entry = entries_2[_i];\r\n                            uri = Uri.parse(entry.fileName);\r\n                            refModel = monaco.editor.getModel(uri);\r\n                            if (refModel) {\r\n                                result.push({\r\n                                    uri: uri,\r\n                                    range: this._textSpanToRange(refModel, entry.textSpan)\r\n                                });\r\n                            }\r\n                        }\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return ReferenceAdapter;\r\n}(Adapter));\r\nexport { ReferenceAdapter };\r\n// --- outline ------\r\nvar OutlineAdapter = /** @class */ (function (_super) {\r\n    __extends(OutlineAdapter, _super);\r\n    function OutlineAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OutlineAdapter.prototype.provideDocumentSymbols = function (model, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, worker, items, convert, result;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getNavigationBarItems(resource.toString())];\r\n                    case 2:\r\n                        items = _a.sent();\r\n                        if (!items || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        convert = function (bucket, item, containerLabel) {\r\n                            var result = {\r\n                                name: item.text,\r\n                                detail: '',\r\n                                kind: (outlineTypeTable[item.kind] || monaco.languages.SymbolKind.Variable),\r\n                                range: _this._textSpanToRange(model, item.spans[0]),\r\n                                selectionRange: _this._textSpanToRange(model, item.spans[0]),\r\n                                tags: [],\r\n                                containerName: containerLabel\r\n                            };\r\n                            if (item.childItems && item.childItems.length > 0) {\r\n                                for (var _i = 0, _a = item.childItems; _i < _a.length; _i++) {\r\n                                    var child = _a[_i];\r\n                                    convert(bucket, child, result.name);\r\n                                }\r\n                            }\r\n                            bucket.push(result);\r\n                        };\r\n                        result = [];\r\n                        items.forEach(function (item) { return convert(result, item); });\r\n                        return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return OutlineAdapter;\r\n}(Adapter));\r\nexport { OutlineAdapter };\r\nvar Kind = /** @class */ (function () {\r\n    function Kind() {\r\n    }\r\n    Kind.unknown = '';\r\n    Kind.keyword = 'keyword';\r\n    Kind.script = 'script';\r\n    Kind.module = 'module';\r\n    Kind.class = 'class';\r\n    Kind.interface = 'interface';\r\n    Kind.type = 'type';\r\n    Kind.enum = 'enum';\r\n    Kind.variable = 'var';\r\n    Kind.localVariable = 'local var';\r\n    Kind.function = 'function';\r\n    Kind.localFunction = 'local function';\r\n    Kind.memberFunction = 'method';\r\n    Kind.memberGetAccessor = 'getter';\r\n    Kind.memberSetAccessor = 'setter';\r\n    Kind.memberVariable = 'property';\r\n    Kind.constructorImplementation = 'constructor';\r\n    Kind.callSignature = 'call';\r\n    Kind.indexSignature = 'index';\r\n    Kind.constructSignature = 'construct';\r\n    Kind.parameter = 'parameter';\r\n    Kind.typeParameter = 'type parameter';\r\n    Kind.primitiveType = 'primitive type';\r\n    Kind.label = 'label';\r\n    Kind.alias = 'alias';\r\n    Kind.const = 'const';\r\n    Kind.let = 'let';\r\n    Kind.warning = 'warning';\r\n    return Kind;\r\n}());\r\nexport { Kind };\r\nvar outlineTypeTable = Object.create(null);\r\noutlineTypeTable[Kind.module] = monaco.languages.SymbolKind.Module;\r\noutlineTypeTable[Kind.class] = monaco.languages.SymbolKind.Class;\r\noutlineTypeTable[Kind.enum] = monaco.languages.SymbolKind.Enum;\r\noutlineTypeTable[Kind.interface] = monaco.languages.SymbolKind.Interface;\r\noutlineTypeTable[Kind.memberFunction] = monaco.languages.SymbolKind.Method;\r\noutlineTypeTable[Kind.memberVariable] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.memberGetAccessor] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.memberSetAccessor] = monaco.languages.SymbolKind.Property;\r\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.const] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.localVariable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.variable] = monaco.languages.SymbolKind.Variable;\r\noutlineTypeTable[Kind.function] = monaco.languages.SymbolKind.Function;\r\noutlineTypeTable[Kind.localFunction] = monaco.languages.SymbolKind.Function;\r\n// --- formatting ----\r\nvar FormatHelper = /** @class */ (function (_super) {\r\n    __extends(FormatHelper, _super);\r\n    function FormatHelper() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FormatHelper._convertOptions = function (options) {\r\n        return {\r\n            ConvertTabsToSpaces: options.insertSpaces,\r\n            TabSize: options.tabSize,\r\n            IndentSize: options.tabSize,\r\n            IndentStyle: IndentStyle.Smart,\r\n            NewLineCharacter: '\\n',\r\n            InsertSpaceAfterCommaDelimiter: true,\r\n            InsertSpaceAfterSemicolonInForStatements: true,\r\n            InsertSpaceBeforeAndAfterBinaryOperators: true,\r\n            InsertSpaceAfterKeywordsInControlFlowStatements: true,\r\n            InsertSpaceAfterFunctionKeywordForAnonymousFunctions: true,\r\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis: false,\r\n            InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets: false,\r\n            InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces: false,\r\n            PlaceOpenBraceOnNewLineForControlBlocks: false,\r\n            PlaceOpenBraceOnNewLineForFunctions: false\r\n        };\r\n    };\r\n    FormatHelper.prototype._convertTextChanges = function (model, change) {\r\n        return {\r\n            text: change.newText,\r\n            range: this._textSpanToRange(model, change.span)\r\n        };\r\n    };\r\n    return FormatHelper;\r\n}(Adapter));\r\nexport { FormatHelper };\r\nvar FormatAdapter = /** @class */ (function (_super) {\r\n    __extends(FormatAdapter, _super);\r\n    function FormatAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    FormatAdapter.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, startOffset, endOffset, worker, edits;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        startOffset = model.getOffsetAt({ lineNumber: range.startLineNumber, column: range.startColumn });\r\n                        endOffset = model.getOffsetAt({ lineNumber: range.endLineNumber, column: range.endColumn });\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getFormattingEditsForRange(resource.toString(), startOffset, endOffset, FormatHelper._convertOptions(options))];\r\n                    case 2:\r\n                        edits = _a.sent();\r\n                        if (!edits || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [2 /*return*/, edits.map(function (edit) { return _this._convertTextChanges(model, edit); })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return FormatAdapter;\r\n}(FormatHelper));\r\nexport { FormatAdapter };\r\nvar FormatOnTypeAdapter = /** @class */ (function (_super) {\r\n    __extends(FormatOnTypeAdapter, _super);\r\n    function FormatOnTypeAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(FormatOnTypeAdapter.prototype, \"autoFormatTriggerCharacters\", {\r\n        get: function () {\r\n            return [';', '}', '\\n'];\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FormatOnTypeAdapter.prototype.provideOnTypeFormattingEdits = function (model, position, ch, options, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, offset, worker, edits;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getFormattingEditsAfterKeystroke(resource.toString(), offset, ch, FormatHelper._convertOptions(options))];\r\n                    case 2:\r\n                        edits = _a.sent();\r\n                        if (!edits || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [2 /*return*/, edits.map(function (edit) { return _this._convertTextChanges(model, edit); })];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return FormatOnTypeAdapter;\r\n}(FormatHelper));\r\nexport { FormatOnTypeAdapter };\r\n// --- code actions ------\r\nvar CodeActionAdaptor = /** @class */ (function (_super) {\r\n    __extends(CodeActionAdaptor, _super);\r\n    function CodeActionAdaptor() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    CodeActionAdaptor.prototype.provideCodeActions = function (model, range, context, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, start, end, formatOptions, errorCodes, worker, codeFixes, actions;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        start = model.getOffsetAt({ lineNumber: range.startLineNumber, column: range.startColumn });\r\n                        end = model.getOffsetAt({ lineNumber: range.endLineNumber, column: range.endColumn });\r\n                        formatOptions = FormatHelper._convertOptions(model.getOptions());\r\n                        errorCodes = context.markers.filter(function (m) { return m.code; }).map(function (m) { return m.code; }).map(Number);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getCodeFixesAtPosition(resource.toString(), start, end, errorCodes, formatOptions)];\r\n                    case 2:\r\n                        codeFixes = _a.sent();\r\n                        if (!codeFixes || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        actions = codeFixes.filter(function (fix) {\r\n                            // Removes any 'make a new file'-type code fix\r\n                            return fix.changes.filter(function (change) { return change.isNewFile; }).length === 0;\r\n                        }).map(function (fix) {\r\n                            return _this._tsCodeFixActionToMonacoCodeAction(model, context, fix);\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                actions: actions,\r\n                                dispose: function () { }\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    CodeActionAdaptor.prototype._tsCodeFixActionToMonacoCodeAction = function (model, context, codeFix) {\r\n        var edits = [];\r\n        for (var _i = 0, _a = codeFix.changes; _i < _a.length; _i++) {\r\n            var change = _a[_i];\r\n            for (var _b = 0, _c = change.textChanges; _b < _c.length; _b++) {\r\n                var textChange = _c[_b];\r\n                edits.push({\r\n                    resource: model.uri,\r\n                    edit: {\r\n                        range: this._textSpanToRange(model, textChange.span),\r\n                        text: textChange.newText\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        var action = {\r\n            title: codeFix.description,\r\n            edit: { edits: edits },\r\n            diagnostics: context.markers,\r\n            kind: \"quickfix\"\r\n        };\r\n        return action;\r\n    };\r\n    return CodeActionAdaptor;\r\n}(FormatHelper));\r\nexport { CodeActionAdaptor };\r\n// --- rename ----\r\nvar RenameAdapter = /** @class */ (function (_super) {\r\n    __extends(RenameAdapter, _super);\r\n    function RenameAdapter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    RenameAdapter.prototype.provideRenameEdits = function (model, position, newName, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var resource, fileName, offset, worker, renameInfo, renameLocations, edits, _i, renameLocations_1, renameLocation;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        resource = model.uri;\r\n                        fileName = resource.toString();\r\n                        offset = model.getOffsetAt(position);\r\n                        return [4 /*yield*/, this._worker(resource)];\r\n                    case 1:\r\n                        worker = _a.sent();\r\n                        return [4 /*yield*/, worker.getRenameInfo(fileName, offset, { allowRenameOfImportPath: false })];\r\n                    case 2:\r\n                        renameInfo = _a.sent();\r\n                        if (renameInfo.canRename === false) { // use explicit comparison so that the discriminated union gets resolved properly\r\n                            return [2 /*return*/, {\r\n                                    edits: [],\r\n                                    rejectReason: renameInfo.localizedErrorMessage\r\n                                }];\r\n                        }\r\n                        if (renameInfo.fileToRename !== undefined) {\r\n                            throw new Error(\"Renaming files is not supported.\");\r\n                        }\r\n                        return [4 /*yield*/, worker.findRenameLocations(fileName, offset, /*strings*/ false, /*comments*/ false, /*prefixAndSuffix*/ false)];\r\n                    case 3:\r\n                        renameLocations = _a.sent();\r\n                        if (!renameLocations || model.isDisposed()) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        edits = [];\r\n                        for (_i = 0, renameLocations_1 = renameLocations; _i < renameLocations_1.length; _i++) {\r\n                            renameLocation = renameLocations_1[_i];\r\n                            edits.push({\r\n                                resource: monaco.Uri.parse(renameLocation.fileName),\r\n                                edit: {\r\n                                    range: this._textSpanToRange(model, renameLocation.textSpan),\r\n                                    text: newName\r\n                                }\r\n                            });\r\n                        }\r\n                        return [2 /*return*/, { edits: edits }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RenameAdapter;\r\n}(Adapter));\r\nexport { RenameAdapter };\r\n"]},"metadata":{},"sourceType":"module"}