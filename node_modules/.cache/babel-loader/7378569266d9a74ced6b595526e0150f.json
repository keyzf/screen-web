{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport { Action } from '../../../base/common/actions.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { ICommandService } from '../../commands/common/commands.js';\nimport { Emitter } from '../../../base/common/event.js';\nexport function isIMenuItem(item) {\n  return item.command !== undefined;\n}\nexport var IMenuService = createDecorator('menuService');\nexport var MenuRegistry = new (\n/** @class */\nfunction () {\n  function class_1() {\n    this._commands = new Map();\n    this._menuItems = new Map();\n    this._onDidChangeMenu = new Emitter();\n    this.onDidChangeMenu = this._onDidChangeMenu.event;\n  }\n\n  class_1.prototype.addCommand = function (command) {\n    var _this = this;\n\n    this._commands.set(command.id, command);\n\n    this._onDidChangeMenu.fire(0\n    /* CommandPalette */\n    );\n\n    return {\n      dispose: function () {\n        if (_this._commands.delete(command.id)) {\n          _this._onDidChangeMenu.fire(0\n          /* CommandPalette */\n          );\n        }\n      }\n    };\n  };\n\n  class_1.prototype.getCommand = function (id) {\n    return this._commands.get(id);\n  };\n\n  class_1.prototype.getCommands = function () {\n    var map = new Map();\n\n    this._commands.forEach(function (value, key) {\n      return map.set(key, value);\n    });\n\n    return map;\n  };\n\n  class_1.prototype.appendMenuItem = function (id, item) {\n    var _this = this;\n\n    var array = this._menuItems.get(id);\n\n    if (!array) {\n      array = [item];\n\n      this._menuItems.set(id, array);\n    } else {\n      array.push(item);\n    }\n\n    this._onDidChangeMenu.fire(id);\n\n    return {\n      dispose: function () {\n        var idx = array.indexOf(item);\n\n        if (idx >= 0) {\n          array.splice(idx, 1);\n\n          _this._onDidChangeMenu.fire(id);\n        }\n      }\n    };\n  };\n\n  class_1.prototype.getMenuItems = function (id) {\n    var result = (this._menuItems.get(id) || []).slice(0);\n\n    if (id === 0\n    /* CommandPalette */\n    ) {\n        // CommandPalette is special because it shows\n        // all commands by default\n        this._appendImplicitItems(result);\n      }\n\n    return result;\n  };\n\n  class_1.prototype._appendImplicitItems = function (result) {\n    var set = new Set();\n    var temp = result.filter(function (item) {\n      return isIMenuItem(item);\n    });\n\n    for (var _i = 0, temp_1 = temp; _i < temp_1.length; _i++) {\n      var _a = temp_1[_i],\n          command = _a.command,\n          alt = _a.alt;\n      set.add(command.id);\n\n      if (alt) {\n        set.add(alt.id);\n      }\n    }\n\n    this._commands.forEach(function (command, id) {\n      if (!set.has(id)) {\n        result.push({\n          command: command\n        });\n      }\n    });\n  };\n\n  return class_1;\n}())();\n\nvar ExecuteCommandAction =\n/** @class */\nfunction (_super) {\n  __extends(ExecuteCommandAction, _super);\n\n  function ExecuteCommandAction(id, label, _commandService) {\n    var _this = _super.call(this, id, label) || this;\n\n    _this._commandService = _commandService;\n    return _this;\n  }\n\n  ExecuteCommandAction.prototype.run = function () {\n    var _a;\n\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    return (_a = this._commandService).executeCommand.apply(_a, __spreadArrays([this.id], args));\n  };\n\n  ExecuteCommandAction = __decorate([__param(2, ICommandService)], ExecuteCommandAction);\n  return ExecuteCommandAction;\n}(Action);\n\nexport { ExecuteCommandAction };\n\nvar SubmenuItemAction =\n/** @class */\nfunction (_super) {\n  __extends(SubmenuItemAction, _super);\n\n  function SubmenuItemAction(item) {\n    var _this = this;\n\n    typeof item.title === 'string' ? _this = _super.call(this, '', item.title, 'submenu') || this : _this = _super.call(this, '', item.title.value, 'submenu') || this;\n    _this.item = item;\n    return _this;\n  }\n\n  return SubmenuItemAction;\n}(Action);\n\nexport { SubmenuItemAction };\n\nvar MenuItemAction =\n/** @class */\nfunction (_super) {\n  __extends(MenuItemAction, _super);\n\n  function MenuItemAction(item, alt, options, contextKeyService, commandService) {\n    var _this = this;\n\n    typeof item.title === 'string' ? _this = _super.call(this, item.id, item.title, commandService) || this : _this = _super.call(this, item.id, item.title.value, commandService) || this;\n    _this._cssClass = undefined;\n    _this._enabled = !item.precondition || contextKeyService.contextMatchesRules(item.precondition);\n    _this._checked = Boolean(item.toggled && contextKeyService.contextMatchesRules(item.toggled));\n    _this._options = options || {};\n    _this.item = item;\n    _this.alt = alt ? new MenuItemAction(alt, undefined, _this._options, contextKeyService, commandService) : undefined;\n    return _this;\n  }\n\n  MenuItemAction.prototype.dispose = function () {\n    if (this.alt) {\n      this.alt.dispose();\n    }\n\n    _super.prototype.dispose.call(this);\n  };\n\n  MenuItemAction.prototype.run = function () {\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n\n    var runArgs = [];\n\n    if (this._options.arg) {\n      runArgs = __spreadArrays(runArgs, [this._options.arg]);\n    }\n\n    if (this._options.shouldForwardArgs) {\n      runArgs = __spreadArrays(runArgs, args);\n    }\n\n    return _super.prototype.run.apply(this, runArgs);\n  };\n\n  MenuItemAction = __decorate([__param(3, IContextKeyService), __param(4, ICommandService)], MenuItemAction);\n  return MenuItemAction;\n}(ExecuteCommandAction);\n\nexport { MenuItemAction }; //#endregion","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/platform/actions/common/actions.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__spreadArrays","s","il","k","a","j","jl","Action","createDecorator","IContextKeyService","ICommandService","Emitter","isIMenuItem","item","command","undefined","IMenuService","MenuRegistry","class_1","_commands","Map","_menuItems","_onDidChangeMenu","onDidChangeMenu","event","addCommand","_this","set","id","fire","dispose","delete","getCommand","get","getCommands","map","forEach","value","appendMenuItem","array","push","idx","indexOf","splice","getMenuItems","result","slice","_appendImplicitItems","Set","temp","filter","_i","temp_1","_a","alt","add","has","ExecuteCommandAction","_super","label","_commandService","call","run","args","executeCommand","apply","SubmenuItemAction","title","MenuItemAction","options","contextKeyService","commandService","_cssClass","_enabled","precondition","contextMatchesRules","_checked","Boolean","toggled","_options","runArgs","arg","shouldForwardArgs"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { Action } from '../../../base/common/actions.js';\r\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\r\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\r\nimport { ICommandService } from '../../commands/common/commands.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nexport function isIMenuItem(item) {\r\n    return item.command !== undefined;\r\n}\r\nexport var IMenuService = createDecorator('menuService');\r\nexport var MenuRegistry = new /** @class */ (function () {\r\n    function class_1() {\r\n        this._commands = new Map();\r\n        this._menuItems = new Map();\r\n        this._onDidChangeMenu = new Emitter();\r\n        this.onDidChangeMenu = this._onDidChangeMenu.event;\r\n    }\r\n    class_1.prototype.addCommand = function (command) {\r\n        var _this = this;\r\n        this._commands.set(command.id, command);\r\n        this._onDidChangeMenu.fire(0 /* CommandPalette */);\r\n        return {\r\n            dispose: function () {\r\n                if (_this._commands.delete(command.id)) {\r\n                    _this._onDidChangeMenu.fire(0 /* CommandPalette */);\r\n                }\r\n            }\r\n        };\r\n    };\r\n    class_1.prototype.getCommand = function (id) {\r\n        return this._commands.get(id);\r\n    };\r\n    class_1.prototype.getCommands = function () {\r\n        var map = new Map();\r\n        this._commands.forEach(function (value, key) { return map.set(key, value); });\r\n        return map;\r\n    };\r\n    class_1.prototype.appendMenuItem = function (id, item) {\r\n        var _this = this;\r\n        var array = this._menuItems.get(id);\r\n        if (!array) {\r\n            array = [item];\r\n            this._menuItems.set(id, array);\r\n        }\r\n        else {\r\n            array.push(item);\r\n        }\r\n        this._onDidChangeMenu.fire(id);\r\n        return {\r\n            dispose: function () {\r\n                var idx = array.indexOf(item);\r\n                if (idx >= 0) {\r\n                    array.splice(idx, 1);\r\n                    _this._onDidChangeMenu.fire(id);\r\n                }\r\n            }\r\n        };\r\n    };\r\n    class_1.prototype.getMenuItems = function (id) {\r\n        var result = (this._menuItems.get(id) || []).slice(0);\r\n        if (id === 0 /* CommandPalette */) {\r\n            // CommandPalette is special because it shows\r\n            // all commands by default\r\n            this._appendImplicitItems(result);\r\n        }\r\n        return result;\r\n    };\r\n    class_1.prototype._appendImplicitItems = function (result) {\r\n        var set = new Set();\r\n        var temp = result.filter(function (item) { return isIMenuItem(item); });\r\n        for (var _i = 0, temp_1 = temp; _i < temp_1.length; _i++) {\r\n            var _a = temp_1[_i], command = _a.command, alt = _a.alt;\r\n            set.add(command.id);\r\n            if (alt) {\r\n                set.add(alt.id);\r\n            }\r\n        }\r\n        this._commands.forEach(function (command, id) {\r\n            if (!set.has(id)) {\r\n                result.push({ command: command });\r\n            }\r\n        });\r\n    };\r\n    return class_1;\r\n}());\r\nvar ExecuteCommandAction = /** @class */ (function (_super) {\r\n    __extends(ExecuteCommandAction, _super);\r\n    function ExecuteCommandAction(id, label, _commandService) {\r\n        var _this = _super.call(this, id, label) || this;\r\n        _this._commandService = _commandService;\r\n        return _this;\r\n    }\r\n    ExecuteCommandAction.prototype.run = function () {\r\n        var _a;\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        return (_a = this._commandService).executeCommand.apply(_a, __spreadArrays([this.id], args));\r\n    };\r\n    ExecuteCommandAction = __decorate([\r\n        __param(2, ICommandService)\r\n    ], ExecuteCommandAction);\r\n    return ExecuteCommandAction;\r\n}(Action));\r\nexport { ExecuteCommandAction };\r\nvar SubmenuItemAction = /** @class */ (function (_super) {\r\n    __extends(SubmenuItemAction, _super);\r\n    function SubmenuItemAction(item) {\r\n        var _this = this;\r\n        typeof item.title === 'string' ? _this = _super.call(this, '', item.title, 'submenu') || this : _this = _super.call(this, '', item.title.value, 'submenu') || this;\r\n        _this.item = item;\r\n        return _this;\r\n    }\r\n    return SubmenuItemAction;\r\n}(Action));\r\nexport { SubmenuItemAction };\r\nvar MenuItemAction = /** @class */ (function (_super) {\r\n    __extends(MenuItemAction, _super);\r\n    function MenuItemAction(item, alt, options, contextKeyService, commandService) {\r\n        var _this = this;\r\n        typeof item.title === 'string' ? _this = _super.call(this, item.id, item.title, commandService) || this : _this = _super.call(this, item.id, item.title.value, commandService) || this;\r\n        _this._cssClass = undefined;\r\n        _this._enabled = !item.precondition || contextKeyService.contextMatchesRules(item.precondition);\r\n        _this._checked = Boolean(item.toggled && contextKeyService.contextMatchesRules(item.toggled));\r\n        _this._options = options || {};\r\n        _this.item = item;\r\n        _this.alt = alt ? new MenuItemAction(alt, undefined, _this._options, contextKeyService, commandService) : undefined;\r\n        return _this;\r\n    }\r\n    MenuItemAction.prototype.dispose = function () {\r\n        if (this.alt) {\r\n            this.alt.dispose();\r\n        }\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    MenuItemAction.prototype.run = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var runArgs = [];\r\n        if (this._options.arg) {\r\n            runArgs = __spreadArrays(runArgs, [this._options.arg]);\r\n        }\r\n        if (this._options.shouldForwardArgs) {\r\n            runArgs = __spreadArrays(runArgs, args);\r\n        }\r\n        return _super.prototype.run.apply(this, runArgs);\r\n    };\r\n    MenuItemAction = __decorate([\r\n        __param(3, IContextKeyService),\r\n        __param(4, ICommandService)\r\n    ], MenuItemAction);\r\n    return MenuItemAction;\r\n}(ExecuteCommandAction));\r\nexport { MenuItemAction };\r\n//#endregion\r\n"]},"metadata":{},"sourceType":"module"}