{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { illegalArgument } from '../../../base/common/errors.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { registerLanguageCommand } from '../../browser/editorExtensions.js';\nimport { Range } from '../../common/core/range.js';\nimport { ColorProviderRegistry } from '../../common/modes.js';\nimport { IModelService } from '../../common/services/modelService.js';\nexport function getColors(model, token) {\n  var colors = [];\n  var providers = ColorProviderRegistry.ordered(model).reverse();\n  var promises = providers.map(function (provider) {\n    return Promise.resolve(provider.provideDocumentColors(model, token)).then(function (result) {\n      if (Array.isArray(result)) {\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n          var colorInfo = result_1[_i];\n          colors.push({\n            colorInfo: colorInfo,\n            provider: provider\n          });\n        }\n      }\n    });\n  });\n  return Promise.all(promises).then(function () {\n    return colors;\n  });\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n  return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nregisterLanguageCommand('_executeDocumentColorProvider', function (accessor, args) {\n  var resource = args.resource;\n\n  if (!(resource instanceof URI)) {\n    throw illegalArgument();\n  }\n\n  var model = accessor.get(IModelService).getModel(resource);\n\n  if (!model) {\n    throw illegalArgument();\n  }\n\n  var rawCIs = [];\n  var providers = ColorProviderRegistry.ordered(model).reverse();\n  var promises = providers.map(function (provider) {\n    return Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(function (result) {\n      if (Array.isArray(result)) {\n        for (var _i = 0, result_2 = result; _i < result_2.length; _i++) {\n          var ci = result_2[_i];\n          rawCIs.push({\n            range: ci.range,\n            color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha]\n          });\n        }\n      }\n    });\n  });\n  return Promise.all(promises).then(function () {\n    return rawCIs;\n  });\n});\nregisterLanguageCommand('_executeColorPresentationProvider', function (accessor, args) {\n  var resource = args.resource,\n      color = args.color,\n      range = args.range;\n\n  if (!(resource instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n    throw illegalArgument();\n  }\n\n  var red = color[0],\n      green = color[1],\n      blue = color[2],\n      alpha = color[3];\n  var model = accessor.get(IModelService).getModel(resource);\n\n  if (!model) {\n    throw illegalArgument();\n  }\n\n  var colorInfo = {\n    range: range,\n    color: {\n      red: red,\n      green: green,\n      blue: blue,\n      alpha: alpha\n    }\n  };\n  var presentations = [];\n  var providers = ColorProviderRegistry.ordered(model).reverse();\n  var promises = providers.map(function (provider) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(function (result) {\n      if (Array.isArray(result)) {\n        presentations.push.apply(presentations, result);\n      }\n    });\n  });\n  return Promise.all(promises).then(function () {\n    return presentations;\n  });\n});","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/color.js"],"names":["CancellationToken","illegalArgument","URI","registerLanguageCommand","Range","ColorProviderRegistry","IModelService","getColors","model","token","colors","providers","ordered","reverse","promises","map","provider","Promise","resolve","provideDocumentColors","then","result","Array","isArray","_i","result_1","length","colorInfo","push","all","getColorPresentations","provideColorPresentations","accessor","args","resource","get","getModel","rawCIs","None","result_2","ci","range","color","red","green","blue","alpha","isIRange","presentations","apply"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { illegalArgument } from '../../../base/common/errors.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { registerLanguageCommand } from '../../browser/editorExtensions.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { ColorProviderRegistry } from '../../common/modes.js';\r\nimport { IModelService } from '../../common/services/modelService.js';\r\nexport function getColors(model, token) {\r\n    var colors = [];\r\n    var providers = ColorProviderRegistry.ordered(model).reverse();\r\n    var promises = providers.map(function (provider) { return Promise.resolve(provider.provideDocumentColors(model, token)).then(function (result) {\r\n        if (Array.isArray(result)) {\r\n            for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\r\n                var colorInfo = result_1[_i];\r\n                colors.push({ colorInfo: colorInfo, provider: provider });\r\n            }\r\n        }\r\n    }); });\r\n    return Promise.all(promises).then(function () { return colors; });\r\n}\r\nexport function getColorPresentations(model, colorInfo, provider, token) {\r\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\r\n}\r\nregisterLanguageCommand('_executeDocumentColorProvider', function (accessor, args) {\r\n    var resource = args.resource;\r\n    if (!(resource instanceof URI)) {\r\n        throw illegalArgument();\r\n    }\r\n    var model = accessor.get(IModelService).getModel(resource);\r\n    if (!model) {\r\n        throw illegalArgument();\r\n    }\r\n    var rawCIs = [];\r\n    var providers = ColorProviderRegistry.ordered(model).reverse();\r\n    var promises = providers.map(function (provider) { return Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(function (result) {\r\n        if (Array.isArray(result)) {\r\n            for (var _i = 0, result_2 = result; _i < result_2.length; _i++) {\r\n                var ci = result_2[_i];\r\n                rawCIs.push({ range: ci.range, color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha] });\r\n            }\r\n        }\r\n    }); });\r\n    return Promise.all(promises).then(function () { return rawCIs; });\r\n});\r\nregisterLanguageCommand('_executeColorPresentationProvider', function (accessor, args) {\r\n    var resource = args.resource, color = args.color, range = args.range;\r\n    if (!(resource instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\r\n        throw illegalArgument();\r\n    }\r\n    var red = color[0], green = color[1], blue = color[2], alpha = color[3];\r\n    var model = accessor.get(IModelService).getModel(resource);\r\n    if (!model) {\r\n        throw illegalArgument();\r\n    }\r\n    var colorInfo = {\r\n        range: range,\r\n        color: { red: red, green: green, blue: blue, alpha: alpha }\r\n    };\r\n    var presentations = [];\r\n    var providers = ColorProviderRegistry.ordered(model).reverse();\r\n    var promises = providers.map(function (provider) { return Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(function (result) {\r\n        if (Array.isArray(result)) {\r\n            presentations.push.apply(presentations, result);\r\n        }\r\n    }); });\r\n    return Promise.all(promises).then(function () { return presentations; });\r\n});\r\n"]},"metadata":{},"sourceType":"module"}