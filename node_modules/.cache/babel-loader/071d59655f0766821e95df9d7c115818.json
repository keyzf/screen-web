{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport { createCancelablePromise, Delayer } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../common/core/characterClassifier.js';\nimport * as modes from '../../common/modes.js';\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\nvar ParameterHintState;\n\n(function (ParameterHintState) {\n  ParameterHintState.Default = {\n    type: 0\n    /* Default */\n\n  };\n\n  var Pending =\n  /** @class */\n  function () {\n    function Pending(request) {\n      this.request = request;\n      this.type = 2\n      /* Pending */\n      ;\n    }\n\n    return Pending;\n  }();\n\n  ParameterHintState.Pending = Pending;\n\n  var Active =\n  /** @class */\n  function () {\n    function Active(hints) {\n      this.hints = hints;\n      this.type = 1\n      /* Active */\n      ;\n    }\n\n    return Active;\n  }();\n\n  ParameterHintState.Active = Active;\n})(ParameterHintState || (ParameterHintState = {}));\n\nvar ParameterHintsModel =\n/** @class */\nfunction (_super) {\n  __extends(ParameterHintsModel, _super);\n\n  function ParameterHintsModel(editor, delay) {\n    if (delay === void 0) {\n      delay = ParameterHintsModel.DEFAULT_DELAY;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this._onChangedHints = _this._register(new Emitter());\n    _this.onChangedHints = _this._onChangedHints.event;\n    _this.triggerOnType = false;\n    _this._state = ParameterHintState.Default;\n    _this._pendingTriggers = [];\n    _this._lastSignatureHelpResult = _this._register(new MutableDisposable());\n    _this.triggerChars = new CharacterSet();\n    _this.retriggerChars = new CharacterSet();\n    _this.triggerId = 0;\n    _this.editor = editor;\n    _this.throttledDelayer = new Delayer(delay);\n\n    _this._register(_this.editor.onDidChangeConfiguration(function () {\n      return _this.onEditorConfigurationChange();\n    }));\n\n    _this._register(_this.editor.onDidChangeModel(function (e) {\n      return _this.onModelChanged();\n    }));\n\n    _this._register(_this.editor.onDidChangeModelLanguage(function (_) {\n      return _this.onModelChanged();\n    }));\n\n    _this._register(_this.editor.onDidChangeCursorSelection(function (e) {\n      return _this.onCursorChange(e);\n    }));\n\n    _this._register(_this.editor.onDidChangeModelContent(function (e) {\n      return _this.onModelContentChange();\n    }));\n\n    _this._register(modes.SignatureHelpProviderRegistry.onDidChange(_this.onModelChanged, _this));\n\n    _this._register(_this.editor.onDidType(function (text) {\n      return _this.onDidType(text);\n    }));\n\n    _this.onEditorConfigurationChange();\n\n    _this.onModelChanged();\n\n    return _this;\n  }\n\n  Object.defineProperty(ParameterHintsModel.prototype, \"state\", {\n    get: function () {\n      return this._state;\n    },\n    set: function (value) {\n      if (this._state.type === 2\n      /* Pending */\n      ) {\n          this._state.request.cancel();\n        }\n\n      this._state = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ParameterHintsModel.prototype.cancel = function (silent) {\n    if (silent === void 0) {\n      silent = false;\n    }\n\n    this.state = ParameterHintState.Default;\n    this.throttledDelayer.cancel();\n\n    if (!silent) {\n      this._onChangedHints.fire(undefined);\n    }\n  };\n\n  ParameterHintsModel.prototype.trigger = function (context, delay) {\n    var _this = this;\n\n    var model = this.editor.getModel();\n\n    if (!model || !modes.SignatureHelpProviderRegistry.has(model)) {\n      return;\n    }\n\n    var triggerId = ++this.triggerId;\n\n    this._pendingTriggers.push(context);\n\n    this.throttledDelayer.trigger(function () {\n      return _this.doTrigger(triggerId);\n    }, delay).catch(onUnexpectedError);\n  };\n\n  ParameterHintsModel.prototype.next = function () {\n    if (this.state.type !== 1\n    /* Active */\n    ) {\n        return;\n      }\n\n    var length = this.state.hints.signatures.length;\n    var activeSignature = this.state.hints.activeSignature;\n    var last = activeSignature % length === length - 1;\n    var cycle = this.editor.getOption(64\n    /* parameterHints */\n    ).cycle; // If there is only one signature, or we're on last signature of list\n\n    if ((length < 2 || last) && !cycle) {\n      this.cancel();\n      return;\n    }\n\n    this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\n  };\n\n  ParameterHintsModel.prototype.previous = function () {\n    if (this.state.type !== 1\n    /* Active */\n    ) {\n        return;\n      }\n\n    var length = this.state.hints.signatures.length;\n    var activeSignature = this.state.hints.activeSignature;\n    var first = activeSignature === 0;\n    var cycle = this.editor.getOption(64\n    /* parameterHints */\n    ).cycle; // If there is only one signature, or we're on first signature of list\n\n    if ((length < 2 || first) && !cycle) {\n      this.cancel();\n      return;\n    }\n\n    this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\n  };\n\n  ParameterHintsModel.prototype.updateActiveSignature = function (activeSignature) {\n    if (this.state.type !== 1\n    /* Active */\n    ) {\n        return;\n      }\n\n    this.state = new ParameterHintState.Active(__assign(__assign({}, this.state.hints), {\n      activeSignature: activeSignature\n    }));\n\n    this._onChangedHints.fire(this.state.hints);\n  };\n\n  ParameterHintsModel.prototype.doTrigger = function (triggerId) {\n    return __awaiter(this, void 0, void 0, function () {\n      var isRetrigger, activeSignatureHelp, context, triggerContext, model, position, result, error_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            isRetrigger = this.state.type === 1\n            /* Active */\n            || this.state.type === 2\n            /* Pending */\n            ;\n            activeSignatureHelp = this.state.type === 1\n            /* Active */\n            ? this.state.hints : undefined;\n            this.cancel(true);\n\n            if (this._pendingTriggers.length === 0) {\n              return [2\n              /*return*/\n              , false];\n            }\n\n            context = this._pendingTriggers.reduce(mergeTriggerContexts);\n            this._pendingTriggers = [];\n            triggerContext = {\n              triggerKind: context.triggerKind,\n              triggerCharacter: context.triggerCharacter,\n              isRetrigger: isRetrigger,\n              activeSignatureHelp: activeSignatureHelp\n            };\n\n            if (!this.editor.hasModel()) {\n              return [2\n              /*return*/\n              , false];\n            }\n\n            model = this.editor.getModel();\n            position = this.editor.getPosition();\n            this.state = new ParameterHintState.Pending(createCancelablePromise(function (token) {\n              return provideSignatureHelp(model, position, triggerContext, token);\n            }));\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , this.state.request];\n\n          case 2:\n            result = _a.sent(); // Check that we are still resolving the correct signature help\n\n            if (triggerId !== this.triggerId) {\n              result === null || result === void 0 ? void 0 : result.dispose();\n              return [2\n              /*return*/\n              , false];\n            }\n\n            if (!result || !result.value.signatures || result.value.signatures.length === 0) {\n              result === null || result === void 0 ? void 0 : result.dispose();\n\n              this._lastSignatureHelpResult.clear();\n\n              this.cancel();\n              return [2\n              /*return*/\n              , false];\n            } else {\n              this.state = new ParameterHintState.Active(result.value);\n              this._lastSignatureHelpResult.value = result;\n\n              this._onChangedHints.fire(this.state.hints);\n\n              return [2\n              /*return*/\n              , true];\n            }\n\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            error_1 = _a.sent();\n\n            if (triggerId === this.triggerId) {\n              this.state = ParameterHintState.Default;\n            }\n\n            onUnexpectedError(error_1);\n            return [2\n            /*return*/\n            , false];\n\n          case 4:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  Object.defineProperty(ParameterHintsModel.prototype, \"isTriggered\", {\n    get: function () {\n      return this.state.type === 1\n      /* Active */\n      || this.state.type === 2\n      /* Pending */\n      || this.throttledDelayer.isTriggered();\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ParameterHintsModel.prototype.onModelChanged = function () {\n    this.cancel(); // Update trigger characters\n\n    this.triggerChars = new CharacterSet();\n    this.retriggerChars = new CharacterSet();\n    var model = this.editor.getModel();\n\n    if (!model) {\n      return;\n    }\n\n    for (var _i = 0, _a = modes.SignatureHelpProviderRegistry.ordered(model); _i < _a.length; _i++) {\n      var support = _a[_i];\n\n      for (var _b = 0, _c = support.signatureHelpTriggerCharacters || []; _b < _c.length; _b++) {\n        var ch = _c[_b];\n        this.triggerChars.add(ch.charCodeAt(0)); // All trigger characters are also considered retrigger characters\n\n        this.retriggerChars.add(ch.charCodeAt(0));\n      }\n\n      for (var _d = 0, _e = support.signatureHelpRetriggerCharacters || []; _d < _e.length; _d++) {\n        var ch = _e[_d];\n        this.retriggerChars.add(ch.charCodeAt(0));\n      }\n    }\n  };\n\n  ParameterHintsModel.prototype.onDidType = function (text) {\n    if (!this.triggerOnType) {\n      return;\n    }\n\n    var lastCharIndex = text.length - 1;\n    var triggerCharCode = text.charCodeAt(lastCharIndex);\n\n    if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\n      this.trigger({\n        triggerKind: modes.SignatureHelpTriggerKind.TriggerCharacter,\n        triggerCharacter: text.charAt(lastCharIndex)\n      });\n    }\n  };\n\n  ParameterHintsModel.prototype.onCursorChange = function (e) {\n    if (e.source === 'mouse') {\n      this.cancel();\n    } else if (this.isTriggered) {\n      this.trigger({\n        triggerKind: modes.SignatureHelpTriggerKind.ContentChange\n      });\n    }\n  };\n\n  ParameterHintsModel.prototype.onModelContentChange = function () {\n    if (this.isTriggered) {\n      this.trigger({\n        triggerKind: modes.SignatureHelpTriggerKind.ContentChange\n      });\n    }\n  };\n\n  ParameterHintsModel.prototype.onEditorConfigurationChange = function () {\n    this.triggerOnType = this.editor.getOption(64\n    /* parameterHints */\n    ).enabled;\n\n    if (!this.triggerOnType) {\n      this.cancel();\n    }\n  };\n\n  ParameterHintsModel.prototype.dispose = function () {\n    this.cancel(true);\n\n    _super.prototype.dispose.call(this);\n  };\n\n  ParameterHintsModel.DEFAULT_DELAY = 120; // ms\n\n  return ParameterHintsModel;\n}(Disposable);\n\nexport { ParameterHintsModel };\n\nfunction mergeTriggerContexts(previous, current) {\n  switch (current.triggerKind) {\n    case modes.SignatureHelpTriggerKind.Invoke:\n      // Invoke overrides previous triggers.\n      return current;\n\n    case modes.SignatureHelpTriggerKind.ContentChange:\n      // Ignore content changes triggers\n      return previous;\n\n    case modes.SignatureHelpTriggerKind.TriggerCharacter:\n    default:\n      return current;\n  }\n}","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/parameterHintsModel.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","createCancelablePromise","Delayer","onUnexpectedError","Emitter","Disposable","MutableDisposable","CharacterSet","modes","provideSignatureHelp","ParameterHintState","Default","type","Pending","request","Active","hints","ParameterHintsModel","_super","editor","delay","DEFAULT_DELAY","_this","_onChangedHints","_register","onChangedHints","event","triggerOnType","_state","_pendingTriggers","_lastSignatureHelpResult","triggerChars","retriggerChars","triggerId","throttledDelayer","onDidChangeConfiguration","onEditorConfigurationChange","onDidChangeModel","onModelChanged","onDidChangeModelLanguage","onDidChangeCursorSelection","onCursorChange","onDidChangeModelContent","onModelContentChange","SignatureHelpProviderRegistry","onDidChange","onDidType","text","defineProperty","get","set","cancel","enumerable","configurable","silent","state","fire","undefined","trigger","context","model","getModel","has","doTrigger","catch","signatures","activeSignature","last","cycle","getOption","updateActiveSignature","previous","first","isRetrigger","activeSignatureHelp","triggerContext","position","error_1","_a","reduce","mergeTriggerContexts","triggerKind","triggerCharacter","hasModel","getPosition","token","dispose","clear","isTriggered","_i","ordered","support","_b","_c","signatureHelpTriggerCharacters","ch","add","charCodeAt","_d","_e","signatureHelpRetriggerCharacters","lastCharIndex","triggerCharCode","SignatureHelpTriggerKind","TriggerCharacter","charAt","source","ContentChange","enabled","current","Invoke"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { createCancelablePromise, Delayer } from '../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { CharacterSet } from '../../common/core/characterClassifier.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\r\nvar ParameterHintState;\r\n(function (ParameterHintState) {\r\n    ParameterHintState.Default = { type: 0 /* Default */ };\r\n    var Pending = /** @class */ (function () {\r\n        function Pending(request) {\r\n            this.request = request;\r\n            this.type = 2 /* Pending */;\r\n        }\r\n        return Pending;\r\n    }());\r\n    ParameterHintState.Pending = Pending;\r\n    var Active = /** @class */ (function () {\r\n        function Active(hints) {\r\n            this.hints = hints;\r\n            this.type = 1 /* Active */;\r\n        }\r\n        return Active;\r\n    }());\r\n    ParameterHintState.Active = Active;\r\n})(ParameterHintState || (ParameterHintState = {}));\r\nvar ParameterHintsModel = /** @class */ (function (_super) {\r\n    __extends(ParameterHintsModel, _super);\r\n    function ParameterHintsModel(editor, delay) {\r\n        if (delay === void 0) { delay = ParameterHintsModel.DEFAULT_DELAY; }\r\n        var _this = _super.call(this) || this;\r\n        _this._onChangedHints = _this._register(new Emitter());\r\n        _this.onChangedHints = _this._onChangedHints.event;\r\n        _this.triggerOnType = false;\r\n        _this._state = ParameterHintState.Default;\r\n        _this._pendingTriggers = [];\r\n        _this._lastSignatureHelpResult = _this._register(new MutableDisposable());\r\n        _this.triggerChars = new CharacterSet();\r\n        _this.retriggerChars = new CharacterSet();\r\n        _this.triggerId = 0;\r\n        _this.editor = editor;\r\n        _this.throttledDelayer = new Delayer(delay);\r\n        _this._register(_this.editor.onDidChangeConfiguration(function () { return _this.onEditorConfigurationChange(); }));\r\n        _this._register(_this.editor.onDidChangeModel(function (e) { return _this.onModelChanged(); }));\r\n        _this._register(_this.editor.onDidChangeModelLanguage(function (_) { return _this.onModelChanged(); }));\r\n        _this._register(_this.editor.onDidChangeCursorSelection(function (e) { return _this.onCursorChange(e); }));\r\n        _this._register(_this.editor.onDidChangeModelContent(function (e) { return _this.onModelContentChange(); }));\r\n        _this._register(modes.SignatureHelpProviderRegistry.onDidChange(_this.onModelChanged, _this));\r\n        _this._register(_this.editor.onDidType(function (text) { return _this.onDidType(text); }));\r\n        _this.onEditorConfigurationChange();\r\n        _this.onModelChanged();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ParameterHintsModel.prototype, \"state\", {\r\n        get: function () { return this._state; },\r\n        set: function (value) {\r\n            if (this._state.type === 2 /* Pending */) {\r\n                this._state.request.cancel();\r\n            }\r\n            this._state = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ParameterHintsModel.prototype.cancel = function (silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        this.state = ParameterHintState.Default;\r\n        this.throttledDelayer.cancel();\r\n        if (!silent) {\r\n            this._onChangedHints.fire(undefined);\r\n        }\r\n    };\r\n    ParameterHintsModel.prototype.trigger = function (context, delay) {\r\n        var _this = this;\r\n        var model = this.editor.getModel();\r\n        if (!model || !modes.SignatureHelpProviderRegistry.has(model)) {\r\n            return;\r\n        }\r\n        var triggerId = ++this.triggerId;\r\n        this._pendingTriggers.push(context);\r\n        this.throttledDelayer.trigger(function () {\r\n            return _this.doTrigger(triggerId);\r\n        }, delay)\r\n            .catch(onUnexpectedError);\r\n    };\r\n    ParameterHintsModel.prototype.next = function () {\r\n        if (this.state.type !== 1 /* Active */) {\r\n            return;\r\n        }\r\n        var length = this.state.hints.signatures.length;\r\n        var activeSignature = this.state.hints.activeSignature;\r\n        var last = (activeSignature % length) === (length - 1);\r\n        var cycle = this.editor.getOption(64 /* parameterHints */).cycle;\r\n        // If there is only one signature, or we're on last signature of list\r\n        if ((length < 2 || last) && !cycle) {\r\n            this.cancel();\r\n            return;\r\n        }\r\n        this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\r\n    };\r\n    ParameterHintsModel.prototype.previous = function () {\r\n        if (this.state.type !== 1 /* Active */) {\r\n            return;\r\n        }\r\n        var length = this.state.hints.signatures.length;\r\n        var activeSignature = this.state.hints.activeSignature;\r\n        var first = activeSignature === 0;\r\n        var cycle = this.editor.getOption(64 /* parameterHints */).cycle;\r\n        // If there is only one signature, or we're on first signature of list\r\n        if ((length < 2 || first) && !cycle) {\r\n            this.cancel();\r\n            return;\r\n        }\r\n        this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\r\n    };\r\n    ParameterHintsModel.prototype.updateActiveSignature = function (activeSignature) {\r\n        if (this.state.type !== 1 /* Active */) {\r\n            return;\r\n        }\r\n        this.state = new ParameterHintState.Active(__assign(__assign({}, this.state.hints), { activeSignature: activeSignature }));\r\n        this._onChangedHints.fire(this.state.hints);\r\n    };\r\n    ParameterHintsModel.prototype.doTrigger = function (triggerId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var isRetrigger, activeSignatureHelp, context, triggerContext, model, position, result, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        isRetrigger = this.state.type === 1 /* Active */ || this.state.type === 2 /* Pending */;\r\n                        activeSignatureHelp = this.state.type === 1 /* Active */ ? this.state.hints : undefined;\r\n                        this.cancel(true);\r\n                        if (this._pendingTriggers.length === 0) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        context = this._pendingTriggers.reduce(mergeTriggerContexts);\r\n                        this._pendingTriggers = [];\r\n                        triggerContext = {\r\n                            triggerKind: context.triggerKind,\r\n                            triggerCharacter: context.triggerCharacter,\r\n                            isRetrigger: isRetrigger,\r\n                            activeSignatureHelp: activeSignatureHelp\r\n                        };\r\n                        if (!this.editor.hasModel()) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        model = this.editor.getModel();\r\n                        position = this.editor.getPosition();\r\n                        this.state = new ParameterHintState.Pending(createCancelablePromise(function (token) {\r\n                            return provideSignatureHelp(model, position, triggerContext, token);\r\n                        }));\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, this.state.request];\r\n                    case 2:\r\n                        result = _a.sent();\r\n                        // Check that we are still resolving the correct signature help\r\n                        if (triggerId !== this.triggerId) {\r\n                            result === null || result === void 0 ? void 0 : result.dispose();\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        if (!result || !result.value.signatures || result.value.signatures.length === 0) {\r\n                            result === null || result === void 0 ? void 0 : result.dispose();\r\n                            this._lastSignatureHelpResult.clear();\r\n                            this.cancel();\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        else {\r\n                            this.state = new ParameterHintState.Active(result.value);\r\n                            this._lastSignatureHelpResult.value = result;\r\n                            this._onChangedHints.fire(this.state.hints);\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        error_1 = _a.sent();\r\n                        if (triggerId === this.triggerId) {\r\n                            this.state = ParameterHintState.Default;\r\n                        }\r\n                        onUnexpectedError(error_1);\r\n                        return [2 /*return*/, false];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Object.defineProperty(ParameterHintsModel.prototype, \"isTriggered\", {\r\n        get: function () {\r\n            return this.state.type === 1 /* Active */\r\n                || this.state.type === 2 /* Pending */\r\n                || this.throttledDelayer.isTriggered();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ParameterHintsModel.prototype.onModelChanged = function () {\r\n        this.cancel();\r\n        // Update trigger characters\r\n        this.triggerChars = new CharacterSet();\r\n        this.retriggerChars = new CharacterSet();\r\n        var model = this.editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = modes.SignatureHelpProviderRegistry.ordered(model); _i < _a.length; _i++) {\r\n            var support = _a[_i];\r\n            for (var _b = 0, _c = support.signatureHelpTriggerCharacters || []; _b < _c.length; _b++) {\r\n                var ch = _c[_b];\r\n                this.triggerChars.add(ch.charCodeAt(0));\r\n                // All trigger characters are also considered retrigger characters\r\n                this.retriggerChars.add(ch.charCodeAt(0));\r\n            }\r\n            for (var _d = 0, _e = support.signatureHelpRetriggerCharacters || []; _d < _e.length; _d++) {\r\n                var ch = _e[_d];\r\n                this.retriggerChars.add(ch.charCodeAt(0));\r\n            }\r\n        }\r\n    };\r\n    ParameterHintsModel.prototype.onDidType = function (text) {\r\n        if (!this.triggerOnType) {\r\n            return;\r\n        }\r\n        var lastCharIndex = text.length - 1;\r\n        var triggerCharCode = text.charCodeAt(lastCharIndex);\r\n        if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\r\n            this.trigger({\r\n                triggerKind: modes.SignatureHelpTriggerKind.TriggerCharacter,\r\n                triggerCharacter: text.charAt(lastCharIndex),\r\n            });\r\n        }\r\n    };\r\n    ParameterHintsModel.prototype.onCursorChange = function (e) {\r\n        if (e.source === 'mouse') {\r\n            this.cancel();\r\n        }\r\n        else if (this.isTriggered) {\r\n            this.trigger({ triggerKind: modes.SignatureHelpTriggerKind.ContentChange });\r\n        }\r\n    };\r\n    ParameterHintsModel.prototype.onModelContentChange = function () {\r\n        if (this.isTriggered) {\r\n            this.trigger({ triggerKind: modes.SignatureHelpTriggerKind.ContentChange });\r\n        }\r\n    };\r\n    ParameterHintsModel.prototype.onEditorConfigurationChange = function () {\r\n        this.triggerOnType = this.editor.getOption(64 /* parameterHints */).enabled;\r\n        if (!this.triggerOnType) {\r\n            this.cancel();\r\n        }\r\n    };\r\n    ParameterHintsModel.prototype.dispose = function () {\r\n        this.cancel(true);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ParameterHintsModel.DEFAULT_DELAY = 120; // ms\r\n    return ParameterHintsModel;\r\n}(Disposable));\r\nexport { ParameterHintsModel };\r\nfunction mergeTriggerContexts(previous, current) {\r\n    switch (current.triggerKind) {\r\n        case modes.SignatureHelpTriggerKind.Invoke:\r\n            // Invoke overrides previous triggers.\r\n            return current;\r\n        case modes.SignatureHelpTriggerKind.ContentChange:\r\n            // Ignore content changes triggers\r\n            return previous;\r\n        case modes.SignatureHelpTriggerKind.TriggerCharacter:\r\n        default:\r\n            return current;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}