{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { WorkerManager } from './workerManager.js';\nimport * as languageFeatures from './languageFeatures.js';\nimport { createTokenizationSupport } from './tokenization.js';\nexport function setupMode(defaults) {\n  var disposables = [];\n  var providers = [];\n  var client = new WorkerManager(defaults);\n  disposables.push(client);\n\n  var worker = function () {\n    var uris = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      uris[_i] = arguments[_i];\n    }\n\n    return client.getLanguageServiceWorker.apply(client, uris);\n  };\n\n  function registerProviders() {\n    var languageId = defaults.languageId,\n        modeConfiguration = defaults.modeConfiguration;\n    disposeAll(providers);\n\n    if (modeConfiguration.documentFormattingEdits) {\n      providers.push(monaco.languages.registerDocumentFormattingEditProvider(languageId, new languageFeatures.DocumentFormattingEditProvider(worker)));\n    }\n\n    if (modeConfiguration.documentRangeFormattingEdits) {\n      providers.push(monaco.languages.registerDocumentRangeFormattingEditProvider(languageId, new languageFeatures.DocumentRangeFormattingEditProvider(worker)));\n    }\n\n    if (modeConfiguration.completionItems) {\n      providers.push(monaco.languages.registerCompletionItemProvider(languageId, new languageFeatures.CompletionAdapter(worker)));\n    }\n\n    if (modeConfiguration.hovers) {\n      providers.push(monaco.languages.registerHoverProvider(languageId, new languageFeatures.HoverAdapter(worker)));\n    }\n\n    if (modeConfiguration.documentSymbols) {\n      providers.push(monaco.languages.registerDocumentSymbolProvider(languageId, new languageFeatures.DocumentSymbolAdapter(worker)));\n    }\n\n    if (modeConfiguration.tokens) {\n      providers.push(monaco.languages.setTokensProvider(languageId, createTokenizationSupport(true)));\n    }\n\n    if (modeConfiguration.colors) {\n      providers.push(monaco.languages.registerColorProvider(languageId, new languageFeatures.DocumentColorAdapter(worker)));\n    }\n\n    if (modeConfiguration.foldingRanges) {\n      providers.push(monaco.languages.registerFoldingRangeProvider(languageId, new languageFeatures.FoldingRangeAdapter(worker)));\n    }\n\n    if (modeConfiguration.diagnostics) {\n      providers.push(new languageFeatures.DiagnosticsAdapter(languageId, worker, defaults));\n    }\n\n    if (modeConfiguration.selectionRanges) {\n      providers.push(monaco.languages.registerSelectionRangeProvider(languageId, new languageFeatures.SelectionRangeAdapter(worker)));\n    }\n  }\n\n  registerProviders();\n  disposables.push(monaco.languages.setLanguageConfiguration(defaults.languageId, richEditConfiguration));\n  var modeConfiguration = defaults.modeConfiguration;\n  defaults.onDidChange(function (newDefaults) {\n    if (newDefaults.modeConfiguration !== modeConfiguration) {\n      modeConfiguration = newDefaults.modeConfiguration;\n      registerProviders();\n    }\n  });\n  disposables.push(asDisposable(providers));\n  return asDisposable(disposables);\n}\n\nfunction asDisposable(disposables) {\n  return {\n    dispose: function () {\n      return disposeAll(disposables);\n    }\n  };\n}\n\nfunction disposeAll(disposables) {\n  while (disposables.length) {\n    disposables.pop().dispose();\n  }\n}\n\nvar richEditConfiguration = {\n  wordPattern: /(-?\\d*\\.\\d\\w*)|([^\\[\\{\\]\\}\\:\\\"\\,\\s]+)/g,\n  comments: {\n    lineComment: '//',\n    blockComment: ['/*', '*/']\n  },\n  brackets: [['{', '}'], ['[', ']']],\n  autoClosingPairs: [{\n    open: '{',\n    close: '}',\n    notIn: ['string']\n  }, {\n    open: '[',\n    close: ']',\n    notIn: ['string']\n  }, {\n    open: '\"',\n    close: '\"',\n    notIn: ['string']\n  }]\n};","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/language/json/jsonMode.js"],"names":["WorkerManager","languageFeatures","createTokenizationSupport","setupMode","defaults","disposables","providers","client","push","worker","uris","_i","arguments","length","getLanguageServiceWorker","apply","registerProviders","languageId","modeConfiguration","disposeAll","documentFormattingEdits","monaco","languages","registerDocumentFormattingEditProvider","DocumentFormattingEditProvider","documentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentRangeFormattingEditProvider","completionItems","registerCompletionItemProvider","CompletionAdapter","hovers","registerHoverProvider","HoverAdapter","documentSymbols","registerDocumentSymbolProvider","DocumentSymbolAdapter","tokens","setTokensProvider","colors","registerColorProvider","DocumentColorAdapter","foldingRanges","registerFoldingRangeProvider","FoldingRangeAdapter","diagnostics","DiagnosticsAdapter","selectionRanges","registerSelectionRangeProvider","SelectionRangeAdapter","setLanguageConfiguration","richEditConfiguration","onDidChange","newDefaults","asDisposable","dispose","pop","wordPattern","comments","lineComment","blockComment","brackets","autoClosingPairs","open","close","notIn"],"mappings":"AAAA;;;;AAIA;;AACA,SAASA,aAAT,QAA8B,oBAA9B;AACA,OAAO,KAAKC,gBAAZ,MAAkC,uBAAlC;AACA,SAASC,yBAAT,QAA0C,mBAA1C;AACA,OAAO,SAASC,SAAT,CAAmBC,QAAnB,EAA6B;AAChC,MAAIC,WAAW,GAAG,EAAlB;AACA,MAAIC,SAAS,GAAG,EAAhB;AACA,MAAIC,MAAM,GAAG,IAAIP,aAAJ,CAAkBI,QAAlB,CAAb;AACAC,EAAAA,WAAW,CAACG,IAAZ,CAAiBD,MAAjB;;AACA,MAAIE,MAAM,GAAG,YAAY;AACrB,QAAIC,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC1CD,MAAAA,IAAI,CAACC,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACH;;AACD,WAAOJ,MAAM,CAACO,wBAAP,CAAgCC,KAAhC,CAAsCR,MAAtC,EAA8CG,IAA9C,CAAP;AACH,GAND;;AAOA,WAASM,iBAAT,GAA6B;AACzB,QAAIC,UAAU,GAAGb,QAAQ,CAACa,UAA1B;AAAA,QAAsCC,iBAAiB,GAAGd,QAAQ,CAACc,iBAAnE;AACAC,IAAAA,UAAU,CAACb,SAAD,CAAV;;AACA,QAAIY,iBAAiB,CAACE,uBAAtB,EAA+C;AAC3Cd,MAAAA,SAAS,CAACE,IAAV,CAAea,MAAM,CAACC,SAAP,CAAiBC,sCAAjB,CAAwDN,UAAxD,EAAoE,IAAIhB,gBAAgB,CAACuB,8BAArB,CAAoDf,MAApD,CAApE,CAAf;AACH;;AACD,QAAIS,iBAAiB,CAACO,4BAAtB,EAAoD;AAChDnB,MAAAA,SAAS,CAACE,IAAV,CAAea,MAAM,CAACC,SAAP,CAAiBI,2CAAjB,CAA6DT,UAA7D,EAAyE,IAAIhB,gBAAgB,CAAC0B,mCAArB,CAAyDlB,MAAzD,CAAzE,CAAf;AACH;;AACD,QAAIS,iBAAiB,CAACU,eAAtB,EAAuC;AACnCtB,MAAAA,SAAS,CAACE,IAAV,CAAea,MAAM,CAACC,SAAP,CAAiBO,8BAAjB,CAAgDZ,UAAhD,EAA4D,IAAIhB,gBAAgB,CAAC6B,iBAArB,CAAuCrB,MAAvC,CAA5D,CAAf;AACH;;AACD,QAAIS,iBAAiB,CAACa,MAAtB,EAA8B;AAC1BzB,MAAAA,SAAS,CAACE,IAAV,CAAea,MAAM,CAACC,SAAP,CAAiBU,qBAAjB,CAAuCf,UAAvC,EAAmD,IAAIhB,gBAAgB,CAACgC,YAArB,CAAkCxB,MAAlC,CAAnD,CAAf;AACH;;AACD,QAAIS,iBAAiB,CAACgB,eAAtB,EAAuC;AACnC5B,MAAAA,SAAS,CAACE,IAAV,CAAea,MAAM,CAACC,SAAP,CAAiBa,8BAAjB,CAAgDlB,UAAhD,EAA4D,IAAIhB,gBAAgB,CAACmC,qBAArB,CAA2C3B,MAA3C,CAA5D,CAAf;AACH;;AACD,QAAIS,iBAAiB,CAACmB,MAAtB,EAA8B;AAC1B/B,MAAAA,SAAS,CAACE,IAAV,CAAea,MAAM,CAACC,SAAP,CAAiBgB,iBAAjB,CAAmCrB,UAAnC,EAA+Cf,yBAAyB,CAAC,IAAD,CAAxE,CAAf;AACH;;AACD,QAAIgB,iBAAiB,CAACqB,MAAtB,EAA8B;AAC1BjC,MAAAA,SAAS,CAACE,IAAV,CAAea,MAAM,CAACC,SAAP,CAAiBkB,qBAAjB,CAAuCvB,UAAvC,EAAmD,IAAIhB,gBAAgB,CAACwC,oBAArB,CAA0ChC,MAA1C,CAAnD,CAAf;AACH;;AACD,QAAIS,iBAAiB,CAACwB,aAAtB,EAAqC;AACjCpC,MAAAA,SAAS,CAACE,IAAV,CAAea,MAAM,CAACC,SAAP,CAAiBqB,4BAAjB,CAA8C1B,UAA9C,EAA0D,IAAIhB,gBAAgB,CAAC2C,mBAArB,CAAyCnC,MAAzC,CAA1D,CAAf;AACH;;AACD,QAAIS,iBAAiB,CAAC2B,WAAtB,EAAmC;AAC/BvC,MAAAA,SAAS,CAACE,IAAV,CAAe,IAAIP,gBAAgB,CAAC6C,kBAArB,CAAwC7B,UAAxC,EAAoDR,MAApD,EAA4DL,QAA5D,CAAf;AACH;;AACD,QAAIc,iBAAiB,CAAC6B,eAAtB,EAAuC;AACnCzC,MAAAA,SAAS,CAACE,IAAV,CAAea,MAAM,CAACC,SAAP,CAAiB0B,8BAAjB,CAAgD/B,UAAhD,EAA4D,IAAIhB,gBAAgB,CAACgD,qBAArB,CAA2CxC,MAA3C,CAA5D,CAAf;AACH;AACJ;;AACDO,EAAAA,iBAAiB;AACjBX,EAAAA,WAAW,CAACG,IAAZ,CAAiBa,MAAM,CAACC,SAAP,CAAiB4B,wBAAjB,CAA0C9C,QAAQ,CAACa,UAAnD,EAA+DkC,qBAA/D,CAAjB;AACA,MAAIjC,iBAAiB,GAAGd,QAAQ,CAACc,iBAAjC;AACAd,EAAAA,QAAQ,CAACgD,WAAT,CAAqB,UAAUC,WAAV,EAAuB;AACxC,QAAIA,WAAW,CAACnC,iBAAZ,KAAkCA,iBAAtC,EAAyD;AACrDA,MAAAA,iBAAiB,GAAGmC,WAAW,CAACnC,iBAAhC;AACAF,MAAAA,iBAAiB;AACpB;AACJ,GALD;AAMAX,EAAAA,WAAW,CAACG,IAAZ,CAAiB8C,YAAY,CAAChD,SAAD,CAA7B;AACA,SAAOgD,YAAY,CAACjD,WAAD,CAAnB;AACH;;AACD,SAASiD,YAAT,CAAsBjD,WAAtB,EAAmC;AAC/B,SAAO;AAAEkD,IAAAA,OAAO,EAAE,YAAY;AAAE,aAAOpC,UAAU,CAACd,WAAD,CAAjB;AAAiC;AAA1D,GAAP;AACH;;AACD,SAASc,UAAT,CAAoBd,WAApB,EAAiC;AAC7B,SAAOA,WAAW,CAACQ,MAAnB,EAA2B;AACvBR,IAAAA,WAAW,CAACmD,GAAZ,GAAkBD,OAAlB;AACH;AACJ;;AACD,IAAIJ,qBAAqB,GAAG;AACxBM,EAAAA,WAAW,EAAE,wCADW;AAExBC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,WAAW,EAAE,IADP;AAENC,IAAAA,YAAY,EAAE,CAAC,IAAD,EAAO,IAAP;AAFR,GAFc;AAMxBC,EAAAA,QAAQ,EAAE,CACN,CAAC,GAAD,EAAM,GAAN,CADM,EAEN,CAAC,GAAD,EAAM,GAAN,CAFM,CANc;AAUxBC,EAAAA,gBAAgB,EAAE,CACd;AAAEC,IAAAA,IAAI,EAAE,GAAR;AAAaC,IAAAA,KAAK,EAAE,GAApB;AAAyBC,IAAAA,KAAK,EAAE,CAAC,QAAD;AAAhC,GADc,EAEd;AAAEF,IAAAA,IAAI,EAAE,GAAR;AAAaC,IAAAA,KAAK,EAAE,GAApB;AAAyBC,IAAAA,KAAK,EAAE,CAAC,QAAD;AAAhC,GAFc,EAGd;AAAEF,IAAAA,IAAI,EAAE,GAAR;AAAaC,IAAAA,KAAK,EAAE,GAApB;AAAyBC,IAAAA,KAAK,EAAE,CAAC,QAAD;AAAhC,GAHc;AAVM,CAA5B","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { WorkerManager } from './workerManager.js';\r\nimport * as languageFeatures from './languageFeatures.js';\r\nimport { createTokenizationSupport } from './tokenization.js';\r\nexport function setupMode(defaults) {\r\n    var disposables = [];\r\n    var providers = [];\r\n    var client = new WorkerManager(defaults);\r\n    disposables.push(client);\r\n    var worker = function () {\r\n        var uris = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            uris[_i] = arguments[_i];\r\n        }\r\n        return client.getLanguageServiceWorker.apply(client, uris);\r\n    };\r\n    function registerProviders() {\r\n        var languageId = defaults.languageId, modeConfiguration = defaults.modeConfiguration;\r\n        disposeAll(providers);\r\n        if (modeConfiguration.documentFormattingEdits) {\r\n            providers.push(monaco.languages.registerDocumentFormattingEditProvider(languageId, new languageFeatures.DocumentFormattingEditProvider(worker)));\r\n        }\r\n        if (modeConfiguration.documentRangeFormattingEdits) {\r\n            providers.push(monaco.languages.registerDocumentRangeFormattingEditProvider(languageId, new languageFeatures.DocumentRangeFormattingEditProvider(worker)));\r\n        }\r\n        if (modeConfiguration.completionItems) {\r\n            providers.push(monaco.languages.registerCompletionItemProvider(languageId, new languageFeatures.CompletionAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.hovers) {\r\n            providers.push(monaco.languages.registerHoverProvider(languageId, new languageFeatures.HoverAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.documentSymbols) {\r\n            providers.push(monaco.languages.registerDocumentSymbolProvider(languageId, new languageFeatures.DocumentSymbolAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.tokens) {\r\n            providers.push(monaco.languages.setTokensProvider(languageId, createTokenizationSupport(true)));\r\n        }\r\n        if (modeConfiguration.colors) {\r\n            providers.push(monaco.languages.registerColorProvider(languageId, new languageFeatures.DocumentColorAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.foldingRanges) {\r\n            providers.push(monaco.languages.registerFoldingRangeProvider(languageId, new languageFeatures.FoldingRangeAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.diagnostics) {\r\n            providers.push(new languageFeatures.DiagnosticsAdapter(languageId, worker, defaults));\r\n        }\r\n        if (modeConfiguration.selectionRanges) {\r\n            providers.push(monaco.languages.registerSelectionRangeProvider(languageId, new languageFeatures.SelectionRangeAdapter(worker)));\r\n        }\r\n    }\r\n    registerProviders();\r\n    disposables.push(monaco.languages.setLanguageConfiguration(defaults.languageId, richEditConfiguration));\r\n    var modeConfiguration = defaults.modeConfiguration;\r\n    defaults.onDidChange(function (newDefaults) {\r\n        if (newDefaults.modeConfiguration !== modeConfiguration) {\r\n            modeConfiguration = newDefaults.modeConfiguration;\r\n            registerProviders();\r\n        }\r\n    });\r\n    disposables.push(asDisposable(providers));\r\n    return asDisposable(disposables);\r\n}\r\nfunction asDisposable(disposables) {\r\n    return { dispose: function () { return disposeAll(disposables); } };\r\n}\r\nfunction disposeAll(disposables) {\r\n    while (disposables.length) {\r\n        disposables.pop().dispose();\r\n    }\r\n}\r\nvar richEditConfiguration = {\r\n    wordPattern: /(-?\\d*\\.\\d\\w*)|([^\\[\\{\\]\\}\\:\\\"\\,\\s]+)/g,\r\n    comments: {\r\n        lineComment: '//',\r\n        blockComment: ['/*', '*/']\r\n    },\r\n    brackets: [\r\n        ['{', '}'],\r\n        ['[', ']']\r\n    ],\r\n    autoClosingPairs: [\r\n        { open: '{', close: '}', notIn: ['string'] },\r\n        { open: '[', close: ']', notIn: ['string'] },\r\n        { open: '\"', close: '\"', notIn: ['string'] }\r\n    ]\r\n};\r\n"]},"metadata":{},"sourceType":"module"}