{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport './zoneWidget.css';\nimport * as dom from '../../../base/browser/dom.js';\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\nimport { Color, RGBA } from '../../../base/common/color.js';\nimport { IdGenerator } from '../../../base/common/idGenerator.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport * as objects from '../../../base/common/objects.js';\nimport { Range } from '../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nvar defaultColor = new Color(new RGBA(0, 122, 204));\nvar defaultOptions = {\n  showArrow: true,\n  showFrame: true,\n  className: '',\n  frameColor: defaultColor,\n  arrowColor: defaultColor,\n  keepEditorSelection: false\n};\nvar WIDGET_ID = 'vs.editor.contrib.zoneWidget';\n\nvar ViewZoneDelegate =\n/** @class */\nfunction () {\n  function ViewZoneDelegate(domNode, afterLineNumber, afterColumn, heightInLines, onDomNodeTop, onComputedHeight) {\n    this.id = ''; // A valid zone id should be greater than 0\n\n    this.domNode = domNode;\n    this.afterLineNumber = afterLineNumber;\n    this.afterColumn = afterColumn;\n    this.heightInLines = heightInLines;\n    this._onDomNodeTop = onDomNodeTop;\n    this._onComputedHeight = onComputedHeight;\n  }\n\n  ViewZoneDelegate.prototype.onDomNodeTop = function (top) {\n    this._onDomNodeTop(top);\n  };\n\n  ViewZoneDelegate.prototype.onComputedHeight = function (height) {\n    this._onComputedHeight(height);\n  };\n\n  return ViewZoneDelegate;\n}();\n\nexport { ViewZoneDelegate };\n\nvar OverlayWidgetDelegate =\n/** @class */\nfunction () {\n  function OverlayWidgetDelegate(id, domNode) {\n    this._id = id;\n    this._domNode = domNode;\n  }\n\n  OverlayWidgetDelegate.prototype.getId = function () {\n    return this._id;\n  };\n\n  OverlayWidgetDelegate.prototype.getDomNode = function () {\n    return this._domNode;\n  };\n\n  OverlayWidgetDelegate.prototype.getPosition = function () {\n    return null;\n  };\n\n  return OverlayWidgetDelegate;\n}();\n\nexport { OverlayWidgetDelegate };\n\nvar Arrow =\n/** @class */\nfunction () {\n  function Arrow(_editor) {\n    this._editor = _editor;\n    this._ruleName = Arrow._IdGenerator.nextId();\n    this._decorations = [];\n    this._color = null;\n    this._height = -1; //\n  }\n\n  Arrow.prototype.dispose = function () {\n    this.hide();\n    dom.removeCSSRulesContainingSelector(this._ruleName);\n  };\n\n  Object.defineProperty(Arrow.prototype, \"color\", {\n    set: function (value) {\n      if (this._color !== value) {\n        this._color = value;\n\n        this._updateStyle();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Arrow.prototype, \"height\", {\n    set: function (value) {\n      if (this._height !== value) {\n        this._height = value;\n\n        this._updateStyle();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Arrow.prototype._updateStyle = function () {\n    dom.removeCSSRulesContainingSelector(this._ruleName);\n    dom.createCSSRule(\".monaco-editor \" + this._ruleName, \"border-style: solid; border-color: transparent; border-bottom-color: \" + this._color + \"; border-width: \" + this._height + \"px; bottom: -\" + this._height + \"px; margin-left: -\" + this._height + \"px; \");\n  };\n\n  Arrow.prototype.show = function (where) {\n    this._decorations = this._editor.deltaDecorations(this._decorations, [{\n      range: Range.fromPositions(where),\n      options: {\n        className: this._ruleName,\n        stickiness: 1\n        /* NeverGrowsWhenTypingAtEdges */\n\n      }\n    }]);\n  };\n\n  Arrow.prototype.hide = function () {\n    this._editor.deltaDecorations(this._decorations, []);\n  };\n\n  Arrow._IdGenerator = new IdGenerator('.arrow-decoration-');\n  return Arrow;\n}();\n\nvar ZoneWidget =\n/** @class */\nfunction () {\n  function ZoneWidget(editor, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    this._arrow = null;\n    this._overlayWidget = null;\n    this._resizeSash = null;\n    this._positionMarkerId = [];\n    this._viewZone = null;\n    this._disposables = new DisposableStore();\n    this.container = null;\n    this._isShowing = false;\n    this.editor = editor;\n    this.options = objects.deepClone(options);\n    objects.mixin(this.options, defaultOptions, false);\n    this.domNode = document.createElement('div');\n\n    if (!this.options.isAccessible) {\n      this.domNode.setAttribute('aria-hidden', 'true');\n      this.domNode.setAttribute('role', 'presentation');\n    }\n\n    this._disposables.add(this.editor.onDidLayoutChange(function (info) {\n      var width = _this._getWidth(info);\n\n      _this.domNode.style.width = width + 'px';\n      _this.domNode.style.left = _this._getLeft(info) + 'px';\n\n      _this._onWidth(width);\n    }));\n  }\n\n  ZoneWidget.prototype.dispose = function () {\n    var _this = this;\n\n    if (this._overlayWidget) {\n      this.editor.removeOverlayWidget(this._overlayWidget);\n      this._overlayWidget = null;\n    }\n\n    if (this._viewZone) {\n      this.editor.changeViewZones(function (accessor) {\n        if (_this._viewZone) {\n          accessor.removeZone(_this._viewZone.id);\n        }\n\n        _this._viewZone = null;\n      });\n    }\n\n    this.editor.deltaDecorations(this._positionMarkerId, []);\n    this._positionMarkerId = [];\n\n    this._disposables.dispose();\n  };\n\n  ZoneWidget.prototype.create = function () {\n    dom.addClass(this.domNode, 'zone-widget');\n\n    if (this.options.className) {\n      dom.addClass(this.domNode, this.options.className);\n    }\n\n    this.container = document.createElement('div');\n    dom.addClass(this.container, 'zone-widget-container');\n    this.domNode.appendChild(this.container);\n\n    if (this.options.showArrow) {\n      this._arrow = new Arrow(this.editor);\n\n      this._disposables.add(this._arrow);\n    }\n\n    this._fillContainer(this.container);\n\n    this._initSash();\n\n    this._applyStyles();\n  };\n\n  ZoneWidget.prototype.style = function (styles) {\n    if (styles.frameColor) {\n      this.options.frameColor = styles.frameColor;\n    }\n\n    if (styles.arrowColor) {\n      this.options.arrowColor = styles.arrowColor;\n    }\n\n    this._applyStyles();\n  };\n\n  ZoneWidget.prototype._applyStyles = function () {\n    if (this.container && this.options.frameColor) {\n      var frameColor = this.options.frameColor.toString();\n      this.container.style.borderTopColor = frameColor;\n      this.container.style.borderBottomColor = frameColor;\n    }\n\n    if (this._arrow && this.options.arrowColor) {\n      var arrowColor = this.options.arrowColor.toString();\n      this._arrow.color = arrowColor;\n    }\n  };\n\n  ZoneWidget.prototype._getWidth = function (info) {\n    return info.width - info.minimapWidth - info.verticalScrollbarWidth;\n  };\n\n  ZoneWidget.prototype._getLeft = function (info) {\n    // If minimap is to the left, we move beyond it\n    if (info.minimapWidth > 0 && info.minimapLeft === 0) {\n      return info.minimapWidth;\n    }\n\n    return 0;\n  };\n\n  ZoneWidget.prototype._onViewZoneTop = function (top) {\n    this.domNode.style.top = top + 'px';\n  };\n\n  ZoneWidget.prototype._onViewZoneHeight = function (height) {\n    this.domNode.style.height = height + \"px\";\n\n    if (this.container) {\n      var containerHeight = height - this._decoratingElementsHeight();\n\n      this.container.style.height = containerHeight + \"px\";\n      var layoutInfo = this.editor.getLayoutInfo();\n\n      this._doLayout(containerHeight, this._getWidth(layoutInfo));\n    }\n\n    if (this._resizeSash) {\n      this._resizeSash.layout();\n    }\n  };\n\n  Object.defineProperty(ZoneWidget.prototype, \"position\", {\n    get: function () {\n      var id = this._positionMarkerId[0];\n\n      if (!id) {\n        return undefined;\n      }\n\n      var model = this.editor.getModel();\n\n      if (!model) {\n        return undefined;\n      }\n\n      var range = model.getDecorationRange(id);\n\n      if (!range) {\n        return undefined;\n      }\n\n      return range.getStartPosition();\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ZoneWidget.prototype.show = function (rangeOrPos, heightInLines) {\n    var range = Range.isIRange(rangeOrPos) ? Range.lift(rangeOrPos) : Range.fromPositions(rangeOrPos);\n    this._isShowing = true;\n\n    this._showImpl(range, heightInLines);\n\n    this._isShowing = false;\n    this._positionMarkerId = this.editor.deltaDecorations(this._positionMarkerId, [{\n      range: range,\n      options: ModelDecorationOptions.EMPTY\n    }]);\n  };\n\n  ZoneWidget.prototype.hide = function () {\n    var _this = this;\n\n    if (this._viewZone) {\n      this.editor.changeViewZones(function (accessor) {\n        if (_this._viewZone) {\n          accessor.removeZone(_this._viewZone.id);\n        }\n      });\n      this._viewZone = null;\n    }\n\n    if (this._overlayWidget) {\n      this.editor.removeOverlayWidget(this._overlayWidget);\n      this._overlayWidget = null;\n    }\n\n    if (this._arrow) {\n      this._arrow.hide();\n    }\n  };\n\n  ZoneWidget.prototype._decoratingElementsHeight = function () {\n    var lineHeight = this.editor.getOption(49\n    /* lineHeight */\n    );\n    var result = 0;\n\n    if (this.options.showArrow) {\n      var arrowHeight = Math.round(lineHeight / 3);\n      result += 2 * arrowHeight;\n    }\n\n    if (this.options.showFrame) {\n      var frameThickness = Math.round(lineHeight / 9);\n      result += 2 * frameThickness;\n    }\n\n    return result;\n  };\n\n  ZoneWidget.prototype._showImpl = function (where, heightInLines) {\n    var _this = this;\n\n    var position = where.getStartPosition();\n    var layoutInfo = this.editor.getLayoutInfo();\n\n    var width = this._getWidth(layoutInfo);\n\n    this.domNode.style.width = width + \"px\";\n    this.domNode.style.left = this._getLeft(layoutInfo) + 'px'; // Render the widget as zone (rendering) and widget (lifecycle)\n\n    var viewZoneDomNode = document.createElement('div');\n    viewZoneDomNode.style.overflow = 'hidden';\n    var lineHeight = this.editor.getOption(49\n    /* lineHeight */\n    ); // adjust heightInLines to viewport\n\n    var maxHeightInLines = this.editor.getLayoutInfo().height / lineHeight * 0.8;\n\n    if (heightInLines >= maxHeightInLines) {\n      heightInLines = maxHeightInLines;\n    }\n\n    var arrowHeight = 0;\n    var frameThickness = 0; // Render the arrow one 1/3 of an editor line height\n\n    if (this._arrow && this.options.showArrow) {\n      arrowHeight = Math.round(lineHeight / 3);\n      this._arrow.height = arrowHeight;\n\n      this._arrow.show(position);\n    } // Render the frame as 1/9 of an editor line height\n\n\n    if (this.options.showFrame) {\n      frameThickness = Math.round(lineHeight / 9);\n    } // insert zone widget\n\n\n    this.editor.changeViewZones(function (accessor) {\n      if (_this._viewZone) {\n        accessor.removeZone(_this._viewZone.id);\n      }\n\n      if (_this._overlayWidget) {\n        _this.editor.removeOverlayWidget(_this._overlayWidget);\n\n        _this._overlayWidget = null;\n      }\n\n      _this.domNode.style.top = '-1000px';\n      _this._viewZone = new ViewZoneDelegate(viewZoneDomNode, position.lineNumber, position.column, heightInLines, function (top) {\n        return _this._onViewZoneTop(top);\n      }, function (height) {\n        return _this._onViewZoneHeight(height);\n      });\n      _this._viewZone.id = accessor.addZone(_this._viewZone);\n      _this._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + _this._viewZone.id, _this.domNode);\n\n      _this.editor.addOverlayWidget(_this._overlayWidget);\n    });\n\n    if (this.container && this.options.showFrame) {\n      var width_1 = this.options.frameWidth ? this.options.frameWidth : frameThickness;\n      this.container.style.borderTopWidth = width_1 + 'px';\n      this.container.style.borderBottomWidth = width_1 + 'px';\n    }\n\n    var containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\n\n    if (this.container) {\n      this.container.style.top = arrowHeight + 'px';\n      this.container.style.height = containerHeight + 'px';\n      this.container.style.overflow = 'hidden';\n    }\n\n    this._doLayout(containerHeight, width);\n\n    if (!this.options.keepEditorSelection) {\n      this.editor.setSelection(where);\n    }\n\n    var model = this.editor.getModel();\n\n    if (model) {\n      var revealLine = where.endLineNumber + 1;\n\n      if (revealLine <= model.getLineCount()) {\n        // reveal line below the zone widget\n        this.revealLine(revealLine, false);\n      } else {\n        // reveal last line atop\n        this.revealLine(model.getLineCount(), true);\n      }\n    }\n  };\n\n  ZoneWidget.prototype.revealLine = function (lineNumber, isLastLine) {\n    if (isLastLine) {\n      this.editor.revealLineInCenter(lineNumber, 0\n      /* Smooth */\n      );\n    } else {\n      this.editor.revealLine(lineNumber, 0\n      /* Smooth */\n      );\n    }\n  };\n\n  ZoneWidget.prototype.setCssClass = function (className, classToReplace) {\n    if (!this.container) {\n      return;\n    }\n\n    if (classToReplace) {\n      this.container.classList.remove(classToReplace);\n    }\n\n    dom.addClass(this.container, className);\n  };\n\n  ZoneWidget.prototype._onWidth = function (widthInPixel) {// implement in subclass\n  };\n\n  ZoneWidget.prototype._doLayout = function (heightInPixel, widthInPixel) {// implement in subclass\n  };\n\n  ZoneWidget.prototype._relayout = function (newHeightInLines) {\n    var _this = this;\n\n    if (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\n      this.editor.changeViewZones(function (accessor) {\n        if (_this._viewZone) {\n          _this._viewZone.heightInLines = newHeightInLines;\n          accessor.layoutZone(_this._viewZone.id);\n        }\n      });\n    }\n  }; // --- sash\n\n\n  ZoneWidget.prototype._initSash = function () {\n    var _this = this;\n\n    if (this._resizeSash) {\n      return;\n    }\n\n    this._resizeSash = this._disposables.add(new Sash(this.domNode, this, {\n      orientation: 1\n      /* HORIZONTAL */\n\n    }));\n\n    if (!this.options.isResizeable) {\n      this._resizeSash.hide();\n\n      this._resizeSash.state = 0\n      /* Disabled */\n      ;\n    }\n\n    var data;\n\n    this._disposables.add(this._resizeSash.onDidStart(function (e) {\n      if (_this._viewZone) {\n        data = {\n          startY: e.startY,\n          heightInLines: _this._viewZone.heightInLines\n        };\n      }\n    }));\n\n    this._disposables.add(this._resizeSash.onDidEnd(function () {\n      data = undefined;\n    }));\n\n    this._disposables.add(this._resizeSash.onDidChange(function (evt) {\n      if (data) {\n        var lineDelta = (evt.currentY - data.startY) / _this.editor.getOption(49\n        /* lineHeight */\n        );\n\n        var roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\n        var newHeightInLines = data.heightInLines + roundedLineDelta;\n\n        if (newHeightInLines > 5 && newHeightInLines < 35) {\n          _this._relayout(newHeightInLines);\n        }\n      }\n    }));\n  };\n\n  ZoneWidget.prototype.getHorizontalSashLeft = function () {\n    return 0;\n  };\n\n  ZoneWidget.prototype.getHorizontalSashTop = function () {\n    return (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - this._decoratingElementsHeight() / 2;\n  };\n\n  ZoneWidget.prototype.getHorizontalSashWidth = function () {\n    var layoutInfo = this.editor.getLayoutInfo();\n    return layoutInfo.width - layoutInfo.minimapWidth;\n  };\n\n  return ZoneWidget;\n}();\n\nexport { ZoneWidget };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/zoneWidget/zoneWidget.js"],"names":["dom","Sash","Color","RGBA","IdGenerator","DisposableStore","objects","Range","ModelDecorationOptions","defaultColor","defaultOptions","showArrow","showFrame","className","frameColor","arrowColor","keepEditorSelection","WIDGET_ID","ViewZoneDelegate","domNode","afterLineNumber","afterColumn","heightInLines","onDomNodeTop","onComputedHeight","id","_onDomNodeTop","_onComputedHeight","prototype","top","height","OverlayWidgetDelegate","_id","_domNode","getId","getDomNode","getPosition","Arrow","_editor","_ruleName","_IdGenerator","nextId","_decorations","_color","_height","dispose","hide","removeCSSRulesContainingSelector","Object","defineProperty","set","value","_updateStyle","enumerable","configurable","createCSSRule","show","where","deltaDecorations","range","fromPositions","options","stickiness","ZoneWidget","editor","_this","_arrow","_overlayWidget","_resizeSash","_positionMarkerId","_viewZone","_disposables","container","_isShowing","deepClone","mixin","document","createElement","isAccessible","setAttribute","add","onDidLayoutChange","info","width","_getWidth","style","left","_getLeft","_onWidth","removeOverlayWidget","changeViewZones","accessor","removeZone","create","addClass","appendChild","_fillContainer","_initSash","_applyStyles","styles","toString","borderTopColor","borderBottomColor","color","minimapWidth","verticalScrollbarWidth","minimapLeft","_onViewZoneTop","_onViewZoneHeight","containerHeight","_decoratingElementsHeight","layoutInfo","getLayoutInfo","_doLayout","layout","get","undefined","model","getModel","getDecorationRange","getStartPosition","rangeOrPos","isIRange","lift","_showImpl","EMPTY","lineHeight","getOption","result","arrowHeight","Math","round","frameThickness","position","viewZoneDomNode","overflow","maxHeightInLines","lineNumber","column","addZone","addOverlayWidget","width_1","frameWidth","borderTopWidth","borderBottomWidth","setSelection","revealLine","endLineNumber","getLineCount","isLastLine","revealLineInCenter","setCssClass","classToReplace","classList","remove","widthInPixel","heightInPixel","_relayout","newHeightInLines","layoutZone","orientation","isResizeable","state","data","onDidStart","e","startY","onDidEnd","onDidChange","evt","lineDelta","currentY","roundedLineDelta","ceil","floor","getHorizontalSashLeft","getHorizontalSashTop","parseInt","getHorizontalSashWidth"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './zoneWidget.css';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\r\nimport { Color, RGBA } from '../../../base/common/color.js';\r\nimport { IdGenerator } from '../../../base/common/idGenerator.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nvar defaultColor = new Color(new RGBA(0, 122, 204));\r\nvar defaultOptions = {\r\n    showArrow: true,\r\n    showFrame: true,\r\n    className: '',\r\n    frameColor: defaultColor,\r\n    arrowColor: defaultColor,\r\n    keepEditorSelection: false\r\n};\r\nvar WIDGET_ID = 'vs.editor.contrib.zoneWidget';\r\nvar ViewZoneDelegate = /** @class */ (function () {\r\n    function ViewZoneDelegate(domNode, afterLineNumber, afterColumn, heightInLines, onDomNodeTop, onComputedHeight) {\r\n        this.id = ''; // A valid zone id should be greater than 0\r\n        this.domNode = domNode;\r\n        this.afterLineNumber = afterLineNumber;\r\n        this.afterColumn = afterColumn;\r\n        this.heightInLines = heightInLines;\r\n        this._onDomNodeTop = onDomNodeTop;\r\n        this._onComputedHeight = onComputedHeight;\r\n    }\r\n    ViewZoneDelegate.prototype.onDomNodeTop = function (top) {\r\n        this._onDomNodeTop(top);\r\n    };\r\n    ViewZoneDelegate.prototype.onComputedHeight = function (height) {\r\n        this._onComputedHeight(height);\r\n    };\r\n    return ViewZoneDelegate;\r\n}());\r\nexport { ViewZoneDelegate };\r\nvar OverlayWidgetDelegate = /** @class */ (function () {\r\n    function OverlayWidgetDelegate(id, domNode) {\r\n        this._id = id;\r\n        this._domNode = domNode;\r\n    }\r\n    OverlayWidgetDelegate.prototype.getId = function () {\r\n        return this._id;\r\n    };\r\n    OverlayWidgetDelegate.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    OverlayWidgetDelegate.prototype.getPosition = function () {\r\n        return null;\r\n    };\r\n    return OverlayWidgetDelegate;\r\n}());\r\nexport { OverlayWidgetDelegate };\r\nvar Arrow = /** @class */ (function () {\r\n    function Arrow(_editor) {\r\n        this._editor = _editor;\r\n        this._ruleName = Arrow._IdGenerator.nextId();\r\n        this._decorations = [];\r\n        this._color = null;\r\n        this._height = -1;\r\n        //\r\n    }\r\n    Arrow.prototype.dispose = function () {\r\n        this.hide();\r\n        dom.removeCSSRulesContainingSelector(this._ruleName);\r\n    };\r\n    Object.defineProperty(Arrow.prototype, \"color\", {\r\n        set: function (value) {\r\n            if (this._color !== value) {\r\n                this._color = value;\r\n                this._updateStyle();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Arrow.prototype, \"height\", {\r\n        set: function (value) {\r\n            if (this._height !== value) {\r\n                this._height = value;\r\n                this._updateStyle();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Arrow.prototype._updateStyle = function () {\r\n        dom.removeCSSRulesContainingSelector(this._ruleName);\r\n        dom.createCSSRule(\".monaco-editor \" + this._ruleName, \"border-style: solid; border-color: transparent; border-bottom-color: \" + this._color + \"; border-width: \" + this._height + \"px; bottom: -\" + this._height + \"px; margin-left: -\" + this._height + \"px; \");\r\n    };\r\n    Arrow.prototype.show = function (where) {\r\n        this._decorations = this._editor.deltaDecorations(this._decorations, [{ range: Range.fromPositions(where), options: { className: this._ruleName, stickiness: 1 /* NeverGrowsWhenTypingAtEdges */ } }]);\r\n    };\r\n    Arrow.prototype.hide = function () {\r\n        this._editor.deltaDecorations(this._decorations, []);\r\n    };\r\n    Arrow._IdGenerator = new IdGenerator('.arrow-decoration-');\r\n    return Arrow;\r\n}());\r\nvar ZoneWidget = /** @class */ (function () {\r\n    function ZoneWidget(editor, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        this._arrow = null;\r\n        this._overlayWidget = null;\r\n        this._resizeSash = null;\r\n        this._positionMarkerId = [];\r\n        this._viewZone = null;\r\n        this._disposables = new DisposableStore();\r\n        this.container = null;\r\n        this._isShowing = false;\r\n        this.editor = editor;\r\n        this.options = objects.deepClone(options);\r\n        objects.mixin(this.options, defaultOptions, false);\r\n        this.domNode = document.createElement('div');\r\n        if (!this.options.isAccessible) {\r\n            this.domNode.setAttribute('aria-hidden', 'true');\r\n            this.domNode.setAttribute('role', 'presentation');\r\n        }\r\n        this._disposables.add(this.editor.onDidLayoutChange(function (info) {\r\n            var width = _this._getWidth(info);\r\n            _this.domNode.style.width = width + 'px';\r\n            _this.domNode.style.left = _this._getLeft(info) + 'px';\r\n            _this._onWidth(width);\r\n        }));\r\n    }\r\n    ZoneWidget.prototype.dispose = function () {\r\n        var _this = this;\r\n        if (this._overlayWidget) {\r\n            this.editor.removeOverlayWidget(this._overlayWidget);\r\n            this._overlayWidget = null;\r\n        }\r\n        if (this._viewZone) {\r\n            this.editor.changeViewZones(function (accessor) {\r\n                if (_this._viewZone) {\r\n                    accessor.removeZone(_this._viewZone.id);\r\n                }\r\n                _this._viewZone = null;\r\n            });\r\n        }\r\n        this.editor.deltaDecorations(this._positionMarkerId, []);\r\n        this._positionMarkerId = [];\r\n        this._disposables.dispose();\r\n    };\r\n    ZoneWidget.prototype.create = function () {\r\n        dom.addClass(this.domNode, 'zone-widget');\r\n        if (this.options.className) {\r\n            dom.addClass(this.domNode, this.options.className);\r\n        }\r\n        this.container = document.createElement('div');\r\n        dom.addClass(this.container, 'zone-widget-container');\r\n        this.domNode.appendChild(this.container);\r\n        if (this.options.showArrow) {\r\n            this._arrow = new Arrow(this.editor);\r\n            this._disposables.add(this._arrow);\r\n        }\r\n        this._fillContainer(this.container);\r\n        this._initSash();\r\n        this._applyStyles();\r\n    };\r\n    ZoneWidget.prototype.style = function (styles) {\r\n        if (styles.frameColor) {\r\n            this.options.frameColor = styles.frameColor;\r\n        }\r\n        if (styles.arrowColor) {\r\n            this.options.arrowColor = styles.arrowColor;\r\n        }\r\n        this._applyStyles();\r\n    };\r\n    ZoneWidget.prototype._applyStyles = function () {\r\n        if (this.container && this.options.frameColor) {\r\n            var frameColor = this.options.frameColor.toString();\r\n            this.container.style.borderTopColor = frameColor;\r\n            this.container.style.borderBottomColor = frameColor;\r\n        }\r\n        if (this._arrow && this.options.arrowColor) {\r\n            var arrowColor = this.options.arrowColor.toString();\r\n            this._arrow.color = arrowColor;\r\n        }\r\n    };\r\n    ZoneWidget.prototype._getWidth = function (info) {\r\n        return info.width - info.minimapWidth - info.verticalScrollbarWidth;\r\n    };\r\n    ZoneWidget.prototype._getLeft = function (info) {\r\n        // If minimap is to the left, we move beyond it\r\n        if (info.minimapWidth > 0 && info.minimapLeft === 0) {\r\n            return info.minimapWidth;\r\n        }\r\n        return 0;\r\n    };\r\n    ZoneWidget.prototype._onViewZoneTop = function (top) {\r\n        this.domNode.style.top = top + 'px';\r\n    };\r\n    ZoneWidget.prototype._onViewZoneHeight = function (height) {\r\n        this.domNode.style.height = height + \"px\";\r\n        if (this.container) {\r\n            var containerHeight = height - this._decoratingElementsHeight();\r\n            this.container.style.height = containerHeight + \"px\";\r\n            var layoutInfo = this.editor.getLayoutInfo();\r\n            this._doLayout(containerHeight, this._getWidth(layoutInfo));\r\n        }\r\n        if (this._resizeSash) {\r\n            this._resizeSash.layout();\r\n        }\r\n    };\r\n    Object.defineProperty(ZoneWidget.prototype, \"position\", {\r\n        get: function () {\r\n            var id = this._positionMarkerId[0];\r\n            if (!id) {\r\n                return undefined;\r\n            }\r\n            var model = this.editor.getModel();\r\n            if (!model) {\r\n                return undefined;\r\n            }\r\n            var range = model.getDecorationRange(id);\r\n            if (!range) {\r\n                return undefined;\r\n            }\r\n            return range.getStartPosition();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ZoneWidget.prototype.show = function (rangeOrPos, heightInLines) {\r\n        var range = Range.isIRange(rangeOrPos) ? Range.lift(rangeOrPos) : Range.fromPositions(rangeOrPos);\r\n        this._isShowing = true;\r\n        this._showImpl(range, heightInLines);\r\n        this._isShowing = false;\r\n        this._positionMarkerId = this.editor.deltaDecorations(this._positionMarkerId, [{ range: range, options: ModelDecorationOptions.EMPTY }]);\r\n    };\r\n    ZoneWidget.prototype.hide = function () {\r\n        var _this = this;\r\n        if (this._viewZone) {\r\n            this.editor.changeViewZones(function (accessor) {\r\n                if (_this._viewZone) {\r\n                    accessor.removeZone(_this._viewZone.id);\r\n                }\r\n            });\r\n            this._viewZone = null;\r\n        }\r\n        if (this._overlayWidget) {\r\n            this.editor.removeOverlayWidget(this._overlayWidget);\r\n            this._overlayWidget = null;\r\n        }\r\n        if (this._arrow) {\r\n            this._arrow.hide();\r\n        }\r\n    };\r\n    ZoneWidget.prototype._decoratingElementsHeight = function () {\r\n        var lineHeight = this.editor.getOption(49 /* lineHeight */);\r\n        var result = 0;\r\n        if (this.options.showArrow) {\r\n            var arrowHeight = Math.round(lineHeight / 3);\r\n            result += 2 * arrowHeight;\r\n        }\r\n        if (this.options.showFrame) {\r\n            var frameThickness = Math.round(lineHeight / 9);\r\n            result += 2 * frameThickness;\r\n        }\r\n        return result;\r\n    };\r\n    ZoneWidget.prototype._showImpl = function (where, heightInLines) {\r\n        var _this = this;\r\n        var position = where.getStartPosition();\r\n        var layoutInfo = this.editor.getLayoutInfo();\r\n        var width = this._getWidth(layoutInfo);\r\n        this.domNode.style.width = width + \"px\";\r\n        this.domNode.style.left = this._getLeft(layoutInfo) + 'px';\r\n        // Render the widget as zone (rendering) and widget (lifecycle)\r\n        var viewZoneDomNode = document.createElement('div');\r\n        viewZoneDomNode.style.overflow = 'hidden';\r\n        var lineHeight = this.editor.getOption(49 /* lineHeight */);\r\n        // adjust heightInLines to viewport\r\n        var maxHeightInLines = (this.editor.getLayoutInfo().height / lineHeight) * 0.8;\r\n        if (heightInLines >= maxHeightInLines) {\r\n            heightInLines = maxHeightInLines;\r\n        }\r\n        var arrowHeight = 0;\r\n        var frameThickness = 0;\r\n        // Render the arrow one 1/3 of an editor line height\r\n        if (this._arrow && this.options.showArrow) {\r\n            arrowHeight = Math.round(lineHeight / 3);\r\n            this._arrow.height = arrowHeight;\r\n            this._arrow.show(position);\r\n        }\r\n        // Render the frame as 1/9 of an editor line height\r\n        if (this.options.showFrame) {\r\n            frameThickness = Math.round(lineHeight / 9);\r\n        }\r\n        // insert zone widget\r\n        this.editor.changeViewZones(function (accessor) {\r\n            if (_this._viewZone) {\r\n                accessor.removeZone(_this._viewZone.id);\r\n            }\r\n            if (_this._overlayWidget) {\r\n                _this.editor.removeOverlayWidget(_this._overlayWidget);\r\n                _this._overlayWidget = null;\r\n            }\r\n            _this.domNode.style.top = '-1000px';\r\n            _this._viewZone = new ViewZoneDelegate(viewZoneDomNode, position.lineNumber, position.column, heightInLines, function (top) { return _this._onViewZoneTop(top); }, function (height) { return _this._onViewZoneHeight(height); });\r\n            _this._viewZone.id = accessor.addZone(_this._viewZone);\r\n            _this._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + _this._viewZone.id, _this.domNode);\r\n            _this.editor.addOverlayWidget(_this._overlayWidget);\r\n        });\r\n        if (this.container && this.options.showFrame) {\r\n            var width_1 = this.options.frameWidth ? this.options.frameWidth : frameThickness;\r\n            this.container.style.borderTopWidth = width_1 + 'px';\r\n            this.container.style.borderBottomWidth = width_1 + 'px';\r\n        }\r\n        var containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\r\n        if (this.container) {\r\n            this.container.style.top = arrowHeight + 'px';\r\n            this.container.style.height = containerHeight + 'px';\r\n            this.container.style.overflow = 'hidden';\r\n        }\r\n        this._doLayout(containerHeight, width);\r\n        if (!this.options.keepEditorSelection) {\r\n            this.editor.setSelection(where);\r\n        }\r\n        var model = this.editor.getModel();\r\n        if (model) {\r\n            var revealLine = where.endLineNumber + 1;\r\n            if (revealLine <= model.getLineCount()) {\r\n                // reveal line below the zone widget\r\n                this.revealLine(revealLine, false);\r\n            }\r\n            else {\r\n                // reveal last line atop\r\n                this.revealLine(model.getLineCount(), true);\r\n            }\r\n        }\r\n    };\r\n    ZoneWidget.prototype.revealLine = function (lineNumber, isLastLine) {\r\n        if (isLastLine) {\r\n            this.editor.revealLineInCenter(lineNumber, 0 /* Smooth */);\r\n        }\r\n        else {\r\n            this.editor.revealLine(lineNumber, 0 /* Smooth */);\r\n        }\r\n    };\r\n    ZoneWidget.prototype.setCssClass = function (className, classToReplace) {\r\n        if (!this.container) {\r\n            return;\r\n        }\r\n        if (classToReplace) {\r\n            this.container.classList.remove(classToReplace);\r\n        }\r\n        dom.addClass(this.container, className);\r\n    };\r\n    ZoneWidget.prototype._onWidth = function (widthInPixel) {\r\n        // implement in subclass\r\n    };\r\n    ZoneWidget.prototype._doLayout = function (heightInPixel, widthInPixel) {\r\n        // implement in subclass\r\n    };\r\n    ZoneWidget.prototype._relayout = function (newHeightInLines) {\r\n        var _this = this;\r\n        if (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\r\n            this.editor.changeViewZones(function (accessor) {\r\n                if (_this._viewZone) {\r\n                    _this._viewZone.heightInLines = newHeightInLines;\r\n                    accessor.layoutZone(_this._viewZone.id);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    // --- sash\r\n    ZoneWidget.prototype._initSash = function () {\r\n        var _this = this;\r\n        if (this._resizeSash) {\r\n            return;\r\n        }\r\n        this._resizeSash = this._disposables.add(new Sash(this.domNode, this, { orientation: 1 /* HORIZONTAL */ }));\r\n        if (!this.options.isResizeable) {\r\n            this._resizeSash.hide();\r\n            this._resizeSash.state = 0 /* Disabled */;\r\n        }\r\n        var data;\r\n        this._disposables.add(this._resizeSash.onDidStart(function (e) {\r\n            if (_this._viewZone) {\r\n                data = {\r\n                    startY: e.startY,\r\n                    heightInLines: _this._viewZone.heightInLines,\r\n                };\r\n            }\r\n        }));\r\n        this._disposables.add(this._resizeSash.onDidEnd(function () {\r\n            data = undefined;\r\n        }));\r\n        this._disposables.add(this._resizeSash.onDidChange(function (evt) {\r\n            if (data) {\r\n                var lineDelta = (evt.currentY - data.startY) / _this.editor.getOption(49 /* lineHeight */);\r\n                var roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\r\n                var newHeightInLines = data.heightInLines + roundedLineDelta;\r\n                if (newHeightInLines > 5 && newHeightInLines < 35) {\r\n                    _this._relayout(newHeightInLines);\r\n                }\r\n            }\r\n        }));\r\n    };\r\n    ZoneWidget.prototype.getHorizontalSashLeft = function () {\r\n        return 0;\r\n    };\r\n    ZoneWidget.prototype.getHorizontalSashTop = function () {\r\n        return (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - (this._decoratingElementsHeight() / 2);\r\n    };\r\n    ZoneWidget.prototype.getHorizontalSashWidth = function () {\r\n        var layoutInfo = this.editor.getLayoutInfo();\r\n        return layoutInfo.width - layoutInfo.minimapWidth;\r\n    };\r\n    return ZoneWidget;\r\n}());\r\nexport { ZoneWidget };\r\n"]},"metadata":{},"sourceType":"module"}