{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport './sash.css';\nimport { dispose, Disposable, DisposableStore } from '../../../common/lifecycle.js';\nimport { isIPad } from '../../browser.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport * as types from '../../../common/types.js';\nimport { EventType, Gesture } from '../../touch.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { Emitter } from '../../../common/event.js';\nimport { getElementsByTagName, EventHelper, createStyleSheet, addDisposableListener, append, $, addClass, removeClass, toggleClass } from '../../dom.js';\nimport { domEvent } from '../../event.js';\nvar DEBUG = false;\n\nvar Sash =\n/** @class */\nfunction (_super) {\n  __extends(Sash, _super);\n\n  function Sash(container, layoutProvider, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this._state = 3\n    /* Enabled */\n    ;\n    _this._onDidEnablementChange = _this._register(new Emitter());\n    _this.onDidEnablementChange = _this._onDidEnablementChange.event;\n    _this._onDidStart = _this._register(new Emitter());\n    _this.onDidStart = _this._onDidStart.event;\n    _this._onDidChange = _this._register(new Emitter());\n    _this.onDidChange = _this._onDidChange.event;\n    _this._onDidReset = _this._register(new Emitter());\n    _this.onDidReset = _this._onDidReset.event;\n    _this._onDidEnd = _this._register(new Emitter());\n    _this.onDidEnd = _this._onDidEnd.event;\n    _this.linkedSash = undefined;\n    _this.orthogonalStartSashDisposables = _this._register(new DisposableStore());\n    _this.orthogonalEndSashDisposables = _this._register(new DisposableStore());\n    _this.el = append(container, $('.monaco-sash'));\n\n    if (isMacintosh) {\n      addClass(_this.el, 'mac');\n    }\n\n    _this._register(domEvent(_this.el, 'mousedown')(_this.onMouseDown, _this));\n\n    _this._register(domEvent(_this.el, 'dblclick')(_this.onMouseDoubleClick, _this));\n\n    _this._register(Gesture.addTarget(_this.el));\n\n    _this._register(domEvent(_this.el, EventType.Start)(_this.onTouchStart, _this));\n\n    if (isIPad) {\n      // see also https://ux.stackexchange.com/questions/39023/what-is-the-optimum-button-size-of-touch-screen-applications\n      addClass(_this.el, 'touch');\n    }\n\n    _this.setOrientation(options.orientation || 0\n    /* VERTICAL */\n    );\n\n    _this.hidden = false;\n    _this.layoutProvider = layoutProvider;\n    _this.orthogonalStartSash = options.orthogonalStartSash;\n    _this.orthogonalEndSash = options.orthogonalEndSash;\n    toggleClass(_this.el, 'debug', DEBUG);\n    return _this;\n  }\n\n  Object.defineProperty(Sash.prototype, \"state\", {\n    get: function () {\n      return this._state;\n    },\n    set: function (state) {\n      if (this._state === state) {\n        return;\n      }\n\n      toggleClass(this.el, 'disabled', state === 0\n      /* Disabled */\n      );\n      toggleClass(this.el, 'minimum', state === 1\n      /* Minimum */\n      );\n      toggleClass(this.el, 'maximum', state === 2\n      /* Maximum */\n      );\n      this._state = state;\n\n      this._onDidEnablementChange.fire(state);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sash.prototype, \"orthogonalStartSash\", {\n    get: function () {\n      return this._orthogonalStartSash;\n    },\n    set: function (sash) {\n      this.orthogonalStartSashDisposables.clear();\n\n      if (sash) {\n        this.orthogonalStartSashDisposables.add(sash.onDidEnablementChange(this.onOrthogonalStartSashEnablementChange, this));\n        this.onOrthogonalStartSashEnablementChange(sash.state);\n      } else {\n        this.onOrthogonalStartSashEnablementChange(0\n        /* Disabled */\n        );\n      }\n\n      this._orthogonalStartSash = sash;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Sash.prototype, \"orthogonalEndSash\", {\n    get: function () {\n      return this._orthogonalEndSash;\n    },\n    set: function (sash) {\n      this.orthogonalEndSashDisposables.clear();\n\n      if (sash) {\n        this.orthogonalEndSashDisposables.add(sash.onDidEnablementChange(this.onOrthogonalEndSashEnablementChange, this));\n        this.onOrthogonalEndSashEnablementChange(sash.state);\n      } else {\n        this.onOrthogonalEndSashEnablementChange(0\n        /* Disabled */\n        );\n      }\n\n      this._orthogonalEndSash = sash;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Sash.prototype.setOrientation = function (orientation) {\n    this.orientation = orientation;\n\n    if (this.orientation === 1\n    /* HORIZONTAL */\n    ) {\n        addClass(this.el, 'horizontal');\n        removeClass(this.el, 'vertical');\n      } else {\n      removeClass(this.el, 'horizontal');\n      addClass(this.el, 'vertical');\n    }\n\n    if (this.layoutProvider) {\n      this.layout();\n    }\n  };\n\n  Sash.prototype.onMouseDown = function (e) {\n    var _this = this;\n\n    EventHelper.stop(e, false);\n    var isMultisashResize = false;\n\n    if (!e.__orthogonalSashEvent) {\n      var orthogonalSash = this.getOrthogonalSash(e);\n\n      if (orthogonalSash) {\n        isMultisashResize = true;\n        e.__orthogonalSashEvent = true;\n        orthogonalSash.onMouseDown(e);\n      }\n    }\n\n    if (this.linkedSash && !e.__linkedSashEvent) {\n      e.__linkedSashEvent = true;\n      this.linkedSash.onMouseDown(e);\n    }\n\n    if (!this.state) {\n      return;\n    } // Select both iframes and webviews; internally Electron nests an iframe\n    // in its <webview> component, but this isn't queryable.\n\n\n    var iframes = __spreadArrays(getElementsByTagName('iframe'), getElementsByTagName('webview'));\n\n    for (var _i = 0, iframes_1 = iframes; _i < iframes_1.length; _i++) {\n      var iframe = iframes_1[_i];\n      iframe.style.pointerEvents = 'none'; // disable mouse events on iframes as long as we drag the sash\n    }\n\n    var mouseDownEvent = new StandardMouseEvent(e);\n    var startX = mouseDownEvent.posx;\n    var startY = mouseDownEvent.posy;\n    var altKey = mouseDownEvent.altKey;\n    var startEvent = {\n      startX: startX,\n      currentX: startX,\n      startY: startY,\n      currentY: startY,\n      altKey: altKey\n    };\n    addClass(this.el, 'active');\n\n    this._onDidStart.fire(startEvent); // fix https://github.com/Microsoft/vscode/issues/21675\n\n\n    var style = createStyleSheet(this.el);\n\n    var updateStyle = function () {\n      var cursor = '';\n\n      if (isMultisashResize) {\n        cursor = 'all-scroll';\n      } else if (_this.orientation === 1\n      /* HORIZONTAL */\n      ) {\n          if (_this.state === 1\n          /* Minimum */\n          ) {\n              cursor = 's-resize';\n            } else if (_this.state === 2\n          /* Maximum */\n          ) {\n              cursor = 'n-resize';\n            } else {\n            cursor = isMacintosh ? 'row-resize' : 'ns-resize';\n          }\n        } else {\n        if (_this.state === 1\n        /* Minimum */\n        ) {\n            cursor = 'e-resize';\n          } else if (_this.state === 2\n        /* Maximum */\n        ) {\n            cursor = 'w-resize';\n          } else {\n          cursor = isMacintosh ? 'col-resize' : 'ew-resize';\n        }\n      }\n\n      style.innerHTML = \"* { cursor: \" + cursor + \" !important; }\";\n    };\n\n    var disposables = new DisposableStore();\n    updateStyle();\n\n    if (!isMultisashResize) {\n      this.onDidEnablementChange(updateStyle, null, disposables);\n    }\n\n    var onMouseMove = function (e) {\n      EventHelper.stop(e, false);\n      var mouseMoveEvent = new StandardMouseEvent(e);\n      var event = {\n        startX: startX,\n        currentX: mouseMoveEvent.posx,\n        startY: startY,\n        currentY: mouseMoveEvent.posy,\n        altKey: altKey\n      };\n\n      _this._onDidChange.fire(event);\n    };\n\n    var onMouseUp = function (e) {\n      EventHelper.stop(e, false);\n\n      _this.el.removeChild(style);\n\n      removeClass(_this.el, 'active');\n\n      _this._onDidEnd.fire();\n\n      disposables.dispose();\n\n      for (var _i = 0, iframes_2 = iframes; _i < iframes_2.length; _i++) {\n        var iframe = iframes_2[_i];\n        iframe.style.pointerEvents = 'auto';\n      }\n    };\n\n    domEvent(window, 'mousemove')(onMouseMove, null, disposables);\n    domEvent(window, 'mouseup')(onMouseUp, null, disposables);\n  };\n\n  Sash.prototype.onMouseDoubleClick = function (e) {\n    var orthogonalSash = this.getOrthogonalSash(e);\n\n    if (orthogonalSash) {\n      orthogonalSash._onDidReset.fire();\n    }\n\n    if (this.linkedSash) {\n      this.linkedSash._onDidReset.fire();\n    }\n\n    this._onDidReset.fire();\n  };\n\n  Sash.prototype.onTouchStart = function (event) {\n    var _this = this;\n\n    EventHelper.stop(event);\n    var listeners = [];\n    var startX = event.pageX;\n    var startY = event.pageY;\n    var altKey = event.altKey;\n\n    this._onDidStart.fire({\n      startX: startX,\n      currentX: startX,\n      startY: startY,\n      currentY: startY,\n      altKey: altKey\n    });\n\n    listeners.push(addDisposableListener(this.el, EventType.Change, function (event) {\n      if (types.isNumber(event.pageX) && types.isNumber(event.pageY)) {\n        _this._onDidChange.fire({\n          startX: startX,\n          currentX: event.pageX,\n          startY: startY,\n          currentY: event.pageY,\n          altKey: altKey\n        });\n      }\n    }));\n    listeners.push(addDisposableListener(this.el, EventType.End, function (event) {\n      _this._onDidEnd.fire();\n\n      dispose(listeners);\n    }));\n  };\n\n  Sash.prototype.layout = function () {\n    var size = isIPad ? 20 : 4;\n\n    if (this.orientation === 0\n    /* VERTICAL */\n    ) {\n        var verticalProvider = this.layoutProvider;\n        this.el.style.left = verticalProvider.getVerticalSashLeft(this) - size / 2 + 'px';\n\n        if (verticalProvider.getVerticalSashTop) {\n          this.el.style.top = verticalProvider.getVerticalSashTop(this) + 'px';\n        }\n\n        if (verticalProvider.getVerticalSashHeight) {\n          this.el.style.height = verticalProvider.getVerticalSashHeight(this) + 'px';\n        }\n      } else {\n      var horizontalProvider = this.layoutProvider;\n      this.el.style.top = horizontalProvider.getHorizontalSashTop(this) - size / 2 + 'px';\n\n      if (horizontalProvider.getHorizontalSashLeft) {\n        this.el.style.left = horizontalProvider.getHorizontalSashLeft(this) + 'px';\n      }\n\n      if (horizontalProvider.getHorizontalSashWidth) {\n        this.el.style.width = horizontalProvider.getHorizontalSashWidth(this) + 'px';\n      }\n    }\n  };\n\n  Sash.prototype.hide = function () {\n    this.hidden = true;\n    this.el.style.display = 'none';\n    this.el.setAttribute('aria-hidden', 'true');\n  };\n\n  Sash.prototype.onOrthogonalStartSashEnablementChange = function (state) {\n    toggleClass(this.el, 'orthogonal-start', state !== 0\n    /* Disabled */\n    );\n  };\n\n  Sash.prototype.onOrthogonalEndSashEnablementChange = function (state) {\n    toggleClass(this.el, 'orthogonal-end', state !== 0\n    /* Disabled */\n    );\n  };\n\n  Sash.prototype.getOrthogonalSash = function (e) {\n    if (this.orientation === 0\n    /* VERTICAL */\n    ) {\n        if (e.offsetY <= 4) {\n          return this.orthogonalStartSash;\n        } else if (e.offsetY >= this.el.clientHeight - 4) {\n          return this.orthogonalEndSash;\n        }\n      } else {\n      if (e.offsetX <= 4) {\n        return this.orthogonalStartSash;\n      } else if (e.offsetX >= this.el.clientWidth - 4) {\n        return this.orthogonalEndSash;\n      }\n    }\n\n    return undefined;\n  };\n\n  Sash.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this.el.remove();\n  };\n\n  return Sash;\n}(Disposable);\n\nexport { Sash };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/base/browser/ui/sash/sash.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__spreadArrays","s","i","il","arguments","length","r","k","a","j","jl","dispose","Disposable","DisposableStore","isIPad","isMacintosh","types","EventType","Gesture","StandardMouseEvent","Emitter","getElementsByTagName","EventHelper","createStyleSheet","addDisposableListener","append","$","addClass","removeClass","toggleClass","domEvent","DEBUG","Sash","_super","container","layoutProvider","options","_this","call","_state","_onDidEnablementChange","_register","onDidEnablementChange","event","_onDidStart","onDidStart","_onDidChange","onDidChange","_onDidReset","onDidReset","_onDidEnd","onDidEnd","linkedSash","undefined","orthogonalStartSashDisposables","orthogonalEndSashDisposables","el","onMouseDown","onMouseDoubleClick","addTarget","Start","onTouchStart","setOrientation","orientation","hidden","orthogonalStartSash","orthogonalEndSash","defineProperty","get","set","state","fire","enumerable","configurable","_orthogonalStartSash","sash","clear","add","onOrthogonalStartSashEnablementChange","_orthogonalEndSash","onOrthogonalEndSashEnablementChange","layout","e","stop","isMultisashResize","__orthogonalSashEvent","orthogonalSash","getOrthogonalSash","__linkedSashEvent","iframes","_i","iframes_1","iframe","style","pointerEvents","mouseDownEvent","startX","posx","startY","posy","altKey","startEvent","currentX","currentY","updateStyle","cursor","innerHTML","disposables","onMouseMove","mouseMoveEvent","onMouseUp","removeChild","iframes_2","window","listeners","pageX","pageY","push","Change","isNumber","End","size","verticalProvider","left","getVerticalSashLeft","getVerticalSashTop","top","getVerticalSashHeight","height","horizontalProvider","getHorizontalSashTop","getHorizontalSashLeft","getHorizontalSashWidth","width","hide","display","setAttribute","offsetY","clientHeight","offsetX","clientWidth","remove"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport './sash.css';\r\nimport { dispose, Disposable, DisposableStore } from '../../../common/lifecycle.js';\r\nimport { isIPad } from '../../browser.js';\r\nimport { isMacintosh } from '../../../common/platform.js';\r\nimport * as types from '../../../common/types.js';\r\nimport { EventType, Gesture } from '../../touch.js';\r\nimport { StandardMouseEvent } from '../../mouseEvent.js';\r\nimport { Emitter } from '../../../common/event.js';\r\nimport { getElementsByTagName, EventHelper, createStyleSheet, addDisposableListener, append, $, addClass, removeClass, toggleClass } from '../../dom.js';\r\nimport { domEvent } from '../../event.js';\r\nvar DEBUG = false;\r\nvar Sash = /** @class */ (function (_super) {\r\n    __extends(Sash, _super);\r\n    function Sash(container, layoutProvider, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this) || this;\r\n        _this._state = 3 /* Enabled */;\r\n        _this._onDidEnablementChange = _this._register(new Emitter());\r\n        _this.onDidEnablementChange = _this._onDidEnablementChange.event;\r\n        _this._onDidStart = _this._register(new Emitter());\r\n        _this.onDidStart = _this._onDidStart.event;\r\n        _this._onDidChange = _this._register(new Emitter());\r\n        _this.onDidChange = _this._onDidChange.event;\r\n        _this._onDidReset = _this._register(new Emitter());\r\n        _this.onDidReset = _this._onDidReset.event;\r\n        _this._onDidEnd = _this._register(new Emitter());\r\n        _this.onDidEnd = _this._onDidEnd.event;\r\n        _this.linkedSash = undefined;\r\n        _this.orthogonalStartSashDisposables = _this._register(new DisposableStore());\r\n        _this.orthogonalEndSashDisposables = _this._register(new DisposableStore());\r\n        _this.el = append(container, $('.monaco-sash'));\r\n        if (isMacintosh) {\r\n            addClass(_this.el, 'mac');\r\n        }\r\n        _this._register(domEvent(_this.el, 'mousedown')(_this.onMouseDown, _this));\r\n        _this._register(domEvent(_this.el, 'dblclick')(_this.onMouseDoubleClick, _this));\r\n        _this._register(Gesture.addTarget(_this.el));\r\n        _this._register(domEvent(_this.el, EventType.Start)(_this.onTouchStart, _this));\r\n        if (isIPad) {\r\n            // see also https://ux.stackexchange.com/questions/39023/what-is-the-optimum-button-size-of-touch-screen-applications\r\n            addClass(_this.el, 'touch');\r\n        }\r\n        _this.setOrientation(options.orientation || 0 /* VERTICAL */);\r\n        _this.hidden = false;\r\n        _this.layoutProvider = layoutProvider;\r\n        _this.orthogonalStartSash = options.orthogonalStartSash;\r\n        _this.orthogonalEndSash = options.orthogonalEndSash;\r\n        toggleClass(_this.el, 'debug', DEBUG);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Sash.prototype, \"state\", {\r\n        get: function () { return this._state; },\r\n        set: function (state) {\r\n            if (this._state === state) {\r\n                return;\r\n            }\r\n            toggleClass(this.el, 'disabled', state === 0 /* Disabled */);\r\n            toggleClass(this.el, 'minimum', state === 1 /* Minimum */);\r\n            toggleClass(this.el, 'maximum', state === 2 /* Maximum */);\r\n            this._state = state;\r\n            this._onDidEnablementChange.fire(state);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Sash.prototype, \"orthogonalStartSash\", {\r\n        get: function () { return this._orthogonalStartSash; },\r\n        set: function (sash) {\r\n            this.orthogonalStartSashDisposables.clear();\r\n            if (sash) {\r\n                this.orthogonalStartSashDisposables.add(sash.onDidEnablementChange(this.onOrthogonalStartSashEnablementChange, this));\r\n                this.onOrthogonalStartSashEnablementChange(sash.state);\r\n            }\r\n            else {\r\n                this.onOrthogonalStartSashEnablementChange(0 /* Disabled */);\r\n            }\r\n            this._orthogonalStartSash = sash;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Sash.prototype, \"orthogonalEndSash\", {\r\n        get: function () { return this._orthogonalEndSash; },\r\n        set: function (sash) {\r\n            this.orthogonalEndSashDisposables.clear();\r\n            if (sash) {\r\n                this.orthogonalEndSashDisposables.add(sash.onDidEnablementChange(this.onOrthogonalEndSashEnablementChange, this));\r\n                this.onOrthogonalEndSashEnablementChange(sash.state);\r\n            }\r\n            else {\r\n                this.onOrthogonalEndSashEnablementChange(0 /* Disabled */);\r\n            }\r\n            this._orthogonalEndSash = sash;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Sash.prototype.setOrientation = function (orientation) {\r\n        this.orientation = orientation;\r\n        if (this.orientation === 1 /* HORIZONTAL */) {\r\n            addClass(this.el, 'horizontal');\r\n            removeClass(this.el, 'vertical');\r\n        }\r\n        else {\r\n            removeClass(this.el, 'horizontal');\r\n            addClass(this.el, 'vertical');\r\n        }\r\n        if (this.layoutProvider) {\r\n            this.layout();\r\n        }\r\n    };\r\n    Sash.prototype.onMouseDown = function (e) {\r\n        var _this = this;\r\n        EventHelper.stop(e, false);\r\n        var isMultisashResize = false;\r\n        if (!e.__orthogonalSashEvent) {\r\n            var orthogonalSash = this.getOrthogonalSash(e);\r\n            if (orthogonalSash) {\r\n                isMultisashResize = true;\r\n                e.__orthogonalSashEvent = true;\r\n                orthogonalSash.onMouseDown(e);\r\n            }\r\n        }\r\n        if (this.linkedSash && !e.__linkedSashEvent) {\r\n            e.__linkedSashEvent = true;\r\n            this.linkedSash.onMouseDown(e);\r\n        }\r\n        if (!this.state) {\r\n            return;\r\n        }\r\n        // Select both iframes and webviews; internally Electron nests an iframe\r\n        // in its <webview> component, but this isn't queryable.\r\n        var iframes = __spreadArrays(getElementsByTagName('iframe'), getElementsByTagName('webview'));\r\n        for (var _i = 0, iframes_1 = iframes; _i < iframes_1.length; _i++) {\r\n            var iframe = iframes_1[_i];\r\n            iframe.style.pointerEvents = 'none'; // disable mouse events on iframes as long as we drag the sash\r\n        }\r\n        var mouseDownEvent = new StandardMouseEvent(e);\r\n        var startX = mouseDownEvent.posx;\r\n        var startY = mouseDownEvent.posy;\r\n        var altKey = mouseDownEvent.altKey;\r\n        var startEvent = { startX: startX, currentX: startX, startY: startY, currentY: startY, altKey: altKey };\r\n        addClass(this.el, 'active');\r\n        this._onDidStart.fire(startEvent);\r\n        // fix https://github.com/Microsoft/vscode/issues/21675\r\n        var style = createStyleSheet(this.el);\r\n        var updateStyle = function () {\r\n            var cursor = '';\r\n            if (isMultisashResize) {\r\n                cursor = 'all-scroll';\r\n            }\r\n            else if (_this.orientation === 1 /* HORIZONTAL */) {\r\n                if (_this.state === 1 /* Minimum */) {\r\n                    cursor = 's-resize';\r\n                }\r\n                else if (_this.state === 2 /* Maximum */) {\r\n                    cursor = 'n-resize';\r\n                }\r\n                else {\r\n                    cursor = isMacintosh ? 'row-resize' : 'ns-resize';\r\n                }\r\n            }\r\n            else {\r\n                if (_this.state === 1 /* Minimum */) {\r\n                    cursor = 'e-resize';\r\n                }\r\n                else if (_this.state === 2 /* Maximum */) {\r\n                    cursor = 'w-resize';\r\n                }\r\n                else {\r\n                    cursor = isMacintosh ? 'col-resize' : 'ew-resize';\r\n                }\r\n            }\r\n            style.innerHTML = \"* { cursor: \" + cursor + \" !important; }\";\r\n        };\r\n        var disposables = new DisposableStore();\r\n        updateStyle();\r\n        if (!isMultisashResize) {\r\n            this.onDidEnablementChange(updateStyle, null, disposables);\r\n        }\r\n        var onMouseMove = function (e) {\r\n            EventHelper.stop(e, false);\r\n            var mouseMoveEvent = new StandardMouseEvent(e);\r\n            var event = { startX: startX, currentX: mouseMoveEvent.posx, startY: startY, currentY: mouseMoveEvent.posy, altKey: altKey };\r\n            _this._onDidChange.fire(event);\r\n        };\r\n        var onMouseUp = function (e) {\r\n            EventHelper.stop(e, false);\r\n            _this.el.removeChild(style);\r\n            removeClass(_this.el, 'active');\r\n            _this._onDidEnd.fire();\r\n            disposables.dispose();\r\n            for (var _i = 0, iframes_2 = iframes; _i < iframes_2.length; _i++) {\r\n                var iframe = iframes_2[_i];\r\n                iframe.style.pointerEvents = 'auto';\r\n            }\r\n        };\r\n        domEvent(window, 'mousemove')(onMouseMove, null, disposables);\r\n        domEvent(window, 'mouseup')(onMouseUp, null, disposables);\r\n    };\r\n    Sash.prototype.onMouseDoubleClick = function (e) {\r\n        var orthogonalSash = this.getOrthogonalSash(e);\r\n        if (orthogonalSash) {\r\n            orthogonalSash._onDidReset.fire();\r\n        }\r\n        if (this.linkedSash) {\r\n            this.linkedSash._onDidReset.fire();\r\n        }\r\n        this._onDidReset.fire();\r\n    };\r\n    Sash.prototype.onTouchStart = function (event) {\r\n        var _this = this;\r\n        EventHelper.stop(event);\r\n        var listeners = [];\r\n        var startX = event.pageX;\r\n        var startY = event.pageY;\r\n        var altKey = event.altKey;\r\n        this._onDidStart.fire({\r\n            startX: startX,\r\n            currentX: startX,\r\n            startY: startY,\r\n            currentY: startY,\r\n            altKey: altKey\r\n        });\r\n        listeners.push(addDisposableListener(this.el, EventType.Change, function (event) {\r\n            if (types.isNumber(event.pageX) && types.isNumber(event.pageY)) {\r\n                _this._onDidChange.fire({\r\n                    startX: startX,\r\n                    currentX: event.pageX,\r\n                    startY: startY,\r\n                    currentY: event.pageY,\r\n                    altKey: altKey\r\n                });\r\n            }\r\n        }));\r\n        listeners.push(addDisposableListener(this.el, EventType.End, function (event) {\r\n            _this._onDidEnd.fire();\r\n            dispose(listeners);\r\n        }));\r\n    };\r\n    Sash.prototype.layout = function () {\r\n        var size = isIPad ? 20 : 4;\r\n        if (this.orientation === 0 /* VERTICAL */) {\r\n            var verticalProvider = this.layoutProvider;\r\n            this.el.style.left = verticalProvider.getVerticalSashLeft(this) - (size / 2) + 'px';\r\n            if (verticalProvider.getVerticalSashTop) {\r\n                this.el.style.top = verticalProvider.getVerticalSashTop(this) + 'px';\r\n            }\r\n            if (verticalProvider.getVerticalSashHeight) {\r\n                this.el.style.height = verticalProvider.getVerticalSashHeight(this) + 'px';\r\n            }\r\n        }\r\n        else {\r\n            var horizontalProvider = this.layoutProvider;\r\n            this.el.style.top = horizontalProvider.getHorizontalSashTop(this) - (size / 2) + 'px';\r\n            if (horizontalProvider.getHorizontalSashLeft) {\r\n                this.el.style.left = horizontalProvider.getHorizontalSashLeft(this) + 'px';\r\n            }\r\n            if (horizontalProvider.getHorizontalSashWidth) {\r\n                this.el.style.width = horizontalProvider.getHorizontalSashWidth(this) + 'px';\r\n            }\r\n        }\r\n    };\r\n    Sash.prototype.hide = function () {\r\n        this.hidden = true;\r\n        this.el.style.display = 'none';\r\n        this.el.setAttribute('aria-hidden', 'true');\r\n    };\r\n    Sash.prototype.onOrthogonalStartSashEnablementChange = function (state) {\r\n        toggleClass(this.el, 'orthogonal-start', state !== 0 /* Disabled */);\r\n    };\r\n    Sash.prototype.onOrthogonalEndSashEnablementChange = function (state) {\r\n        toggleClass(this.el, 'orthogonal-end', state !== 0 /* Disabled */);\r\n    };\r\n    Sash.prototype.getOrthogonalSash = function (e) {\r\n        if (this.orientation === 0 /* VERTICAL */) {\r\n            if (e.offsetY <= 4) {\r\n                return this.orthogonalStartSash;\r\n            }\r\n            else if (e.offsetY >= this.el.clientHeight - 4) {\r\n                return this.orthogonalEndSash;\r\n            }\r\n        }\r\n        else {\r\n            if (e.offsetX <= 4) {\r\n                return this.orthogonalStartSash;\r\n            }\r\n            else if (e.offsetX >= this.el.clientWidth - 4) {\r\n                return this.orthogonalEndSash;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    Sash.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this.el.remove();\r\n    };\r\n    return Sash;\r\n}(Disposable));\r\nexport { Sash };\r\n"]},"metadata":{},"sourceType":"module"}