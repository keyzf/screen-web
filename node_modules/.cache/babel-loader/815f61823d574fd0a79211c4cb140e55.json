{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nimport './media/suggest.css';\nimport './media/suggestStatusBar.css';\nimport '../../../base/browser/ui/codiconLabel/codiconLabel.js'; // The codicon symbol styles are defined here and must be loaded\n\nimport '../documentSymbols/outlineTree.js'; // The codicon symbol colors are defined here and must be loaded\n\nimport * as nls from '../../../nls.js';\nimport { createMatches } from '../../../base/common/filters.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { Event, Emitter } from '../../../base/common/event.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { dispose, toDisposable, DisposableStore, Disposable } from '../../../base/common/lifecycle.js';\nimport { addClass, append, $, hide, removeClass, show, toggleClass, getDomNodePagePosition, hasClass, addDisposableListener, addStandardDisposableListener, addClasses } from '../../../base/browser/dom.js';\nimport { List } from '../../../base/browser/ui/list/listWidget.js';\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { attachListStyler } from '../../../platform/theme/common/styler.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { registerColor, editorWidgetBackground, listFocusBackground, activeContrastBorder, listHighlightForeground, editorForeground, editorWidgetBorder, focusBorder, textLinkForeground, textCodeBlockBackground } from '../../../platform/theme/common/colorRegistry.js';\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\nimport { IModeService } from '../../common/services/modeService.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { TimeoutTimer, createCancelablePromise, disposableTimeout } from '../../../base/common/async.js';\nimport { completionKindToCssClass } from '../../common/modes.js';\nimport { IconLabel } from '../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { getIconClasses } from '../../common/services/getIconClasses.js';\nimport { IModelService } from '../../common/services/modelService.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { FileKind } from '../../../platform/files/common/files.js';\nimport { MarkdownString } from '../../../base/common/htmlContent.js';\nimport { flatten } from '../../../base/common/arrays.js';\nimport { Position } from '../../common/core/position.js';\nvar expandSuggestionDocsByDefault = false;\n/**\r\n * Suggest widget colors\r\n */\n\nexport var editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', {\n  dark: editorWidgetBackground,\n  light: editorWidgetBackground,\n  hc: editorWidgetBackground\n}, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nexport var editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', {\n  dark: editorWidgetBorder,\n  light: editorWidgetBorder,\n  hc: editorWidgetBorder\n}, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nexport var editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', {\n  dark: editorForeground,\n  light: editorForeground,\n  hc: editorForeground\n}, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nexport var editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', {\n  dark: listFocusBackground,\n  light: listFocusBackground,\n  hc: listFocusBackground\n}, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nexport var editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', {\n  dark: listHighlightForeground,\n  light: listHighlightForeground,\n  hc: listHighlightForeground\n}, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nvar colorRegExp = /^(#([\\da-f]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))$/i;\n\nfunction extractColor(item, out) {\n  var label = typeof item.completion.label === 'string' ? item.completion.label : item.completion.label.name;\n\n  if (label.match(colorRegExp)) {\n    out[0] = label;\n    return true;\n  }\n\n  if (typeof item.completion.documentation === 'string' && item.completion.documentation.match(colorRegExp)) {\n    out[0] = item.completion.documentation;\n    return true;\n  }\n\n  return false;\n}\n\nfunction canExpandCompletionItem(item) {\n  if (!item) {\n    return false;\n  }\n\n  var suggestion = item.completion;\n\n  if (suggestion.documentation) {\n    return true;\n  }\n\n  return suggestion.detail && suggestion.detail !== suggestion.label;\n}\n\nfunction getAriaId(index) {\n  return \"suggest-aria-id:\" + index;\n}\n\nvar ItemRenderer =\n/** @class */\nfunction () {\n  function ItemRenderer(widget, editor, triggerKeybindingLabel, _modelService, _modeService, _themeService) {\n    this.widget = widget;\n    this.editor = editor;\n    this.triggerKeybindingLabel = triggerKeybindingLabel;\n    this._modelService = _modelService;\n    this._modeService = _modeService;\n    this._themeService = _themeService;\n  }\n\n  Object.defineProperty(ItemRenderer.prototype, \"templateId\", {\n    get: function () {\n      return 'suggestion';\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ItemRenderer.prototype.renderTemplate = function (container) {\n    var _this = this;\n\n    var data = Object.create(null);\n    data.disposables = new DisposableStore();\n    data.root = container;\n    addClass(data.root, 'show-file-icons');\n    data.icon = append(container, $('.icon'));\n    data.colorspan = append(data.icon, $('span.colorspan'));\n    var text = append(container, $('.contents'));\n    var main = append(text, $('.main'));\n    data.left = append(main, $('span.left'));\n    data.right = append(main, $('span.right'));\n    data.iconContainer = append(data.left, $('.icon-label.codicon'));\n    data.iconLabel = new IconLabel(data.left, {\n      supportHighlights: true,\n      supportCodicons: true\n    });\n    data.disposables.add(data.iconLabel);\n    data.signatureLabel = append(data.left, $('span.signature-label'));\n    data.qualifierLabel = append(data.left, $('span.qualifier-label'));\n    data.detailsLabel = append(data.right, $('span.details-label'));\n    data.readMore = append(data.right, $('span.readMore.codicon.codicon-info'));\n    data.readMore.title = nls.localize('readMore', \"Read More...{0}\", this.triggerKeybindingLabel);\n\n    var configureFont = function () {\n      var options = _this.editor.getOptions();\n\n      var fontInfo = options.get(34\n      /* fontInfo */\n      );\n      var fontFamily = fontInfo.fontFamily;\n      var fontFeatureSettings = fontInfo.fontFeatureSettings;\n      var fontSize = options.get(90\n      /* suggestFontSize */\n      ) || fontInfo.fontSize;\n      var lineHeight = options.get(91\n      /* suggestLineHeight */\n      ) || fontInfo.lineHeight;\n      var fontWeight = fontInfo.fontWeight;\n      var fontSizePx = fontSize + \"px\";\n      var lineHeightPx = lineHeight + \"px\";\n      data.root.style.fontSize = fontSizePx;\n      data.root.style.fontWeight = fontWeight;\n      main.style.fontFamily = fontFamily;\n      main.style.fontFeatureSettings = fontFeatureSettings;\n      main.style.lineHeight = lineHeightPx;\n      data.icon.style.height = lineHeightPx;\n      data.icon.style.width = lineHeightPx;\n      data.readMore.style.height = lineHeightPx;\n      data.readMore.style.width = lineHeightPx;\n    };\n\n    configureFont();\n    data.disposables.add(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function (e) {\n      return e.hasChanged(34\n      /* fontInfo */\n      ) || e.hasChanged(90\n      /* suggestFontSize */\n      ) || e.hasChanged(91\n      /* suggestLineHeight */\n      );\n    }).on(configureFont, null));\n    return data;\n  };\n\n  ItemRenderer.prototype.renderElement = function (element, index, templateData) {\n    var _this = this;\n\n    var data = templateData;\n    var suggestion = element.completion;\n    var textLabel = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.name;\n    data.root.id = getAriaId(index);\n    data.icon.className = 'icon ' + completionKindToCssClass(suggestion.kind);\n    data.colorspan.style.backgroundColor = '';\n    var labelOptions = {\n      labelEscapeNewLines: true,\n      matches: createMatches(element.score)\n    };\n    var color = [];\n\n    if (suggestion.kind === 19\n    /* Color */\n    && extractColor(element, color)) {\n      // special logic for 'color' completion items\n      data.icon.className = 'icon customcolor';\n      data.iconContainer.className = 'icon hide';\n      data.colorspan.style.backgroundColor = color[0];\n    } else if (suggestion.kind === 20\n    /* File */\n    && this._themeService.getIconTheme().hasFileIcons) {\n      // special logic for 'file' completion items\n      data.icon.className = 'icon hide';\n      data.iconContainer.className = 'icon hide';\n      var labelClasses = getIconClasses(this._modelService, this._modeService, URI.from({\n        scheme: 'fake',\n        path: textLabel\n      }), FileKind.FILE);\n      var detailClasses = getIconClasses(this._modelService, this._modeService, URI.from({\n        scheme: 'fake',\n        path: suggestion.detail\n      }), FileKind.FILE);\n      labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n    } else if (suggestion.kind === 23\n    /* Folder */\n    && this._themeService.getIconTheme().hasFolderIcons) {\n      // special logic for 'folder' completion items\n      data.icon.className = 'icon hide';\n      data.iconContainer.className = 'icon hide';\n      labelOptions.extraClasses = flatten([getIconClasses(this._modelService, this._modeService, URI.from({\n        scheme: 'fake',\n        path: textLabel\n      }), FileKind.FOLDER), getIconClasses(this._modelService, this._modeService, URI.from({\n        scheme: 'fake',\n        path: suggestion.detail\n      }), FileKind.FOLDER)]);\n    } else {\n      // normal icon\n      data.icon.className = 'icon hide';\n      data.iconContainer.className = '';\n      addClasses(data.iconContainer, \"suggest-icon codicon codicon-symbol-\" + completionKindToCssClass(suggestion.kind));\n    }\n\n    if (suggestion.tags && suggestion.tags.indexOf(1\n    /* Deprecated */\n    ) >= 0) {\n      labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n      labelOptions.matches = [];\n    }\n\n    data.iconLabel.setLabel(textLabel, undefined, labelOptions);\n\n    if (typeof suggestion.label === 'string') {\n      data.signatureLabel.textContent = '';\n      data.qualifierLabel.textContent = '';\n      data.detailsLabel.textContent = (suggestion.detail || '').replace(/\\n.*$/m, '');\n      removeClass(data.right, 'always-show-details');\n    } else {\n      data.signatureLabel.textContent = (suggestion.label.signature || '').replace(/\\n.*$/m, '');\n      data.qualifierLabel.textContent = (suggestion.label.qualifier || '').replace(/\\n.*$/m, '');\n      data.detailsLabel.textContent = (suggestion.label.type || '').replace(/\\n.*$/m, '');\n      addClass(data.right, 'always-show-details');\n    }\n\n    if (canExpandCompletionItem(element)) {\n      addClass(data.right, 'can-expand-details');\n      show(data.readMore);\n\n      data.readMore.onmousedown = function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      };\n\n      data.readMore.onclick = function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n\n        _this.widget.toggleDetails();\n      };\n    } else {\n      removeClass(data.right, 'can-expand-details');\n      hide(data.readMore);\n      data.readMore.onmousedown = null;\n      data.readMore.onclick = null;\n    }\n  };\n\n  ItemRenderer.prototype.disposeTemplate = function (templateData) {\n    templateData.disposables.dispose();\n  };\n\n  ItemRenderer = __decorate([__param(3, IModelService), __param(4, IModeService), __param(5, IThemeService)], ItemRenderer);\n  return ItemRenderer;\n}();\n\nvar SuggestionDetails =\n/** @class */\nfunction () {\n  function SuggestionDetails(container, widget, editor, markdownRenderer, kbToggleDetails) {\n    var _this = this;\n\n    this.widget = widget;\n    this.editor = editor;\n    this.markdownRenderer = markdownRenderer;\n    this.kbToggleDetails = kbToggleDetails;\n    this.borderWidth = 1;\n    this.disposables = new DisposableStore();\n    this.el = append(container, $('.details'));\n    this.disposables.add(toDisposable(function () {\n      return container.removeChild(_this.el);\n    }));\n    this.body = $('.body');\n    this.scrollbar = new DomScrollableElement(this.body, {});\n    append(this.el, this.scrollbar.getDomNode());\n    this.disposables.add(this.scrollbar);\n    this.header = append(this.body, $('.header'));\n    this.close = append(this.header, $('span.codicon.codicon-close'));\n    this.close.title = nls.localize('readLess', \"Read less...{0}\", this.kbToggleDetails);\n    this.type = append(this.header, $('p.type'));\n    this.docs = append(this.body, $('p.docs'));\n    this.configureFont();\n    Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter(function (e) {\n      return e.hasChanged(34\n      /* fontInfo */\n      );\n    }).on(this.configureFont, this, this.disposables);\n    markdownRenderer.onDidRenderCodeBlock(function () {\n      return _this.scrollbar.scanDomNode();\n    }, this, this.disposables);\n  }\n\n  Object.defineProperty(SuggestionDetails.prototype, \"element\", {\n    get: function () {\n      return this.el;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  SuggestionDetails.prototype.renderLoading = function () {\n    this.type.textContent = nls.localize('loading', \"Loading...\");\n    this.docs.textContent = '';\n  };\n\n  SuggestionDetails.prototype.renderItem = function (item, explainMode) {\n    var _this = this;\n\n    this.renderDisposeable = dispose(this.renderDisposeable);\n    var _a = item.completion,\n        documentation = _a.documentation,\n        detail = _a.detail; // --- documentation\n\n    if (explainMode) {\n      var md = '';\n      md += \"score: \" + item.score[0] + (item.word ? \", compared '\" + (item.completion.filterText && item.completion.filterText + ' (filterText)' || item.completion.label) + \"' with '\" + item.word + \"'\" : ' (no prefix)') + \"\\n\";\n      md += \"distance: \" + item.distance + \", see localityBonus-setting\\n\";\n      md += \"index: \" + item.idx + \", based on \" + (item.completion.sortText && \"sortText: \\\"\" + item.completion.sortText + \"\\\"\" || 'label') + \"\\n\";\n      documentation = new MarkdownString().appendCodeblock('empty', md);\n      detail = \"Provider: \" + item.provider._debugDisplayName;\n    }\n\n    if (!explainMode && !canExpandCompletionItem(item)) {\n      this.type.textContent = '';\n      this.docs.textContent = '';\n      addClass(this.el, 'no-docs');\n      return;\n    }\n\n    removeClass(this.el, 'no-docs');\n\n    if (typeof documentation === 'string') {\n      removeClass(this.docs, 'markdown-docs');\n      this.docs.textContent = documentation;\n    } else {\n      addClass(this.docs, 'markdown-docs');\n      this.docs.innerHTML = '';\n      var renderedContents = this.markdownRenderer.render(documentation);\n      this.renderDisposeable = renderedContents;\n      this.docs.appendChild(renderedContents.element);\n    } // --- details\n\n\n    if (detail) {\n      this.type.innerText = detail;\n      show(this.type);\n    } else {\n      this.type.innerText = '';\n      hide(this.type);\n    }\n\n    this.el.style.height = this.header.offsetHeight + this.docs.offsetHeight + this.borderWidth * 2 + 'px';\n    this.el.style.userSelect = 'text';\n    this.el.tabIndex = -1;\n\n    this.close.onmousedown = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    this.close.onclick = function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      _this.widget.toggleDetails();\n    };\n\n    this.body.scrollTop = 0;\n    this.scrollbar.scanDomNode();\n  };\n\n  SuggestionDetails.prototype.scrollDown = function (much) {\n    if (much === void 0) {\n      much = 8;\n    }\n\n    this.body.scrollTop += much;\n  };\n\n  SuggestionDetails.prototype.scrollUp = function (much) {\n    if (much === void 0) {\n      much = 8;\n    }\n\n    this.body.scrollTop -= much;\n  };\n\n  SuggestionDetails.prototype.scrollTop = function () {\n    this.body.scrollTop = 0;\n  };\n\n  SuggestionDetails.prototype.scrollBottom = function () {\n    this.body.scrollTop = this.body.scrollHeight;\n  };\n\n  SuggestionDetails.prototype.pageDown = function () {\n    this.scrollDown(80);\n  };\n\n  SuggestionDetails.prototype.pageUp = function () {\n    this.scrollUp(80);\n  };\n\n  SuggestionDetails.prototype.setBorderWidth = function (width) {\n    this.borderWidth = width;\n  };\n\n  SuggestionDetails.prototype.configureFont = function () {\n    var options = this.editor.getOptions();\n    var fontInfo = options.get(34\n    /* fontInfo */\n    );\n    var fontFamily = fontInfo.fontFamily;\n    var fontSize = options.get(90\n    /* suggestFontSize */\n    ) || fontInfo.fontSize;\n    var lineHeight = options.get(91\n    /* suggestLineHeight */\n    ) || fontInfo.lineHeight;\n    var fontWeight = fontInfo.fontWeight;\n    var fontSizePx = fontSize + \"px\";\n    var lineHeightPx = lineHeight + \"px\";\n    this.el.style.fontSize = fontSizePx;\n    this.el.style.fontWeight = fontWeight;\n    this.el.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n    this.type.style.fontFamily = fontFamily;\n    this.close.style.height = lineHeightPx;\n    this.close.style.width = lineHeightPx;\n  };\n\n  SuggestionDetails.prototype.dispose = function () {\n    this.disposables.dispose();\n    this.renderDisposeable = dispose(this.renderDisposeable);\n  };\n\n  return SuggestionDetails;\n}();\n\nvar SuggestWidget =\n/** @class */\nfunction () {\n  function SuggestWidget(editor, telemetryService, keybindingService, contextKeyService, themeService, storageService, modeService, openerService, instantiationService) {\n    var _this = this;\n\n    var _a, _b;\n\n    this.editor = editor;\n    this.telemetryService = telemetryService;\n    this.keybindingService = keybindingService; // Editor.IContentWidget.allowEditorOverflow\n\n    this.allowEditorOverflow = true;\n    this.suppressMouseDown = false;\n    this.state = null;\n    this.isAuto = false;\n    this.loadingTimeout = Disposable.None;\n    this.currentSuggestionDetails = null;\n    this.ignoreFocusEvents = false;\n    this.completionModel = null;\n    this.showTimeout = new TimeoutTimer();\n    this.toDispose = new DisposableStore();\n    this.onDidSelectEmitter = new Emitter();\n    this.onDidFocusEmitter = new Emitter();\n    this.onDidHideEmitter = new Emitter();\n    this.onDidShowEmitter = new Emitter();\n    this.onDidSelect = this.onDidSelectEmitter.event;\n    this.onDidFocus = this.onDidFocusEmitter.event;\n    this.onDidHide = this.onDidHideEmitter.event;\n    this.onDidShow = this.onDidShowEmitter.event;\n    this.maxWidgetWidth = 660;\n    this.listWidth = 330;\n    this.firstFocusInCurrentList = false;\n    this.preferDocPositionTop = false;\n    this.docsPositionPreviousWidgetY = null;\n    this.explainMode = false;\n    this._onDetailsKeydown = new Emitter();\n    this.onDetailsKeyDown = this._onDetailsKeydown.event;\n    var markdownRenderer = this.toDispose.add(new MarkdownRenderer(editor, modeService, openerService));\n    var kbToggleDetails = (_b = (_a = keybindingService.lookupKeybinding('toggleSuggestionDetails')) === null || _a === void 0 ? void 0 : _a.getLabel()) !== null && _b !== void 0 ? _b : '';\n    this.msgDetailsLess = nls.localize('detail.less', \"{0} for less...\", kbToggleDetails);\n    this.msgDetailMore = nls.localize('detail.more', \"{0} for more...\", kbToggleDetails);\n    this.isAuto = false;\n    this.focusedItem = null;\n    this.storageService = storageService;\n    this.element = $('.editor-widget.suggest-widget');\n    this.toDispose.add(addDisposableListener(this.element, 'click', function (e) {\n      if (e.target === _this.element) {\n        _this.hideWidget();\n      }\n    }));\n    this.messageElement = append(this.element, $('.message'));\n    this.listElement = append(this.element, $('.tree'));\n\n    var applyStatusBarStyle = function () {\n      return toggleClass(_this.element, 'with-status-bar', !_this.editor.getOption(89\n      /* suggest */\n      ).hideStatusBar);\n    };\n\n    applyStatusBarStyle();\n    this.statusBarElement = append(this.element, $('.suggest-status-bar'));\n    this.statusBarLeftSpan = append(this.statusBarElement, $('span'));\n    this.statusBarRightSpan = append(this.statusBarElement, $('span'));\n    this.setStatusBarLeftText('');\n    this.setStatusBarRightText('');\n    this.details = instantiationService.createInstance(SuggestionDetails, this.element, this, this.editor, markdownRenderer, kbToggleDetails);\n\n    var applyIconStyle = function () {\n      return toggleClass(_this.element, 'no-icons', !_this.editor.getOption(89\n      /* suggest */\n      ).showIcons);\n    };\n\n    applyIconStyle();\n    var renderer = instantiationService.createInstance(ItemRenderer, this, this.editor, kbToggleDetails);\n    this.list = new List('SuggestWidget', this.listElement, this, [renderer], {\n      useShadows: false,\n      openController: {\n        shouldOpen: function () {\n          return false;\n        }\n      },\n      mouseSupport: false,\n      accessibilityProvider: {\n        getAriaLabel: function (item) {\n          var textLabel = typeof item.completion.label === 'string' ? item.completion.label : item.completion.label.name;\n\n          if (item.isResolved && _this.expandDocsSettingFromStorage()) {\n            var _a = item.completion,\n                documentation = _a.documentation,\n                detail = _a.detail;\n            var docs = strings.format('{0}{1}', detail || '', documentation ? typeof documentation === 'string' ? documentation : documentation.value : '');\n            return nls.localize('ariaCurrenttSuggestionReadDetails', \"Item {0}, docs: {1}\", textLabel, docs);\n          } else {\n            return textLabel;\n          }\n        }\n      }\n    });\n    this.toDispose.add(attachListStyler(this.list, themeService, {\n      listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n      listInactiveFocusOutline: activeContrastBorder\n    }));\n    this.toDispose.add(themeService.onThemeChange(function (t) {\n      return _this.onThemeChange(t);\n    }));\n    this.toDispose.add(editor.onDidLayoutChange(function () {\n      return _this.onEditorLayoutChange();\n    }));\n    this.toDispose.add(this.list.onMouseDown(function (e) {\n      return _this.onListMouseDownOrTap(e);\n    }));\n    this.toDispose.add(this.list.onTap(function (e) {\n      return _this.onListMouseDownOrTap(e);\n    }));\n    this.toDispose.add(this.list.onSelectionChange(function (e) {\n      return _this.onListSelection(e);\n    }));\n    this.toDispose.add(this.list.onFocusChange(function (e) {\n      return _this.onListFocus(e);\n    }));\n    this.toDispose.add(this.editor.onDidChangeCursorSelection(function () {\n      return _this.onCursorSelectionChanged();\n    }));\n    this.toDispose.add(this.editor.onDidChangeConfiguration(function (e) {\n      if (e.hasChanged(89\n      /* suggest */\n      )) {\n        applyStatusBarStyle();\n        applyIconStyle();\n      }\n    }));\n    this.suggestWidgetVisible = SuggestContext.Visible.bindTo(contextKeyService);\n    this.suggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(contextKeyService);\n    this.editor.addContentWidget(this);\n    this.setState(0\n    /* Hidden */\n    );\n    this.onThemeChange(themeService.getTheme());\n    this.toDispose.add(addStandardDisposableListener(this.details.element, 'keydown', function (e) {\n      _this._onDetailsKeydown.fire(e);\n    }));\n    this.toDispose.add(this.editor.onMouseDown(function (e) {\n      return _this.onEditorMouseDown(e);\n    }));\n  }\n\n  SuggestWidget.prototype.onEditorMouseDown = function (mouseEvent) {\n    // Clicking inside details\n    if (this.details.element.contains(mouseEvent.target.element)) {\n      this.details.element.focus();\n    } // Clicking outside details and inside suggest\n    else {\n        if (this.element.contains(mouseEvent.target.element)) {\n          this.editor.focus();\n        }\n      }\n  };\n\n  SuggestWidget.prototype.onCursorSelectionChanged = function () {\n    if (this.state === 0\n    /* Hidden */\n    ) {\n        return;\n      }\n\n    this.editor.layoutContentWidget(this);\n  };\n\n  SuggestWidget.prototype.onEditorLayoutChange = function () {\n    if ((this.state === 3\n    /* Open */\n    || this.state === 5\n    /* Details */\n    ) && this.expandDocsSettingFromStorage()) {\n      this.expandSideOrBelow();\n    }\n  };\n\n  SuggestWidget.prototype.onListMouseDownOrTap = function (e) {\n    if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n      return;\n    } // prevent stealing browser focus from the editor\n\n\n    e.browserEvent.preventDefault();\n    e.browserEvent.stopPropagation();\n    this.select(e.element, e.index);\n  };\n\n  SuggestWidget.prototype.onListSelection = function (e) {\n    if (!e.elements.length) {\n      return;\n    }\n\n    this.select(e.elements[0], e.indexes[0]);\n  };\n\n  SuggestWidget.prototype.select = function (item, index) {\n    var completionModel = this.completionModel;\n\n    if (!completionModel) {\n      return;\n    }\n\n    this.onDidSelectEmitter.fire({\n      item: item,\n      index: index,\n      model: completionModel\n    });\n    this.editor.focus();\n  };\n\n  SuggestWidget.prototype.onThemeChange = function (theme) {\n    var backgroundColor = theme.getColor(editorSuggestWidgetBackground);\n\n    if (backgroundColor) {\n      this.listElement.style.backgroundColor = backgroundColor.toString();\n      this.statusBarElement.style.backgroundColor = backgroundColor.toString();\n      this.details.element.style.backgroundColor = backgroundColor.toString();\n      this.messageElement.style.backgroundColor = backgroundColor.toString();\n    }\n\n    var borderColor = theme.getColor(editorSuggestWidgetBorder);\n\n    if (borderColor) {\n      this.listElement.style.borderColor = borderColor.toString();\n      this.statusBarElement.style.borderColor = borderColor.toString();\n      this.details.element.style.borderColor = borderColor.toString();\n      this.messageElement.style.borderColor = borderColor.toString();\n      this.detailsBorderColor = borderColor.toString();\n    }\n\n    var focusBorderColor = theme.getColor(focusBorder);\n\n    if (focusBorderColor) {\n      this.detailsFocusBorderColor = focusBorderColor.toString();\n    }\n\n    this.details.setBorderWidth(theme.type === 'hc' ? 2 : 1);\n  };\n\n  SuggestWidget.prototype.onListFocus = function (e) {\n    var _this = this;\n\n    var _a, _b;\n\n    if (this.ignoreFocusEvents) {\n      return;\n    }\n\n    if (!e.elements.length) {\n      if (this.currentSuggestionDetails) {\n        this.currentSuggestionDetails.cancel();\n        this.currentSuggestionDetails = null;\n        this.focusedItem = null;\n      }\n\n      this.editor.setAriaOptions({\n        activeDescendant: undefined\n      });\n      return;\n    }\n\n    if (!this.completionModel) {\n      return;\n    }\n\n    var item = e.elements[0];\n    var index = e.indexes[0];\n    this.firstFocusInCurrentList = !this.focusedItem;\n\n    if (item !== this.focusedItem) {\n      // update statusbar\n      // todo@joh,pine -> this should a toolbar with actions so that these things become\n      // mouse clickable and fit for accessibility...\n      var wantsInsert = this.editor.getOption(89\n      /* suggest */\n      ).insertMode === 'insert';\n      var kbAccept = (_a = this.keybindingService.lookupKeybinding('acceptSelectedSuggestion')) === null || _a === void 0 ? void 0 : _a.getLabel();\n      var kbAcceptAlt = (_b = this.keybindingService.lookupKeybinding('acceptAlternativeSelectedSuggestion')) === null || _b === void 0 ? void 0 : _b.getLabel();\n\n      if (!Position.equals(item.editInsertEnd, item.editReplaceEnd)) {\n        // insert AND replace\n        if (wantsInsert) {\n          this.setStatusBarLeftText(nls.localize('insert', \"{0} to insert, {1} to replace\", kbAccept, kbAcceptAlt));\n        } else {\n          this.setStatusBarLeftText(nls.localize('replace', \"{0} to replace, {1} to insert\", kbAccept, kbAcceptAlt));\n        }\n      } else {\n        this.setStatusBarLeftText(nls.localize('accept', \"{0} to accept\", kbAccept));\n      }\n\n      if (this.currentSuggestionDetails) {\n        this.currentSuggestionDetails.cancel();\n        this.currentSuggestionDetails = null;\n      }\n\n      this.focusedItem = item;\n      this.list.reveal(index);\n      this.currentSuggestionDetails = createCancelablePromise(function (token) {\n        return __awaiter(_this, void 0, void 0, function () {\n          var loading, result;\n\n          var _this = this;\n\n          return __generator(this, function (_a) {\n            switch (_a.label) {\n              case 0:\n                loading = disposableTimeout(function () {\n                  return _this.showDetails(true);\n                }, 250);\n                token.onCancellationRequested(function () {\n                  return loading.dispose();\n                });\n                return [4\n                /*yield*/\n                , item.resolve(token)];\n\n              case 1:\n                result = _a.sent();\n                loading.dispose();\n                return [2\n                /*return*/\n                , result];\n            }\n          });\n        });\n      });\n      this.currentSuggestionDetails.then(function () {\n        if (index >= _this.list.length || item !== _this.list.element(index)) {\n          return;\n        } // item can have extra information, so re-render\n\n\n        _this.ignoreFocusEvents = true;\n\n        _this.list.splice(index, 1, [item]);\n\n        _this.list.setFocus([index]);\n\n        _this.ignoreFocusEvents = false;\n\n        if (_this.expandDocsSettingFromStorage()) {\n          _this.showDetails(false);\n        } else {\n          removeClass(_this.element, 'docs-side');\n        }\n\n        if (canExpandCompletionItem(_this.focusedItem)) {\n          if (_this.expandDocsSettingFromStorage()) {\n            _this.setStatusBarRightText(_this.msgDetailsLess);\n          } else {\n            _this.setStatusBarRightText(_this.msgDetailMore);\n          }\n        } else {\n          _this.statusBarRightSpan.innerText = '';\n        }\n\n        _this.editor.setAriaOptions({\n          activeDescendant: getAriaId(index)\n        });\n      }).catch(onUnexpectedError);\n    } // emit an event\n\n\n    this.onDidFocusEmitter.fire({\n      item: item,\n      index: index,\n      model: this.completionModel\n    });\n  };\n\n  SuggestWidget.prototype.setState = function (state) {\n    if (!this.element) {\n      return;\n    }\n\n    var stateChanged = this.state !== state;\n    this.state = state;\n    toggleClass(this.element, 'frozen', state === 4\n    /* Frozen */\n    );\n\n    switch (state) {\n      case 0\n      /* Hidden */\n      :\n        hide(this.messageElement, this.details.element, this.listElement, this.statusBarElement);\n        this.hide();\n        this.listHeight = 0;\n\n        if (stateChanged) {\n          this.list.splice(0, this.list.length);\n        }\n\n        this.focusedItem = null;\n        break;\n\n      case 1\n      /* Loading */\n      :\n        this.messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n        hide(this.listElement, this.details.element, this.statusBarElement);\n        show(this.messageElement);\n        removeClass(this.element, 'docs-side');\n        this.show();\n        this.focusedItem = null;\n        break;\n\n      case 2\n      /* Empty */\n      :\n        this.messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n        hide(this.listElement, this.details.element, this.statusBarElement);\n        show(this.messageElement);\n        removeClass(this.element, 'docs-side');\n        this.show();\n        this.focusedItem = null;\n        break;\n\n      case 3\n      /* Open */\n      :\n        hide(this.messageElement);\n        show(this.listElement, this.statusBarElement);\n        this.show();\n        break;\n\n      case 4\n      /* Frozen */\n      :\n        hide(this.messageElement);\n        show(this.listElement);\n        this.show();\n        break;\n\n      case 5\n      /* Details */\n      :\n        hide(this.messageElement);\n        show(this.details.element, this.listElement, this.statusBarElement);\n        this.show();\n        break;\n    }\n  };\n\n  SuggestWidget.prototype.showTriggered = function (auto, delay) {\n    var _this = this;\n\n    if (this.state !== 0\n    /* Hidden */\n    ) {\n        return;\n      }\n\n    this.isAuto = !!auto;\n\n    if (!this.isAuto) {\n      this.loadingTimeout = disposableTimeout(function () {\n        return _this.setState(1\n        /* Loading */\n        );\n      }, delay);\n    }\n  };\n\n  SuggestWidget.prototype.showSuggestions = function (completionModel, selectionIndex, isFrozen, isAuto) {\n    this.preferDocPositionTop = false;\n    this.docsPositionPreviousWidgetY = null;\n    this.loadingTimeout.dispose();\n\n    if (this.currentSuggestionDetails) {\n      this.currentSuggestionDetails.cancel();\n      this.currentSuggestionDetails = null;\n    }\n\n    if (this.completionModel !== completionModel) {\n      this.completionModel = completionModel;\n    }\n\n    if (isFrozen && this.state !== 2\n    /* Empty */\n    && this.state !== 0\n    /* Hidden */\n    ) {\n        this.setState(4\n        /* Frozen */\n        );\n        return;\n      }\n\n    var visibleCount = this.completionModel.items.length;\n    var isEmpty = visibleCount === 0;\n    this.suggestWidgetMultipleSuggestions.set(visibleCount > 1);\n\n    if (isEmpty) {\n      if (isAuto) {\n        this.setState(0\n        /* Hidden */\n        );\n      } else {\n        this.setState(2\n        /* Empty */\n        );\n      }\n\n      this.completionModel = null;\n    } else {\n      if (this.state !== 3\n      /* Open */\n      ) {\n          var stats = this.completionModel.stats;\n          stats['wasAutomaticallyTriggered'] = !!isAuto;\n          /* __GDPR__\r\n              \"suggestWidget\" : {\r\n                  \"wasAutomaticallyTriggered\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\r\n                  \"${include}\": [\r\n                      \"${ICompletionStats}\"\r\n                  ]\r\n              }\r\n          */\n\n          this.telemetryService.publicLog('suggestWidget', __assign({}, stats));\n        }\n\n      this.focusedItem = null;\n      this.list.splice(0, this.list.length, this.completionModel.items);\n\n      if (isFrozen) {\n        this.setState(4\n        /* Frozen */\n        );\n      } else {\n        this.setState(3\n        /* Open */\n        );\n      }\n\n      this.list.reveal(selectionIndex, 0);\n      this.list.setFocus([selectionIndex]); // Reset focus border\n\n      if (this.detailsBorderColor) {\n        this.details.element.style.borderColor = this.detailsBorderColor;\n      }\n    }\n  };\n\n  SuggestWidget.prototype.selectNextPage = function () {\n    switch (this.state) {\n      case 0\n      /* Hidden */\n      :\n        return false;\n\n      case 5\n      /* Details */\n      :\n        this.details.pageDown();\n        return true;\n\n      case 1\n      /* Loading */\n      :\n        return !this.isAuto;\n\n      default:\n        this.list.focusNextPage();\n        return true;\n    }\n  };\n\n  SuggestWidget.prototype.selectNext = function () {\n    switch (this.state) {\n      case 0\n      /* Hidden */\n      :\n        return false;\n\n      case 1\n      /* Loading */\n      :\n        return !this.isAuto;\n\n      default:\n        this.list.focusNext(1, true);\n        return true;\n    }\n  };\n\n  SuggestWidget.prototype.selectLast = function () {\n    switch (this.state) {\n      case 0\n      /* Hidden */\n      :\n        return false;\n\n      case 5\n      /* Details */\n      :\n        this.details.scrollBottom();\n        return true;\n\n      case 1\n      /* Loading */\n      :\n        return !this.isAuto;\n\n      default:\n        this.list.focusLast();\n        return true;\n    }\n  };\n\n  SuggestWidget.prototype.selectPreviousPage = function () {\n    switch (this.state) {\n      case 0\n      /* Hidden */\n      :\n        return false;\n\n      case 5\n      /* Details */\n      :\n        this.details.pageUp();\n        return true;\n\n      case 1\n      /* Loading */\n      :\n        return !this.isAuto;\n\n      default:\n        this.list.focusPreviousPage();\n        return true;\n    }\n  };\n\n  SuggestWidget.prototype.selectPrevious = function () {\n    switch (this.state) {\n      case 0\n      /* Hidden */\n      :\n        return false;\n\n      case 1\n      /* Loading */\n      :\n        return !this.isAuto;\n\n      default:\n        this.list.focusPrevious(1, true);\n        return false;\n    }\n  };\n\n  SuggestWidget.prototype.selectFirst = function () {\n    switch (this.state) {\n      case 0\n      /* Hidden */\n      :\n        return false;\n\n      case 5\n      /* Details */\n      :\n        this.details.scrollTop();\n        return true;\n\n      case 1\n      /* Loading */\n      :\n        return !this.isAuto;\n\n      default:\n        this.list.focusFirst();\n        return true;\n    }\n  };\n\n  SuggestWidget.prototype.getFocusedItem = function () {\n    if (this.state !== 0\n    /* Hidden */\n    && this.state !== 2\n    /* Empty */\n    && this.state !== 1\n    /* Loading */\n    && this.completionModel) {\n      return {\n        item: this.list.getFocusedElements()[0],\n        index: this.list.getFocus()[0],\n        model: this.completionModel\n      };\n    }\n\n    return undefined;\n  };\n\n  SuggestWidget.prototype.toggleDetailsFocus = function () {\n    if (this.state === 5\n    /* Details */\n    ) {\n        this.setState(3\n        /* Open */\n        );\n\n        if (this.detailsBorderColor) {\n          this.details.element.style.borderColor = this.detailsBorderColor;\n        }\n      } else if (this.state === 3\n    /* Open */\n    && this.expandDocsSettingFromStorage()) {\n      this.setState(5\n      /* Details */\n      );\n\n      if (this.detailsFocusBorderColor) {\n        this.details.element.style.borderColor = this.detailsFocusBorderColor;\n      }\n    }\n\n    this.telemetryService.publicLog2('suggestWidget:toggleDetailsFocus');\n  };\n\n  SuggestWidget.prototype.toggleDetails = function () {\n    if (!canExpandCompletionItem(this.list.getFocusedElements()[0])) {\n      return;\n    }\n\n    if (this.expandDocsSettingFromStorage()) {\n      this.updateExpandDocsSetting(false);\n      hide(this.details.element);\n      removeClass(this.element, 'docs-side');\n      removeClass(this.element, 'docs-below');\n      this.editor.layoutContentWidget(this);\n      this.setStatusBarRightText(this.msgDetailMore);\n      this.telemetryService.publicLog2('suggestWidget:collapseDetails');\n    } else {\n      if (this.state !== 3\n      /* Open */\n      && this.state !== 5\n      /* Details */\n      && this.state !== 4\n      /* Frozen */\n      ) {\n          return;\n        }\n\n      this.updateExpandDocsSetting(true);\n      this.showDetails(false);\n      this.setStatusBarRightText(this.msgDetailsLess);\n      this.telemetryService.publicLog2('suggestWidget:expandDetails');\n    }\n  };\n\n  SuggestWidget.prototype.showDetails = function (loading) {\n    if (!loading) {\n      // When loading, don't re-layout docs, as item is not resolved yet #88731\n      this.expandSideOrBelow();\n    }\n\n    show(this.details.element);\n    this.details.element.style.maxHeight = this.maxWidgetHeight + 'px';\n\n    if (loading) {\n      this.details.renderLoading();\n    } else {\n      this.details.renderItem(this.list.getFocusedElements()[0], this.explainMode);\n    } // Reset margin-top that was set as Fix for #26416\n\n\n    this.listElement.style.marginTop = '0px'; // with docs showing up widget width/height may change, so reposition the widget\n\n    this.editor.layoutContentWidget(this);\n    this.adjustDocsPosition();\n    this.editor.focus();\n  };\n\n  SuggestWidget.prototype.toggleExplainMode = function () {\n    if (this.list.getFocusedElements()[0] && this.expandDocsSettingFromStorage()) {\n      this.explainMode = !this.explainMode;\n      this.showDetails(false);\n    }\n  };\n\n  SuggestWidget.prototype.show = function () {\n    var _this = this;\n\n    var newHeight = this.updateListHeight();\n\n    if (newHeight !== this.listHeight) {\n      this.editor.layoutContentWidget(this);\n      this.listHeight = newHeight;\n    }\n\n    this.suggestWidgetVisible.set(true);\n    this.showTimeout.cancelAndSet(function () {\n      addClass(_this.element, 'visible');\n\n      _this.onDidShowEmitter.fire(_this);\n    }, 100);\n  };\n\n  SuggestWidget.prototype.hide = function () {\n    this.suggestWidgetVisible.reset();\n    this.suggestWidgetMultipleSuggestions.reset();\n    removeClass(this.element, 'visible');\n  };\n\n  SuggestWidget.prototype.hideWidget = function () {\n    this.loadingTimeout.dispose();\n    this.setState(0\n    /* Hidden */\n    );\n    this.onDidHideEmitter.fire(this);\n  };\n\n  SuggestWidget.prototype.getPosition = function () {\n    if (this.state === 0\n    /* Hidden */\n    ) {\n        return null;\n      }\n\n    var preference = [2\n    /* BELOW */\n    , 1\n    /* ABOVE */\n    ];\n\n    if (this.preferDocPositionTop) {\n      preference = [1\n      /* ABOVE */\n      ];\n    }\n\n    return {\n      position: this.editor.getPosition(),\n      preference: preference\n    };\n  };\n\n  SuggestWidget.prototype.getDomNode = function () {\n    return this.element;\n  };\n\n  SuggestWidget.prototype.getId = function () {\n    return SuggestWidget.ID;\n  };\n\n  SuggestWidget.prototype.isFrozen = function () {\n    return this.state === 4\n    /* Frozen */\n    ;\n  };\n\n  SuggestWidget.prototype.updateListHeight = function () {\n    var height = 0;\n\n    if (this.state === 2\n    /* Empty */\n    || this.state === 1\n    /* Loading */\n    ) {\n        height = this.unfocusedHeight;\n      } else {\n      var suggestionCount = this.list.contentHeight / this.unfocusedHeight;\n      var maxVisibleSuggestions = this.editor.getOption(89\n      /* suggest */\n      ).maxVisibleSuggestions;\n      height = Math.min(suggestionCount, maxVisibleSuggestions) * this.unfocusedHeight;\n    }\n\n    this.element.style.lineHeight = this.unfocusedHeight + \"px\";\n    this.listElement.style.height = height + \"px\";\n    this.statusBarElement.style.top = height + \"px\";\n    this.list.layout(height);\n    return height;\n  };\n  /**\r\n   * Adds the propert classes, margins when positioning the docs to the side\r\n   */\n\n\n  SuggestWidget.prototype.adjustDocsPosition = function () {\n    if (!this.editor.hasModel()) {\n      return;\n    }\n\n    var lineHeight = this.editor.getOption(49\n    /* lineHeight */\n    );\n    var cursorCoords = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n    var editorCoords = getDomNodePagePosition(this.editor.getDomNode());\n    var cursorX = editorCoords.left + cursorCoords.left;\n    var cursorY = editorCoords.top + cursorCoords.top + cursorCoords.height;\n    var widgetCoords = getDomNodePagePosition(this.element);\n    var widgetX = widgetCoords.left;\n    var widgetY = widgetCoords.top; // Fixes #27649\n    // Check if the Y changed to the top of the cursor and keep the widget flagged to prefer top\n\n    if (this.docsPositionPreviousWidgetY && this.docsPositionPreviousWidgetY < widgetY && !this.preferDocPositionTop) {\n      this.preferDocPositionTop = true;\n      this.adjustDocsPosition();\n      return;\n    }\n\n    this.docsPositionPreviousWidgetY = widgetY;\n\n    if (widgetX < cursorX - this.listWidth) {\n      // Widget is too far to the left of cursor, swap list and docs\n      addClass(this.element, 'list-right');\n    } else {\n      removeClass(this.element, 'list-right');\n    } // Compare top of the cursor (cursorY - lineheight) with widgetTop to determine if\n    // margin-top needs to be applied on list to make it appear right above the cursor\n    // Cannot compare cursorY directly as it may be a few decimals off due to zoooming\n\n\n    if (hasClass(this.element, 'docs-side') && cursorY - lineHeight > widgetY && this.details.element.offsetHeight > this.listElement.offsetHeight) {\n      // Fix for #26416\n      // Docs is bigger than list and widget is above cursor, apply margin-top so that list appears right above cursor\n      this.listElement.style.marginTop = this.details.element.offsetHeight - this.listElement.offsetHeight + \"px\";\n    }\n  };\n  /**\r\n   * Adds the proper classes for positioning the docs to the side or below depending on item\r\n   */\n\n\n  SuggestWidget.prototype.expandSideOrBelow = function () {\n    if (!canExpandCompletionItem(this.focusedItem) && this.firstFocusInCurrentList) {\n      removeClass(this.element, 'docs-side');\n      removeClass(this.element, 'docs-below');\n      return;\n    }\n\n    var matches = this.element.style.maxWidth.match(/(\\d+)px/);\n\n    if (!matches || Number(matches[1]) < this.maxWidgetWidth) {\n      addClass(this.element, 'docs-below');\n      removeClass(this.element, 'docs-side');\n    } else if (canExpandCompletionItem(this.focusedItem)) {\n      addClass(this.element, 'docs-side');\n      removeClass(this.element, 'docs-below');\n    }\n  };\n\n  Object.defineProperty(SuggestWidget.prototype, \"maxWidgetHeight\", {\n    // Heights\n    get: function () {\n      return this.unfocusedHeight * this.editor.getOption(89\n      /* suggest */\n      ).maxVisibleSuggestions;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(SuggestWidget.prototype, \"unfocusedHeight\", {\n    get: function () {\n      var options = this.editor.getOptions();\n      return options.get(91\n      /* suggestLineHeight */\n      ) || options.get(34\n      /* fontInfo */\n      ).lineHeight;\n    },\n    enumerable: true,\n    configurable: true\n  }); // IDelegate\n\n  SuggestWidget.prototype.getHeight = function (element) {\n    return this.unfocusedHeight;\n  };\n\n  SuggestWidget.prototype.getTemplateId = function (element) {\n    return 'suggestion';\n  };\n\n  SuggestWidget.prototype.expandDocsSettingFromStorage = function () {\n    return this.storageService.getBoolean('expandSuggestionDocs', 0\n    /* GLOBAL */\n    , expandSuggestionDocsByDefault);\n  };\n\n  SuggestWidget.prototype.updateExpandDocsSetting = function (value) {\n    this.storageService.store('expandSuggestionDocs', value, 0\n    /* GLOBAL */\n    );\n  };\n\n  SuggestWidget.prototype.setStatusBarLeftText = function (s) {\n    this.statusBarLeftSpan.innerText = s;\n  };\n\n  SuggestWidget.prototype.setStatusBarRightText = function (s) {\n    this.statusBarRightSpan.innerText = s;\n  };\n\n  SuggestWidget.prototype.dispose = function () {\n    this.details.dispose();\n    this.list.dispose();\n    this.toDispose.dispose();\n    this.loadingTimeout.dispose();\n    this.showTimeout.dispose();\n  };\n\n  SuggestWidget.ID = 'editor.widget.suggestWidget';\n  SuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\n  SuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\n  SuggestWidget = __decorate([__param(1, ITelemetryService), __param(2, IKeybindingService), __param(3, IContextKeyService), __param(4, IThemeService), __param(5, IStorageService), __param(6, IModeService), __param(7, IOpenerService), __param(8, IInstantiationService)], SuggestWidget);\n  return SuggestWidget;\n}();\n\nexport { SuggestWidget };\nregisterThemingParticipant(function (theme, collector) {\n  var matchHighlight = theme.getColor(editorSuggestWidgetHighlightForeground);\n\n  if (matchHighlight) {\n    collector.addRule(\".monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: \" + matchHighlight + \"; }\");\n  }\n\n  var foreground = theme.getColor(editorSuggestWidgetForeground);\n\n  if (foreground) {\n    collector.addRule(\".monaco-editor .suggest-widget { color: \" + foreground + \"; }\");\n  }\n\n  var link = theme.getColor(textLinkForeground);\n\n  if (link) {\n    collector.addRule(\".monaco-editor .suggest-widget a { color: \" + link + \"; }\");\n  }\n\n  var codeBackground = theme.getColor(textCodeBlockBackground);\n\n  if (codeBackground) {\n    collector.addRule(\".monaco-editor .suggest-widget code { background-color: \" + codeBackground + \"; }\");\n  }\n});","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestWidget.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","d","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","nls","createMatches","strings","Event","Emitter","onUnexpectedError","dispose","toDisposable","DisposableStore","Disposable","addClass","append","$","hide","removeClass","show","toggleClass","getDomNodePagePosition","hasClass","addDisposableListener","addStandardDisposableListener","addClasses","List","DomScrollableElement","IKeybindingService","IContextKeyService","Context","SuggestContext","ITelemetryService","attachListStyler","IThemeService","registerThemingParticipant","registerColor","editorWidgetBackground","listFocusBackground","activeContrastBorder","listHighlightForeground","editorForeground","editorWidgetBorder","focusBorder","textLinkForeground","textCodeBlockBackground","IStorageService","MarkdownRenderer","IModeService","IOpenerService","TimeoutTimer","createCancelablePromise","disposableTimeout","completionKindToCssClass","IconLabel","getIconClasses","IModelService","URI","IInstantiationService","FileKind","MarkdownString","flatten","Position","expandSuggestionDocsByDefault","editorSuggestWidgetBackground","dark","light","hc","localize","editorSuggestWidgetBorder","editorSuggestWidgetForeground","editorSuggestWidgetSelectedBackground","editorSuggestWidgetHighlightForeground","colorRegExp","extractColor","item","out","completion","name","match","documentation","canExpandCompletionItem","suggestion","detail","getAriaId","index","ItemRenderer","widget","editor","triggerKeybindingLabel","_modelService","_modeService","_themeService","get","enumerable","configurable","renderTemplate","container","_this","data","create","disposables","root","icon","colorspan","text","main","left","right","iconContainer","iconLabel","supportHighlights","supportCodicons","add","signatureLabel","qualifierLabel","detailsLabel","readMore","title","configureFont","options","getOptions","fontInfo","fontFamily","fontFeatureSettings","fontSize","lineHeight","fontWeight","fontSizePx","lineHeightPx","style","height","width","chain","onDidChangeConfiguration","bind","filter","hasChanged","on","renderElement","element","templateData","textLabel","id","className","kind","backgroundColor","labelOptions","labelEscapeNewLines","matches","score","color","getIconTheme","hasFileIcons","labelClasses","from","scheme","path","FILE","detailClasses","extraClasses","hasFolderIcons","FOLDER","tags","indexOf","concat","setLabel","undefined","textContent","replace","signature","qualifier","type","onmousedown","stopPropagation","preventDefault","onclick","toggleDetails","disposeTemplate","SuggestionDetails","markdownRenderer","kbToggleDetails","borderWidth","el","removeChild","scrollbar","getDomNode","header","close","docs","onDidRenderCodeBlock","scanDomNode","renderLoading","renderItem","explainMode","renderDisposeable","_a","md","word","filterText","distance","idx","sortText","appendCodeblock","provider","_debugDisplayName","innerHTML","renderedContents","render","appendChild","innerText","offsetHeight","userSelect","tabIndex","scrollTop","scrollDown","much","scrollUp","scrollBottom","scrollHeight","pageDown","pageUp","setBorderWidth","SuggestWidget","telemetryService","keybindingService","contextKeyService","themeService","storageService","modeService","openerService","instantiationService","_b","allowEditorOverflow","suppressMouseDown","state","isAuto","loadingTimeout","None","currentSuggestionDetails","ignoreFocusEvents","completionModel","showTimeout","toDispose","onDidSelectEmitter","onDidFocusEmitter","onDidHideEmitter","onDidShowEmitter","onDidSelect","event","onDidFocus","onDidHide","onDidShow","maxWidgetWidth","listWidth","firstFocusInCurrentList","preferDocPositionTop","docsPositionPreviousWidgetY","_onDetailsKeydown","onDetailsKeyDown","lookupKeybinding","getLabel","msgDetailsLess","msgDetailMore","focusedItem","hideWidget","messageElement","listElement","applyStatusBarStyle","getOption","hideStatusBar","statusBarElement","statusBarLeftSpan","statusBarRightSpan","setStatusBarLeftText","setStatusBarRightText","details","createInstance","applyIconStyle","showIcons","renderer","list","useShadows","openController","shouldOpen","mouseSupport","accessibilityProvider","getAriaLabel","isResolved","expandDocsSettingFromStorage","format","listInactiveFocusBackground","listInactiveFocusOutline","onThemeChange","onDidLayoutChange","onEditorLayoutChange","onMouseDown","onListMouseDownOrTap","onTap","onSelectionChange","onListSelection","onFocusChange","onListFocus","onDidChangeCursorSelection","onCursorSelectionChanged","suggestWidgetVisible","Visible","bindTo","suggestWidgetMultipleSuggestions","MultipleSuggestions","addContentWidget","setState","getTheme","fire","onEditorMouseDown","mouseEvent","contains","focus","layoutContentWidget","expandSideOrBelow","browserEvent","select","elements","indexes","model","theme","getColor","toString","borderColor","detailsBorderColor","focusBorderColor","detailsFocusBorderColor","cancel","setAriaOptions","activeDescendant","wantsInsert","insertMode","kbAccept","kbAcceptAlt","equals","editInsertEnd","editReplaceEnd","reveal","token","loading","showDetails","onCancellationRequested","splice","setFocus","catch","stateChanged","listHeight","LOADING_MESSAGE","NO_SUGGESTIONS_MESSAGE","showTriggered","auto","delay","showSuggestions","selectionIndex","isFrozen","visibleCount","items","isEmpty","set","stats","publicLog","selectNextPage","focusNextPage","selectNext","focusNext","selectLast","focusLast","selectPreviousPage","focusPreviousPage","selectPrevious","focusPrevious","selectFirst","focusFirst","getFocusedItem","getFocusedElements","getFocus","toggleDetailsFocus","publicLog2","updateExpandDocsSetting","maxHeight","maxWidgetHeight","marginTop","adjustDocsPosition","toggleExplainMode","newHeight","updateListHeight","cancelAndSet","reset","getPosition","preference","position","getId","ID","unfocusedHeight","suggestionCount","contentHeight","maxVisibleSuggestions","Math","min","top","layout","hasModel","cursorCoords","getScrolledVisiblePosition","editorCoords","cursorX","cursorY","widgetCoords","widgetX","widgetY","maxWidth","Number","getHeight","getTemplateId","getBoolean","store","collector","matchHighlight","addRule","foreground","link","codeBackground"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport './media/suggest.css';\r\nimport './media/suggestStatusBar.css';\r\nimport '../../../base/browser/ui/codiconLabel/codiconLabel.js'; // The codicon symbol styles are defined here and must be loaded\r\nimport '../documentSymbols/outlineTree.js'; // The codicon symbol colors are defined here and must be loaded\r\nimport * as nls from '../../../nls.js';\r\nimport { createMatches } from '../../../base/common/filters.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { Event, Emitter } from '../../../base/common/event.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { dispose, toDisposable, DisposableStore, Disposable } from '../../../base/common/lifecycle.js';\r\nimport { addClass, append, $, hide, removeClass, show, toggleClass, getDomNodePagePosition, hasClass, addDisposableListener, addStandardDisposableListener, addClasses } from '../../../base/browser/dom.js';\r\nimport { List } from '../../../base/browser/ui/list/listWidget.js';\r\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { Context as SuggestContext } from './suggest.js';\r\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\r\nimport { attachListStyler } from '../../../platform/theme/common/styler.js';\r\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { registerColor, editorWidgetBackground, listFocusBackground, activeContrastBorder, listHighlightForeground, editorForeground, editorWidgetBorder, focusBorder, textLinkForeground, textCodeBlockBackground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\r\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\r\nimport { IModeService } from '../../common/services/modeService.js';\r\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { TimeoutTimer, createCancelablePromise, disposableTimeout } from '../../../base/common/async.js';\r\nimport { completionKindToCssClass } from '../../common/modes.js';\r\nimport { IconLabel } from '../../../base/browser/ui/iconLabel/iconLabel.js';\r\nimport { getIconClasses } from '../../common/services/getIconClasses.js';\r\nimport { IModelService } from '../../common/services/modelService.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { FileKind } from '../../../platform/files/common/files.js';\r\nimport { MarkdownString } from '../../../base/common/htmlContent.js';\r\nimport { flatten } from '../../../base/common/arrays.js';\r\nimport { Position } from '../../common/core/position.js';\r\nvar expandSuggestionDocsByDefault = false;\r\n/**\r\n * Suggest widget colors\r\n */\r\nexport var editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hc: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\r\nexport var editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hc: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\r\nexport var editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hc: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\r\nexport var editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: listFocusBackground, light: listFocusBackground, hc: listFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\r\nexport var editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hc: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\r\nvar colorRegExp = /^(#([\\da-f]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))$/i;\r\nfunction extractColor(item, out) {\r\n    var label = typeof item.completion.label === 'string'\r\n        ? item.completion.label\r\n        : item.completion.label.name;\r\n    if (label.match(colorRegExp)) {\r\n        out[0] = label;\r\n        return true;\r\n    }\r\n    if (typeof item.completion.documentation === 'string' && item.completion.documentation.match(colorRegExp)) {\r\n        out[0] = item.completion.documentation;\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction canExpandCompletionItem(item) {\r\n    if (!item) {\r\n        return false;\r\n    }\r\n    var suggestion = item.completion;\r\n    if (suggestion.documentation) {\r\n        return true;\r\n    }\r\n    return (suggestion.detail && suggestion.detail !== suggestion.label);\r\n}\r\nfunction getAriaId(index) {\r\n    return \"suggest-aria-id:\" + index;\r\n}\r\nvar ItemRenderer = /** @class */ (function () {\r\n    function ItemRenderer(widget, editor, triggerKeybindingLabel, _modelService, _modeService, _themeService) {\r\n        this.widget = widget;\r\n        this.editor = editor;\r\n        this.triggerKeybindingLabel = triggerKeybindingLabel;\r\n        this._modelService = _modelService;\r\n        this._modeService = _modeService;\r\n        this._themeService = _themeService;\r\n    }\r\n    Object.defineProperty(ItemRenderer.prototype, \"templateId\", {\r\n        get: function () {\r\n            return 'suggestion';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ItemRenderer.prototype.renderTemplate = function (container) {\r\n        var _this = this;\r\n        var data = Object.create(null);\r\n        data.disposables = new DisposableStore();\r\n        data.root = container;\r\n        addClass(data.root, 'show-file-icons');\r\n        data.icon = append(container, $('.icon'));\r\n        data.colorspan = append(data.icon, $('span.colorspan'));\r\n        var text = append(container, $('.contents'));\r\n        var main = append(text, $('.main'));\r\n        data.left = append(main, $('span.left'));\r\n        data.right = append(main, $('span.right'));\r\n        data.iconContainer = append(data.left, $('.icon-label.codicon'));\r\n        data.iconLabel = new IconLabel(data.left, { supportHighlights: true, supportCodicons: true });\r\n        data.disposables.add(data.iconLabel);\r\n        data.signatureLabel = append(data.left, $('span.signature-label'));\r\n        data.qualifierLabel = append(data.left, $('span.qualifier-label'));\r\n        data.detailsLabel = append(data.right, $('span.details-label'));\r\n        data.readMore = append(data.right, $('span.readMore.codicon.codicon-info'));\r\n        data.readMore.title = nls.localize('readMore', \"Read More...{0}\", this.triggerKeybindingLabel);\r\n        var configureFont = function () {\r\n            var options = _this.editor.getOptions();\r\n            var fontInfo = options.get(34 /* fontInfo */);\r\n            var fontFamily = fontInfo.fontFamily;\r\n            var fontFeatureSettings = fontInfo.fontFeatureSettings;\r\n            var fontSize = options.get(90 /* suggestFontSize */) || fontInfo.fontSize;\r\n            var lineHeight = options.get(91 /* suggestLineHeight */) || fontInfo.lineHeight;\r\n            var fontWeight = fontInfo.fontWeight;\r\n            var fontSizePx = fontSize + \"px\";\r\n            var lineHeightPx = lineHeight + \"px\";\r\n            data.root.style.fontSize = fontSizePx;\r\n            data.root.style.fontWeight = fontWeight;\r\n            main.style.fontFamily = fontFamily;\r\n            main.style.fontFeatureSettings = fontFeatureSettings;\r\n            main.style.lineHeight = lineHeightPx;\r\n            data.icon.style.height = lineHeightPx;\r\n            data.icon.style.width = lineHeightPx;\r\n            data.readMore.style.height = lineHeightPx;\r\n            data.readMore.style.width = lineHeightPx;\r\n        };\r\n        configureFont();\r\n        data.disposables.add(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\r\n            .filter(function (e) { return e.hasChanged(34 /* fontInfo */) || e.hasChanged(90 /* suggestFontSize */) || e.hasChanged(91 /* suggestLineHeight */); })\r\n            .on(configureFont, null));\r\n        return data;\r\n    };\r\n    ItemRenderer.prototype.renderElement = function (element, index, templateData) {\r\n        var _this = this;\r\n        var data = templateData;\r\n        var suggestion = element.completion;\r\n        var textLabel = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.name;\r\n        data.root.id = getAriaId(index);\r\n        data.icon.className = 'icon ' + completionKindToCssClass(suggestion.kind);\r\n        data.colorspan.style.backgroundColor = '';\r\n        var labelOptions = {\r\n            labelEscapeNewLines: true,\r\n            matches: createMatches(element.score)\r\n        };\r\n        var color = [];\r\n        if (suggestion.kind === 19 /* Color */ && extractColor(element, color)) {\r\n            // special logic for 'color' completion items\r\n            data.icon.className = 'icon customcolor';\r\n            data.iconContainer.className = 'icon hide';\r\n            data.colorspan.style.backgroundColor = color[0];\r\n        }\r\n        else if (suggestion.kind === 20 /* File */ && this._themeService.getIconTheme().hasFileIcons) {\r\n            // special logic for 'file' completion items\r\n            data.icon.className = 'icon hide';\r\n            data.iconContainer.className = 'icon hide';\r\n            var labelClasses = getIconClasses(this._modelService, this._modeService, URI.from({ scheme: 'fake', path: textLabel }), FileKind.FILE);\r\n            var detailClasses = getIconClasses(this._modelService, this._modeService, URI.from({ scheme: 'fake', path: suggestion.detail }), FileKind.FILE);\r\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\r\n        }\r\n        else if (suggestion.kind === 23 /* Folder */ && this._themeService.getIconTheme().hasFolderIcons) {\r\n            // special logic for 'folder' completion items\r\n            data.icon.className = 'icon hide';\r\n            data.iconContainer.className = 'icon hide';\r\n            labelOptions.extraClasses = flatten([\r\n                getIconClasses(this._modelService, this._modeService, URI.from({ scheme: 'fake', path: textLabel }), FileKind.FOLDER),\r\n                getIconClasses(this._modelService, this._modeService, URI.from({ scheme: 'fake', path: suggestion.detail }), FileKind.FOLDER)\r\n            ]);\r\n        }\r\n        else {\r\n            // normal icon\r\n            data.icon.className = 'icon hide';\r\n            data.iconContainer.className = '';\r\n            addClasses(data.iconContainer, \"suggest-icon codicon codicon-symbol-\" + completionKindToCssClass(suggestion.kind));\r\n        }\r\n        if (suggestion.tags && suggestion.tags.indexOf(1 /* Deprecated */) >= 0) {\r\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\r\n            labelOptions.matches = [];\r\n        }\r\n        data.iconLabel.setLabel(textLabel, undefined, labelOptions);\r\n        if (typeof suggestion.label === 'string') {\r\n            data.signatureLabel.textContent = '';\r\n            data.qualifierLabel.textContent = '';\r\n            data.detailsLabel.textContent = (suggestion.detail || '').replace(/\\n.*$/m, '');\r\n            removeClass(data.right, 'always-show-details');\r\n        }\r\n        else {\r\n            data.signatureLabel.textContent = (suggestion.label.signature || '').replace(/\\n.*$/m, '');\r\n            data.qualifierLabel.textContent = (suggestion.label.qualifier || '').replace(/\\n.*$/m, '');\r\n            data.detailsLabel.textContent = (suggestion.label.type || '').replace(/\\n.*$/m, '');\r\n            addClass(data.right, 'always-show-details');\r\n        }\r\n        if (canExpandCompletionItem(element)) {\r\n            addClass(data.right, 'can-expand-details');\r\n            show(data.readMore);\r\n            data.readMore.onmousedown = function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n            };\r\n            data.readMore.onclick = function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                _this.widget.toggleDetails();\r\n            };\r\n        }\r\n        else {\r\n            removeClass(data.right, 'can-expand-details');\r\n            hide(data.readMore);\r\n            data.readMore.onmousedown = null;\r\n            data.readMore.onclick = null;\r\n        }\r\n    };\r\n    ItemRenderer.prototype.disposeTemplate = function (templateData) {\r\n        templateData.disposables.dispose();\r\n    };\r\n    ItemRenderer = __decorate([\r\n        __param(3, IModelService),\r\n        __param(4, IModeService),\r\n        __param(5, IThemeService)\r\n    ], ItemRenderer);\r\n    return ItemRenderer;\r\n}());\r\nvar SuggestionDetails = /** @class */ (function () {\r\n    function SuggestionDetails(container, widget, editor, markdownRenderer, kbToggleDetails) {\r\n        var _this = this;\r\n        this.widget = widget;\r\n        this.editor = editor;\r\n        this.markdownRenderer = markdownRenderer;\r\n        this.kbToggleDetails = kbToggleDetails;\r\n        this.borderWidth = 1;\r\n        this.disposables = new DisposableStore();\r\n        this.el = append(container, $('.details'));\r\n        this.disposables.add(toDisposable(function () { return container.removeChild(_this.el); }));\r\n        this.body = $('.body');\r\n        this.scrollbar = new DomScrollableElement(this.body, {});\r\n        append(this.el, this.scrollbar.getDomNode());\r\n        this.disposables.add(this.scrollbar);\r\n        this.header = append(this.body, $('.header'));\r\n        this.close = append(this.header, $('span.codicon.codicon-close'));\r\n        this.close.title = nls.localize('readLess', \"Read less...{0}\", this.kbToggleDetails);\r\n        this.type = append(this.header, $('p.type'));\r\n        this.docs = append(this.body, $('p.docs'));\r\n        this.configureFont();\r\n        Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\r\n            .filter(function (e) { return e.hasChanged(34 /* fontInfo */); })\r\n            .on(this.configureFont, this, this.disposables);\r\n        markdownRenderer.onDidRenderCodeBlock(function () { return _this.scrollbar.scanDomNode(); }, this, this.disposables);\r\n    }\r\n    Object.defineProperty(SuggestionDetails.prototype, \"element\", {\r\n        get: function () {\r\n            return this.el;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SuggestionDetails.prototype.renderLoading = function () {\r\n        this.type.textContent = nls.localize('loading', \"Loading...\");\r\n        this.docs.textContent = '';\r\n    };\r\n    SuggestionDetails.prototype.renderItem = function (item, explainMode) {\r\n        var _this = this;\r\n        this.renderDisposeable = dispose(this.renderDisposeable);\r\n        var _a = item.completion, documentation = _a.documentation, detail = _a.detail;\r\n        // --- documentation\r\n        if (explainMode) {\r\n            var md = '';\r\n            md += \"score: \" + item.score[0] + (item.word ? \", compared '\" + (item.completion.filterText && (item.completion.filterText + ' (filterText)') || item.completion.label) + \"' with '\" + item.word + \"'\" : ' (no prefix)') + \"\\n\";\r\n            md += \"distance: \" + item.distance + \", see localityBonus-setting\\n\";\r\n            md += \"index: \" + item.idx + \", based on \" + (item.completion.sortText && \"sortText: \\\"\" + item.completion.sortText + \"\\\"\" || 'label') + \"\\n\";\r\n            documentation = new MarkdownString().appendCodeblock('empty', md);\r\n            detail = \"Provider: \" + item.provider._debugDisplayName;\r\n        }\r\n        if (!explainMode && !canExpandCompletionItem(item)) {\r\n            this.type.textContent = '';\r\n            this.docs.textContent = '';\r\n            addClass(this.el, 'no-docs');\r\n            return;\r\n        }\r\n        removeClass(this.el, 'no-docs');\r\n        if (typeof documentation === 'string') {\r\n            removeClass(this.docs, 'markdown-docs');\r\n            this.docs.textContent = documentation;\r\n        }\r\n        else {\r\n            addClass(this.docs, 'markdown-docs');\r\n            this.docs.innerHTML = '';\r\n            var renderedContents = this.markdownRenderer.render(documentation);\r\n            this.renderDisposeable = renderedContents;\r\n            this.docs.appendChild(renderedContents.element);\r\n        }\r\n        // --- details\r\n        if (detail) {\r\n            this.type.innerText = detail;\r\n            show(this.type);\r\n        }\r\n        else {\r\n            this.type.innerText = '';\r\n            hide(this.type);\r\n        }\r\n        this.el.style.height = this.header.offsetHeight + this.docs.offsetHeight + (this.borderWidth * 2) + 'px';\r\n        this.el.style.userSelect = 'text';\r\n        this.el.tabIndex = -1;\r\n        this.close.onmousedown = function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        };\r\n        this.close.onclick = function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            _this.widget.toggleDetails();\r\n        };\r\n        this.body.scrollTop = 0;\r\n        this.scrollbar.scanDomNode();\r\n    };\r\n    SuggestionDetails.prototype.scrollDown = function (much) {\r\n        if (much === void 0) { much = 8; }\r\n        this.body.scrollTop += much;\r\n    };\r\n    SuggestionDetails.prototype.scrollUp = function (much) {\r\n        if (much === void 0) { much = 8; }\r\n        this.body.scrollTop -= much;\r\n    };\r\n    SuggestionDetails.prototype.scrollTop = function () {\r\n        this.body.scrollTop = 0;\r\n    };\r\n    SuggestionDetails.prototype.scrollBottom = function () {\r\n        this.body.scrollTop = this.body.scrollHeight;\r\n    };\r\n    SuggestionDetails.prototype.pageDown = function () {\r\n        this.scrollDown(80);\r\n    };\r\n    SuggestionDetails.prototype.pageUp = function () {\r\n        this.scrollUp(80);\r\n    };\r\n    SuggestionDetails.prototype.setBorderWidth = function (width) {\r\n        this.borderWidth = width;\r\n    };\r\n    SuggestionDetails.prototype.configureFont = function () {\r\n        var options = this.editor.getOptions();\r\n        var fontInfo = options.get(34 /* fontInfo */);\r\n        var fontFamily = fontInfo.fontFamily;\r\n        var fontSize = options.get(90 /* suggestFontSize */) || fontInfo.fontSize;\r\n        var lineHeight = options.get(91 /* suggestLineHeight */) || fontInfo.lineHeight;\r\n        var fontWeight = fontInfo.fontWeight;\r\n        var fontSizePx = fontSize + \"px\";\r\n        var lineHeightPx = lineHeight + \"px\";\r\n        this.el.style.fontSize = fontSizePx;\r\n        this.el.style.fontWeight = fontWeight;\r\n        this.el.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\r\n        this.type.style.fontFamily = fontFamily;\r\n        this.close.style.height = lineHeightPx;\r\n        this.close.style.width = lineHeightPx;\r\n    };\r\n    SuggestionDetails.prototype.dispose = function () {\r\n        this.disposables.dispose();\r\n        this.renderDisposeable = dispose(this.renderDisposeable);\r\n    };\r\n    return SuggestionDetails;\r\n}());\r\nvar SuggestWidget = /** @class */ (function () {\r\n    function SuggestWidget(editor, telemetryService, keybindingService, contextKeyService, themeService, storageService, modeService, openerService, instantiationService) {\r\n        var _this = this;\r\n        var _a, _b;\r\n        this.editor = editor;\r\n        this.telemetryService = telemetryService;\r\n        this.keybindingService = keybindingService;\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        this.allowEditorOverflow = true;\r\n        this.suppressMouseDown = false;\r\n        this.state = null;\r\n        this.isAuto = false;\r\n        this.loadingTimeout = Disposable.None;\r\n        this.currentSuggestionDetails = null;\r\n        this.ignoreFocusEvents = false;\r\n        this.completionModel = null;\r\n        this.showTimeout = new TimeoutTimer();\r\n        this.toDispose = new DisposableStore();\r\n        this.onDidSelectEmitter = new Emitter();\r\n        this.onDidFocusEmitter = new Emitter();\r\n        this.onDidHideEmitter = new Emitter();\r\n        this.onDidShowEmitter = new Emitter();\r\n        this.onDidSelect = this.onDidSelectEmitter.event;\r\n        this.onDidFocus = this.onDidFocusEmitter.event;\r\n        this.onDidHide = this.onDidHideEmitter.event;\r\n        this.onDidShow = this.onDidShowEmitter.event;\r\n        this.maxWidgetWidth = 660;\r\n        this.listWidth = 330;\r\n        this.firstFocusInCurrentList = false;\r\n        this.preferDocPositionTop = false;\r\n        this.docsPositionPreviousWidgetY = null;\r\n        this.explainMode = false;\r\n        this._onDetailsKeydown = new Emitter();\r\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\r\n        var markdownRenderer = this.toDispose.add(new MarkdownRenderer(editor, modeService, openerService));\r\n        var kbToggleDetails = (_b = (_a = keybindingService.lookupKeybinding('toggleSuggestionDetails')) === null || _a === void 0 ? void 0 : _a.getLabel()) !== null && _b !== void 0 ? _b : '';\r\n        this.msgDetailsLess = nls.localize('detail.less', \"{0} for less...\", kbToggleDetails);\r\n        this.msgDetailMore = nls.localize('detail.more', \"{0} for more...\", kbToggleDetails);\r\n        this.isAuto = false;\r\n        this.focusedItem = null;\r\n        this.storageService = storageService;\r\n        this.element = $('.editor-widget.suggest-widget');\r\n        this.toDispose.add(addDisposableListener(this.element, 'click', function (e) {\r\n            if (e.target === _this.element) {\r\n                _this.hideWidget();\r\n            }\r\n        }));\r\n        this.messageElement = append(this.element, $('.message'));\r\n        this.listElement = append(this.element, $('.tree'));\r\n        var applyStatusBarStyle = function () { return toggleClass(_this.element, 'with-status-bar', !_this.editor.getOption(89 /* suggest */).hideStatusBar); };\r\n        applyStatusBarStyle();\r\n        this.statusBarElement = append(this.element, $('.suggest-status-bar'));\r\n        this.statusBarLeftSpan = append(this.statusBarElement, $('span'));\r\n        this.statusBarRightSpan = append(this.statusBarElement, $('span'));\r\n        this.setStatusBarLeftText('');\r\n        this.setStatusBarRightText('');\r\n        this.details = instantiationService.createInstance(SuggestionDetails, this.element, this, this.editor, markdownRenderer, kbToggleDetails);\r\n        var applyIconStyle = function () { return toggleClass(_this.element, 'no-icons', !_this.editor.getOption(89 /* suggest */).showIcons); };\r\n        applyIconStyle();\r\n        var renderer = instantiationService.createInstance(ItemRenderer, this, this.editor, kbToggleDetails);\r\n        this.list = new List('SuggestWidget', this.listElement, this, [renderer], {\r\n            useShadows: false,\r\n            openController: { shouldOpen: function () { return false; } },\r\n            mouseSupport: false,\r\n            accessibilityProvider: {\r\n                getAriaLabel: function (item) {\r\n                    var textLabel = typeof item.completion.label === 'string' ? item.completion.label : item.completion.label.name;\r\n                    if (item.isResolved && _this.expandDocsSettingFromStorage()) {\r\n                        var _a = item.completion, documentation = _a.documentation, detail = _a.detail;\r\n                        var docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\r\n                        return nls.localize('ariaCurrenttSuggestionReadDetails', \"Item {0}, docs: {1}\", textLabel, docs);\r\n                    }\r\n                    else {\r\n                        return textLabel;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.toDispose.add(attachListStyler(this.list, themeService, {\r\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\r\n            listInactiveFocusOutline: activeContrastBorder\r\n        }));\r\n        this.toDispose.add(themeService.onThemeChange(function (t) { return _this.onThemeChange(t); }));\r\n        this.toDispose.add(editor.onDidLayoutChange(function () { return _this.onEditorLayoutChange(); }));\r\n        this.toDispose.add(this.list.onMouseDown(function (e) { return _this.onListMouseDownOrTap(e); }));\r\n        this.toDispose.add(this.list.onTap(function (e) { return _this.onListMouseDownOrTap(e); }));\r\n        this.toDispose.add(this.list.onSelectionChange(function (e) { return _this.onListSelection(e); }));\r\n        this.toDispose.add(this.list.onFocusChange(function (e) { return _this.onListFocus(e); }));\r\n        this.toDispose.add(this.editor.onDidChangeCursorSelection(function () { return _this.onCursorSelectionChanged(); }));\r\n        this.toDispose.add(this.editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(89 /* suggest */)) {\r\n                applyStatusBarStyle();\r\n                applyIconStyle();\r\n            }\r\n        }));\r\n        this.suggestWidgetVisible = SuggestContext.Visible.bindTo(contextKeyService);\r\n        this.suggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(contextKeyService);\r\n        this.editor.addContentWidget(this);\r\n        this.setState(0 /* Hidden */);\r\n        this.onThemeChange(themeService.getTheme());\r\n        this.toDispose.add(addStandardDisposableListener(this.details.element, 'keydown', function (e) {\r\n            _this._onDetailsKeydown.fire(e);\r\n        }));\r\n        this.toDispose.add(this.editor.onMouseDown(function (e) { return _this.onEditorMouseDown(e); }));\r\n    }\r\n    SuggestWidget.prototype.onEditorMouseDown = function (mouseEvent) {\r\n        // Clicking inside details\r\n        if (this.details.element.contains(mouseEvent.target.element)) {\r\n            this.details.element.focus();\r\n        }\r\n        // Clicking outside details and inside suggest\r\n        else {\r\n            if (this.element.contains(mouseEvent.target.element)) {\r\n                this.editor.focus();\r\n            }\r\n        }\r\n    };\r\n    SuggestWidget.prototype.onCursorSelectionChanged = function () {\r\n        if (this.state === 0 /* Hidden */) {\r\n            return;\r\n        }\r\n        this.editor.layoutContentWidget(this);\r\n    };\r\n    SuggestWidget.prototype.onEditorLayoutChange = function () {\r\n        if ((this.state === 3 /* Open */ || this.state === 5 /* Details */) && this.expandDocsSettingFromStorage()) {\r\n            this.expandSideOrBelow();\r\n        }\r\n    };\r\n    SuggestWidget.prototype.onListMouseDownOrTap = function (e) {\r\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\r\n            return;\r\n        }\r\n        // prevent stealing browser focus from the editor\r\n        e.browserEvent.preventDefault();\r\n        e.browserEvent.stopPropagation();\r\n        this.select(e.element, e.index);\r\n    };\r\n    SuggestWidget.prototype.onListSelection = function (e) {\r\n        if (!e.elements.length) {\r\n            return;\r\n        }\r\n        this.select(e.elements[0], e.indexes[0]);\r\n    };\r\n    SuggestWidget.prototype.select = function (item, index) {\r\n        var completionModel = this.completionModel;\r\n        if (!completionModel) {\r\n            return;\r\n        }\r\n        this.onDidSelectEmitter.fire({ item: item, index: index, model: completionModel });\r\n        this.editor.focus();\r\n    };\r\n    SuggestWidget.prototype.onThemeChange = function (theme) {\r\n        var backgroundColor = theme.getColor(editorSuggestWidgetBackground);\r\n        if (backgroundColor) {\r\n            this.listElement.style.backgroundColor = backgroundColor.toString();\r\n            this.statusBarElement.style.backgroundColor = backgroundColor.toString();\r\n            this.details.element.style.backgroundColor = backgroundColor.toString();\r\n            this.messageElement.style.backgroundColor = backgroundColor.toString();\r\n        }\r\n        var borderColor = theme.getColor(editorSuggestWidgetBorder);\r\n        if (borderColor) {\r\n            this.listElement.style.borderColor = borderColor.toString();\r\n            this.statusBarElement.style.borderColor = borderColor.toString();\r\n            this.details.element.style.borderColor = borderColor.toString();\r\n            this.messageElement.style.borderColor = borderColor.toString();\r\n            this.detailsBorderColor = borderColor.toString();\r\n        }\r\n        var focusBorderColor = theme.getColor(focusBorder);\r\n        if (focusBorderColor) {\r\n            this.detailsFocusBorderColor = focusBorderColor.toString();\r\n        }\r\n        this.details.setBorderWidth(theme.type === 'hc' ? 2 : 1);\r\n    };\r\n    SuggestWidget.prototype.onListFocus = function (e) {\r\n        var _this = this;\r\n        var _a, _b;\r\n        if (this.ignoreFocusEvents) {\r\n            return;\r\n        }\r\n        if (!e.elements.length) {\r\n            if (this.currentSuggestionDetails) {\r\n                this.currentSuggestionDetails.cancel();\r\n                this.currentSuggestionDetails = null;\r\n                this.focusedItem = null;\r\n            }\r\n            this.editor.setAriaOptions({ activeDescendant: undefined });\r\n            return;\r\n        }\r\n        if (!this.completionModel) {\r\n            return;\r\n        }\r\n        var item = e.elements[0];\r\n        var index = e.indexes[0];\r\n        this.firstFocusInCurrentList = !this.focusedItem;\r\n        if (item !== this.focusedItem) {\r\n            // update statusbar\r\n            // todo@joh,pine -> this should a toolbar with actions so that these things become\r\n            // mouse clickable and fit for accessibility...\r\n            var wantsInsert = this.editor.getOption(89 /* suggest */).insertMode === 'insert';\r\n            var kbAccept = (_a = this.keybindingService.lookupKeybinding('acceptSelectedSuggestion')) === null || _a === void 0 ? void 0 : _a.getLabel();\r\n            var kbAcceptAlt = (_b = this.keybindingService.lookupKeybinding('acceptAlternativeSelectedSuggestion')) === null || _b === void 0 ? void 0 : _b.getLabel();\r\n            if (!Position.equals(item.editInsertEnd, item.editReplaceEnd)) {\r\n                // insert AND replace\r\n                if (wantsInsert) {\r\n                    this.setStatusBarLeftText(nls.localize('insert', \"{0} to insert, {1} to replace\", kbAccept, kbAcceptAlt));\r\n                }\r\n                else {\r\n                    this.setStatusBarLeftText(nls.localize('replace', \"{0} to replace, {1} to insert\", kbAccept, kbAcceptAlt));\r\n                }\r\n            }\r\n            else {\r\n                this.setStatusBarLeftText(nls.localize('accept', \"{0} to accept\", kbAccept));\r\n            }\r\n            if (this.currentSuggestionDetails) {\r\n                this.currentSuggestionDetails.cancel();\r\n                this.currentSuggestionDetails = null;\r\n            }\r\n            this.focusedItem = item;\r\n            this.list.reveal(index);\r\n            this.currentSuggestionDetails = createCancelablePromise(function (token) { return __awaiter(_this, void 0, void 0, function () {\r\n                var loading, result;\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            loading = disposableTimeout(function () { return _this.showDetails(true); }, 250);\r\n                            token.onCancellationRequested(function () { return loading.dispose(); });\r\n                            return [4 /*yield*/, item.resolve(token)];\r\n                        case 1:\r\n                            result = _a.sent();\r\n                            loading.dispose();\r\n                            return [2 /*return*/, result];\r\n                    }\r\n                });\r\n            }); });\r\n            this.currentSuggestionDetails.then(function () {\r\n                if (index >= _this.list.length || item !== _this.list.element(index)) {\r\n                    return;\r\n                }\r\n                // item can have extra information, so re-render\r\n                _this.ignoreFocusEvents = true;\r\n                _this.list.splice(index, 1, [item]);\r\n                _this.list.setFocus([index]);\r\n                _this.ignoreFocusEvents = false;\r\n                if (_this.expandDocsSettingFromStorage()) {\r\n                    _this.showDetails(false);\r\n                }\r\n                else {\r\n                    removeClass(_this.element, 'docs-side');\r\n                }\r\n                if (canExpandCompletionItem(_this.focusedItem)) {\r\n                    if (_this.expandDocsSettingFromStorage()) {\r\n                        _this.setStatusBarRightText(_this.msgDetailsLess);\r\n                    }\r\n                    else {\r\n                        _this.setStatusBarRightText(_this.msgDetailMore);\r\n                    }\r\n                }\r\n                else {\r\n                    _this.statusBarRightSpan.innerText = '';\r\n                }\r\n                _this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\r\n            }).catch(onUnexpectedError);\r\n        }\r\n        // emit an event\r\n        this.onDidFocusEmitter.fire({ item: item, index: index, model: this.completionModel });\r\n    };\r\n    SuggestWidget.prototype.setState = function (state) {\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        var stateChanged = this.state !== state;\r\n        this.state = state;\r\n        toggleClass(this.element, 'frozen', state === 4 /* Frozen */);\r\n        switch (state) {\r\n            case 0 /* Hidden */:\r\n                hide(this.messageElement, this.details.element, this.listElement, this.statusBarElement);\r\n                this.hide();\r\n                this.listHeight = 0;\r\n                if (stateChanged) {\r\n                    this.list.splice(0, this.list.length);\r\n                }\r\n                this.focusedItem = null;\r\n                break;\r\n            case 1 /* Loading */:\r\n                this.messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\r\n                hide(this.listElement, this.details.element, this.statusBarElement);\r\n                show(this.messageElement);\r\n                removeClass(this.element, 'docs-side');\r\n                this.show();\r\n                this.focusedItem = null;\r\n                break;\r\n            case 2 /* Empty */:\r\n                this.messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\r\n                hide(this.listElement, this.details.element, this.statusBarElement);\r\n                show(this.messageElement);\r\n                removeClass(this.element, 'docs-side');\r\n                this.show();\r\n                this.focusedItem = null;\r\n                break;\r\n            case 3 /* Open */:\r\n                hide(this.messageElement);\r\n                show(this.listElement, this.statusBarElement);\r\n                this.show();\r\n                break;\r\n            case 4 /* Frozen */:\r\n                hide(this.messageElement);\r\n                show(this.listElement);\r\n                this.show();\r\n                break;\r\n            case 5 /* Details */:\r\n                hide(this.messageElement);\r\n                show(this.details.element, this.listElement, this.statusBarElement);\r\n                this.show();\r\n                break;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.showTriggered = function (auto, delay) {\r\n        var _this = this;\r\n        if (this.state !== 0 /* Hidden */) {\r\n            return;\r\n        }\r\n        this.isAuto = !!auto;\r\n        if (!this.isAuto) {\r\n            this.loadingTimeout = disposableTimeout(function () { return _this.setState(1 /* Loading */); }, delay);\r\n        }\r\n    };\r\n    SuggestWidget.prototype.showSuggestions = function (completionModel, selectionIndex, isFrozen, isAuto) {\r\n        this.preferDocPositionTop = false;\r\n        this.docsPositionPreviousWidgetY = null;\r\n        this.loadingTimeout.dispose();\r\n        if (this.currentSuggestionDetails) {\r\n            this.currentSuggestionDetails.cancel();\r\n            this.currentSuggestionDetails = null;\r\n        }\r\n        if (this.completionModel !== completionModel) {\r\n            this.completionModel = completionModel;\r\n        }\r\n        if (isFrozen && this.state !== 2 /* Empty */ && this.state !== 0 /* Hidden */) {\r\n            this.setState(4 /* Frozen */);\r\n            return;\r\n        }\r\n        var visibleCount = this.completionModel.items.length;\r\n        var isEmpty = visibleCount === 0;\r\n        this.suggestWidgetMultipleSuggestions.set(visibleCount > 1);\r\n        if (isEmpty) {\r\n            if (isAuto) {\r\n                this.setState(0 /* Hidden */);\r\n            }\r\n            else {\r\n                this.setState(2 /* Empty */);\r\n            }\r\n            this.completionModel = null;\r\n        }\r\n        else {\r\n            if (this.state !== 3 /* Open */) {\r\n                var stats = this.completionModel.stats;\r\n                stats['wasAutomaticallyTriggered'] = !!isAuto;\r\n                /* __GDPR__\r\n                    \"suggestWidget\" : {\r\n                        \"wasAutomaticallyTriggered\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\r\n                        \"${include}\": [\r\n                            \"${ICompletionStats}\"\r\n                        ]\r\n                    }\r\n                */\r\n                this.telemetryService.publicLog('suggestWidget', __assign({}, stats));\r\n            }\r\n            this.focusedItem = null;\r\n            this.list.splice(0, this.list.length, this.completionModel.items);\r\n            if (isFrozen) {\r\n                this.setState(4 /* Frozen */);\r\n            }\r\n            else {\r\n                this.setState(3 /* Open */);\r\n            }\r\n            this.list.reveal(selectionIndex, 0);\r\n            this.list.setFocus([selectionIndex]);\r\n            // Reset focus border\r\n            if (this.detailsBorderColor) {\r\n                this.details.element.style.borderColor = this.detailsBorderColor;\r\n            }\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectNextPage = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 5 /* Details */:\r\n                this.details.pageDown();\r\n                return true;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusNextPage();\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectNext = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusNext(1, true);\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectLast = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 5 /* Details */:\r\n                this.details.scrollBottom();\r\n                return true;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusLast();\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectPreviousPage = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 5 /* Details */:\r\n                this.details.pageUp();\r\n                return true;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusPreviousPage();\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectPrevious = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusPrevious(1, true);\r\n                return false;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectFirst = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 5 /* Details */:\r\n                this.details.scrollTop();\r\n                return true;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusFirst();\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.getFocusedItem = function () {\r\n        if (this.state !== 0 /* Hidden */\r\n            && this.state !== 2 /* Empty */\r\n            && this.state !== 1 /* Loading */\r\n            && this.completionModel) {\r\n            return {\r\n                item: this.list.getFocusedElements()[0],\r\n                index: this.list.getFocus()[0],\r\n                model: this.completionModel\r\n            };\r\n        }\r\n        return undefined;\r\n    };\r\n    SuggestWidget.prototype.toggleDetailsFocus = function () {\r\n        if (this.state === 5 /* Details */) {\r\n            this.setState(3 /* Open */);\r\n            if (this.detailsBorderColor) {\r\n                this.details.element.style.borderColor = this.detailsBorderColor;\r\n            }\r\n        }\r\n        else if (this.state === 3 /* Open */ && this.expandDocsSettingFromStorage()) {\r\n            this.setState(5 /* Details */);\r\n            if (this.detailsFocusBorderColor) {\r\n                this.details.element.style.borderColor = this.detailsFocusBorderColor;\r\n            }\r\n        }\r\n        this.telemetryService.publicLog2('suggestWidget:toggleDetailsFocus');\r\n    };\r\n    SuggestWidget.prototype.toggleDetails = function () {\r\n        if (!canExpandCompletionItem(this.list.getFocusedElements()[0])) {\r\n            return;\r\n        }\r\n        if (this.expandDocsSettingFromStorage()) {\r\n            this.updateExpandDocsSetting(false);\r\n            hide(this.details.element);\r\n            removeClass(this.element, 'docs-side');\r\n            removeClass(this.element, 'docs-below');\r\n            this.editor.layoutContentWidget(this);\r\n            this.setStatusBarRightText(this.msgDetailMore);\r\n            this.telemetryService.publicLog2('suggestWidget:collapseDetails');\r\n        }\r\n        else {\r\n            if (this.state !== 3 /* Open */ && this.state !== 5 /* Details */ && this.state !== 4 /* Frozen */) {\r\n                return;\r\n            }\r\n            this.updateExpandDocsSetting(true);\r\n            this.showDetails(false);\r\n            this.setStatusBarRightText(this.msgDetailsLess);\r\n            this.telemetryService.publicLog2('suggestWidget:expandDetails');\r\n        }\r\n    };\r\n    SuggestWidget.prototype.showDetails = function (loading) {\r\n        if (!loading) {\r\n            // When loading, don't re-layout docs, as item is not resolved yet #88731\r\n            this.expandSideOrBelow();\r\n        }\r\n        show(this.details.element);\r\n        this.details.element.style.maxHeight = this.maxWidgetHeight + 'px';\r\n        if (loading) {\r\n            this.details.renderLoading();\r\n        }\r\n        else {\r\n            this.details.renderItem(this.list.getFocusedElements()[0], this.explainMode);\r\n        }\r\n        // Reset margin-top that was set as Fix for #26416\r\n        this.listElement.style.marginTop = '0px';\r\n        // with docs showing up widget width/height may change, so reposition the widget\r\n        this.editor.layoutContentWidget(this);\r\n        this.adjustDocsPosition();\r\n        this.editor.focus();\r\n    };\r\n    SuggestWidget.prototype.toggleExplainMode = function () {\r\n        if (this.list.getFocusedElements()[0] && this.expandDocsSettingFromStorage()) {\r\n            this.explainMode = !this.explainMode;\r\n            this.showDetails(false);\r\n        }\r\n    };\r\n    SuggestWidget.prototype.show = function () {\r\n        var _this = this;\r\n        var newHeight = this.updateListHeight();\r\n        if (newHeight !== this.listHeight) {\r\n            this.editor.layoutContentWidget(this);\r\n            this.listHeight = newHeight;\r\n        }\r\n        this.suggestWidgetVisible.set(true);\r\n        this.showTimeout.cancelAndSet(function () {\r\n            addClass(_this.element, 'visible');\r\n            _this.onDidShowEmitter.fire(_this);\r\n        }, 100);\r\n    };\r\n    SuggestWidget.prototype.hide = function () {\r\n        this.suggestWidgetVisible.reset();\r\n        this.suggestWidgetMultipleSuggestions.reset();\r\n        removeClass(this.element, 'visible');\r\n    };\r\n    SuggestWidget.prototype.hideWidget = function () {\r\n        this.loadingTimeout.dispose();\r\n        this.setState(0 /* Hidden */);\r\n        this.onDidHideEmitter.fire(this);\r\n    };\r\n    SuggestWidget.prototype.getPosition = function () {\r\n        if (this.state === 0 /* Hidden */) {\r\n            return null;\r\n        }\r\n        var preference = [2 /* BELOW */, 1 /* ABOVE */];\r\n        if (this.preferDocPositionTop) {\r\n            preference = [1 /* ABOVE */];\r\n        }\r\n        return {\r\n            position: this.editor.getPosition(),\r\n            preference: preference\r\n        };\r\n    };\r\n    SuggestWidget.prototype.getDomNode = function () {\r\n        return this.element;\r\n    };\r\n    SuggestWidget.prototype.getId = function () {\r\n        return SuggestWidget.ID;\r\n    };\r\n    SuggestWidget.prototype.isFrozen = function () {\r\n        return this.state === 4 /* Frozen */;\r\n    };\r\n    SuggestWidget.prototype.updateListHeight = function () {\r\n        var height = 0;\r\n        if (this.state === 2 /* Empty */ || this.state === 1 /* Loading */) {\r\n            height = this.unfocusedHeight;\r\n        }\r\n        else {\r\n            var suggestionCount = this.list.contentHeight / this.unfocusedHeight;\r\n            var maxVisibleSuggestions = this.editor.getOption(89 /* suggest */).maxVisibleSuggestions;\r\n            height = Math.min(suggestionCount, maxVisibleSuggestions) * this.unfocusedHeight;\r\n        }\r\n        this.element.style.lineHeight = this.unfocusedHeight + \"px\";\r\n        this.listElement.style.height = height + \"px\";\r\n        this.statusBarElement.style.top = height + \"px\";\r\n        this.list.layout(height);\r\n        return height;\r\n    };\r\n    /**\r\n     * Adds the propert classes, margins when positioning the docs to the side\r\n     */\r\n    SuggestWidget.prototype.adjustDocsPosition = function () {\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        var lineHeight = this.editor.getOption(49 /* lineHeight */);\r\n        var cursorCoords = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\r\n        var editorCoords = getDomNodePagePosition(this.editor.getDomNode());\r\n        var cursorX = editorCoords.left + cursorCoords.left;\r\n        var cursorY = editorCoords.top + cursorCoords.top + cursorCoords.height;\r\n        var widgetCoords = getDomNodePagePosition(this.element);\r\n        var widgetX = widgetCoords.left;\r\n        var widgetY = widgetCoords.top;\r\n        // Fixes #27649\r\n        // Check if the Y changed to the top of the cursor and keep the widget flagged to prefer top\r\n        if (this.docsPositionPreviousWidgetY &&\r\n            this.docsPositionPreviousWidgetY < widgetY &&\r\n            !this.preferDocPositionTop) {\r\n            this.preferDocPositionTop = true;\r\n            this.adjustDocsPosition();\r\n            return;\r\n        }\r\n        this.docsPositionPreviousWidgetY = widgetY;\r\n        if (widgetX < cursorX - this.listWidth) {\r\n            // Widget is too far to the left of cursor, swap list and docs\r\n            addClass(this.element, 'list-right');\r\n        }\r\n        else {\r\n            removeClass(this.element, 'list-right');\r\n        }\r\n        // Compare top of the cursor (cursorY - lineheight) with widgetTop to determine if\r\n        // margin-top needs to be applied on list to make it appear right above the cursor\r\n        // Cannot compare cursorY directly as it may be a few decimals off due to zoooming\r\n        if (hasClass(this.element, 'docs-side')\r\n            && cursorY - lineHeight > widgetY\r\n            && this.details.element.offsetHeight > this.listElement.offsetHeight) {\r\n            // Fix for #26416\r\n            // Docs is bigger than list and widget is above cursor, apply margin-top so that list appears right above cursor\r\n            this.listElement.style.marginTop = this.details.element.offsetHeight - this.listElement.offsetHeight + \"px\";\r\n        }\r\n    };\r\n    /**\r\n     * Adds the proper classes for positioning the docs to the side or below depending on item\r\n     */\r\n    SuggestWidget.prototype.expandSideOrBelow = function () {\r\n        if (!canExpandCompletionItem(this.focusedItem) && this.firstFocusInCurrentList) {\r\n            removeClass(this.element, 'docs-side');\r\n            removeClass(this.element, 'docs-below');\r\n            return;\r\n        }\r\n        var matches = this.element.style.maxWidth.match(/(\\d+)px/);\r\n        if (!matches || Number(matches[1]) < this.maxWidgetWidth) {\r\n            addClass(this.element, 'docs-below');\r\n            removeClass(this.element, 'docs-side');\r\n        }\r\n        else if (canExpandCompletionItem(this.focusedItem)) {\r\n            addClass(this.element, 'docs-side');\r\n            removeClass(this.element, 'docs-below');\r\n        }\r\n    };\r\n    Object.defineProperty(SuggestWidget.prototype, \"maxWidgetHeight\", {\r\n        // Heights\r\n        get: function () {\r\n            return this.unfocusedHeight * this.editor.getOption(89 /* suggest */).maxVisibleSuggestions;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SuggestWidget.prototype, \"unfocusedHeight\", {\r\n        get: function () {\r\n            var options = this.editor.getOptions();\r\n            return options.get(91 /* suggestLineHeight */) || options.get(34 /* fontInfo */).lineHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    // IDelegate\r\n    SuggestWidget.prototype.getHeight = function (element) {\r\n        return this.unfocusedHeight;\r\n    };\r\n    SuggestWidget.prototype.getTemplateId = function (element) {\r\n        return 'suggestion';\r\n    };\r\n    SuggestWidget.prototype.expandDocsSettingFromStorage = function () {\r\n        return this.storageService.getBoolean('expandSuggestionDocs', 0 /* GLOBAL */, expandSuggestionDocsByDefault);\r\n    };\r\n    SuggestWidget.prototype.updateExpandDocsSetting = function (value) {\r\n        this.storageService.store('expandSuggestionDocs', value, 0 /* GLOBAL */);\r\n    };\r\n    SuggestWidget.prototype.setStatusBarLeftText = function (s) {\r\n        this.statusBarLeftSpan.innerText = s;\r\n    };\r\n    SuggestWidget.prototype.setStatusBarRightText = function (s) {\r\n        this.statusBarRightSpan.innerText = s;\r\n    };\r\n    SuggestWidget.prototype.dispose = function () {\r\n        this.details.dispose();\r\n        this.list.dispose();\r\n        this.toDispose.dispose();\r\n        this.loadingTimeout.dispose();\r\n        this.showTimeout.dispose();\r\n    };\r\n    SuggestWidget.ID = 'editor.widget.suggestWidget';\r\n    SuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\r\n    SuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\r\n    SuggestWidget = __decorate([\r\n        __param(1, ITelemetryService),\r\n        __param(2, IKeybindingService),\r\n        __param(3, IContextKeyService),\r\n        __param(4, IThemeService),\r\n        __param(5, IStorageService),\r\n        __param(6, IModeService),\r\n        __param(7, IOpenerService),\r\n        __param(8, IInstantiationService)\r\n    ], SuggestWidget);\r\n    return SuggestWidget;\r\n}());\r\nexport { SuggestWidget };\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var matchHighlight = theme.getColor(editorSuggestWidgetHighlightForeground);\r\n    if (matchHighlight) {\r\n        collector.addRule(\".monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: \" + matchHighlight + \"; }\");\r\n    }\r\n    var foreground = theme.getColor(editorSuggestWidgetForeground);\r\n    if (foreground) {\r\n        collector.addRule(\".monaco-editor .suggest-widget { color: \" + foreground + \"; }\");\r\n    }\r\n    var link = theme.getColor(textLinkForeground);\r\n    if (link) {\r\n        collector.addRule(\".monaco-editor .suggest-widget a { color: \" + link + \"; }\");\r\n    }\r\n    var codeBackground = theme.getColor(textCodeBlockBackground);\r\n    if (codeBackground) {\r\n        collector.addRule(\".monaco-editor .suggest-widget code { background-color: \" + codeBackground + \"; }\");\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}