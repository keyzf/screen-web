{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport './colorPicker.css';\nimport { onDidChangeZoomLevel } from '../../../base/browser/browser.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { GlobalMouseMoveMonitor, standardMouseMoveMerger } from '../../../base/browser/globalMouseMoveMonitor.js';\nimport { Widget } from '../../../base/browser/ui/widget.js';\nimport { Color, HSVA, RGBA } from '../../../base/common/color.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { editorHoverBackground } from '../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nvar $ = dom.$;\n\nvar ColorPickerHeader =\n/** @class */\nfunction (_super) {\n  __extends(ColorPickerHeader, _super);\n\n  function ColorPickerHeader(container, model, themeService) {\n    var _this = _super.call(this) || this;\n\n    _this.model = model;\n    _this.domNode = $('.colorpicker-header');\n    dom.append(container, _this.domNode);\n    _this.pickedColorNode = dom.append(_this.domNode, $('.picked-color'));\n    var colorBox = dom.append(_this.domNode, $('.original-color'));\n    colorBox.style.backgroundColor = Color.Format.CSS.format(_this.model.originalColor) || '';\n    _this.backgroundColor = themeService.getTheme().getColor(editorHoverBackground) || Color.white;\n\n    _this._register(registerThemingParticipant(function (theme, collector) {\n      _this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n    }));\n\n    _this._register(dom.addDisposableListener(_this.pickedColorNode, dom.EventType.CLICK, function () {\n      return _this.model.selectNextColorPresentation();\n    }));\n\n    _this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, function () {\n      _this.model.color = _this.model.originalColor;\n\n      _this.model.flushColor();\n    }));\n\n    _this._register(model.onDidChangeColor(_this.onDidChangeColor, _this));\n\n    _this._register(model.onDidChangePresentation(_this.onDidChangePresentation, _this));\n\n    _this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n    dom.toggleClass(_this.pickedColorNode, 'light', model.color.rgba.a < 0.5 ? _this.backgroundColor.isLighter() : model.color.isLighter());\n    return _this;\n  }\n\n  ColorPickerHeader.prototype.onDidChangeColor = function (color) {\n    this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n    dom.toggleClass(this.pickedColorNode, 'light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n    this.onDidChangePresentation();\n  };\n\n  ColorPickerHeader.prototype.onDidChangePresentation = function () {\n    this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\n  };\n\n  return ColorPickerHeader;\n}(Disposable);\n\nexport { ColorPickerHeader };\n\nvar ColorPickerBody =\n/** @class */\nfunction (_super) {\n  __extends(ColorPickerBody, _super);\n\n  function ColorPickerBody(container, model, pixelRatio) {\n    var _this = _super.call(this) || this;\n\n    _this.model = model;\n    _this.pixelRatio = pixelRatio;\n    _this.domNode = $('.colorpicker-body');\n    dom.append(container, _this.domNode);\n    _this.saturationBox = new SaturationBox(_this.domNode, _this.model, _this.pixelRatio);\n\n    _this._register(_this.saturationBox);\n\n    _this._register(_this.saturationBox.onDidChange(_this.onDidSaturationValueChange, _this));\n\n    _this._register(_this.saturationBox.onColorFlushed(_this.flushColor, _this));\n\n    _this.opacityStrip = new OpacityStrip(_this.domNode, _this.model);\n\n    _this._register(_this.opacityStrip);\n\n    _this._register(_this.opacityStrip.onDidChange(_this.onDidOpacityChange, _this));\n\n    _this._register(_this.opacityStrip.onColorFlushed(_this.flushColor, _this));\n\n    _this.hueStrip = new HueStrip(_this.domNode, _this.model);\n\n    _this._register(_this.hueStrip);\n\n    _this._register(_this.hueStrip.onDidChange(_this.onDidHueChange, _this));\n\n    _this._register(_this.hueStrip.onColorFlushed(_this.flushColor, _this));\n\n    return _this;\n  }\n\n  ColorPickerBody.prototype.flushColor = function () {\n    this.model.flushColor();\n  };\n\n  ColorPickerBody.prototype.onDidSaturationValueChange = function (_a) {\n    var s = _a.s,\n        v = _a.v;\n    var hsva = this.model.color.hsva;\n    this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n  };\n\n  ColorPickerBody.prototype.onDidOpacityChange = function (a) {\n    var hsva = this.model.color.hsva;\n    this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n  };\n\n  ColorPickerBody.prototype.onDidHueChange = function (value) {\n    var hsva = this.model.color.hsva;\n    var h = (1 - value) * 360;\n    this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n  };\n\n  ColorPickerBody.prototype.layout = function () {\n    this.saturationBox.layout();\n    this.opacityStrip.layout();\n    this.hueStrip.layout();\n  };\n\n  return ColorPickerBody;\n}(Disposable);\n\nexport { ColorPickerBody };\n\nvar SaturationBox =\n/** @class */\nfunction (_super) {\n  __extends(SaturationBox, _super);\n\n  function SaturationBox(container, model, pixelRatio) {\n    var _this = _super.call(this) || this;\n\n    _this.model = model;\n    _this.pixelRatio = pixelRatio;\n    _this._onDidChange = new Emitter();\n    _this.onDidChange = _this._onDidChange.event;\n    _this._onColorFlushed = new Emitter();\n    _this.onColorFlushed = _this._onColorFlushed.event;\n    _this.domNode = $('.saturation-wrap');\n    dom.append(container, _this.domNode); // Create canvas, draw selected color\n\n    _this.canvas = document.createElement('canvas');\n    _this.canvas.className = 'saturation-box';\n    dom.append(_this.domNode, _this.canvas); // Add selection circle\n\n    _this.selection = $('.saturation-selection');\n    dom.append(_this.domNode, _this.selection);\n\n    _this.layout();\n\n    _this._register(dom.addDisposableGenericMouseDownListner(_this.domNode, function (e) {\n      return _this.onMouseDown(e);\n    }));\n\n    _this._register(_this.model.onDidChangeColor(_this.onDidChangeColor, _this));\n\n    _this.monitor = null;\n    return _this;\n  }\n\n  SaturationBox.prototype.onMouseDown = function (e) {\n    var _this = this;\n\n    this.monitor = this._register(new GlobalMouseMoveMonitor());\n    var origin = dom.getDomNodePagePosition(this.domNode);\n\n    if (e.target !== this.selection) {\n      this.onDidChangePosition(e.offsetX, e.offsetY);\n    }\n\n    this.monitor.startMonitoring(e.target, e.buttons, standardMouseMoveMerger, function (event) {\n      return _this.onDidChangePosition(event.posx - origin.left, event.posy - origin.top);\n    }, function () {\n      return null;\n    });\n    var mouseUpListener = dom.addDisposableGenericMouseUpListner(document, function () {\n      _this._onColorFlushed.fire();\n\n      mouseUpListener.dispose();\n\n      if (_this.monitor) {\n        _this.monitor.stopMonitoring(true);\n\n        _this.monitor = null;\n      }\n    }, true);\n  };\n\n  SaturationBox.prototype.onDidChangePosition = function (left, top) {\n    var s = Math.max(0, Math.min(1, left / this.width));\n    var v = Math.max(0, Math.min(1, 1 - top / this.height));\n    this.paintSelection(s, v);\n\n    this._onDidChange.fire({\n      s: s,\n      v: v\n    });\n  };\n\n  SaturationBox.prototype.layout = function () {\n    this.width = this.domNode.offsetWidth;\n    this.height = this.domNode.offsetHeight;\n    this.canvas.width = this.width * this.pixelRatio;\n    this.canvas.height = this.height * this.pixelRatio;\n    this.paint();\n    var hsva = this.model.color.hsva;\n    this.paintSelection(hsva.s, hsva.v);\n  };\n\n  SaturationBox.prototype.paint = function () {\n    var hsva = this.model.color.hsva;\n    var saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n    var ctx = this.canvas.getContext('2d');\n    var whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\n    whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n    whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n    whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n    var blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n    blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n    blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n    ctx.rect(0, 0, this.canvas.width, this.canvas.height);\n    ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n    ctx.fill();\n    ctx.fillStyle = whiteGradient;\n    ctx.fill();\n    ctx.fillStyle = blackGradient;\n    ctx.fill();\n  };\n\n  SaturationBox.prototype.paintSelection = function (s, v) {\n    this.selection.style.left = s * this.width + \"px\";\n    this.selection.style.top = this.height - v * this.height + \"px\";\n  };\n\n  SaturationBox.prototype.onDidChangeColor = function () {\n    if (this.monitor && this.monitor.isMonitoring()) {\n      return;\n    }\n\n    this.paint();\n  };\n\n  return SaturationBox;\n}(Disposable);\n\nvar Strip =\n/** @class */\nfunction (_super) {\n  __extends(Strip, _super);\n\n  function Strip(container, model) {\n    var _this = _super.call(this) || this;\n\n    _this.model = model;\n    _this._onDidChange = new Emitter();\n    _this.onDidChange = _this._onDidChange.event;\n    _this._onColorFlushed = new Emitter();\n    _this.onColorFlushed = _this._onColorFlushed.event;\n    _this.domNode = dom.append(container, $('.strip'));\n    _this.overlay = dom.append(_this.domNode, $('.overlay'));\n    _this.slider = dom.append(_this.domNode, $('.slider'));\n    _this.slider.style.top = \"0px\";\n\n    _this._register(dom.addDisposableGenericMouseDownListner(_this.domNode, function (e) {\n      return _this.onMouseDown(e);\n    }));\n\n    _this.layout();\n\n    return _this;\n  }\n\n  Strip.prototype.layout = function () {\n    this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n    var value = this.getValue(this.model.color);\n    this.updateSliderPosition(value);\n  };\n\n  Strip.prototype.onMouseDown = function (e) {\n    var _this = this;\n\n    var monitor = this._register(new GlobalMouseMoveMonitor());\n\n    var origin = dom.getDomNodePagePosition(this.domNode);\n    dom.addClass(this.domNode, 'grabbing');\n\n    if (e.target !== this.slider) {\n      this.onDidChangeTop(e.offsetY);\n    }\n\n    monitor.startMonitoring(e.target, e.buttons, standardMouseMoveMerger, function (event) {\n      return _this.onDidChangeTop(event.posy - origin.top);\n    }, function () {\n      return null;\n    });\n    var mouseUpListener = dom.addDisposableGenericMouseUpListner(document, function () {\n      _this._onColorFlushed.fire();\n\n      mouseUpListener.dispose();\n      monitor.stopMonitoring(true);\n      dom.removeClass(_this.domNode, 'grabbing');\n    }, true);\n  };\n\n  Strip.prototype.onDidChangeTop = function (top) {\n    var value = Math.max(0, Math.min(1, 1 - top / this.height));\n    this.updateSliderPosition(value);\n\n    this._onDidChange.fire(value);\n  };\n\n  Strip.prototype.updateSliderPosition = function (value) {\n    this.slider.style.top = (1 - value) * this.height + \"px\";\n  };\n\n  return Strip;\n}(Disposable);\n\nvar OpacityStrip =\n/** @class */\nfunction (_super) {\n  __extends(OpacityStrip, _super);\n\n  function OpacityStrip(container, model) {\n    var _this = _super.call(this, container, model) || this;\n\n    dom.addClass(_this.domNode, 'opacity-strip');\n\n    _this._register(model.onDidChangeColor(_this.onDidChangeColor, _this));\n\n    _this.onDidChangeColor(_this.model.color);\n\n    return _this;\n  }\n\n  OpacityStrip.prototype.onDidChangeColor = function (color) {\n    var _a = color.rgba,\n        r = _a.r,\n        g = _a.g,\n        b = _a.b;\n    var opaque = new Color(new RGBA(r, g, b, 1));\n    var transparent = new Color(new RGBA(r, g, b, 0));\n    this.overlay.style.background = \"linear-gradient(to bottom, \" + opaque + \" 0%, \" + transparent + \" 100%)\";\n  };\n\n  OpacityStrip.prototype.getValue = function (color) {\n    return color.hsva.a;\n  };\n\n  return OpacityStrip;\n}(Strip);\n\nvar HueStrip =\n/** @class */\nfunction (_super) {\n  __extends(HueStrip, _super);\n\n  function HueStrip(container, model) {\n    var _this = _super.call(this, container, model) || this;\n\n    dom.addClass(_this.domNode, 'hue-strip');\n    return _this;\n  }\n\n  HueStrip.prototype.getValue = function (color) {\n    return 1 - color.hsva.h / 360;\n  };\n\n  return HueStrip;\n}(Strip);\n\nvar ColorPickerWidget =\n/** @class */\nfunction (_super) {\n  __extends(ColorPickerWidget, _super);\n\n  function ColorPickerWidget(container, model, pixelRatio, themeService) {\n    var _this = _super.call(this) || this;\n\n    _this.model = model;\n    _this.pixelRatio = pixelRatio;\n\n    _this._register(onDidChangeZoomLevel(function () {\n      return _this.layout();\n    }));\n\n    var element = $('.colorpicker-widget');\n    container.appendChild(element);\n    var header = new ColorPickerHeader(element, _this.model, themeService);\n    _this.body = new ColorPickerBody(element, _this.model, _this.pixelRatio);\n\n    _this._register(header);\n\n    _this._register(_this.body);\n\n    return _this;\n  }\n\n  ColorPickerWidget.prototype.layout = function () {\n    this.body.layout();\n  };\n\n  return ColorPickerWidget;\n}(Widget);\n\nexport { ColorPickerWidget };","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorPickerWidget.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","onDidChangeZoomLevel","dom","GlobalMouseMoveMonitor","standardMouseMoveMerger","Widget","Color","HSVA","RGBA","Emitter","Disposable","editorHoverBackground","registerThemingParticipant","$","ColorPickerHeader","_super","container","model","themeService","_this","call","domNode","append","pickedColorNode","colorBox","style","backgroundColor","Format","CSS","format","originalColor","getTheme","getColor","white","_register","theme","collector","addDisposableListener","EventType","CLICK","selectNextColorPresentation","color","flushColor","onDidChangeColor","onDidChangePresentation","toggleClass","rgba","a","isLighter","textContent","presentation","label","ColorPickerBody","pixelRatio","saturationBox","SaturationBox","onDidChange","onDidSaturationValueChange","onColorFlushed","opacityStrip","OpacityStrip","onDidOpacityChange","hueStrip","HueStrip","onDidHueChange","_a","s","v","hsva","h","value","layout","_onDidChange","event","_onColorFlushed","canvas","document","createElement","className","selection","addDisposableGenericMouseDownListner","e","onMouseDown","monitor","origin","getDomNodePagePosition","target","onDidChangePosition","offsetX","offsetY","startMonitoring","buttons","posx","left","posy","top","mouseUpListener","addDisposableGenericMouseUpListner","fire","dispose","stopMonitoring","Math","max","min","width","height","paintSelection","offsetWidth","offsetHeight","paint","saturatedColor","ctx","getContext","whiteGradient","createLinearGradient","addColorStop","blackGradient","rect","fillStyle","fill","isMonitoring","Strip","overlay","slider","getValue","updateSliderPosition","addClass","onDidChangeTop","removeClass","r","g","opaque","transparent","background","ColorPickerWidget","element","appendChild","header","body"],"mappings":"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","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './colorPicker.css';\r\nimport { onDidChangeZoomLevel } from '../../../base/browser/browser.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { GlobalMouseMoveMonitor, standardMouseMoveMerger } from '../../../base/browser/globalMouseMoveMonitor.js';\r\nimport { Widget } from '../../../base/browser/ui/widget.js';\r\nimport { Color, HSVA, RGBA } from '../../../base/common/color.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { editorHoverBackground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nvar $ = dom.$;\r\nvar ColorPickerHeader = /** @class */ (function (_super) {\r\n    __extends(ColorPickerHeader, _super);\r\n    function ColorPickerHeader(container, model, themeService) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = model;\r\n        _this.domNode = $('.colorpicker-header');\r\n        dom.append(container, _this.domNode);\r\n        _this.pickedColorNode = dom.append(_this.domNode, $('.picked-color'));\r\n        var colorBox = dom.append(_this.domNode, $('.original-color'));\r\n        colorBox.style.backgroundColor = Color.Format.CSS.format(_this.model.originalColor) || '';\r\n        _this.backgroundColor = themeService.getTheme().getColor(editorHoverBackground) || Color.white;\r\n        _this._register(registerThemingParticipant(function (theme, collector) {\r\n            _this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\r\n        }));\r\n        _this._register(dom.addDisposableListener(_this.pickedColorNode, dom.EventType.CLICK, function () { return _this.model.selectNextColorPresentation(); }));\r\n        _this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, function () {\r\n            _this.model.color = _this.model.originalColor;\r\n            _this.model.flushColor();\r\n        }));\r\n        _this._register(model.onDidChangeColor(_this.onDidChangeColor, _this));\r\n        _this._register(model.onDidChangePresentation(_this.onDidChangePresentation, _this));\r\n        _this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\r\n        dom.toggleClass(_this.pickedColorNode, 'light', model.color.rgba.a < 0.5 ? _this.backgroundColor.isLighter() : model.color.isLighter());\r\n        return _this;\r\n    }\r\n    ColorPickerHeader.prototype.onDidChangeColor = function (color) {\r\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\r\n        dom.toggleClass(this.pickedColorNode, 'light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\r\n        this.onDidChangePresentation();\r\n    };\r\n    ColorPickerHeader.prototype.onDidChangePresentation = function () {\r\n        this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\r\n    };\r\n    return ColorPickerHeader;\r\n}(Disposable));\r\nexport { ColorPickerHeader };\r\nvar ColorPickerBody = /** @class */ (function (_super) {\r\n    __extends(ColorPickerBody, _super);\r\n    function ColorPickerBody(container, model, pixelRatio) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = model;\r\n        _this.pixelRatio = pixelRatio;\r\n        _this.domNode = $('.colorpicker-body');\r\n        dom.append(container, _this.domNode);\r\n        _this.saturationBox = new SaturationBox(_this.domNode, _this.model, _this.pixelRatio);\r\n        _this._register(_this.saturationBox);\r\n        _this._register(_this.saturationBox.onDidChange(_this.onDidSaturationValueChange, _this));\r\n        _this._register(_this.saturationBox.onColorFlushed(_this.flushColor, _this));\r\n        _this.opacityStrip = new OpacityStrip(_this.domNode, _this.model);\r\n        _this._register(_this.opacityStrip);\r\n        _this._register(_this.opacityStrip.onDidChange(_this.onDidOpacityChange, _this));\r\n        _this._register(_this.opacityStrip.onColorFlushed(_this.flushColor, _this));\r\n        _this.hueStrip = new HueStrip(_this.domNode, _this.model);\r\n        _this._register(_this.hueStrip);\r\n        _this._register(_this.hueStrip.onDidChange(_this.onDidHueChange, _this));\r\n        _this._register(_this.hueStrip.onColorFlushed(_this.flushColor, _this));\r\n        return _this;\r\n    }\r\n    ColorPickerBody.prototype.flushColor = function () {\r\n        this.model.flushColor();\r\n    };\r\n    ColorPickerBody.prototype.onDidSaturationValueChange = function (_a) {\r\n        var s = _a.s, v = _a.v;\r\n        var hsva = this.model.color.hsva;\r\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\r\n    };\r\n    ColorPickerBody.prototype.onDidOpacityChange = function (a) {\r\n        var hsva = this.model.color.hsva;\r\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\r\n    };\r\n    ColorPickerBody.prototype.onDidHueChange = function (value) {\r\n        var hsva = this.model.color.hsva;\r\n        var h = (1 - value) * 360;\r\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\r\n    };\r\n    ColorPickerBody.prototype.layout = function () {\r\n        this.saturationBox.layout();\r\n        this.opacityStrip.layout();\r\n        this.hueStrip.layout();\r\n    };\r\n    return ColorPickerBody;\r\n}(Disposable));\r\nexport { ColorPickerBody };\r\nvar SaturationBox = /** @class */ (function (_super) {\r\n    __extends(SaturationBox, _super);\r\n    function SaturationBox(container, model, pixelRatio) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = model;\r\n        _this.pixelRatio = pixelRatio;\r\n        _this._onDidChange = new Emitter();\r\n        _this.onDidChange = _this._onDidChange.event;\r\n        _this._onColorFlushed = new Emitter();\r\n        _this.onColorFlushed = _this._onColorFlushed.event;\r\n        _this.domNode = $('.saturation-wrap');\r\n        dom.append(container, _this.domNode);\r\n        // Create canvas, draw selected color\r\n        _this.canvas = document.createElement('canvas');\r\n        _this.canvas.className = 'saturation-box';\r\n        dom.append(_this.domNode, _this.canvas);\r\n        // Add selection circle\r\n        _this.selection = $('.saturation-selection');\r\n        dom.append(_this.domNode, _this.selection);\r\n        _this.layout();\r\n        _this._register(dom.addDisposableGenericMouseDownListner(_this.domNode, function (e) { return _this.onMouseDown(e); }));\r\n        _this._register(_this.model.onDidChangeColor(_this.onDidChangeColor, _this));\r\n        _this.monitor = null;\r\n        return _this;\r\n    }\r\n    SaturationBox.prototype.onMouseDown = function (e) {\r\n        var _this = this;\r\n        this.monitor = this._register(new GlobalMouseMoveMonitor());\r\n        var origin = dom.getDomNodePagePosition(this.domNode);\r\n        if (e.target !== this.selection) {\r\n            this.onDidChangePosition(e.offsetX, e.offsetY);\r\n        }\r\n        this.monitor.startMonitoring(e.target, e.buttons, standardMouseMoveMerger, function (event) { return _this.onDidChangePosition(event.posx - origin.left, event.posy - origin.top); }, function () { return null; });\r\n        var mouseUpListener = dom.addDisposableGenericMouseUpListner(document, function () {\r\n            _this._onColorFlushed.fire();\r\n            mouseUpListener.dispose();\r\n            if (_this.monitor) {\r\n                _this.monitor.stopMonitoring(true);\r\n                _this.monitor = null;\r\n            }\r\n        }, true);\r\n    };\r\n    SaturationBox.prototype.onDidChangePosition = function (left, top) {\r\n        var s = Math.max(0, Math.min(1, left / this.width));\r\n        var v = Math.max(0, Math.min(1, 1 - (top / this.height)));\r\n        this.paintSelection(s, v);\r\n        this._onDidChange.fire({ s: s, v: v });\r\n    };\r\n    SaturationBox.prototype.layout = function () {\r\n        this.width = this.domNode.offsetWidth;\r\n        this.height = this.domNode.offsetHeight;\r\n        this.canvas.width = this.width * this.pixelRatio;\r\n        this.canvas.height = this.height * this.pixelRatio;\r\n        this.paint();\r\n        var hsva = this.model.color.hsva;\r\n        this.paintSelection(hsva.s, hsva.v);\r\n    };\r\n    SaturationBox.prototype.paint = function () {\r\n        var hsva = this.model.color.hsva;\r\n        var saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\r\n        var ctx = this.canvas.getContext('2d');\r\n        var whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\r\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\r\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\r\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\r\n        var blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\r\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\r\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\r\n        ctx.rect(0, 0, this.canvas.width, this.canvas.height);\r\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\r\n        ctx.fill();\r\n        ctx.fillStyle = whiteGradient;\r\n        ctx.fill();\r\n        ctx.fillStyle = blackGradient;\r\n        ctx.fill();\r\n    };\r\n    SaturationBox.prototype.paintSelection = function (s, v) {\r\n        this.selection.style.left = s * this.width + \"px\";\r\n        this.selection.style.top = this.height - v * this.height + \"px\";\r\n    };\r\n    SaturationBox.prototype.onDidChangeColor = function () {\r\n        if (this.monitor && this.monitor.isMonitoring()) {\r\n            return;\r\n        }\r\n        this.paint();\r\n    };\r\n    return SaturationBox;\r\n}(Disposable));\r\nvar Strip = /** @class */ (function (_super) {\r\n    __extends(Strip, _super);\r\n    function Strip(container, model) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = model;\r\n        _this._onDidChange = new Emitter();\r\n        _this.onDidChange = _this._onDidChange.event;\r\n        _this._onColorFlushed = new Emitter();\r\n        _this.onColorFlushed = _this._onColorFlushed.event;\r\n        _this.domNode = dom.append(container, $('.strip'));\r\n        _this.overlay = dom.append(_this.domNode, $('.overlay'));\r\n        _this.slider = dom.append(_this.domNode, $('.slider'));\r\n        _this.slider.style.top = \"0px\";\r\n        _this._register(dom.addDisposableGenericMouseDownListner(_this.domNode, function (e) { return _this.onMouseDown(e); }));\r\n        _this.layout();\r\n        return _this;\r\n    }\r\n    Strip.prototype.layout = function () {\r\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\r\n        var value = this.getValue(this.model.color);\r\n        this.updateSliderPosition(value);\r\n    };\r\n    Strip.prototype.onMouseDown = function (e) {\r\n        var _this = this;\r\n        var monitor = this._register(new GlobalMouseMoveMonitor());\r\n        var origin = dom.getDomNodePagePosition(this.domNode);\r\n        dom.addClass(this.domNode, 'grabbing');\r\n        if (e.target !== this.slider) {\r\n            this.onDidChangeTop(e.offsetY);\r\n        }\r\n        monitor.startMonitoring(e.target, e.buttons, standardMouseMoveMerger, function (event) { return _this.onDidChangeTop(event.posy - origin.top); }, function () { return null; });\r\n        var mouseUpListener = dom.addDisposableGenericMouseUpListner(document, function () {\r\n            _this._onColorFlushed.fire();\r\n            mouseUpListener.dispose();\r\n            monitor.stopMonitoring(true);\r\n            dom.removeClass(_this.domNode, 'grabbing');\r\n        }, true);\r\n    };\r\n    Strip.prototype.onDidChangeTop = function (top) {\r\n        var value = Math.max(0, Math.min(1, 1 - (top / this.height)));\r\n        this.updateSliderPosition(value);\r\n        this._onDidChange.fire(value);\r\n    };\r\n    Strip.prototype.updateSliderPosition = function (value) {\r\n        this.slider.style.top = (1 - value) * this.height + \"px\";\r\n    };\r\n    return Strip;\r\n}(Disposable));\r\nvar OpacityStrip = /** @class */ (function (_super) {\r\n    __extends(OpacityStrip, _super);\r\n    function OpacityStrip(container, model) {\r\n        var _this = _super.call(this, container, model) || this;\r\n        dom.addClass(_this.domNode, 'opacity-strip');\r\n        _this._register(model.onDidChangeColor(_this.onDidChangeColor, _this));\r\n        _this.onDidChangeColor(_this.model.color);\r\n        return _this;\r\n    }\r\n    OpacityStrip.prototype.onDidChangeColor = function (color) {\r\n        var _a = color.rgba, r = _a.r, g = _a.g, b = _a.b;\r\n        var opaque = new Color(new RGBA(r, g, b, 1));\r\n        var transparent = new Color(new RGBA(r, g, b, 0));\r\n        this.overlay.style.background = \"linear-gradient(to bottom, \" + opaque + \" 0%, \" + transparent + \" 100%)\";\r\n    };\r\n    OpacityStrip.prototype.getValue = function (color) {\r\n        return color.hsva.a;\r\n    };\r\n    return OpacityStrip;\r\n}(Strip));\r\nvar HueStrip = /** @class */ (function (_super) {\r\n    __extends(HueStrip, _super);\r\n    function HueStrip(container, model) {\r\n        var _this = _super.call(this, container, model) || this;\r\n        dom.addClass(_this.domNode, 'hue-strip');\r\n        return _this;\r\n    }\r\n    HueStrip.prototype.getValue = function (color) {\r\n        return 1 - (color.hsva.h / 360);\r\n    };\r\n    return HueStrip;\r\n}(Strip));\r\nvar ColorPickerWidget = /** @class */ (function (_super) {\r\n    __extends(ColorPickerWidget, _super);\r\n    function ColorPickerWidget(container, model, pixelRatio, themeService) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = model;\r\n        _this.pixelRatio = pixelRatio;\r\n        _this._register(onDidChangeZoomLevel(function () { return _this.layout(); }));\r\n        var element = $('.colorpicker-widget');\r\n        container.appendChild(element);\r\n        var header = new ColorPickerHeader(element, _this.model, themeService);\r\n        _this.body = new ColorPickerBody(element, _this.model, _this.pixelRatio);\r\n        _this._register(header);\r\n        _this._register(_this.body);\r\n        return _this;\r\n    }\r\n    ColorPickerWidget.prototype.layout = function () {\r\n        this.body.layout();\r\n    };\r\n    return ColorPickerWidget;\r\n}(Widget));\r\nexport { ColorPickerWidget };\r\n"]},"metadata":{},"sourceType":"module"}