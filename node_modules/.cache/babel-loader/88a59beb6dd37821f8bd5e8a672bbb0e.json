{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\nimport './aria.css';\nimport * as nls from '../../../../nls.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport * as dom from '../../dom.js';\nvar ariaContainer;\nvar alertContainer;\nvar statusContainer;\nexport function setARIAContainer(parent) {\n  ariaContainer = document.createElement('div');\n  ariaContainer.className = 'monaco-aria-container';\n  alertContainer = document.createElement('div');\n  alertContainer.className = 'monaco-alert';\n  alertContainer.setAttribute('role', 'alert');\n  alertContainer.setAttribute('aria-atomic', 'true');\n  ariaContainer.appendChild(alertContainer);\n  statusContainer = document.createElement('div');\n  statusContainer.className = 'monaco-status';\n  statusContainer.setAttribute('role', 'status');\n  statusContainer.setAttribute('aria-atomic', 'true');\n  ariaContainer.appendChild(statusContainer);\n  parent.appendChild(ariaContainer);\n}\n/**\r\n * Given the provided message, will make sure that it is read as alert to screen readers.\r\n */\n\nexport function alert(msg, disableRepeat) {\n  insertMessage(alertContainer, msg, disableRepeat);\n}\n/**\r\n * Given the provided message, will make sure that it is read as status to screen readers.\r\n */\n\nexport function status(msg, disableRepeat) {\n  if (isMacintosh) {\n    alert(msg, disableRepeat); // VoiceOver does not seem to support status role\n  } else {\n    insertMessage(statusContainer, msg, disableRepeat);\n  }\n}\nvar repeatedTimes = 0;\nvar prevText = undefined;\n\nfunction insertMessage(target, msg, disableRepeat) {\n  if (!ariaContainer) {\n    return;\n  } // If the same message should be inserted that is already present, a screen reader would\n  // not announce this message because it matches the previous one. As a workaround, we\n  // alter the message with the number of occurences unless this is explicitly disabled\n  // via the disableRepeat flag.\n\n\n  if (!disableRepeat) {\n    if (prevText === msg) {\n      repeatedTimes++;\n    } else {\n      prevText = msg;\n      repeatedTimes = 0;\n    }\n\n    switch (repeatedTimes) {\n      case 0:\n        break;\n\n      case 1:\n        msg = nls.localize('repeated', \"{0} (occurred again)\", msg);\n        break;\n\n      default:\n        msg = nls.localize('repeatedNtimes', \"{0} (occurred {1} times)\", msg, repeatedTimes);\n        break;\n    }\n  }\n\n  dom.clearNode(target);\n  target.textContent = msg; // See https://www.paciellogroup.com/blog/2012/06/html5-accessibility-chops-aria-rolealert-browser-support/\n\n  target.style.visibility = 'hidden';\n  target.style.visibility = 'visible';\n}","map":{"version":3,"sources":["/Users/ifudata/eclipse-workspace/screen-web/node_modules/monaco-editor/esm/vs/base/browser/ui/aria/aria.js"],"names":["nls","isMacintosh","dom","ariaContainer","alertContainer","statusContainer","setARIAContainer","parent","document","createElement","className","setAttribute","appendChild","alert","msg","disableRepeat","insertMessage","status","repeatedTimes","prevText","undefined","target","localize","clearNode","textContent","style","visibility"],"mappings":"AAAA;;;;AAIA,OAAO,YAAP;AACA,OAAO,KAAKA,GAAZ,MAAqB,oBAArB;AACA,SAASC,WAAT,QAA4B,6BAA5B;AACA,OAAO,KAAKC,GAAZ,MAAqB,cAArB;AACA,IAAIC,aAAJ;AACA,IAAIC,cAAJ;AACA,IAAIC,eAAJ;AACA,OAAO,SAASC,gBAAT,CAA0BC,MAA1B,EAAkC;AACrCJ,EAAAA,aAAa,GAAGK,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAhB;AACAN,EAAAA,aAAa,CAACO,SAAd,GAA0B,uBAA1B;AACAN,EAAAA,cAAc,GAAGI,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAjB;AACAL,EAAAA,cAAc,CAACM,SAAf,GAA2B,cAA3B;AACAN,EAAAA,cAAc,CAACO,YAAf,CAA4B,MAA5B,EAAoC,OAApC;AACAP,EAAAA,cAAc,CAACO,YAAf,CAA4B,aAA5B,EAA2C,MAA3C;AACAR,EAAAA,aAAa,CAACS,WAAd,CAA0BR,cAA1B;AACAC,EAAAA,eAAe,GAAGG,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAlB;AACAJ,EAAAA,eAAe,CAACK,SAAhB,GAA4B,eAA5B;AACAL,EAAAA,eAAe,CAACM,YAAhB,CAA6B,MAA7B,EAAqC,QAArC;AACAN,EAAAA,eAAe,CAACM,YAAhB,CAA6B,aAA7B,EAA4C,MAA5C;AACAR,EAAAA,aAAa,CAACS,WAAd,CAA0BP,eAA1B;AACAE,EAAAA,MAAM,CAACK,WAAP,CAAmBT,aAAnB;AACH;AACD;;;;AAGA,OAAO,SAASU,KAAT,CAAeC,GAAf,EAAoBC,aAApB,EAAmC;AACtCC,EAAAA,aAAa,CAACZ,cAAD,EAAiBU,GAAjB,EAAsBC,aAAtB,CAAb;AACH;AACD;;;;AAGA,OAAO,SAASE,MAAT,CAAgBH,GAAhB,EAAqBC,aAArB,EAAoC;AACvC,MAAId,WAAJ,EAAiB;AACbY,IAAAA,KAAK,CAACC,GAAD,EAAMC,aAAN,CAAL,CADa,CACc;AAC9B,GAFD,MAGK;AACDC,IAAAA,aAAa,CAACX,eAAD,EAAkBS,GAAlB,EAAuBC,aAAvB,CAAb;AACH;AACJ;AACD,IAAIG,aAAa,GAAG,CAApB;AACA,IAAIC,QAAQ,GAAGC,SAAf;;AACA,SAASJ,aAAT,CAAuBK,MAAvB,EAA+BP,GAA/B,EAAoCC,aAApC,EAAmD;AAC/C,MAAI,CAACZ,aAAL,EAAoB;AAChB;AACH,GAH8C,CAI/C;AACA;AACA;AACA;;;AACA,MAAI,CAACY,aAAL,EAAoB;AAChB,QAAII,QAAQ,KAAKL,GAAjB,EAAsB;AAClBI,MAAAA,aAAa;AAChB,KAFD,MAGK;AACDC,MAAAA,QAAQ,GAAGL,GAAX;AACAI,MAAAA,aAAa,GAAG,CAAhB;AACH;;AACD,YAAQA,aAAR;AACI,WAAK,CAAL;AAAQ;;AACR,WAAK,CAAL;AACIJ,QAAAA,GAAG,GAAGd,GAAG,CAACsB,QAAJ,CAAa,UAAb,EAAyB,sBAAzB,EAAiDR,GAAjD,CAAN;AACA;;AACJ;AACIA,QAAAA,GAAG,GAAGd,GAAG,CAACsB,QAAJ,CAAa,gBAAb,EAA+B,0BAA/B,EAA2DR,GAA3D,EAAgEI,aAAhE,CAAN;AACA;AAPR;AASH;;AACDhB,EAAAA,GAAG,CAACqB,SAAJ,CAAcF,MAAd;AACAA,EAAAA,MAAM,CAACG,WAAP,GAAqBV,GAArB,CA3B+C,CA4B/C;;AACAO,EAAAA,MAAM,CAACI,KAAP,CAAaC,UAAb,GAA0B,QAA1B;AACAL,EAAAA,MAAM,CAACI,KAAP,CAAaC,UAAb,GAA0B,SAA1B;AACH","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './aria.css';\r\nimport * as nls from '../../../../nls.js';\r\nimport { isMacintosh } from '../../../common/platform.js';\r\nimport * as dom from '../../dom.js';\r\nvar ariaContainer;\r\nvar alertContainer;\r\nvar statusContainer;\r\nexport function setARIAContainer(parent) {\r\n    ariaContainer = document.createElement('div');\r\n    ariaContainer.className = 'monaco-aria-container';\r\n    alertContainer = document.createElement('div');\r\n    alertContainer.className = 'monaco-alert';\r\n    alertContainer.setAttribute('role', 'alert');\r\n    alertContainer.setAttribute('aria-atomic', 'true');\r\n    ariaContainer.appendChild(alertContainer);\r\n    statusContainer = document.createElement('div');\r\n    statusContainer.className = 'monaco-status';\r\n    statusContainer.setAttribute('role', 'status');\r\n    statusContainer.setAttribute('aria-atomic', 'true');\r\n    ariaContainer.appendChild(statusContainer);\r\n    parent.appendChild(ariaContainer);\r\n}\r\n/**\r\n * Given the provided message, will make sure that it is read as alert to screen readers.\r\n */\r\nexport function alert(msg, disableRepeat) {\r\n    insertMessage(alertContainer, msg, disableRepeat);\r\n}\r\n/**\r\n * Given the provided message, will make sure that it is read as status to screen readers.\r\n */\r\nexport function status(msg, disableRepeat) {\r\n    if (isMacintosh) {\r\n        alert(msg, disableRepeat); // VoiceOver does not seem to support status role\r\n    }\r\n    else {\r\n        insertMessage(statusContainer, msg, disableRepeat);\r\n    }\r\n}\r\nvar repeatedTimes = 0;\r\nvar prevText = undefined;\r\nfunction insertMessage(target, msg, disableRepeat) {\r\n    if (!ariaContainer) {\r\n        return;\r\n    }\r\n    // If the same message should be inserted that is already present, a screen reader would\r\n    // not announce this message because it matches the previous one. As a workaround, we\r\n    // alter the message with the number of occurences unless this is explicitly disabled\r\n    // via the disableRepeat flag.\r\n    if (!disableRepeat) {\r\n        if (prevText === msg) {\r\n            repeatedTimes++;\r\n        }\r\n        else {\r\n            prevText = msg;\r\n            repeatedTimes = 0;\r\n        }\r\n        switch (repeatedTimes) {\r\n            case 0: break;\r\n            case 1:\r\n                msg = nls.localize('repeated', \"{0} (occurred again)\", msg);\r\n                break;\r\n            default:\r\n                msg = nls.localize('repeatedNtimes', \"{0} (occurred {1} times)\", msg, repeatedTimes);\r\n                break;\r\n        }\r\n    }\r\n    dom.clearNode(target);\r\n    target.textContent = msg;\r\n    // See https://www.paciellogroup.com/blog/2012/06/html5-accessibility-chops-aria-rolealert-browser-support/\r\n    target.style.visibility = 'hidden';\r\n    target.style.visibility = 'visible';\r\n}\r\n"]},"metadata":{},"sourceType":"module"}